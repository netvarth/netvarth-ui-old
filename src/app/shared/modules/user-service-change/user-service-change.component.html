<section class="">
  <div class="card title-gb">
    <h5 class="mgn-up-10 disp-flex">
      <span class="fa fa-arrow-left pointer-cursor" (click)="redirecToReports()"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <div> Assign a {{provider_label}} for your {{customer_label}}
        <div class="form-level-settings">Please click any {{provider_label}} to assign</div>
      </div>
      <a (click)="showFilterSidebar()" class="btn mb-2 action-button mgn-lt-auto">
        <i class="icon-filter-one">
        </i>
        Filter
      </a>
    </h5>
  </div>
</section>
<section class="">
  <div class="card title-gb">
    <h6 class="mgn-up-10 disp-flex" *ngIf="filterApplied_count > 1">
      <span></span>{{filterApplied_count}}&nbsp;&nbsp;{{provider_label}}s Found
    </h6>
    <h6 class="mgn-up-10 disp-flex" *ngIf="filterApplied_count == 1">
      <span></span>{{filterApplied_count}}&nbsp;&nbsp;{{provider_label}} Found
    </h6>
  </div>
</section>
<aside class="app-user-service-change-component filterSidebar filter-sidebar user-filter" *ngIf="filter_sidebar">
  <section class="sidebar filter-container" id="filterContainer" style="overflow:auto;" 
    [ngStyle]="{'height.vh': 90, 'margin-top.px': filterapplied === true ? 95 : 44}">
    <div class="filterClosebtn filter-head">
      <!-- <span *ngIf="filterapplied === true" class="clearFilter reset-filter" (click)="clearFilter()" [matTooltip]="'Reset filter'">
        Reset
      </span> -->
      <span class="filter-head-title">Filters</span>
      <i class="icon-filter-one-op ng-star-inserted closeFilter" (click)="hideFilterSidebar()"
        [matTooltip]="'Close filter sidebar'"></i>
    </div>
    <ul class="sidebar-menu accordion" id="accordion1">
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseName1" aria-expanded="false">
              <div>
                <div style="display: inline-block !important;">
                  <i class="fa fa-user-md"></i>
                </div>
                Name
              </div>
              <i class="fa fa-angle-down"></i>
            </button>
          </h2>
        </div>
        <div id="collapseName1" class="collapse in" data-parent="#accordion1">
          <div class="card-body">
            <div class="filterTextinput filter-text-input">
              <li class="filterli filter-li">
                <input type="text" id="firstName" [(ngModel)]="filter.firstName" #firstName
                  (keyup)="doSearch()" maxlength="20" class="filterTextbox filter-textbox" placeholder="Enter First Name">
              </li>
            </div>
            <div class="filterTextinput filter-text-input">
              <li class="filterli filter-li">
                <input type="text" id="lastName" [(ngModel)]="filter.lastName" #lastName
                (keyup)="doSearch()" maxlength="10" class="filterTextbox filter-textbox" placeholder="Enter Last Name">
              </li>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapsePin1" aria-expanded="false">
              <div>
                <div style="display: inline-block !important;">
                  <i class="fa fa-location-arrow"></i>
                </div>
                Pincode
              </div>
              <i class="fa fa-angle-down"></i>
            </button>
          </h2>
        </div>
        <div id="collapsePin1" class="collapse in" data-parent="#accordion1">
          <div class="card-body">
            <div class="filterTextinput filter-text-input">
              <li class="filterli filter-li">
                <input type="text" id="pincode" [(ngModel)]="filter.pincode" #pincode 
                (keyup)="doSearch()" maxlength="10" class="filterTextbox filter-textbox" placeholder="Enter Pincode">
              </li>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseLocation1" aria-expanded="false">
              <div>
                <div style="display: inline-block !important;">
                  <i class="fa fa-map-marker"></i>
                </div>
                Location
              </div>
              <i class="fa fa-angle-down"></i>
            </button>
          </h2>
        </div>
        <div id="collapseLocation1" class="collapse in" data-parent="#accordion1">
          <div class="card-body">
            <div class="filterTextinput filter-text-input">
              <li class="filterli filter-li">
                <input type="text" id="city" [(ngModel)]="filter.city" #city
                (keyup)="doSearch()" maxlength="20" class="filterTextbox filter-textbox" placeholder="Enter City">
                  
              </li>
              </div>
              <div class="filterTextinput filter-text-input">
              <li class="filterli filter-li">
                <input type="text" id="state" [(ngModel)]="filter.state" #state
                (keyup)="doSearch()" maxlength="20" class="filterTextbox filter-textbox" placeholder="Enter State">
                  
              </li>
            </div>
          </div>
        </div>
      </div>
      <div class="card" *ngIf="accountSettings.availability">
        <div class="card-header">
          <h2 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseAvailable1" aria-expanded="false">
              <div>
                <div style="display: inline-block !important;">
                  <i class="fa fa-clock-o"></i>
                </div>
                Availability
              </div>
              <i class="fa fa-angle-down"></i>
            </button>
          </h2>
        </div>
        <div id="collapseAvailable1" class="collapse in" data-parent="#accordion1">
          <div class="card-body">
            <div class="filterTextinput filter-checkbox-input">
              <li class="filterli filterCheckbox filterCheckboxborder filtercheckboxSize">
              </li>
              <li class="filterli filterCheckbox  filterCheckboxborder filtercheckboxSize">
                <mat-checkbox class="filter-checkbox" [checked]="allSelected"
                  (change)="setFilterDataCheckbox('available', 'ALL')">
                  All</mat-checkbox>
              </li>
              <li class="filterli filterCheckbox  filterCheckboxborder filtercheckboxSize">
                <mat-checkbox class="filter-checkbox" [checked]="availabileSelected"
                  (change)="setFilterDataCheckbox('available', 'true')">
                  Available</mat-checkbox>
              </li>
              <li class="filterli filterCheckbox  filterCheckboxborder filtercheckboxSize">
                <mat-checkbox class="filter-checkbox" [checked]="notAvailabileSelected"
                  (change)="setFilterDataCheckbox('available', 'false')">
                  Not Available</mat-checkbox>
              </li>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapsePhone1" aria-expanded="false">
              <div>
                <div style="display: inline-block !important;">
                  <i class="fa fa-phone"></i>
                </div>
                Phone Number
              </div>
              <i class="fa fa-angle-down"></i>
            </button>
          </h2>
        </div>
        <div id="collapsePhone1" class="collapse in" data-parent="#accordion1">
          <div class="card-body">
            <div class="filterTextinput filter-text-input">
              <li class="filterli filter-li">
                <input type="text" id="primaryMobileNo" [(ngModel)]="filter.primaryMobileNo" #primaryMobileNo
                (keyup)="doSearch()" maxlength="10" class="filterTextbox filter-textbox"
                  placeholder="Enter Phone Number">
              </li>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseLanguages1" aria-expanded="false">
              <div>
                <div style="display: inline-block !important;">
                  <i class="fa fa-language"></i>
                </div>
                Languages
              </div>
              <i class="fa fa-angle-down"></i>
            </button>
          </h2>
        </div>
        <div id="collapseLanguages1" class="collapse" data-parent="#accordion1">
          <div class="card-body">
            <div class="filterTextinput filter-checkbox-input">
              <!-- <label class="filterHeaders">Languages</label> -->
              <li class="filterli">
                <mat-checkbox *ngFor="let language of languages_arr" class="filter-checkbox"
                  [checked]="selectedLanguages.indexOf(language.name) !== -1"
                  (change)="setFilterDataCheckbox('languages', language.name)">
                  {{language.displayName}}</mat-checkbox>
              </li>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseSpecializations1" aria-expanded="false">
              <div>
                <div style="display: inline-block !important;">
                  <i class="fas fa-user-tag"></i>
                </div>
                Specializations
              </div>
              <i class="fa fa-angle-down"></i>
            </button>
          </h2>
        </div>
        <div id="collapseSpecializations1" class="collapse" data-parent="#accordion1">
          <div class="card-body">
            <div class="filter-checkbox-input">
              <!-- <label class="filterHeaders">Specializations</label> -->
              <li class="filterli">
                <mat-checkbox *ngFor="let special of specialization_arr" class="filter-checkbox"
                  [checked]="selectedSpecialization.indexOf(special.name) !== -1"
                  (change)="setFilterDataCheckbox('specializations', special.name)">
                  {{special.displayName}}</mat-checkbox>
              </li>
            </div>
          </div>
        </div>
      </div>
    </ul>
  </section>
  <div class="filter-footer" *ngIf="filterapplied === true">
    <button class="btn reset-btn" (click)="clearFilter()">
      <i class="fa fa-undo"></i>Reset
    </button>
    <button class="btn apply-btn" (click)="getProviders()">
      <i class="fa fa-check"></i>Apply
    </button>
  </div>
</aside>
<section class="customersList">
  <div class="row p-3">
    <div class="col-lg-12">
      <div class="card card-custom card-stretch gutter-b no-padding">
        <div class="card-body pt-0 pb-3 no-padding">
          <div class="tab-content">
            <div class="table-responsive1">
              <table class="table table-head-custom table-head-bg table-borderless table-vertical-center">
                <thead>
                  <tr class="text-left text-uppercase">
                    <th class="display-min-none" style="min-width: 250px;">{{provider_label}} name</th>
                    <th class="display-min-none" style="min-width: 125px;">Phone number</th>
                    <th class="display-min-none" style="width: 30%;">Specializations</th>
                    <th class="display-min-none">Languages</th>
                    <th class="display-min-none">Tokens count</th>
                  </tr>
                </thead>
                <tbody *ngIf="!loading">
                  <tr class="row_data border-bottom pointer-cursor"
                    *ngFor="let service of service_dataSource.data; let i = index;" (click)="selectedRow(i,service)">
                    <td class="waitlist-box">
                      <span class="mgn-up-5 d-lg-none pull-right"><a class="assign-btn"
                          (click)="selectedRow(i,service)">Assign</a>
                      </span>
                      <div class="disp-flex">
                        <div class="user-img img-min-width">
                          <img [src]="getUserImg(service)">
                        </div>
                        <div class="mgn-lt-10">
                          <div class="username">
                            {{(service.businessName) ? service.businessName
                              : service.firstName + ' ' +
                              service.lastName}}&nbsp;
                            <div class='status-circle' [ngClass]="service.isAvailable ? 'green' : 'grey'"
                              *ngIf="accountSettings.availability && service.userType === 'PROVIDER' ">
                            </div>
                          </div>
                          <div class="disp-flex mgn-up-5" *ngIf="service.city && service.state"><i
                              class="fa fa-map-marker mgn-rt-5"
                              aria-hidden="true"></i>{{service.city}},&nbsp;{{service.state}}</div>
                          <div class="d-lg-none">
                            <div class="mgn-up-5" *ngIf="service.mobileNo || service.whatsAppNum || service.telegramNum || service.email">
                              <a class="user-contact-details" (click)="stopprop($event);viewContactDetails(service)">View</a>
                              <!-- <span class="b2">+91 {{service.mobileNo}} </span> -->
                            </div>
                            <div class="mgn-up-5" *ngIf="service.specialization">
                              <span class="b2">{{service.specialization}} </span>
                            </div>
                            <div class="mgn-up-5" *ngIf="service.languages">
                              <span class="b2">{{service.languages}} </span>
                            </div>
                            <div class="mgn-up-5" *ngIf="service.userType === 'PROVIDER'"> <span class="b1">Tokens
                                Count:
                              </span><span class="b2">{{service.currentWlCount}} </span></div>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="display-min-none">
                      <span *ngIf="service.mobileNo || service.whatsAppNum || service.telegramNum || service.email">
                        <a class="user-contact-details" (click)="stopprop($event); viewContactDetails(service)">View</a>
                        <!-- +91 {{service.mobileNo}} -->
                      </span>
                    </td>
                    <td class="display-min-none">
                      {{service.specialization}}
                    </td>
                    <td class="display-min-none">
                      {{service.languages}}
                    </td>
                    <td class="display-min-none">
                      <span *ngIf="service.userType === 'PROVIDER'">
                        {{service.currentWlCount}}
                      </span>
                    </td>
                  </tr>
                  <tr *ngIf="service_dataSource.data.length == 0 && !loading">
                    No {{provider_label}} found
                  </tr>
                </tbody>
                <app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
