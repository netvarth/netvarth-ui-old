<app-header class="signup-header" [headerTitle]="" [includedfrom]="'phome'" id="pro_home"></app-header>
<section class="providersignup-component signup">
    <div class="container1">
        <div *ngIf="active_step==0">
            <div class="signup-content">
                <div class="signup-form">
                    <h2 class="form-title">Service Provider Sign up</h2>
                    <form [formGroup]="signupForm" class="register-form" novalidate (keyup)="resetApiErrors()"
                        id="register-form">
                        <div class="form-group">
                            <label for="name"><i class="zmdi zmdi-account material-icons-name"></i></label>
                            <div class="input-group-prepend">
                                <span class="input-group-text mgn-m-up-10" id="lstCountryCode">
                                    <mat-select [(ngModel)]="selectedCountryCode" ngDefaultControl [ngModelOptions]="{standalone: true}">
                                        <mat-option *ngFor="let codes of countryCodes" [value]="codes.value">
                                            {{codes.displayName}}</mat-option>
                                    </mat-select>

                                </span>

                                <input class="mgn-lt-15" type="text" formControlName="phonenumber" name="phone"
                                    id="phone" placeholder="Mobile number" maxlength=10 />
                            </div>
                            <app-field-error-display [displayError]="fed_service.isFieldValid(signupForm,'phonenumber')"
                                [errorMsgs]="fed_service.getErrorMessage(signupForm,'phonenumber',
                                {
                                  'required' : 'Mobile number is required',
                                  'minlength' : 'Enter a 10 digit mobile number',
                                  'maxlength' : 'Enter a 10 digit mobile number',
                                  'pattern' : 'Only numbers are allowed'
                                })">
                            </app-field-error-display>
                        </div>
                        <div class="form-group">
                            <label for="Firstname"><i class="zmdi zmdi-email"></i></label>
                            <input type="text" formControlName="first_name" name="Firstname" id="Firstname"
                                placeholder="First name*" />
                            <app-field-error-display [displayError]="fed_service.isFieldValid(signupForm,'first_name')"
                                [errorMsgs]="fed_service.getErrorMessage(signupForm,'first_name',
{
  'required' : 'First name is required',
  'minlength' : 'First name is too short',
  'pattern' : 'Only alphabets are allowed'
})">
                            </app-field-error-display>
                        </div>
                        <div class="form-group">
                            <label for="Lastname"><i class="zmdi-account material-icons-name"></i></label>
                            <input type="text" formControlName="last_name" name="Lastname" id="Lastname"
                                placeholder="Last name*" />
                            <app-field-error-display [displayError]="fed_service.isFieldValid(signupForm,'last_name')"
                                [errorMsgs]="fed_service.getErrorMessage(signupForm,'last_name',
                                {
                                  'required' : 'Last name is required',
                                  'pattern' : 'Only alphabets are allowed'
                                })">
                            </app-field-error-display>
                        </div>
                        <div class="form-group agree">
                            <mat-checkbox class="terms-margin" formControlName="terms_condition" [value]=true>
                            </mat-checkbox> <span class="mgn-lt-5 terms-link">{{i_agree_cap}}
                                <a rel="noopener" target="_blank" (click)="gotoTerms()">{{terms_cond_cap}}</a></span>
                        </div>
                        <div class="form-group form-button">
                            <input type="submit" name="signup" id="signup" class="form-submit-next" value="Next"
                                [ngClass]="{'disableCss': (signupForm.get('terms_condition').value == '' || signupForm.get('terms_condition').value == false || !signupForm.valid)}"
                                [disabled]="signupForm.get('terms_condition').value == '' || signupForm.get('terms_condition').value == false || !signupForm.valid"
                                (click)="registerClicked()">
                        </div>
                    </form>
                </div>
                <div class="signup-image">
                    <figure><img src="./assets/images/home/signup-image.jpg"></figure>
                </div>
            </div>
        </div>
    </div>
    <!-- step1 domain -->
    <div *ngIf="active_step==1">
        <section class="signup">
            <div class="container1">
                <div class="signup-content">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <h2 class="form-title">Select your Domain </h2>
                        <div class="col-md-7 col-sm-12 col-xs-12 no-padding-small">
                            <div class="col-md-12 col-xs-12 col-sm-12 control domains pointer-cursor"
                                (click)="selectedDomain = domain" *ngFor="let domain of business_domains; let i = index"
                                [class.div-grn-outline]="domain===selectedDomain">
                                <div class="pull-left">
                                    <div class="subdom_img {{domainSettings[domain.domain].iconClass}}"
                                        *ngIf="domainSettings[domain.domain] "></div>
                                </div>
                                <div class="pull-left mgn-lt-10">
                                    <h6>{{domain.displayName}}</h6>
                                </div>
                            </div>
                            <div class="col-md-12 col-xs-12 col-sm-12 control">
                                <div class="form-group form-button">
                                    <input type="submit" name="signup" id="signup" class="form-submitback" value="Back"
                                        (click)="showregistersection()">&nbsp;
                                    <input type="submit" name="signup" id="signup" class="form-submit" value="Next"
                                        (click)="handleDomainSelection()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5 col-xs-12 col-sm-12">
                            <div class="">
                                <figure><img *ngIf="images[selectedDomain.domain]" [src]="images[selectedDomain.domain]"
                                        [alt]="selectedDomain.displayName" class="img-fluid mt-5"></figure>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </div>
    <div *ngIf="active_step==4">
        <section class="signup">
            <div class="container1">
                <div class="signup-content">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <h2 class="form-title">Select your area of specialization </h2>
                        <div class="col-md-7 col-sm-12 col-xs-12 no-padding-small">
                            <div class="acc-subdoms subdomains pointer-cursor" (click)="selectedSubDomain = subdomain"
                                *ngFor="let subdomain of selectedDomain.subDomains"
                                [class.div-grn-outline]="subdomain==selectedSubDomain">
                                <h6>{{subdomain.displayName}}</h6>
                            </div>
                            <div class="col-md-12 col-xs-12 col-sm-12 control">
                                <div class="form-group form-button">
                                    <input type="submit" name="signup" id="signup" class="form-submitback" value="Back"
                                        (click)="showDomains()">&nbsp;
                                    <input type="submit" name="signup" id="signup" class="form-submit" value="Next"
                                        (click)="handleSubDomainSelection()">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5 col-xs-12 col-sm-12">
                            <div class="">
                                <figure><img *ngIf="images[selectedDomain.domain]" [src]="images[selectedDomain.domain]"
                                        [alt]="selectedDomain.displayName" class="img-fluid mt-5"></figure>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </div>
    <!-- step4 otp section -->
    <div *ngIf="active_step==3">
        <section class="signup">
            <div class="container1" style="width: 100% !important;">
                <div class="signup-content">
                    <div class="signup-form">
                        <form method="POST" [formGroup]="spForm" class="register-form" id="register-form">
                            <div class="otp-form" *ngIf="hideOtpSection">
                                <h3 class="otp-form-title form-title">Waiting for OTP</h3>
                                <h6 class="otp-form-message">
                                    Please enter the verification code
                                </h6>
                                <div class="otpsection ynw-common-form-nm">
                                    <div *ngIf="showOTPContainer">
                                        <div class="form-group">
                                            <input class="number-ip-sm no-padding" matInput placeholder="Enter OTP"
                                                [(ngModel)]="otp" [ngModelOptions]="{standalone: true}" ngDefaultControl 
                                                autocomplete="off" (keypress)="removSpecChar($event)" maxlength="5">
                                        </div>
                                        <mat-dialog-actions>
                                            <div class="resendouter" *ngIf="resetCounterVal==0">
                                                <ul class="infolst">
                                                    <span class="black">Having a problem with your phone? &nbsp;<span
                                                            (click)="setResendViaEmail()"
                                                            mat-button>{{resend_otp_email}}</span></span>
                                                </ul>
                                            </div>
                                            <div class="counter-outer" *ngIf="resetCounterVal>0">
                                                {{resend_otp_opt_active_cap}} <span
                                                    class="counter">{{resetCounterVal}}</span>
                                                {{seconds_cap}}
                                            </div>
                                        </mat-dialog-actions>

                                    </div>
                                </div>
                                <div>
                                    <button (click)="onOtpSubmit()" mat-button
                                        class="confirm-otp-button cs-btn bt1">Confirm OTP</button>
                                </div>
                            </div>
                            <ng-container *ngIf="showOTPEmailContainer">
                                <div class="ynw-common-form-nm otpemailsection">
                                    <div class="form-group">
                                        <input type="email" matInput [(ngModel)]="email"
                                            [ngModelOptions]="{standalone: true}" ngDefaultControl  placeholder="Enter your email id"
                                            autocomplete="off" />
                                    </div>
                                    <mat-dialog-actions>
                                        <div class="col-md-12" style="margin-top: 15px;display: inline-flex;">
                                            <button type="button" class="cs-btn bt2"
                                                (click)="doCancelEmailOTP()">{{cancel_btn_cap}}</button>
                                            &nbsp;&nbsp;&nbsp;
                                            <button (click)="resendViaEmail()" mat-button
                                                class="cs-btn bt1">{{resend_btn_cap}}</button>
                                        </div>
                                    </mat-dialog-actions>
                                </div>

                            </ng-container>
                            <div class="password-form" *ngIf="isValidOtp">
                                <h3 class="password-form-title form-title">Create new password</h3>
                                <h6 class="password-form-message">Please set your password to finish sign up process.
                                </h6>
                                <div class="password-form-box">
                                    <div class="padding-top">
                                        <div class="form-group">
                                            <label for="password">Password</label>
                                            <input type="password" formControlName="new_password" name="name" id="name"
                                                class="password" placeholder="Enter password" />
                                            <app-field-error-display
                                                [displayError]="fed_service.isFieldValid(spForm,'new_password')"
                                                [errorMsgs]="fed_service.getErrorMessage(spForm,'new_password',
                                            {'required' : 'Password is required',
                                            'pattern' : 'Use minimum 8 characters with atleast one uppercase, lowercase and number'})">
                                            </app-field-error-display>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="re-enter">Confirm Password</label>
                                        <input type="password" formControlName="confirm_password" name="passsword"
                                            id="password" class="password" placeholder="Re-enter password*"
                                            (keyup)="keyPressed()" />
                                        <app-field-error-display
                                            [displayError]="fed_service.isFieldValid(spForm,'confirm_password')"
                                            [errorMsgs]="fed_service.getErrorMessage(spForm,'confirm_password',
                                        {'required' : 'Re-enter Password'})">
                                        </app-field-error-display>
                                        <app-field-error-display
                                            [displayError]="spForm.get('confirm_password').valid && !isValidConfirm_pw"
                                            errorMsg="Entered passwords does not match">
                                        </app-field-error-display>
                                    </div>
                                    <div class="form-group form-button">
                                        <input type="submit" [disabled]="!spForm.valid || joinClicked" name="signup"
                                            id="signup" class="create-new-password-button form-submit"
                                            value="Join Jaldee" (click)="onPasswordSubmit()">
                                    </div>
                                </div>
                            </div>
                        </form>

                    </div>
                    <div class="signup-image">
                        <figure><img src="./assets/images/home/signup/password.png"></figure>
                    </div>

                </div>
            </div>
        </section>
    </div>
    <!-- step4 -->
    <div *ngIf="active_step==2">
        <section class="signup">
            <div class="container1 ynw-common-form-nm hearus-p">
                <div class="signup-content">
                    <div class="signup-form">
                        <h1 class="form-title"><strong>How did you hear us?</strong></h1>
                        <div>
                            <ul class="sale-rep">
                                <li [class.active]="hearus=='SalesReps'" (click)="saleschannelselection('SalesReps')">
                                    <img src="./assets/images/home/signup/sales.png" width="25" height="25" />
                                    <h6>Sales Reps</h6>
                                    <div class="sc-frm" *ngIf="hearus=='SalesReps'">
                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                            <div class="form-group mgn-up-10">
                                                <div class="col-md-9 col-xs-10 col-sm-10">
                                                    <mat-form-field>
                                                        <input matInput placeholder="Sales Partner Id/ Phone"
                                                            type="text" class="form-control"
                                                            (keypress)="handlekeyup($event)" [(ngModel)]="scCode_Ph" ngDefaultControl 
                                                            [ngModelOptions]="{standalone: true}">
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-3 col-xs-2 col-sm-2">
                                                    <i class="fa fa-search pointer-cursor"
                                                        (click)="findSC_ByScCode(scCode_Ph)"></i>
                                                </div>
                                            </div>
                                            <div class="salesChannelDetails" *ngIf="scfound">
                                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-up-10">
                                                    SC Code: {{scInfo.scId}}
                                                </div>
                                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-up-10">
                                                    SC Name: {{scInfo.scName}}
                                                </div>
                                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-up-10">
                                                    SC Phone No: {{scInfo.primaryPhoneNo}}
                                                </div>
                                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-up-10 mgn-bt-10">
                                                    Name : {{scInfo.contactFirstName}} {{scInfo.contactLastName}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li [class.active]="hearus=='Facebook'" (click)="saleschannelselection('Facebook')">
                                    <img src="./assets/images/home/signup/facebook-01.png" width="25" height="25" />
                                    <h6>Facebook</h6>
                                </li>
                                <li [class.active]="hearus=='Friend'" (click)="saleschannelselection('Friend')">
                                    <img src="./assets/images/home/signup/Friend-01.png" width="25" height="25" />
                                    <h6>Friend</h6>
                                </li>
                                <li [class.active]="hearus=='GoogleSearch'"
                                    (click)="saleschannelselection('GoogleSearch')">
                                    <img src="./assets/images/home/signup/Google.png" width="25" height="25" />
                                    <h6>Google</h6>
                                </li>
                                <li [class.active]="hearus=='Twitter'" (click)="saleschannelselection('Twitter')">
                                    <img src="./assets/images/home/signup/Twitter.png" width="25" height="25" />
                                    <h6>Twitter</h6>
                                </li>
                                <li [class.active]="hearus=='Other'" (click)="saleschannelselection('Other')">
                                    <img src="./assets/images/home/signup/Other-01.png" width="25" height="25" />
                                    <h6>Other</h6>
                                </li>
                            </ul>
                        </div>
                        <div class="form-group form-button">
                            <input type="button" name="backToSubDomain" id="backToSubDomain" class="form-submitback"
                                value="Back" (click)="backToSubdomains()">&nbsp;
                            <input type="submit" name="signup" id="signup" class="form-submit" value="Next"
                                (click)="submitHearus()">
                        </div>
                    </div>
                    <div class="signup-image">
                        <figure><img src="./assets/images/home/signup/how.png" alt="sin up image" width="1800"
                                height="1792">
                        </figure>
                    </div>
                </div>
            </div>
        </section>
        <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
    </div>
    <div class="clearfix"></div>
</section>