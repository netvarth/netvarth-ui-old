<!-- Card -->
<div class="card booking-card pointer-cursor service"
    *ngIf="(service && service.serviceAvailability) || item.type=='donation'"
    (click)="cardActionPerformed(item.type, null, service, loc, null, $event)">
    <!-- Card content -->
    <div class="card-body">
        <!-- Title -->
        <!-- <div class="card-head"> -->
        <div style="height:100px;">
            <div class="text-center service-image"
                *ngIf="service.serviceType && service.serviceType == 'virtualService'">
                <i class="fa phon-icon"
                    *ngIf="service.virtualCallingModes && service.virtualCallingModes.length > 0 && service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                <i class="fa meet-icon"
                    *ngIf="service.virtualCallingModes && service.virtualCallingModes.length > 0 && service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                <i class="fa zoom-icon"
                    *ngIf="service.virtualCallingModes && service.virtualCallingModes.length > 0 && service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                <i class="fa wtsapaud-icon"
                    *ngIf="service.virtualCallingModes && service.virtualCallingModes.length > 0 && service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType ==='audioService'"></i>
                <i class="fa wtsapvid-icon"
                    *ngIf="service.virtualCallingModes && service.virtualCallingModes.length > 0 && service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType ==='videoService'"></i>
                <i class="fa jaldeevideo-icon"
                    *ngIf="service.virtualCallingModes && service.virtualCallingModes.length > 0 && service.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
            </div>
            <div class="text-center service-image"
                *ngIf="service.serviceType && service.serviceType != 'virtualService' && service.serviceType == 'donationService'">
                <img class="card-img img-responsive" src="assets/images/donation.png" alt="Donation Image">
            </div>
            <div class="text-center service-image"
                *ngIf="service.serviceType && service.serviceType != 'virtualService' && service.serviceType == 'physicalService' && domain != 'religiousPriests'"
                style="width: 140px !important;">
                <img class="card-img img-responsive" src="assets/images/meeting_Artboard.png"
                    alt="Physical Service Image">
            </div>
            <div class="text-center service-image"
                *ngIf="service.serviceType && service.serviceType != 'virtualService' && service.serviceType == 'physicalService' && domain == 'religiousPriests'"
                style="width: 140px !important;">
                <img class="card-img img-responsive" src="assets/images/hindu-temple-clipart.jpg"
                    alt="Physical Service Image">
            </div>
        </div>
        <div class="service-details">
            <div class="module line-clamp m-0"
                [ngClass]="{'no-padding':service.serviceType && service.serviceType == 'virtualService'}">
                <h4 class="card-title font-weight-bold service-title">
                    <a>{{service.name | capitalizeFirst}}</a>
                </h4>
            </div>
            <!-- </div>
        <div class="card-content"> -->
            <!-- <h6 class="service-type" *ngIf="item.type!='donation'">{{getServiceType()}}</h6> -->
            <!-- <h6 class="service-type" *ngIf="item.type!='donation'">&nbsp;</h6>
            <h6 class="service-type" *ngIf="item.type=='donation'">&nbsp;</h6>  -->
            <p class="card-text donationAmount" *ngIf="item.type=='donation'">
                <span class="rupee-font bold"><i class="fa fa-inr"></i> {{service.minDonationAmount}}</span>
                To
                <span class="rupee-font bold"><i class="fa fa-inr"></i> {{service.maxDonationAmount}}</span>
            </p>
            <p class="card-text peopleAhead font-normal" *ngIf="personsAheadText">{{personsAheadText}}</p>
            <p class="card-text emptySpace" *ngIf="item.type!='donation' && !personsAheadText"></p>
            <p class="card-text availability" *ngIf="timings">{{timingCaption}}
                <br /><b>{{timings}}</b>
            </p>
            <p class="card-text availability" *ngIf="!timings"></p>
            <!-- </div>
        <div class="card-footer"> -->
            <div class="service-buttons">
                <button type="button" class="btn btn-outline-warning bookingButton">{{buttonCaption}}</button>
                <button type="button" (click)="cardActionPerformed(item.type, 'view', service, loc, null, $event)"
                    class="btn pointer-cursor btn-warning moreDetails">. . .</button>
            </div>
            <!-- </div> -->
        </div>
    </div>
</div>
<div *ngIf="item.type=='catalog' || item.type=='item' || item.type=='pitem'">
    <div [id]="'item-' + service.itemId" class="card booking-card pointer-cursor order items"
        [class.disabled]="service['status'] && service['status']=='INACTIVE' || (!service.isStockAvailable && item.type=='item')"
        [class.height-185]="!service.itemImages" [class.height-301]="service.itemImages"
        *ngIf="item.type=='catalog' || item.type=='item' || item.type=='pitem'"
        (click)="cardActionPerformed(item.type, 'view', item, loc, null, $event)">
        <!-- <div class="ribbon ribbon-top-right" *ngIf="service.promotionLabel && item.type=='item'"><span>{{service.promotionLabel}}</span></div> -->
        <span class="ribbon-new" *ngIf="service.promotionLabel && item.type=='item'">{{service.promotionLabel}}</span>
        <div class="card-item-head" *ngIf="service.itemImages">
            <button class="fxmenu" mat-icon-button [matMenuTriggerFor]="appMenu" *ngIf="item.actions"
                (click)="stopProp($event)">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #appMenu="matMenu">
                <button mat-menu-item *ngFor="let action of item.actions"
                    (click)="cardActionPerformed(item.type, action.action, item, null, null, $event)">
                    <i class="{{action.iconClass}}"></i>{{action.displayName}}</button>
            </mat-menu>
            <img class="card-img img-responsive" [src]="getItemImg(service)" alt="Profile Pic" />
        </div>
        <!-- <div class="card-item-head" *ngIf="!service.itemImages"
            style="height: 0 !important; padding-top: 140px;"></div> -->
        <!-- <div class="outstock" *ngIf="!service.isStockAvailable && item.type=='item'">
            Out of stock
        </div> -->
        <div class="card-item-content">
            <button class="fxmenu1" mat-icon-button [matMenuTriggerFor]="appMenu"
                *ngIf="!service.itemImages && item.actions" (click)="stopProp($event)">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #appMenu="matMenu">
                <button mat-menu-item *ngFor="let action of item.actions"
                    (click)="cardActionPerformed(item.type, action.action, item, null, null, $event)">
                    <i class="{{action.iconClass}}"></i>{{action.displayName}}</button>
            </mat-menu>
            <h4 class="card-title font-weight-bold d-block">
                <a class="d-block name module1 twoline-break">{{service.displayName}}</a>
                <!-- <p class="module1 line-clamp1">{{service.shortDesc}}</p> -->
            </h4>
            <div style="height: 22px !important;">
                <div *ngIf="service.shortDesc" class="short-description module1 line-clamp1">{{service.shortDesc.trim()
                    | capitalizeFirst}}</div>
            </div>
            <div class="col-md-12 no-padding">
                <!-- <div class="col-md-5 no-padding">

            </div> -->
                <div class="col-md-12 d-flex mgn-up-10 no-padding">
                    <div class="amount" *ngIf="item.showpric">
                        <div *ngIf="service.showPromotionalPrice">
                            <!-- <div class="amount-label">RETAIL PRICE</div> -->
                            <div class="amount-value strikeMe">
                                <i class="fa fa-inr"></i> {{service.price | currency:'':''}}
                            </div>
                        </div>
                        <div>
                            <!-- <div class="amount-label">
                                {{ service.showPromotionalPrice ? 'OFFER PRICE' : 'RETAIL PRICE'}}
                            </div> -->
                            <div class="amount-value">
                                <i class="fa fa-inr"></i>
                                {{(service.showPromotionalPrice ? service.promotionalPrice : service.price) |
                                currency:'':''}}
                            </div>
                        </div>
                    </div>
                    <div class="amount" style="height: 44px !important;" *ngIf="!item.showpric">&nbsp;</div>
                    <div class="quantity">
                        <div class="outstock" *ngIf="!service.isStockAvailable && item.type=='item'">
                            Sold Out
                        </div>
                        <button (click)="cardActionPerformed(item.type, 'add', item, loc, null, $event)"
                            class="add-to-cart"
                            *ngIf="service.isStockAvailable && item.type=='item' && getItemQty(item)==0">
                            <i class="fa fa-shopping-bag"></i> Add
                        </button>
                        <div *ngIf="service.isStockAvailable && item.type=='item' && getItemQty(item)!=0">
                            <div [class.disableall]="item.maxqty === getItemQty(item)" class="btn-rt"
                                *ngIf="item.type=='item'">
                                <button (click)="cardActionPerformed(item.type, 'add', item, loc, null, $event)">
                                    <i class="fa fa-chevron-up"></i>
                                </button>
                            </div>
                            <div class="count-o" *ngIf="item.type=='item'">
                                {{getItemQty(item)}}
                            </div>
                            <div class="btn-lt" *ngIf="item.type=='item'">
                                <button (click)="cardActionPerformed(item.type, 'remove', item, loc, null, $event)">
                                    <i class="fa fa-chevron-down"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="item-expand-flex" *ngIf="service.itemImages">
                        <button type="button" class="btn pointer-cursor item-expand" 
                            (click)="openCard('item-'+service.itemId, $event)">
                            <i class='fa fa-chevron-up chevron'></i>
                        </button>
                    </div> -->
                </div>

            </div>
        </div>
    </div>
    <!-- <div class="outstock" *ngIf="!service.isStockAvailable && item.type=='item'">
        Out of stock</div> -->
</div>
<div class="card booking-card booking-card-user pointer-cursor user" *ngIf="item.type=='provider'"
    (click)="cardActionPerformed(item.type, null, null, null, user.id, $event)">
    <div class="card-item-head">
        <img class="card-img img-circle img-responsive" [src]="getPic(user)" alt="Profile Pic">
    </div>
    <div class="card-item-content" style="display: block !important;">
        <h4 class="user-name card-title font-weight-bold module line-clamp">
            <a *ngIf="user.businessName">{{user.businessName}}</a>
            <!-- <a *ngIf="!user.businessName && user.firstName && user.firstName!='undefined'">{{user.firstName |
                capitalizeFirst | limitTo: [14, '...']}}</a>
            <a *ngIf="!user.businessName && user.lastName && user.lastName!='undefined'">&nbsp;{{user.lastName |
                capitalizeFirst | limitTo: [14, '...']}}</a> -->
        </h4>
        <h6 class="qualification font-normal" *ngIf="user.qualifications && user.qualifications.length>0">
            {{user.qualifications[0] | limitTo: [20, '...']}}
        </h6>
        <h6 class="qualification" *ngIf="!user.qualifications || (user.qualifications && user.qualifications.length==0)"
            style="height:17px;"></h6>
        <div class="specialization-parent" *ngIf="user.businessUserName">
            <label class="specialization" *ngIf="user.businessUserName">{{user.businessUserName}}</label>
        </div>
        <label *ngIf="!user.businessUserName" style="padding: 2px 6px; margin:0 !important;">&nbsp;</label>
        <!-- <p class="availability user-available">
            <ng-container *ngIf="user.apptTime && user.apptTime.caption && user.apptTime.availableSchedule.availableDate === todayDate">
                {{user.apptTime.caption}}<br />{{user.apptTime.date}}
            </ng-container>
            <ng-container
                *ngIf="(!user.apptTime || (user.apptTime && (!user.apptTime.caption || user.apptTime.availableSchedule.availableDate !== todayDate))) && user.waitingTime && user.waitingTime.caption">
                {{user.waitingTime.caption}}<br />{{user.waitingTime.date}}
            </ng-container>
        </p> -->
        <p class="availability user-available">Hyderbad</p>
        <button type="button" class="btn btn-outline-warning">Book Now</button>
    </div>
</div>
<div class="card booking-card pointer-cursor order head" *ngIf="item.type==='item-head'"
    (click)="cardActionPerformed(item.type, 'add', null, null, null, $event)">
    <div class="card-item-head">
        <img class="card-img img-responsive" src="assets/images/add.svg" alt="Profile Pic">
    </div>
    <div class="card-item-content">
        <h4 class="card-title font-weight-bold text-center">
            <a class="pointer-cursor"><b>Add Item</b> </a>
        </h4>
    </div>
</div>
<div class="card booking-card order" *ngIf="item.type=='order-details-item'">
    <div class="card-item-head">
        <img class="card-img img-responsive" [src]="getItemImg(service)" alt="Profile Pic" />
    </div>
    <div class="card-item-content">
        <h4 class="card-title font-weight-bold d-block">
            <span class="d-block name module1 line-clamp1">{{service.name}}</span>
            <p class="module1 line-clamp1">Qty - {{service.quantity}}</p>
        </h4>
        <div class="col-md-12 no-padding">
            <div class="col-md-12 no-padding">
                <span class="price rupee-font pull-left">{{service.totalPrice | currency:'&#8377;'}}</span>
                <i *ngIf="service.consumerNote" [matTooltip]="'Notes'" class="icon-note pointer-cursor pull-right"
                    (click)="showConsumerNote(service)"></i>
            </div>
        </div>
    </div>
</div>


<div *ngIf="item.type=='checkin-dashboard' || item.type=='appt-dashboard'" (click)="gotoDetails()">
    <!-- <div class="waitlist-box" (click)="gotoDetails()"> -->

        <div class="box1">
            <div
                *ngIf="item.type=='checkin-dashboard' && (waitlist.waitlistingFor[0].firstName || waitlist.waitlistingFor[0].lastName)">
                {{waitlist.waitlistingFor[0].firstName}}
                {{waitlist.waitlistingFor[0].lastName}}
            </div>
            <div
                *ngIf="item.type=='appt-dashboard' && (waitlist.appmtFor[0].firstName || waitlist.appmtFor[0].lastName)">
                {{waitlist.appmtFor[0].firstName}}
                {{waitlist.appmtFor[0].lastName}}
            </div>
            <div
                *ngIf="item.type=='checkin-dashboard' && !waitlist.waitlistingFor[0].firstName && !waitlist.waitlistingFor[0].lastName">
                {{customer_label | capitalizeFirst}} id:&nbsp; {{waitlist.consumer.jaldeeId}}</div>
            <div
                *ngIf="item.type=='appt-dashboard' && !waitlist.appmtFor[0].firstName && !waitlist.appmtFor[0].lastName">
                {{customer_label | capitalizeFirst}} id:&nbsp; {{waitlist.providerConsumer.jaldeeId}}</div>
            <div *ngIf="item.type=='checkin-dashboard' && selQIds.length > 1">
                {{waitlist.queue.queueStartTime + ' - ' + waitlist.queue.queueEndTime}}
            </div>
            <div *ngIf="item.type=='appt-dashboard' && selQIds.length > 1">
                {{waitlist.schedule.apptSchedule.timeSlots[0]['sTime'] + ' - ' +
                waitlist.schedule.apptSchedule.timeSlots[0]['eTime']}}
            </div>
            <div *ngIf="time_type!=1 && item.type=='checkin-dashboard'">
                {{waitlist.date | date: newTimeDateFormat}}</div>
            <div *ngIf="time_type!=1 && item.type=='appt-dashboard'">
                {{waitlist.appmtDate | date: newTimeDateFormat}}</div>
        </div>

        <div class="box2">
            <div class="token" *ngIf="time_type!==3 && waitlist.token">
                {{waitlist.token}}</div>
        </div>


        <div class="box3">
            <div class="bold greenc" *ngIf="selectedUser && waitlist.provider">
                {{waitlist.provider.businessName}}
            </div>
            <div>
                <i class="fa meet-icon"
                    *ngIf="waitlist.service.serviceType === 'virtualService' && waitlist.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                <i class="fa zoom-icon"
                    *ngIf="waitlist.service.serviceType === 'virtualService' && waitlist.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                <i class="fa fa jvideo-icon jvideo-icon-s jvideo-icon-mgm5"
                    *ngIf="waitlist.service.serviceType === 'virtualService' && waitlist.service.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                <i class="fa phon-icon"
                    *ngIf="waitlist.service.serviceType === 'virtualService' && waitlist.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                <i class="fa wtsapaud-icon"
                    *ngIf="waitlist.service.serviceType === 'virtualService' && waitlist.service.virtualCallingModes[0].callingMode === 'WhatsApp' && waitlist.service.virtualServiceType === 'audioService'"></i>
                <i class="fa wtsapvid-icon"
                    *ngIf="waitlist.service.serviceType === 'virtualService' && waitlist.service.virtualCallingModes[0].callingMode === 'WhatsApp' && waitlist.service.virtualServiceType === 'videoService'"></i>
                {{waitlist.service.name}}
            </div>
            <div>Location</div>
            <div>Languages</div>
        </div>


        <div class="box4">
            <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-lt-5">
                <span class="dashboardrescheduled-icon mgn-rt-10" *ngIf="waitlist.isRescheduled">
                </span>
                <span class="online-icon mgn-rt-10"
                    *ngIf="(item.type=='checkin-dashboard' && waitlist.waitlistMode == 'ONLINE_CHECKIN') || (item.type=='appt-dashboard' && waitlist.appointmentMode == 'ONLINE_APPOINTMENT')">
                </span>
                <span class="phonein-icon mgn-rt-10"
                    *ngIf="(item.type=='checkin-dashboard' && waitlist.waitlistMode == 'PHONE_CHECKIN') || (item.type=='appt-dashboard' && waitlist.appointmentMode == 'PHONE_IN_APPOINTMENT')">
                </span>
                <span class="walkin-icon mgn-rt-10"
                    *ngIf="(item.type=='checkin-dashboard' && waitlist.waitlistMode == 'WALK_IN_CHECKIN') || (item.type=='appt-dashboard' && waitlist.appointmentMode == 'WALK_IN_APPOINTMENT')">
                </span>
                <span class="pull-left dashboardarrived-icon checkin_status mgn-rt-10"
                    *ngIf="(item.type=='checkin-dashboard' && waitlist.waitlistStatus == 'arrived') || (item.type=='appt-dashboard' && waitlist.apptStatus == 'Arrived') && !waitlist.virtualService"></span>
                <span class="pull-left cnote  pointer-cursor mgn-rt-10" *ngIf="waitlist.consumerNote"
                    (click)="stopProp($event);checkinActions(waitlist, 'note')">
                    <i class="icon-note"></i>
                </span>
                <span (click)="stopProp($event);checkinActions(waitlist, 'attachment')"
                    class="pull-left cnote  pointer-cursor mgn-rt-10" *ngIf="waitlist.hasAttachment"><i
                        style="font-size: 20px;" class="material-icons">attach_file</i></span>
            </div>
            <div class="mgn-lt-5">{{getLabels(waitlist)}}</div>
            <div class="mgn-lt-5">
                <a class="action-btn" (click)="stopProp($event);checkinActions(waitlist, 'actions')">
                    Actions
                </a>
            </div>
        </div>


    <!-- </div> -->
</div>

<!-- Card -->