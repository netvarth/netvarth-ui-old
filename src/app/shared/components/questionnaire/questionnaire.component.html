<section class="cons-inbox no-padding-small"
    [class.container]="params.uuid && (source === 'consCheckin' || source === 'consAppt')">
    <div class="panel-heading top-row " *ngIf="params.uuid && (source === 'consCheckin' || source === 'consAppt')">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 no-padding">
            <app-header></app-header>
        </div>
    </div>
    <div class="card title-gb rounded-0" *ngIf="params.uuid">
        <h5 class="mgn-up-10 bold">Questionnaire <a class="pull-left mgn-rt-20 back-btn" (click)="goBack()"><i
                    class="fa fa-arrow-left"></i></a></h5>
    </div>
    <app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>
    <div class="d-flex flex-column-fluid">
        <!--begin::Container-->
        <div class=" container ">
            <!--begin::Card-->
            <div class="">
                <div class="">
                    <!--begin::Form-->
                    <div class="form">
                        <div class="row">
                            <div class="col-xl-12 force_center">
                                <div class="my-5">
                                    <div class="form-group row card" *ngFor="let question of questions;let i = index">
                                        <label class="col-12">{{getQuestion(question).label}}
                                            <span style="color: red;" *ngIf="getQuestion(question).mandatory">*</span>
                                            <!-- <div class="form-level-settings"
                                                *ngIf="getQuestion(question).fieldDataType != 'Number' && getQuestion(question).fieldDataType != 'PlainText' && getQuestion(question).fieldDataType != 'Date'">
                                                {{getQuestion(question).label}}</div> -->
                                        </label>
                                        <!-- for file upload -->
                                        <div class="col-12 ynw-common-form-nm"
                                            *ngIf="getQuestion(question).fieldDataType === 'FileUpload'">
                                            <div class="input-group"
                                                *ngIf="getQuestion(question).filePropertie.maxNoOfFile === 1">
                                                <input #logofile type="file" accept="/*;capture=camera"
                                                    style="display:none;"
                                                    (change)="filesSelected($event, getQuestion(question))">
                                                <a (click)="logofile.click()"
                                                    class="btn btn-light btn-text-primary btn-hover-text-primary font-weight-bold mr-2">
                                                    <i class="text-dark-50 flaticon-upload"></i>
                                                    Upload File</a>
                                                <div class="mt-3" *ngIf="getImgName(getQuestion(question))">
                                                    {{getImgName(getQuestion(question))}}
                                                    <i class="fa fa-times-circle" aria-hidden="true"
                                                        (click)="deleteTempImage(getQuestion(question))"></i>
                                                </div>
                                            </div>
                                            <mat-select multiple #deptsel
                                                *ngIf="getQuestion(question).filePropertie.maxNoOfFile > 1"
                                                [(ngModel)]="uploadFilesTemp[getQuestion(question).labelName]"
                                                class="select-box">
                                                <mat-option
                                                    *ngFor="let document of getQuestion(question).filePropertie.allowedDocuments"
                                                    [value]="document"
                                                    (click)="takeDoc(getQuestion(question), document)">
                                                    {{document}}</mat-option>
                                            </mat-select>
                                            <div class="col-lg-12 col-xs-12 col-md-12 col-sm-12 no-padding mgn-up-20"
                                                *ngIf="getQuestion(question).filePropertie.maxNoOfFile > 1 && uploadFilesTemp[getQuestion(question).labelName] && uploadFilesTemp[getQuestion(question).labelName].length > 0">
                                                <div class="dropzone dropzone-default dropzone-primary dz-clickable"
                                                    style="cursor:auto">
                                                    <div *ngFor="let doc of uploadFilesTemp[getQuestion(question).labelName]; let i = index"
                                                        class="dz-preview dz-processing dz-image-preview dz-error dz-complete"
                                                        (click)="logofile1.click()">
                                                        {{doc}}
                                                        <div class="dz-image">
                                                            <img class="img_fit"
                                                                [src]="getImg(getQuestion(question), doc)">
                                                        </div>
                                                        <input #logofile1 type="file" accept="/*;capture=camera"
                                                            style="display:none;"
                                                            (change)="filesSelected($event, getQuestion(question), doc)">
                                                        <div class="dz-error-mark pointer-cursor">
                                                            <a class="btn btn-icon btn-light-success btn-circle mr-2"><i
                                                                    class="text-dark-50 flaticon-upload"></i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-2 text-danger"
                                                *ngIf="apiError[getQuestion(question).labelName]">
                                                {{apiError[getQuestion(question).labelName]}}</div>
                                        </div>
                                        <!-- for checkbox -->
                                        <div class="col-12"
                                            *ngIf="getQuestion(question).fieldDataType === 'List' && getQuestion(question).listPropertie.maxAnswers > 1">
                                            <div class="checkbox-list">
                                                <label class="checkbox"
                                                    *ngFor="let value of getQuestion(question).labelValues">
                                                    <input type="checkbox"
                                                        [checked]="isChecked(value, getQuestion(question))"
                                                        (change)="listChange($event, value, getQuestion(question))">
                                                    <span></span>
                                                    {{value}}
                                                </label>
                                            </div>
                                            <div class="mt-2 text-danger"
                                                *ngIf="apiError[getQuestion(question).labelName]">
                                                {{apiError[getQuestion(question).labelName]}}</div>
                                        </div>
                                        <div class="col-12"
                                            *ngIf="getQuestion(question).fieldDataType === 'List' && getQuestion(question).listPropertie.maxAnswers === 1">
                                            <div class="radio-list">
                                                <label class="radio"
                                                    *ngFor="let value of getQuestion(question).labelValues">
                                                    <input type="radio" name="radios2"
                                                        [checked]="isChecked(value, getQuestion(question))"
                                                        (change)="listChange($event, value, getQuestion(question))">
                                                    <span></span>
                                                    {{value}}
                                                </label>
                                            </div>
                                            <div class="mt-2 text-danger"
                                                *ngIf="apiError[getQuestion(question).labelName]">
                                                {{apiError[getQuestion(question).labelName]}}</div>
                                        </div>
                                        <!-- for Text -->
                                        <div class="col-12" *ngIf="getQuestion(question).fieldDataType === 'PlainText'">
                                            <input placeholder="" [(ngModel)]="answers[getQuestion(question).labelName]"
                                                (input)="onSubmit();"
                                                [minlength]="getQuestion(question).plainTextPropertie.minNoOfLetter"
                                                [maxlength]="getQuestion(question).plainTextPropertie.maxNoOfLetter"
                                                class="form-control1 form-control-solid" type="text">
                                            <div class="mt-2 text-danger"
                                                *ngIf="apiError[getQuestion(question).labelName]">
                                                {{apiError[getQuestion(question).labelName]}}</div>
                                        </div>
                                        <!-- for Number -->
                                        <div class="col-12" *ngIf="getQuestion(question).fieldDataType === 'Number'">
                                            <input placeholder="" [(ngModel)]="answers[getQuestion(question).labelName]"
                                                (input)="onSubmit();"
                                                [min]="getQuestion(question).numberPropertie.start"
                                                [max]="getQuestion(question).numberPropertie.end"
                                                class="form-control1 form-control-solid" type="number">
                                            <div class="mt-2 text-danger"
                                                *ngIf="apiError[getQuestion(question).labelName]">
                                                {{apiError[getQuestion(question).labelName]}}</div>
                                        </div>
                                        <!-- for Date -->
                                        <div class="col-12" *ngIf="getQuestion(question).fieldDataType === 'Date'">
                                            <input class="form-control1" type="date"
                                                [(ngModel)]="answers[getQuestion(question).labelName]"
                                                id="example-date-input" (input)="onSubmit()"
                                                min="{{getDate(getQuestion(question).dateProperties.startDate) | date:'yyyy-MM-dd'}}"
                                                max="{{getDate(getQuestion(question).dateProperties.endDate) | date:'yyyy-MM-dd'}}">
                                            <div class="mt-2 text-danger"
                                                *ngIf="apiError[getQuestion(question).labelName]">
                                                {{apiError[getQuestion(question).labelName]}}</div>
                                        </div>
                                        <!-- for toggel btn(boolean) -->
                                        <div class="col-12" *ngIf="getQuestion(question).fieldDataType === 'Boolean'">
                                            <span class="switch switch-sm switch-icon">
                                                <label>
                                                    <input type="checkbox"
                                                        [checked]="isBooleanChecked(getQuestion(question))"
                                                        (change)="booleanChange($event, getQuestion(question))">
                                                    <span></span>
                                                </label>
                                            </span>
                                            <div class="mt-2 text-danger"
                                                *ngIf="apiError[getQuestion(question).labelName]">
                                                {{apiError[getQuestion(question).labelName]}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding" *ngIf="params.uuid">
                                    <button class="normal-btn" mat-flat-button
                                        (click)="!buttonDisable && onSubmit('submit')">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--end::Form-->
                </div>
            </div>
            <!--end::Card-->
        </div>
        <!--end::Container-->
    </div>
</section>