<section class="">
	<div class="card title-gb rounded-0">
		<h5 class="mgn-up-10">
			<span class="fa fa-arrow-left pointer-cursor" (click)="gotoPrev()"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			Bill

		</h5>
	</div>
</section>
<section>
	<div class="d-flex flex-column-fluid mt-5">
		<!--begin::Container-->
		<div class=" container ">
			<!-- begin::Card-->
			<div class="card card-custom overflow-hidden p-0">
				<div class="card-body p-0">
					<!-- begin: Invoice-->
					<!-- begin: Invoice header-->
					<div class="position-absolute opacity-10"><span class="svg-icon svg-icon-10x svg-logo-white">
							<!--begin::Svg Icon | path:assets/media/svg/shapes/abstract-8.svg--><svg
								xmlns="http://www.w3.org/2000/svg" width="176" height="165" viewBox="0 0 176 165"
								fill="none">
								<g clip-path="url(#clip0)">
									<path
										d="M-10.001 135.168C-10.001 151.643 3.87924 165.001 20.9985 165.001C38.1196 165.001 51.998 151.643 51.998 135.168C51.998 118.691 38.1196 105.335 20.9985 105.335C3.87924 105.335 -10.001 118.691 -10.001 135.168Z"
										fill="#AD84FF"></path>
									<path
										d="M28.749 64.3117C28.749 78.7296 40.8927 90.4163 55.8745 90.4163C70.8563 90.4163 83 78.7296 83 64.3117C83 49.8954 70.8563 38.207 55.8745 38.207C40.8927 38.207 28.749 49.8954 28.749 64.3117Z"
										fill="#AD84FF"></path>
									<path
										d="M82.9996 120.249C82.9996 144.964 103.819 165 129.501 165C155.181 165 176 144.964 176 120.249C176 95.5342 155.181 75.5 129.501 75.5C103.819 75.5 82.9996 95.5342 82.9996 120.249Z"
										fill="#AD84FF"></path>
									<path
										d="M98.4976 23.2928C98.4976 43.8887 115.848 60.5856 137.249 60.5856C158.65 60.5856 176 43.8887 176 23.2928C176 2.69692 158.65 -14 137.249 -14C115.848 -14 98.4976 2.69692 98.4976 23.2928Z"
										fill="#AD84FF"></path>
									<path
										d="M-10.0011 8.37466C-10.0011 20.7322 0.409554 30.7493 13.2503 30.7493C26.0911 30.7493 36.5 20.7322 36.5 8.37466C36.5 -3.98287 26.0911 -14 13.2503 -14C0.409554 -14 -10.0011 -3.98287 -10.0011 8.37466Z"
										fill="#AD84FF"></path>
									<path
										d="M-2.24881 82.9565C-2.24881 87.0757 1.22081 90.4147 5.50108 90.4147C9.78135 90.4147 13.251 87.0757 13.251 82.9565C13.251 78.839 9.78135 75.5 5.50108 75.5C1.22081 75.5 -2.24881 78.839 -2.24881 82.9565Z"
										fill="#AD84FF"></path>
									<path
										d="M55.8744 12.1044C55.8744 18.2841 61.0788 23.2926 67.5001 23.2926C73.9196 23.2926 79.124 18.2841 79.124 12.1044C79.124 5.92653 73.9196 0.917969 67.5001 0.917969C61.0788 0.917969 55.8744 5.92653 55.8744 12.1044Z"
										fill="#AD84FF"></path>
								</g>
							</svg>
							<!--end::Svg Icon-->
						</span></div>
					<div class="row justify-content-center py-8 px-8 py-md-3 px-md-0 bg-primary">
						<div class="col-md-11">
							<div class="d-flex justify-content-between pb-10 pb-md-20 flex-column flex-md-row">
								<h1 class="display-4 text-white font-weight-boldest mb-11">INVOICE</h1>
								<div class="d-flex flex-column align-items-md-end px-0">
									<!--begin::Logo-->
									<a href="#" class="mb-5">
										<img src="assets/media/logos/logo-light.png" alt="" />
									</a>
									<!--end::Logo-->
									<span class="text-white d-flex flex-column align-items-md-end opacity-70">
										<span>{{bname | capitalizeFirst}}</span>
										<span *ngIf="spname">
											<span class="title">{{provider_label |
												capitalizeFirst}}:</span>
											<span class="dynamic">{{spname}}</span>
										</span>
										<span class="dynamic fl-right" *ngIf="gstnumber">
											<span class="title">{{gstin_cap}} </span>
											<span class="dynamic">{{gstnumber | capitalizeFirst}}</span>
										</span>
										<!-- <span>Thrissur</span> -->
									</span>
								</div>
							</div>
							<div class="border-bottom w-100 opacity-200"></div>
							<div class="d-flex justify-content-between text-white pt-6">
								<div class="d-flex flex-column flex-root">
									<span class="font-weight-bolde mb-2r">DATE</span>
									<span class="opacity-70">{{billdate | date:'mediumDate'}} {{billtime}}</span>
								</div>
								<div class="d-flex flex-column flex-root">
									<span class="font-weight-bolder mb-2">INVOICE NO#</span>
									<span class="opacity-70">{{billnumber}}</span>
								</div>
								<div class="d-flex flex-column flex-root">
									<span class="font-weight-bolder mb-2">INVOICE TO.</span>
									<span class="opacity-70">
										<ng-container *ngIf="!source">
											<span class="dynamic" *ngFor="let user of checkin.waitlistingFor">
												{{user.firstName | capitalizeFirst}}
												{{user.lastName | capitalizeFirst}}
											</span>
										</ng-container>
										<ng-container *ngIf="source === 'appt'">
											<span class="dynamic" *ngFor="let user of checkin.appmtFor">
												{{user.firstName | capitalizeFirst}}
												{{user.lastName | capitalizeFirst}}
											</span>
										</ng-container>
										<ng-container *ngIf="source === 'order'">
											<span class="dynamic">
												{{checkin.orderFor.firstName | capitalizeFirst}}
												{{checkin.orderFor.lastName | capitalizeFirst}}
											</span>
										</ng-container>
									</span>
								</div>
							</div>
						</div>
					</div>
					<!-- end: Invoice header-->

					<!-- begin: Invoice body-->
					<div class="row justify-content-center py-8 px-8 py-md-2 px-md-0">
						<div class="col-12 mt-2 mb-2" style="display: flex;">
							<div class="col-10 adjust_respo">
								<div class="form-group mr-0 ml-0 col-xs-12 col-md-4 col-sm-4 col-lg-4"
									*ngIf="showAddItemsec">
									<div class="">
										<input class="form-control1 new_ht_calc" type="text" #itemservicesearch
											aria-label="Number" [formControl]="itemServiceSearch"
											(keyup)="itemServiceManualAdd('',itemServiceSearch)"
											[matAutocomplete]="auto">

										<mat-autocomplete #auto="matAutocomplete">
											<ng-container
												*ngIf="!(actiontype=='adjustService' || actiontype=='adjustItem')">
												<ng-container *ngFor="let group of ItemServiceGroupOptions | async">
													<ng-container
														*ngIf="group.type=='Items' || (group.type=='Services' && isServiceBillable)">
														<mat-option *ngFor="let value of group.values; let i = index"
															[value]="value"
															(onSelectionChange)="itemServiceSelected(group.type,value)">
															{{ value }} <span
																class="bill_item_service">{{(group.type=='Items')?
																'Item' :
																'Service'}}</span>
														</mat-option>
													</ng-container>
													<mat-option *ngIf="group.values.length==0 && source !== 'order'"
														[disabled]="true">
														<span class="no-data"></span>{{no_cap}}
														{{group.type}}
														{{available_cap}}
													</mat-option>
												</ng-container>
											</ng-container>
										</mat-autocomplete>
									</div>
								</div>
								<div class="form-group mr-0 ml-0 col-xs-12 col-md-2 col-sm-2 col-lg-2"
									*ngIf="showAddItemsec">
									<div class="">
										<input class="form-control1 new_ht_calc" type="number" min="1"
											max="{{qty_limit}}" aria-label="Number" value="1" size="3" id="mat-input-4"
											aria-invalid="false" aria-required="false" (keypress)="isNumber($event)"
											(keyup)="isvalid($event)" [(ngModel)]="curSelItm.qty"
											(blur)="blurQty($event.target.value, curSelItm)">
									</div>
								</div>
								<div class="form-group mr-0 ml-0 col-xs-12 col-md-2 col-sm-2 col-lg-2"
									*ngIf="showAddItemsec">
									<div class="">
										<input class="form-control1 new_ht_calc" type="number" min="0" max="100000"
											aria-label="Number" value="1" size="3" id="mat-input-4" aria-invalid="false"
											aria-required="false" (keypress)="isNumber($event)"
											(keyup)="isvalid($event)" [(ngModel)]="curSelItm.price">
									</div>
								</div>
								<div style="display: flex;">
									<div class="form-group mr-0 pt-1 ml-0 col-3" *ngIf="showAddItemsec">
										<button class="cs-btn bt1 ml-0 btn-temp-primary-light small_btn"
											(click)="addService_Item()">{{(actiontype=='adjustService'
											||
											actiontype=='adjustItem')?'Change':
											add_btn_cap}}</button>
									</div>
									<div class="form-group mr-0 pt-1 ml-0 col-3" *ngIf="showAddItemsec">
										<button class="cs-btn bt2 ml-4 small_btn"
											(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
									</div>
								</div>

								<!-- <input type="text" #itemservicesearch
										aria-label="Number"
										[formControl]="itemServiceSearch"
										(keyup)="itemServiceManualAdd('',itemServiceSearch)"
										[matAutocomplete]="auto">
									
										
										
									<mat-autocomplete #auto="matAutocomplete">
										<ng-container
											*ngIf="!(actiontype=='adjustService' || actiontype=='adjustItem')">
											<ng-container
												*ngFor="let group of ItemServiceGroupOptions | async">
												<ng-container
													*ngIf="group.type=='Items' || (group.type=='Services' && isServiceBillable)">
													<mat-option
														*ngFor="let value of group.values; let i = index"
														[value]="value"
														(onSelectionChange)="itemServiceSelected(group.type,value)">
														{{ value }} <span
															class="bill_item_service">{{(group.type=='Items')?
															'Item' :
															'Service'}}</span>
													</mat-option>
												</ng-container>
												<mat-option
													*ngIf="group.values.length==0 && source !== 'order'"
													[disabled]="true">
													<span
														class="no-data"></span>{{no_cap}}
													{{group.type}}
													{{available_cap}}
												</mat-option>
											</ng-container>
										</ng-container>
									</mat-autocomplete>

								<input type="number" min="1" max="{{qty_limit}}"  aria-label="Number" value="1" size="3"
									class="mat-input-element mat-form-field-autofill-control ml-5 ip_feild"
									id="mat-input-4" aria-invalid="false" aria-required="false" (keypress)="isNumber($event)"
									(keyup)="isvalid($event)" 	[(ngModel)]="curSelItm.qty" (blur)="blurQty($event.target.value, curSelItm)" >

								<input *ngIf="curSelItm.typ === 'Items' && actiontype !== 'adjustItem'" type="number" min="0" max="100000" aria-label="Number" value="1" size="3"
									class="mat-input-element mat-form-field-autofill-control ml-5 ip_feild"
									id="mat-input-4" aria-invalid="false" aria-required="false" (keypress)="isNumber($event)"
									(keyup)="isvalid($event)" 	[(ngModel)]="curSelItm.price" >
								
								<button class="cs-btn bt1 ml-4 btn_prim"
									(click)="addService_Item()">{{(actiontype=='adjustService'
									||
									actiontype=='adjustItem')?'Change':
									add_btn_cap}}</button>
								<button class="cs-btn bt2 ml-4" (click)="hideWorkBench()">{{cancel_btn_cap}}</button> -->

							</div>
							<div class="add_item col-2" *ngIf="pos && (bill_data.billStatus!='Settled') && ((!source && checkin.waitlistStatus != 'cancelled') ||
												(source === 'appt' && checkin.apptStatus != 'Rejected' && checkin.apptStatus != 'Cancelled')
												|| (source === 'order' && bill_data.billStatus !== 'Cancel'))">
								<!-- <a *ngIf="(source == 'order' && items.length > 0) || source != 'order'"
									(click)="showAddItem()"
									class="btn btn-sm btn-success font-weight-bold py-2 px-3 flat_item px-xxl-5 my-1">Add
									Service/Item</a> -->

								<!-- <button mat-button [matMenuTriggerFor]="topmenu"> -->
								<!-- <mat-icon>more_vert</mat-icon> -->
								<div class="symbol fl_right symbol-40 symbol-light-success mr-5 hand_symb"
									[matMenuTriggerFor]="topmenu">
									<span class="symbol-label"> <span class="svg-icon svg-icon-lg svg-icon-success"><svg
												xmlns="http://www.w3.org/2000/svg"
												xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
												viewBox="0 0 24 24" version="1.1">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<rect x="0" y="0" width="24" height="24" />
													<rect fill="#000000" x="4" y="5" width="16" height="3" rx="1.5" />
													<path
														d="M5.5,15 L18.5,15 C19.3284271,15 20,15.6715729 20,16.5 C20,17.3284271 19.3284271,18 18.5,18 L5.5,18 C4.67157288,18 4,17.3284271 4,16.5 C4,15.6715729 4.67157288,15 5.5,15 Z M5.5,10 L18.5,10 C19.3284271,10 20,10.6715729 20,11.5 C20,12.3284271 19.3284271,13 18.5,13 L5.5,13 C4.67157288,13 4,12.3284271 4,11.5 C4,10.6715729 4.67157288,10 5.5,10 Z"
														fill="#000000" opacity="0.3" />
												</g>
											</svg></span>
									</span>
								</div>
								<!-- </button> -->
								<mat-menu #topmenu="matMenu">
									<button mat-menu-item
										*ngIf="(source == 'order' && items.length > 0) || source != 'order'"
										(click)="showAddItem()">
										<span>Add Service/Item</span>
									</button>
									<button mat-menu-item data-toggle="modal" data-target="#exampleModalDeliveryCharge"
										(click)="showDeliveryCharge()" *ngIf="source==='order' && checkin.homeDelivery">
										<span *ngIf="bill_data.deliveryCharges > 0">Update Delivery Charge</span>
										<span *ngIf="bill_data.deliveryCharges === 0">Add Delivery Charge</span>
									</button>
									<button mat-menu-item data-toggle="modal" data-target="#exampleModalSizeDefault2"
										(click)="orderDiscountSelected()" *ngIf="(discounts.length > 0)">
										Apply Order Discount
									</button>
									<button mat-menu-item data-toggle="modal" data-target="#exampleModalSizeDefault2"
										(click)="orderPCouponSelected()" *ngIf="(coupons.length >0)">
										Apply Coupon
									</button>
									<button mat-menu-item data-toggle="modal" data-target="#exampleModalSizeDefault2"
										*ngIf="(jCouponsList.length>0)" (click)="jCouponSelected()">
										Apply Jaldee Coupon
									</button>
									<button mat-menu-item data-toggle="modal" data-target="#exampleModalSizeDefault3"
										(click)="disaplynoteSelected()">
										<span *ngIf="!displayNoteedit">{{add_display_note}}</span>
										<span *ngIf="displayNoteedit">{{update_display_note}}</span>
									</button>
									<button mat-menu-item data-toggle="modal" data-target="#exampleModalSizeDefault3"
										(click)="privatenoteSelected()">
										<span *ngIf="!privateNoteedit">{{add_private_note}}</span>
										<span *ngIf="privateNoteedit">{{update_private_note}}</span>
									</button>
								</mat-menu>
							</div>
						</div>
						<div class="col-md-11">
							<!-- revamp table -->
							<div class="table-responsive">
								<table class="table">
									<thead>
										<tr>
											<th class="pl-0 font-weight-bold text-muted  text-uppercase">Service/Item
											</th>
											<th class="text-right font-weight-bold text-muted text-uppercase">Qty</th>
											<th class="text-right font-weight-bold text-muted text-uppercase">Rate</th>
										</tr>
									</thead>
									<tbody>
										<tr class="font-weight-boldest font-size-md"
											*ngFor="let service of bill_data.service; let i = index">
											<td class="pl-0 pt-7"> {{service.serviceName | capitalizeFirst}}</td>
											<td class="text-right pt-7"
												*ngIf="!source && bill_data.checkinStatus !== 'cancelled' ||
													    (bill_data.checkinStatus === 'cancelled' && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0))">
												{{service.quantity}}<br><br>
												<div *ngFor="let discount of service.discount">
													<span
														class="text-right text-muted-dark font-size-xs ">{{discount.name}}</span>
													<br>
													<span class="text-right font-size-xs font-weight-boldest">
														<span class="rupee-font">(-){{discount.discountValue
															|
															currency:'&#8377;'}}</span> <i
															(click)="removeServiceDiscount(service.serviceId, discount.id)"
															class="fa fa-window-close" aria-hidden="true"></i>
													</span>
												</div>
											</td>
											<td class="text-right pt-7"
												*ngIf="source && (bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected' ||
														 ((bill_data.apptStatus === 'Cancelled' || bill_data.apptStatus === 'Rejected') && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
												{{service.quantity}}<br><br>
												<div *ngFor="let discount of service.discount">
													<span
														class="text-right text-muted-dark font-size-xs ">{{discount.name}}</span>
													<br>
													<span class="text-right font-size-xs font-weight-boldest">
														<span class="rupee-font">(-){{discount.discountValue
															|
															currency:'&#8377;'}}</span> <i
															(click)="removeServiceDiscount(service.serviceId, discount.id)"
															class="fa fa-window-close" aria-hidden="true"></i>
													</span>
												</div>
											</td>

											<td class="text-right pt-7" style="color: red;font-size: smaller;"
												*ngIf="!source && bill_data.checkinStatus === 'cancelled' && bill_data.checkinedService === service.serviceId && service.quantity === 0">
												Cancelled</td>
											<td class="text-right pt-7" style="color: red;font-size: smaller;"
												*ngIf="source && (bill_data.apptStatus === 'Rejected' || bill_data.apptStatus === 'Cancelled') && bill_data.checkinedService === service.serviceId && service.quantity === 0">
												Cancelled</td>
											<td class="text-right pt-7"
												*ngIf="source && (bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected' ||
											                     ((bill_data.apptStatus === 'Cancelled' || bill_data.apptStatus === 'Rejected') && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
												<span class="rupee-font">{{(service.quantity * service.price) |
													currency:'&#8377;'}}</span>

												<button class="mb-1" mat-icon-button [matMenuTriggerFor]="tdmenu"
													*ngIf="pos && source && bill_data.billStatus!='Settled' && (bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected' ||
														((bill_data.apptStatus === 'Cancelled' || bill_data.apptStatus === 'Rejected') && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
													<mat-icon>more_horiz</mat-icon>
												</button>
												<mat-menu #tdmenu="matMenu">
													<button mat-menu-item data-toggle="modal"
														data-target="#exampleModalSizeDefault"
														(click)="serviceDiscCoupSec(i)"
														*ngIf="itemdiscounts.length > 0">
														Apply Discount
													</button>

													<button mat-menu-item data-toggle="modal"
														data-target="#exampleModalSizeDefault1"
														*ngIf="bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected'"
														(click)="adjustService(service.serviceName, service.quantity)">
														Change Qty
													</button>
													<button mat-menu-item
														(click)="removeService(service.serviceId, service.quantity)">
														Remove Service
													</button>
												</mat-menu>
												<br>
												<span *ngIf="service.discount && service.discount.length > 0"
													class="text-right rupee-font font-size-xs text-muted-dark">{{sub_tot_cap}}</span>
												<br>
												<span *ngIf="service.discount && service.discount.length > 0"
													class="text-right rupee-font font-size-xs font-weight-boldest">{{service.netRate
													| currency:'&#8377;'}}</span>
											</td>
											<td class="text-right pt-7"
												*ngIf="!source && bill_data.checkinStatus !== 'cancelled' ||
														(bill_data.checkinStatus === 'cancelled' && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0))">
												<span class="rupee-font">{{(service.quantity *
													service.price) |
													currency:'&#8377;'}}</span>
												<button class="mb-1" mat-icon-button [matMenuTriggerFor]="tdmenu"
													*ngIf="pos && !source && bill_data.billStatus!='Settled' && (bill_data.checkinStatus !== 'cancelled' ||
												    (bill_data.checkinStatus === 'cancelled' && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
													<mat-icon>more_horiz</mat-icon>
												</button>
												<mat-menu #tdmenu="matMenu">
													<button mat-menu-item data-toggle="modal"
														data-target="#exampleModalSizeDefault"
														(click)="serviceDiscCoupSec(i)"
														*ngIf="itemdiscounts.length > 0">
														Apply Discount
													</button>

													<button mat-menu-item data-toggle="modal"
														data-target="#exampleModalSizeDefault1"
														*ngIf="checkin.waitlistStatus != 'cancelled'"
														(click)="adjustService(service.serviceName, service.quantity)">
														Change Qty
													</button>
													<button mat-menu-item
														(click)="removeService(service.serviceId, service.quantity)">
														Remove Service
													</button>
												</mat-menu>
												<br>
												<span *ngIf="service.discount && service.discount.length > 0"
													class="text-right rupee-font font-size-xs text-muted-dark">{{sub_tot_cap}}</span>
												<br>
												<span *ngIf="service.discount && service.discount.length > 0"
													class="text-right rupee-font font-size-xs font-weight-boldest">{{service.netRate
													| currency:'&#8377;'}}</span>
											</td>

											<!-- Modal for Service level apply discount -->
											<div class="modal fade" id="exampleModalSizeDefault" tabindex="-1"
												role="dialog" aria-labelledby="exampleModalSizeDefault"
												aria-hidden="true">
												<div class="modal-dialog modal-dialog-centered" role="document"
													*ngIf="itemdiscounts.length > 0">
													<div class="modal-content">
														<div class="modal-body">
															<select class="form-control" [(ngModel)]="discountid"
																(ngModelChange)="selectChangeHandler($event)">
																<option
																	*ngFor="let discount of itemdiscounts; let i = index"
																	[value]="discount.id">{{discount.name}}</option>
															</select>
															<div class="modal-footer p-0">
																<button type="button"
																	class="btn btn-light-primary font-weight-bold lh-p6 rounded-0"
																	data-dismiss="modal" #closebutton>Close</button>
																<button type="button"
																	class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
																	(click)="applyServiceDiscount(bill_data.service[i])">Add
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</tr>
										<tr *ngFor="let item of bill_data.items; let i = index"
											class="font-weight-boldest border-bottom-0 font-size-lg">
											<td class="border-top-0 pl-0 py-4">{{item.itemName | capitalizeFirst}}</td>
											<td class="border-top-0 text-right py-4">{{item.quantity}}
												<br><br>
												<div *ngFor="let discount of item.discount">
													<span
														class="text-right text-muted-dark font-size-xs ">{{discount.name}}</span>
													<br>
													<span class="text-right font-size-xs font-weight-boldest">
														<span class="rupee-font">(-){{discount.discountValue |
															currency:'&#8377;'}}</span> <i
															(click)="removeItemDiscount(item.itemId, discount.id)"
															class="fa fa-window-close" aria-hidden="true"></i>
													</span>
												</div>
											</td>
											<td class="border-top-0 text-right py-4"> <span class="rupee-font"> <sup
														[matTooltipClass]="tooltipcls" [matTooltip]="'Taxable'"
														*ngIf="item.GSTpercentage > 0">Tax</sup>
													{{(item.quantity * item.price) | currency:'&#8377;'}}</span>
												<!-- <div *ngIf="bill_data.billStatus!='Settled' && pos"> -->
												<button mat-icon-button [matMenuTriggerFor]="tdmenu"
													*ngIf="bill_data.billStatus!='Settled' && pos">
													<mat-icon>more_horiz</mat-icon>
												</button>
												<mat-menu #tdmenu="matMenu">
													<button mat-menu-item data-toggle="modal"
														data-target="#exampleModaItemDiscount"
														(click)="itemDiscCoupSec(i)" *ngIf="itemdiscounts.length > 0">
														Apply Discount
													</button>

													<button mat-menu-item data-toggle="modal"
														data-target="#exampleModalSizeDefault1"
														*ngIf="bill_data.billStatus !== 'Cancel'"
														(click)="adjustItem(item.itemName, item.quantity)">
														Change Qty
													</button>
													<button mat-menu-item
														(click)="removeItem(item.itemId, item.quantity)">
														Remove Item
													</button>
												</mat-menu>
												<!-- </div> -->
												<br>
												<span *ngIf="item.discount &&item.discount.length > 0"
													class="text-right rupee-font font-size-xs text-muted-dark">{{sub_tot_cap}}</span>
												<br>
												<span *ngIf="item.discount &&item.discount.length > 0"
													class="text-right rupee-font font-size-xs font-weight-boldest">{{item.netRate
													| currency:'&#8377;'}}</span>
											</td>
											<!-- Modal for Item level apply discount -->
											<div class="modal fade" id="exampleModaItemDiscount" tabindex="-1"
												role="dialog" aria-labelledby="exampleModalSizeDefault"
												aria-hidden="true">
												<div class="modal-dialog modal-dialog-centered" role="document"
													*ngIf="discounts.length > 0">
													<div class="modal-content">
														<div class="modal-body">
															<select class="form-control" [(ngModel)]="discountid"
																(ngModelChange)="selectChangeHandler($event)">
																<option
																	*ngFor="let discount of itemdiscounts; let i = index"
																	[value]="discount.id">{{discount.name}}</option>
															</select>
															<div class="modal-footer p-0">
																<button type="button"
																	class="btn btn-light-primary font-weight-bold lh-p6 rounded-0"
																	data-dismiss="modal"
																	#itemdiscountapply>Close</button>
																<button type="button"
																	class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
																	(click)="applyItemDiscount(bill_data.items[i])">Add
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</tr>
									</tbody>
								</table>
							</div>

							<!-- Modal for Change qty For Service and Item -->
							<div class="modal fade" id="exampleModalSizeDefault1" tabindex="-1" role="dialog"
								aria-labelledby="exampleModalSizeDefault" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-body">
											<div class="form-group mb-0 row">
												<label for="example-number-input" class="col-12 col-form-label">
													{{qty_cap}}</label>
												<div class="col-12">
													<input class="form-control" type="number" value="42"
														id="example-number-input" type="number" min="0"
														max="{{qty_limit}}" (keypress)="isNumber($event)"
														(keyup)="isvalid($event)" matInput value="1" size="3"
														[(ngModel)]="curSelItm.qty"
														[ngModelOptions]="{standalone: true}"
														(blur)="blurQty($event.target.value, curSelItm)">
												</div>
											</div>
										</div>
										<div class="modal-footer p-0">
											<button type="button"
												class="btn btn-light-primary font-weight-bold lh-p6 rounded-0"
												data-dismiss="modal" #itemserviceqtynew>Close</button>
											<button type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
												(click)="addService_Item()">Add </button>
										</div>
									</div>
								</div>
							</div>
							<!-- Modal for order discound -->
							<!-- <div class="modal fade" id="exampleModalSizeDefault2" tabindex="-1" role="dialog"
								aria-labelledby="exampleModalSizeDefault" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-body">
											<select class="form-control">
												<option>Disc 1</option>
												<option>Disc 2</option>
												<option>Disc 3</option>
											</select>
											<label
												class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary mt-4 fnt-p8">
												<input type="checkbox" name="Checkboxes16">
												<span style="margin-right: 0.75rem;"></span>
												Private note
											</label>
											<div class="form-group mt-2 mb-1">
												<textarea class="form-control radii" id="exampleTextarea"
													rows="3"></textarea>
											</div>
											<label
												class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary mt-4 fnt-p8">
												<input type="checkbox" name="Checkboxes16">
												<span style="margin-right: 0.75rem;"></span>
												Notes for Patient
											</label>
											<div class="form-group mt-2 mb-1">
												<textarea class="form-control radii" id="exampleTextarea"
													rows="3"></textarea>
											</div>
										</div>
										<div class="modal-footer p-2">
											<button type="button"
												class="btn btn-light-primary font-weight-bold lh-p6 rounded-0"
												data-dismiss="modal">Close</button>
											<button type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold">Add </button>
										</div>
									</div>
								</div>
							</div> -->
							<div *ngIf="(showPCouponSection || showDiscountSection || showJCouponSection)"
								class="modal fade" id="exampleModalSizeDefault2" tabindex="-1" role="dialog"
								aria-labelledby="exampleModalSizeDefault" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="exampleModalLabel">
												<span *ngIf="discounts.length >0 && showDiscountSection">Apply
													Discount</span>
												<span *ngIf="coupons.length >0 && showPCouponSection">Apply
													Coupon</span>
												<span *ngIf="jCouponsList.length>0 && showJCouponSection">Apply Jaldee
													Coupon</span>
												<span
													*ngIf="showDiscountSection && discount_type.discType=='OnDemand'">Apply
													On Demand Discount</span>
											</h5>

										</div>
										<div class="modal-body">
											<select *ngIf="discounts.length >0 && showDiscountSection"
												class="form-control" [(ngModel)]="selOrderDiscount"
												(click)="onChange()">
												<option *ngFor="let discount of discounts; let i = index"
													[value]="discount.id">{{discount.name}}</option>
											</select>
											<select *ngIf="coupons.length >0 && showPCouponSection" class="form-control"
												[(ngModel)]="selOrderProviderCoupon">
												<option *ngFor="let coupon of coupons; let i = index"
													[value]="coupon.id">{{coupon.name}}</option>
											</select>
											<select *ngIf="jCouponsList.length>0 && showJCouponSection"
												class="form-control" [(ngModel)]="selOrderProviderjCoupon">
												<option *ngFor="let jcoupon of jCouponsList; let i = index"
													[value]="jcoupon.jaldeeCouponCode">{{ jcoupon.jaldeeCouponCode }}
												</option>
											</select>
											<br>
											<div *ngIf="showDiscountSection && discount_type.discType=='OnDemand'">
												<input type="number" matInput #billdiscvalue aria-label="Number"
													max="{{price_limit}}" min="0" matInput value="1" autocomplete="off"
													size="3" (keypress)="isNumeric($event)" (keyup)="isvalid($event)"
													[(ngModel)]="discAmount" [ngModelOptions]="{standalone: true}">
											</div>

											<div *ngIf="showDiscountSection">
												<label
													class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary mt-4 fnt-p8">
													<input [(ngModel)]="isProvNote" type="checkbox" name="Checkboxes16">
													<span style="margin-right: 0.75rem;"></span>
													Private note
												</label>
												<div class="form-group mt-2 mb-1" *ngIf="isProvNote">
													<textarea [(ngModel)]="discProvNote" class="form-control radii"
														id="exampleTextarea" rows="3"></textarea>
												</div>
												<label
													class="checkbox checkbox-outline checkbox-outline-2x checkbox-primary mt-4 fnt-p8">
													<input [(ngModel)]="isConsNote" type="checkbox" name="Checkboxes16">
													<span style="margin-right: 0.75rem;"></span>
													Notes for Patient
												</label>
												<div class="form-group mt-2 mb-1" *ngIf="isConsNote">
													<textarea [(ngModel)]="discConsNote" class="form-control radii"
														id="exampleTextarea" rows="3"></textarea>
												</div>
											</div>
										</div>
										<div class="modal-footer p-2">
											<button *ngIf="discounts.length >0 && showDiscountSection" type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
												[class.grey-bg]="selOrderDiscount==='' || disableDiscountbtn || (selOrderDiscount.discType === 'OnDemand' && discAmount === '')"
												[disabled]="selOrderDiscount==='' || disableDiscountbtn || (selOrderDiscount.discType === 'OnDemand' && discAmount === '')"
												(click)="applyOrderDiscount()">{{apply_cap}}</button>

											<button *ngIf="coupons.length >0 && showPCouponSection" type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
												[disabled]="selOrderProviderCoupon==='' || disableCouponbtn"
												(click)="applyOrderCoupon()">{{apply_cap}}</button>

											<button type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
												*ngIf="jCouponsList.length >0 && showJCouponSection"
												[disabled]="selOrderProviderjCoupon==='' || disableJCouponbtn"
												(click)="applyJCoupon(selOrderProviderjCoupon)">{{apply_cap}}</button>
											<button type="button"
												class="btn btn-light-primary font-weight-bold lh-p6 rounded-0"
												data-dismiss="modal" #closeJcDiscPc
												(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
										</div>
									</div>
								</div>
							</div>






							<!-- Modal For delivery charge -->
							<div *ngIf="showDeliveryChargeSection" class="modal fade" id="exampleModalDeliveryCharge"
								tabindex="-1" role="dialog" aria-labelledby="exampleModalSizeDefault"
								aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-body">
											<div class="form-group mb-0 row">
												<label for="example-number-input" class="col-12 col-form-label">
													Delivery Charge</label>
												<div class="col-12">
													<input class="form-control" type="number" id="example-number-input"
														type="number" min="0" max="{{qty_limit}}"
														(keypress)="isNumber($event)" (keyup)="isvalid($event)" matInput
														value="1" size="3" [(ngModel)]="deliveryCharge"
														[ngModelOptions]="{standalone: true}">
												</div>
											</div>
										</div>
										<div class="modal-footer p-2">
											<button type="button"
												class="btn btn-light-primary font-weight-bold lh-p6 rounded-0"
												data-dismiss="modal" #closeDelivery
												(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
											<button type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
												(click)="applyDeliveryCharge()">{{apply_cap}}</button>
										</div>
									</div>
								</div>
							</div>
							<!-- Modal for Add Notes -->
							<div class="modal fade" id="exampleModalSizeDefault3" tabindex="-1" role="dialog"
								aria-labelledby="exampleModalSizeDefault" aria-hidden="true"
								*ngIf="showDisplaynoteSection || showPrivatenoteSection">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="exampleModalLabel">
												<span *ngIf="showDisplaynoteSection">Add Display Note</span>
												<span *ngIf="showPrivatenoteSection">Add Private Note</span>
											</h5>

										</div>
										<div class="modal-body">
											<div class="form-group mt-2 mb-1" *ngIf="showDisplaynoteSection">
												<textarea class="form-control radii" id="exampleTextarea"
													placeholder="Message" [(ngModel)]="billDisplayNote"
													(keyup)="handledisplaykeyup()" rows="3">
												</textarea>
											</div>
											<div class="form-group mt-2 mb-1" *ngIf="showPrivatenoteSection">
												<textarea class="form-control radii" id="exampleTextarea"
													placeholder="Message" [(ngModel)]="billPrivateNote"
													(keyup)="handleprivatekeyup()" rows="3">
												</textarea>
											</div>
										</div>
										<div class="modal-footer p-2">
											<button type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
												[disabled]="displaybuttondisabled" *ngIf="showDisplaynoteSection"
												(click)="addDisplaynote()">
												<span style="display:grid"
													*ngIf="!displayNoteedit">{{add_note_btn}}</span>
												<span style="display:grid"
													*ngIf="displayNoteedit">{{update_note_btn}}</span>
											</button>
											<button type="button"
												class="btn btn-primary lh-p6 rounded-0 font-weight-bold"
												[disabled]="privatebuttondisabled" *ngIf="showPrivatenoteSection"
												(click)="addPrivatenote()">
												<span style="display:grid"
													*ngIf="!privateNoteedit">{{add_note_btn}}</span>
												<span style="display:grid"
													*ngIf="privateNoteedit">{{update_note_btn}}</span>
											</button>
											<button type="button"
												class="btn btn-light-primary font-weight-bold lh-p6 rounded-0"
												data-dismiss="modal" #closenotesdialog
												(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
										</div>
									</div>
								</div>
							</div>
							<hr>
							<!-- displaying notes section -->
							<div class="col-lg-6" style="display: inline-grid;" *ngIf="bill_data && billNotesExists">
								<mat-accordion class="example-headers-align" multi>
									<mat-expansion-panel>
										<mat-expansion-panel-header>
											<mat-panel-title>
												<i class="flaticon2-layers-1 mr-3"></i>Bill Notes
											</mat-panel-title>
										</mat-expansion-panel-header>
										<!-- <mat-form-field> -->
										<div class="section-three" *ngIf="bill_data && billNotesExists">
											<!-- <a class="learnmore-pointer" id="customer-help"
											(click)="billNotesClicked()">Bill notes</a> -->
											<div class="bill-notes"
												*ngIf="(discountDisplayNotes || bill_data.displayNotes)">
												<div>Notes for {{customer_label}}:</div>
												<ul>
													<li *ngIf="bill_data.displayNotes">
														{{bill_data.displayNotes.displayNotes}}</li>
													<div class *ngFor="let discount of bill_data.discount">
														<li *ngIf="discount.displayNote">
															<span style="font-weight: 600"> {{discount.name}} - </span>
															{{discount.displayNote}}
														</li>
													</div>
												</ul>
											</div>
											<div class="bill-notes"
												*ngIf="(discountPrivateNotes || bill_data.privateNotes)">
												<div>Private note:</div>
												<ul>
													<li *ngIf="bill_data.privateNotes">
														{{bill_data.privateNotes.privateNotes}}</li>
													<div class *ngFor="let discount of bill_data.discount">
														<li *ngIf="discount.privateNote">
															<span style="font-weight: 600"> {{discount.name}} - </span>
															{{discount.privateNote}}
														</li>
													</div>
												</ul>
											</div>
										</div>



										<!-- <mat-label>Date</mat-label> -->
										<!-- <input matInput [matDatepicker]="picker" (focus)="picker.open()" readonly> -->
										<!-- </mat-form-field>									 -->
										<!-- <mat-datepicker #picker></mat-datepicker> -->
									</mat-expansion-panel>
								</mat-accordion>
							</div>
							<div class="col-lg-6 col-md-6 col-xs-6 disp_grid extra-bill fl_rt bill_sum">
								<div class="hr_content">
									<div class="flx_1">Amount</div>
									<div class="rupee-font">{{bill_data.netTotal | currency:'&#8377;'}}</div>
								</div>
								<div class="hr_content" *ngIf="bill_data.jdn && bill_data.jdn.discount">
									<div class="flx_1">JDN</div>
									<div class="rupee-font">(-){{bill_data.jdn.discount| currency:'&#8377;'}}</div>
								</div>
								<div class="hr_content" *ngFor="let discount of bill_data.discount">
									<div class="flx_1">{{discount.name}}</div>
									<div class="rupee-font">(-){{discount.discValue | currency:'&#8377;'}}
										<i *ngIf="bill_data.billStatus!='Settled'"
											(click)="removeOrderDiscount(discount)" class="fa fa-window-close"
											aria-hidden="true"></i>
									</div>
								</div>
								<div class="hr_content" *ngFor="let coupon of bill_data.providerCoupon | keyvalue">
									<div class="flx_1">{{coupon.key}} (Coupon)</div>
									<div class="rupee-font">
										<span (click)="showJCCouponNote(coupon)"
											[class.couponAmt]="coupon.value.value === '0.0'"
											style="margin-right: 5px">{{coupon.value.value |
											currency:'&#8377;'}}</span>
										<i *ngIf="bill_data.billStatus!='Settled'"
											(click)="removeProviderCoupon(coupon.key)" class="fa fa-window-close"
											aria-hidden="true"></i>
									</div>
								</div>
								<div class="hr_content" *ngFor="let jcoupon of bill_data.jCoupon | keyvalue">
									<div class="flx_1">{{jcoupon.key}} (Jaldee Coupon)</div>
									<div class="rupee-font">
										<span (click)="showJCCouponNote(jcoupon)"
											[class.couponAmt]="jcoupon.value.value === '0.0'"
											style="margin-right: 5px">{{jcoupon.value.value |
											currency:'&#8377;'}}</span>
										<i *ngIf="bill_data.billStatus!='Settled'" (click)="removeJCoupon(jcoupon.key)"
											class="fa fa-window-close" aria-hidden="true"></i>
									</div>
								</div>
								<div class="hr_content" *ngIf="bill_data.taxableTotal">
									<div class="flx_1"><span class="tax-top">Tax {{bill_data.taxPercentage}}% of
											<span class="rupee-font">{{bill_data.taxableTotal |
												currency:'&#8377;'}}</span></span>
										<span class="txn">(CGST-{{bill_data.taxPercentage/2}}%,
											SGST-{{bill_data.taxPercentage/2}}%)</span>
									</div>
									<div class="price rupee-font"> (+){{bill_data.totalTaxAmount | currency:'&#8377;'}}
									</div>
								</div>
								<div class="hr_content" *ngIf="bill_data.deliveryCharges > 0">
									<div class="flx_1">Delivery Charge</div>
									<div class="rupee-font">(+){{bill_data.deliveryCharges | currency:'&#8377;'}}</div>
								</div>
								<div class="hr_content">
									<div class="flx_1">Net Total</div>
									<div class="rupee-font">{{bill_data.netRate | currency:'&#8377;'}}</div>
								</div>

								<div class="hr_content" *ngIf="bill_data.totalAmountPaid > 0">
									<div class="flx_1 custId-cursor"> <span class="link" data-toggle="modal"
											data-target="#exampleModalSizeDefaultrefund">Amount
											Paid</span></div>
									<div class="rupee-font">{{bill_data.totalAmountPaid | currency:'&#8377;'}}</div>
								</div>
								<!--begin::Modal For Refund-->
								<div class="modal fade" id="exampleModalSizeDefaultrefund" tabindex="-1" role="dialog"
									aria-labelledby="exampleModalSizeDefault" aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-body pb-3">
												<div class="row">
													<div class="col-md-12 py-md-10 pr-md-5">
														<div class="table-responsive">
															<table class="table">
																<thead>
																	<tr>
																		<th
																			class="fnt-p7 text-center font-weight-bolder text-muted  text-uppercase">
																			Status</th>
																		<th
																			class="fnt-p7 text-center font-weight-bolder text-muted  text-uppercase">
																			Mode</th>
																		<th class="fnt-p7 text-center pr-0 font-weight-bolder text-muted text-uppercase"
																			*ngIf="bill_data.billStatus!='Settled'">
																			Gateway</th>
																		<th colspan="2"
																			class="fnt-p7 text-center pr-0 font-weight-bolder text-muted text-uppercase"
																			*ngIf="bill_data.billStatus!='Settled'">
																			Date & Amount</th>
																	</tr>
																</thead>
																<tbody
																	*ngFor="let payment of pre_payment_log; let i = index">
																	<tr class="font-weight-bolder font-size-sm">
																		<td class="fnt-p7 text-center pt-4">
																			{{payment.status | capitalizeFirst}}</td>
																		<td class=" fnt-p7 text-center pt-4">
																			<span>{{payment.acceptPaymentBy |
																				capitalizeFirst}}<ng-container *ngIf="payment.paymentMode &&
																			payment.acceptPaymentBy != payment.paymentMode.toLowerCase()">/{{payment.paymentMode}}
																				</ng-container>
																			</span>
																		</td>
																		<td class="fnt-p7 pr-0 pt-4  text-center">
																			{{payment.paymentGateway}}</td>
																		<td class="fnt-p7 pr-0 pt-4  text-center">
																			<span class="date">{{payment.paymentOn |
																				date:'mediumDate'}}</span> <br>
																			<span
																				class="time">{{payment.paymentTime}}</span>
																			<br>
																			<span class="amt rupee-font"
																				*ngIf="payment.refundableAmount > 0 && payment.status === 'SUCCESS'">
																				{{payment.refundableAmount |
																				currency:'&#8377; '}}
																			</span>
																		</td>
																		<td class="fnt-p7 pr-0 pt-4  text-center">
																			<button type="button"
																				class="btn btn-primary btn-square lh-p4  font-weight-bold font-size-xs"
																				*ngIf="!applydisc && payment.refundableAmount > 0 && payment.status === 'SUCCESS' && payment.paymentPurpose == 'prePayment'"
																				(click)="applyRefund(payment)">Refund</button>
																		</td>
																	</tr>
																	<!-- <tr>
																	<td class="fnt-p7 pr-0 pt-4  text-center">
																		<button  type="button" class="btn btn-primary btn-square lh-p4  font-weight-bold font-size-xs"
												                       *ngIf="!applydisc && payment.refundableAmount > 0 && payment.status === 'SUCCESS' && payment.paymentPurpose == 'prePayment'"
												                         (click)="applyRefund(payment)">Refund</button>
																	</td>
																</tr> -->
																	<!-- <tr>
																	<td>
																		<button type="button" class="btn btn-success btn-square lh-p4 font-size-xs font-weight-bold"
																	 data-dismiss="modal">Pay by Cash</button>
																	</td>
																	<td><button  type="button" class="btn btn-success btn-square lh-p4 font-size-xs font-weight-bold"
																		(click)="refundPayment('other')"  data-dismiss="modal">Pay by Others</button></td>
																	<td><button  type="button" class="btn btn-success btn-square lh-p4 font-size-xs font-weight-bold"
																		
																		(click)="refundPayment('online')"  data-dismiss="modal">Pay Online</button></td>
																	<td colspan="2">

											<button  type="button" class="btn btn-light-primary btn-square lh-p4 font-size-xs font-weight-bold"
											(click)="revokeRefund()">Cancel</button>
																	</td>
																</tr> -->
																</tbody>
															</table>
														</div>
													</div>
												</div>
												<div class="row" *ngFor="let payment of pre_payment_log; let i = index">
													<div *ngIf="payment.refundDetails.length" class="table-responsive"
														style="width: 100%">
														<table class="table mb-0">
															<thead>
																<tr>
																	<th colspan="3" class="item_centre">Refunds</th>
																</tr>
																<tr>
																	<th
																		class="fnt-p7 text-center font-weight-bolder text-muted  text-uppercase">
																		Status</th>
																	<th
																		class="fnt-p7 text-center font-weight-bolder text-muted  text-uppercase">
																		Mode</th>
																	<th
																		class="fnt-p7 text-center pr-0 font-weight-bolder text-muted text-uppercase">
																		Amount</th>
																</tr>
															</thead>
															<tbody *ngFor="let refund of payment.refundDetails">
																<tr class="font-weight-bolder font-size-sm">
																	<td class="fnt-p7 text-center pt-7">{{refund.status
																		| capitalizeFirst}}</td>
																	<td class=" fnt-p7 text-center pt-7">
																		<span> {{refund.refundMode | capitalizeFirst }}
																		</span>
																	</td>
																	<td class="fnt-p7 pr-0 pt-7  text-center">
																		{{refund.amount |
																		currency:'&#8377;' }}</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
											<div *ngIf="applydisc">
												<input type="number" class="form-control" type="number"
													aria-label="Number" matInput value="1" size="5"
													max="{{price_limit}}" min="0" id="example-number-input"
													[(ngModel)]="amounttoRefund">
											</div>
											<div class="modal-footer p-1">
												<button *ngIf="!applydisc" type="button"
													class="btn btn-light-primary btn-square lh-1 font-weight-bold"
													data-dismiss="modal">Close</button>

												<button *ngIf="applydisc" type="button"
													class="btn btn-success btn-square lh-p6 font-weight-bold"
													(click)="refundPayment('cash')" data-dismiss="modal">Pay by
													Cash</button>

												<button *ngIf="applydisc" type="button"
													class="btn btn-success btn-square lh-p6 font-weight-bold"
													(click)="refundPayment('other')" data-dismiss="modal">Pay by
													Others</button>
												<button type="button"
													class="btn btn-success btn-square lh-p6 font-weight-bold"
													*ngIf="applydisc && selectedPayment.paymentMode !== 'Cash' && selectedPayment.paymentMode !== 'Other'"
													(click)="refundPayment('online')" data-dismiss="modal">Pay
													Online</button>

												<button *ngIf="applydisc" type="button"
													class="btn btn-light-primary btn-square lh-p6 font-weight-bold"
													(click)="revokeRefund()">Cancel</button>

											</div>
										</div>
									</div>
								</div>
								<!-- end -->


								<div class="hr_content" *ngIf="bill_data.amountDue >= 0">
									<div class="flx_1">Amount Due</div>
									<div class="rupee-font">{{bill_data.amountDue | currency:'&#8377;'}}</div>
								</div>
								<div class="hr_content" *ngIf="bill_data.amountDue < 0">
									<div class="flx_1">Refund</div>
									<div class="rupee-font">{{refund_value | currency:'&#8377;'}}</div>
								</div>
								<div class="hr_content" *ngIf="bill_data.refundedAmount > 0">
									<div class="flx_1">Amount Refunded</div>
									<div class="rupee-font">{{bill_data.refundedAmount | currency:'&#8377;'}}</div>
								</div>

								<div class="hr_content amount_Saved"
									*ngIf="bill_data.totalAmountSaved > 0 && bill_data.billPaymentStatus != 'FullyPaid'">
									<div class="flx_1">{{customer_label | capitalizeFirst}} will save
										{{bill_data.totalAmountSaved | currency:'&#8377;'}}</div>
								</div>

								<div class="hr_content amount_Saved"
									*ngIf="bill_data.totalAmountSaved > 0 && bill_data.billPaymentStatus == 'FullyPaid'">
									<div class="flx_1">{{customer_label | capitalizeFirst}} have saved
										{{bill_data.totalAmountSaved | currency:'&#8377;'}}</div>
								</div>
							</div>
						</div>
					</div>
					<!-- end: Invoice body-->

					<!-- begin: Invoice footer-->
					<div class="row justify-content-center bg-gray-100 ">
						<div class="col-md-12">
							<div class="d-flex justify-content-between flex-column flex-md-row font-size-lg">
								<div class="col-md-5  pt-5 pb-10 pb-md-8">
									<div class="form-group" *ngIf="showPayWorkBench">
										<!-- <textarea class="form-control form-control-solid" rows="3"></textarea> -->
										<label style="font-weight: 500;">Leave a Payment Note</label>
										<textarea class="form-control form-control-solid" rows="3"
											[(ngModel)]="paynot"></textarea>
									</div>

									<div class="d-flex flex-column flex-md-row">
										<!-- <div class="d-flex flex-column extra-bill"
											*ngIf="!showPayWorkBench && !showRefundSection">
											<button _ngcontent-tyf-c451="" type="button" onclick="window.print();"
												class="btn rounded-0 btn-light-primary font-weight-bold mb-2"
												*ngIf="bill_data.billStatus=='Settled'"
												(click)="printMe()">Print</button>

											<button type="button"
												class="btn btn-primary rounded-0 font-weight-bold mb-2"
												*ngIf="bill_data.billStatus!='Settled'"
												(click)="confirmSettleBill()">{{settle_bill_cap}}</button>

											<button type="button"
												class="btn btn-primary rounded-0 font-weight-bold mb-2"
												*ngIf="bill_data.billStatus=='Settled'"
												(click)="emailBill()">{{email_bill_cap}}</button>

											<button type="button"
												class="btn btn-primary rounded-0 font-weight-bold mb-2"
												*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0 && paymentOnline && jaldeeConsumer"
												(click)="makePayment('self_pay',bill_data.amountDue)">{{jaldeepay_cap}}</button>

											<button type="button"
												class="btn btn-primary rounded-0 font-weight-bold mb-2"
												*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0 && paymentOnline"
												(click)="paymentlink()">SMS/Email link</button>

											<button type="button"
												class="btn btn-primary rounded-0 font-weight-bold mb-2"
												*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0"
												(click)="showPayment()">{{paybycashothers_cap}}</button>
										</div> -->
										<div class="d-flex flex-row mt-1 mb-10 extra-bill" *ngIf="showPayWorkBench">
											<button type="button"
												class="btn btn-light-success font-size-sm font-weight-bold mb-2 mr-1"
												*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled'"
												(click)="initPayment('cash',amountpay,paynot)">{{paybycash_cap}}</button>
											<button type="button"
												class="btn btn-light-success font-size-sm font-weight-bold mb-2 mr-1"
												*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled'"
												(click)="initPayment('other',amountpay,paynot)">{{paybyothers_cap}}</button>
											<button type="button"
												class="btn btn-light-danger font-size-smfont-weight-bold mb-2 "
												(click)="hidePayWorkBench()">{{cancel_btn_cap}}</button>

										</div>
									</div>
								</div>
								<div class="col-md-7 pt-md-10 pb-md-4">
									<div
										class="rounded d-flex align-items-center justify-content-between bg_text_prim max-w-350px position-relative ml-auto p-7">
										<!--begin::Shape-->
										<div class="position-absolute opacity-30 top-0 right-0"><span
												class="svg-icon svg-icon-2x svg-logo-white svg-icon-flip">
												<svg xmlns="http://www.w3.org/2000/svg" width="176" height="165"
													viewBox="0 0 176 165" fill="none">
													<g clip-path="url(#clip0)">
														<path
															d="M-10.001 135.168C-10.001 151.643 3.87924 165.001 20.9985 165.001C38.1196 165.001 51.998 151.643 51.998 135.168C51.998 118.691 38.1196 105.335 20.9985 105.335C3.87924 105.335 -10.001 118.691 -10.001 135.168Z"
															fill="#AD84FF"></path>
														<path
															d="M28.749 64.3117C28.749 78.7296 40.8927 90.4163 55.8745 90.4163C70.8563 90.4163 83 78.7296 83 64.3117C83 49.8954 70.8563 38.207 55.8745 38.207C40.8927 38.207 28.749 49.8954 28.749 64.3117Z"
															fill="#AD84FF"></path>
														<path
															d="M82.9996 120.249C82.9996 144.964 103.819 165 129.501 165C155.181 165 176 144.964 176 120.249C176 95.5342 155.181 75.5 129.501 75.5C103.819 75.5 82.9996 95.5342 82.9996 120.249Z"
															fill="#AD84FF"></path>
														<path
															d="M98.4976 23.2928C98.4976 43.8887 115.848 60.5856 137.249 60.5856C158.65 60.5856 176 43.8887 176 23.2928C176 2.69692 158.65 -14 137.249 -14C115.848 -14 98.4976 2.69692 98.4976 23.2928Z"
															fill="#AD84FF"></path>
														<path
															d="M-10.0011 8.37466C-10.0011 20.7322 0.409554 30.7493 13.2503 30.7493C26.0911 30.7493 36.5 20.7322 36.5 8.37466C36.5 -3.98287 26.0911 -14 13.2503 -14C0.409554 -14 -10.0011 -3.98287 -10.0011 8.37466Z"
															fill="#AD84FF"></path>
														<path
															d="M-2.24881 82.9565C-2.24881 87.0757 1.22081 90.4147 5.50108 90.4147C9.78135 90.4147 13.251 87.0757 13.251 82.9565C13.251 78.839 9.78135 75.5 5.50108 75.5C1.22081 75.5 -2.24881 78.839 -2.24881 82.9565Z"
															fill="#AD84FF"></path>
														<path
															d="M55.8744 12.1044C55.8744 18.2841 61.0788 23.2926 67.5001 23.2926C73.9196 23.2926 79.124 18.2841 79.124 12.1044C79.124 5.92653 73.9196 0.917969 67.5001 0.917969C61.0788 0.917969 55.8744 5.92653 55.8744 12.1044Z"
															fill="#AD84FF"></path>
													</g>
												</svg>
												<!--end::Svg Icon-->
											</span></div>
										<!--end::Shape-->
										<div class="font-weight-boldest font-size-h5">TOTAL AMOUNT</div>
										<div class="text-right d-flex flex-column">
											<span *ngIf="!showPayWorkBench"
												class="font-weight-boldest font-size-h3 line-height-sm rupee-font">{{bill_data.amountDue
												| currency:'&#8377;'}}</span>

											<span *ngIf="showPayWorkBench"
												class="font-size-sm line-height-sm rupee-font">&#8377;
												<input class="form-control" type="number" id="example-number-input"
													size="5" max="{{price_limit}}" min="0" [(ngModel)]="amountpay"
													[ngModelOptions]="{standalone: true}" (keyup)="isvalid($event)"
													autocomplete="off">
											</span>
											<!-- <span class="font-size-sm">Taxes included</span> -->
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="justify-content-center border-top py-2 px-2 py- px-md-0 col-12"
							*ngIf="!showPayWorkBench && !showRefundSection">
							<div class="">
								<div class="d-flex font-size-sm flex-wrap p-1 m-5">
									<div class="col-md-6 col-lg-6 col-sm-6 col-xs-12">
										<button type="button"
											class="btn btn-light-success  font-weight-bolder mb-2 mr-3  my-1 lh-p8 fnt-p8 full_wdth"
											*ngIf="bill_data.billStatus!='Settled'"
											(click)="confirmSettleBill()">{{settle_bill_cap}}</button>
										<button type="button"
											class="full_wdth btn btn-light-info  font-weight-bolder mr-3 my-1 lh-p8 fnt-p8"
											(click)="printMe()" *ngIf="bill_data.billStatus=='Settled'">Print</button>
										<button type="button"
											class="full_wdth btn btn-light-warning   font-weight-bolder ml-sm-auto my-1 lh-p8 mr-3 fnt-p8"
											(click)="emailBill()"
											*ngIf="bill_data.billStatus=='Settled'">{{email_bill_cap}}</button>

									</div>
									<div class="col-md-6 col-lg-6 col-sm-6 col-xs-12" style="text-align: end;">
										<button type="button"
											class="full_wdth btn btn-temp-primary-light   font-weight-bold mr-3 my-1 lh-p8 fnt-p8 "
											*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0 && paymentOnline && jaldeeConsumer"
											(click)="makePayment('self_pay',bill_data.amountDue)">{{jaldeepay_cap}}</button>
										<button type="button"
											class="full_wdth btn  btn-temp-primary-light  font-weight-bold ml-sm-auto my-1 lh-p8 mr-3 fnt-p8 "
											*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0 && paymentOnline"
											(click)="paymentlink()">SMS/Email link </button>
										<button type="button"
											class="full_wdth btn  btn-temp-primary-light  font-weight-bold ml-sm-auto my-1 lh-p8 fnt-p8"
											*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0"
											(click)="showPayment()">{{paybycashothers_cap}} </button>
									</div>


								</div>
							</div>
						</div>

					</div>
					<!-- end: Invoice footer-->


					<!-- end: Invoice-->
				</div>
			</div>
			<!-- end::Card-->
		</div>
		<!--end::Container-->
	</div>
</section>

<!-- OLD Bill -->

<!-- 
<section class="">
	<div class="content comn-cls">
		<div class="col-md-12 no-padding-small">
			<div class="w-dta">
				<div class="row">
					<div class="copy one" style="width: 100%">
						<div class="col-a pl0 col-md-12 col-lg-8 col-xl-8 col-xs-12">
							<div class="card bill-section">
								<div class="bill-section-content" *ngIf="bill_data && checkin" id="receipt">
									<div class="bill-wrapper ">
										<div class="bill-header">
											<div class="section-one">
												<h3>{{bname | capitalizeFirst}}</h3>
												<div class="details" *ngIf="bill_load_complete==1">
													<div class="col-md-12 col-sm-12 col-lg-12 btm-pad" *ngIf="!source">
														<span class="dynamic"
															*ngFor="let user of checkin.waitlistingFor">
															{{user.firstName | capitalizeFirst}}
															{{user.lastName | capitalizeFirst}}

														</span>
														<span class="dynamic fl-right">{{billdate | date:'mediumDate'}}
															{{billtime}}</span>
													</div>
													<div class="col-md-12 col-sm-12 col-lg-12 btm-pad" *ngIf="source">
														<ng-container *ngIf="source === 'appt'">
															<span class="dynamic" *ngFor="let user of checkin.appmtFor">
																{{user.firstName | capitalizeFirst}}
																{{user.lastName | capitalizeFirst}}
															</span>
														</ng-container>
														<ng-container *ngIf="source === 'order'">
															<span class="dynamic">
																{{checkin.orderFor.firstName | capitalizeFirst}}
																{{checkin.orderFor.lastName | capitalizeFirst}}
															</span>
														</ng-container>
														<span class="dynamic fl-right">{{billdate | date:'mediumDate'}}
															{{billtime}}</span>
													</div>
													<div class="col-md-12 col-sm-12 col-lg-12 btm-pad">
														<span *ngIf="billnumber">
															<span class="title">{{bill_no_cap}} </span>
															<span class="dynamic">{{billnumber}}</span>
														</span>
														<span class="dynamic fl-right" *ngIf="gstnumber">
															<span class="title">{{gstin_cap}} </span>
															<span class="dynamic">{{gstnumber | capitalizeFirst}}</span>
														</span>
													</div>
													<div class="col-md-12 col-sm-12 col-lg-12 btm-pad">
														<span *ngIf="spname">
															<span class="title">{{provider_label |
																capitalizeFirst}}:</span>
															<span class="dynamic">{{spname}}</span>
														</span>
														<div class="red" *ngIf="bill_data.billStatus === 'Cancel'">

															Cancelled
														</div>
													</div>
												</div>
											</div>
										</div>
										<ng-container *ngIf="bill_data.billStatus!='Settled'">
											<div class="workbench mat-form-field-wrapper" *ngIf="pos && ((!source && checkin.waitlistStatus != 'cancelled') ||
												(source === 'appt' && checkin.apptStatus != 'Rejected' && checkin.apptStatus != 'Cancelled')
												|| (source === 'order' && bill_data.billStatus !== 'Cancel'))">
												<ng-container
													*ngIf="(!showAddItemsec && showAddItemMenuSection) || showAddItemsec || showJCouponSection">
													<div class="section-two">
														<div class="add-button"
															*ngIf="!showAddItemsec && showAddItemMenuSection">
															<span class="bill-more-mat-menu add-item">
																<button mat-icon-button [matMenuTriggerFor]="menu">
																	<mat-icon>more_vert</mat-icon>
																</button>
																<mat-menu #menu="matMenu">
																	<button mat-menu-item (click)="showDeliveryCharge()"
																		*ngIf="source==='order' && checkin.homeDelivery">
																		<span
																			*ngIf="bill_data.deliveryCharges > 0">Update
																			Delivery Charge</span>
																		<span
																			*ngIf="bill_data.deliveryCharges === 0">Add
																			Delivery Charge</span>
																	</button>
																	<button mat-menu-item
																		(click)="orderDiscountSelected()"
																		*ngIf="(discounts.length > 0)">
																		<span>{{applyorderdisc_cap}}</span>
																	</button>
																	<button mat-menu-item
																		(click)="orderPCouponSelected()"
																		*ngIf="(coupons.length >0)">
																		<span>{{applycoupon_cap}}</span>
																	</button>
																	<button *ngIf="(jCouponsList.length>0)"
																		mat-menu-item (click)="jCouponSelected()">
																		<span>{{apply_jc_cap}}</span>
																	</button>
																	<button mat-menu-item
																		(click)="disaplynoteSelected()">
																		<span
																			*ngIf="!displayNoteedit">{{add_display_note}}</span>
																		<span
																			*ngIf="displayNoteedit">{{update_display_note}}</span>
																	</button>
																	<button mat-menu-item
																		(click)="privatenoteSelected()">
																		<span
																			*ngIf="!privateNoteedit">{{add_private_note}}</span>
																		<span
																			*ngIf="privateNoteedit">{{update_private_note}}</span>
																	</button>
																</mat-menu>
															</span>
															<button class="cs-btn bt3 btn-additem"
																*ngIf="(source == 'order' && items.length > 0) || source != 'order'"
																(click)="showAddItem()">{{ad_ser_item_cap}}</button>&nbsp;
														</div>
														<ng-container *ngIf="showAddItemsec">
															<div class="add-serv-item edit-row service no-padding">
																<div class="spl col-md-8 col-sm-8 col-lg-8 no-padding">
																	<div class="item selectbox col-md-9 col-sm-8 col-lg-9 no-padding"
																		*ngIf="!(actiontype=='adjustService' || actiontype=='adjustItem')">
																		<mat-form-field class="example-full-width">
																			<input type="text" #itemservicesearch
																				aria-label="Number" matInput
																				[formControl]="itemServiceSearch"
																				(keyup)="itemServiceManualAdd('',itemServiceSearch)"
																				[matAutocomplete]="auto">
																			<mat-autocomplete #auto="matAutocomplete">
																				<ng-container
																					*ngIf="!(actiontype=='adjustService' || actiontype=='adjustItem')">
																					<ng-container
																						*ngFor="let group of ItemServiceGroupOptions | async">
																						<ng-container
																							*ngIf="group.type=='Items' || (group.type=='Services' && isServiceBillable)">
																							<mat-option
																								*ngFor="let value of group.values; let i = index"
																								[value]="value"
																								(onSelectionChange)="itemServiceSelected(group.type,value)">
																								{{ value }} <span
																									class="bill_item_service">{{(group.type=='Items')?
																									'Item' :
																									'Service'}}</span>
																							</mat-option>
																						</ng-container>
																						<mat-option
																							*ngIf="group.values.length==0 && source !== 'order'"
																							[disabled]="true">
																							<span
																								class="no-data"></span>{{no_cap}}
																							{{group.type}}
																							{{available_cap}}
																						</mat-option>
																					</ng-container>
																				</ng-container>
																			</mat-autocomplete>
																		</mat-form-field>
																	</div>
																	<div class="item selectbox col-md-9 col-sm-8 col-lg-9 no-padding"
																		*ngIf="(actiontype=='adjustService' || actiontype=='adjustItem')">
																		<div class="rightalign pad-rt-10">
																			{{selectedItemService}}</div>
																	</div>
																	<div
																		class="item qty col-md-3 col-sm-4 col-lg-3 no-padding">
																		<span class="label">{{qty_cap}}</span> <span
																			class="number">
																			<mat-form-field class="example-full-width">
																				<input type="number" min="1"
																					max="{{qty_limit}}" matInput
																					#itemserviceqty aria-label="Number"
																					(keypress)="isNumber($event)"
																					(keyup)="isvalid($event)" matInput
																					value="1" size="3"
																					[(ngModel)]="curSelItm.qty"
																					[ngModelOptions]="{standalone: true}"
																					(blur)="blurQty($event.target.value, curSelItm)">
																			</mat-form-field>
																		</span>
																	</div>
																	<div *ngIf="curSelItm.typ === 'Items' && actiontype !== 'adjustItem'"
																		class="item qty col-md-3 col-sm-4 col-lg-3 no-padding">
																		<span class="number">
																			<mat-form-field class="example-full-width">
																				<input type="text" min="0" matInput
																					aria-label="Number" maxlength="5"
																					(keypress)="isNumeric($event)"
																					max="100000"
																					(keyup)="isvalid($event)" matInput
																					[(ngModel)]="curSelItm.price"
																					[ngModelOptions]="{standalone: true}">
																			</mat-form-field>
																		</span>
																	</div>
																</div>
																<div class="spr col-md-4 col-sm-4">
																	<button class="cs-btn bt1"
																		(click)="addService_Item()">{{(actiontype=='adjustService'
																		||
																		actiontype=='adjustItem')?'Change':
																		add_btn_cap}}</button>
																	<button class="cs-btn bt2"
																		(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
																</div>
															</div>
														</ng-container>
														<ng-container *ngIf="showJCouponSection">
															<div class="add-j-coupon edit-row service">
																<div class="spl col-md-7 col-sm-7 col-lg-7 no-padding">
																	<div class="item selectbox">
																		<mat-form-field class="example-full-width">
																			<mat-select
																				[(ngModel)]="selOrderProviderjCoupon"
																				[ngModelOptions]="{standalone: true}">
																				<mat-option [value]="''">
																					{{select_jcoupon_cap}}</mat-option>
																				<mat-option
																					*ngFor="let jcoupon of jCouponsList; let i = index"
																					[value]="jcoupon">
																					{{ jcoupon.jaldeeCouponCode }}
																				</mat-option>
																			</mat-select>
																		</mat-form-field>
																	</div>
																</div>
																<div class="spr col-md-5 col-sm-5 col-lg-5 no-padding">
																	<button class="cs-btn bt1"
																		*ngIf="jCouponsList.length >0 && showJCouponSection"
																		[disabled]="selOrderProviderjCoupon==='' || disableJCouponbtn"
																		(click)="applyJCoupon(selOrderProviderjCoupon)">{{apply_cap}}</button>
																	<button class="cs-btn bt2"
																		(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
																</div>
															</div>
														</ng-container>
													</div>
												</ng-container>
												<ng-container *ngIf="showDeliveryChargeSection">
													<div class="section-two">
														<div class="bill-breakup">
															<div class="list">
																<div class="list-content">
																	<div class="c-row two">
																		<div
																			class="add-serv-item edit-row service no-padding">
																			<div
																				class="spl col-md-8 col-sm-8 col-lg-8 no-padding">
																				<div
																					class="item selectbox col-md-9 col-sm-8 col-lg-9 no-padding">
																					<div class="rightalign pad-rt-10">
																						Delivery Charge</div>
																				</div>
																				<div
																					class="item qty col-md-3 col-sm-4 col-lg-3 no-padding">
																					<span
																						class="label">{{qty_cap}}</span>
																					<span class="number">
																						<mat-form-field
																							class="example-full-width">
																							<input type="number" min="0"
																								max="{{qty_limit}}"
																								matInput #itemserviceqty
																								aria-label="Number"
																								(keypress)="isNumeric($event)"
																								(keyup)="isvalid($event)"
																								matInput value="1"
																								size="3"
																								[(ngModel)]="deliveryCharge"
																								[ngModelOptions]="{standalone: true}">
																						</mat-form-field>
																					</span>
																				</div>
																			</div>
																			<div class="spr col-md-4 col-sm-4">
																				<button class="cs-btn bt1"
																					(click)="applyDeliveryCharge()">{{apply_cap}}</button>
																				<button class="cs-btn bt2"
																					(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
																			</div>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</ng-container>
												<ng-container *ngIf="(showPCouponSection || showDiscountSection)">
													<div class="section-two">
														<div class="bill-breakup">
															<div class="list">
																<div class="list-content">
																	<div class="c-row two">
																		<div
																			class="add-serv-item edit-row service discoup">
																			<div
																				class="spr col-sm-12 col-md-12 col-lg-12 no-padding">
																				<div
																					class="spl col-md-12 col-sm-12 col-lg-12">
																					<div
																						class="item selectbox col-md-8 col-sm-8 col-lg-8 no-padding">
																						<div class="item selectbox1 prov-bill-disc"
																							*ngIf="discounts.length >0 && showDiscountSection">
																							<mat-form-field>
																								<mat-select
																									[(ngModel)]="selOrderDiscount"
																									[ngModelOptions]="{standalone: true}"
																									placeholder="{{select_discount_cap}}">
																									<mat-option
																										*ngFor="let discount of discounts; let i = index"
																										[value]="discount">
																										{{
																										discount.name
																										}}
																									</mat-option>
																								</mat-select>
																							</mat-form-field>
																						</div>
																						<div class="item selectbox1"
																							*ngIf="coupons.length >0 && showPCouponSection">
																							<mat-form-field>
																								<mat-select
																									[(ngModel)]="selOrderProviderCoupon"
																									[ngModelOptions]="{standalone: true}">
																									<mat-option
																										[value]="''">
																										{{select_coupon_cap}}
																									</mat-option>
																									<mat-option
																										*ngFor="let coupon of coupons; let i = index"
																										[value]="coupon">
																										{{ coupon.name
																										}}
																									</mat-option>
																								</mat-select>
																							</mat-form-field>
																						</div>
																					</div>
																					<div
																						class="item qty col-md-4 col-sm-4 col-lg-4 no-padding">
																						<ng-container
																							*ngIf="showDiscountSection && selOrderDiscount.discType=='OnDemand'">
																							<span
																								class="label">{{value_cap}}</span>
																							<span class="number">
																								<mat-form-field
																									class="example-full-width">
																									<input type="number"
																										matInput
																										#billdiscvalue
																										aria-label="Number"
																										max="{{price_limit}}"
																										min="0" matInput
																										value="1"
																										autocomplete="off"
																										size="3"
																										(keypress)="isNumeric($event)"
																										(keyup)="isvalid($event)"
																										[(ngModel)]="discAmount"
																										[ngModelOptions]="{standalone: true}">
																								</mat-form-field>
																							</span>

																						</ng-container>
																					</div>
																				</div>
																				<div class="col-md-12 col-sm-12 col-lg-12 notes"
																					*ngIf="showDiscountSection">
																					<div
																						class="col-md-12 col-lg-12 col-sm-12 no-padding">
																						<div class="form-group ">
																							<mat-checkbox
																								[(ngModel)]="isProvNote"
																								[ngModelOptions]="{standalone: true}">
																								{{privatenote_cap}}
																							</mat-checkbox>
																						</div>
																						<div class="form-group"
																							*ngIf="isProvNote">
																							<textarea
																								class="form-control"
																								id="message"
																								placeholder="Message"
																								[(ngModel)]="discProvNote"
																								[ngModelOptions]="{standalone: true}">
																								</textarea>
																						</div>
																					</div>
																					<div
																						class="col-md-12 col-lg-12 col-sm-12 no-padding">
																						<div class="form-group ">
																							<mat-checkbox
																								[(ngModel)]="isConsNote"
																								[ngModelOptions]="{standalone: true}">
																								{{notesfor_cap}}{{customer_label}}
																							</mat-checkbox>
																						</div>
																						<div class="form-group"
																							*ngIf="isConsNote">
																							<textarea
																								class="form-control"
																								id="message"
																								placeholder="Message"
																								[(ngModel)]="discConsNote"
																								[ngModelOptions]="{standalone: true}">
																								</textarea>
																						</div>
																					</div>
																				</div>
																				<div
																					class="col-md-12 col-sm-12 col-lg-12 notes">
																					<button
																						*ngIf="discounts.length >0 && showDiscountSection"
																						class="cs-btn bt1"
																						[class.grey-bg]="selOrderDiscount==='' || disableDiscountbtn || (selOrderDiscount.discType === 'OnDemand' && discAmount === '')"
																						[disabled]="selOrderDiscount==='' || disableDiscountbtn || (selOrderDiscount.discType === 'OnDemand' && discAmount === '')"
																						(click)="applyOrderDiscount()">{{apply_cap}}</button>
																					<button
																						*ngIf="coupons.length >0 && showPCouponSection"
																						class="cs-btn bt1"
																						[disabled]="selOrderProviderCoupon==='' || disableCouponbtn"
																						(click)="applyOrderCoupon()">{{apply_cap}}</button>
																					<button style="margin-left:5px;"
																						class="cs-btn bt2"
																						(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</ng-container>
												<ng-container *ngIf="showDisplaynoteSection || showPrivatenoteSection">
													<div class="section-two">
														<div class="bill-breakup">
															<div class="list">
																<div class="list-content">
																	<div class="c-row two">
																		<div
																			class="add-serv-item edit-row service discoup">
																			<div
																				class="spr col-sm-12 col-md-12 col-lg-12 no-padding">
																				<div
																					class="col-md-12 col-sm-12 col-lg-12 notes">
																					<div
																						class="col-md-12 col-lg-12 col-sm-12 no-padding">
																						<div class="form-group"
																							*ngIf="showDisplaynoteSection">
																							<textarea
																								class="form-control"
																								id="message"
																								placeholder="Message"
																								[(ngModel)]="billDisplayNote"
																								[ngModelOptions]="{standalone: true}"
																								(keyup)="handledisplaykeyup()">
																</textarea>
																						</div>
																						<div class="form-group"
																							*ngIf="showPrivatenoteSection">
																							<textarea
																								class="form-control"
																								id="message"
																								placeholder="Message"
																								[(ngModel)]="billPrivateNote"
																								[ngModelOptions]="{standalone: true}"
																								(keyup)="handleprivatekeyup()">
																</textarea>
																						</div>
																					</div>
																				</div>
																				<div
																					class="col-md-12 col-sm-12 col-lg-12 notes providernotes">
																					<button
																						class="cs-btn bt1 bill-add-note"
																						mat-button
																						[disabled]="displaybuttondisabled"
																						*ngIf="showDisplaynoteSection"
																						(click)="addDisplaynote()">
																						<span style="display:grid"
																							*ngIf="!displayNoteedit">{{add_note_btn}}</span>
																						<span style="display:grid"
																							*ngIf="displayNoteedit">{{update_note_btn}}</span></button>
																					<button
																						class="cs-btn bt1 bill-add-note"
																						mat-button
																						*ngIf="showPrivatenoteSection"
																						[disabled]="privatebuttondisabled"
																						(click)="addPrivatenote()">
																						<span style="display:grid"
																							*ngIf="!privateNoteedit">{{add_note_btn}}</span>
																						<span style="display:grid"
																							*ngIf="privateNoteedit">{{update_note_btn}}</span></button>
																					<button
																						class="cs-btn bt2 bill-add-note-cancel"
																						(click)="hideWorkBench()">{{cancel_btn_cap}}</button>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</ng-container>
											</div>
										</ng-container>
										<div class="bill-content">
											<div class="section-three">
												<div class="bill-breakup">
													<div class="list"
														*ngFor="let service of bill_data.service; let i = index">
														<div class="list-content">
															<div class="c-row one">
																<div class="name">
																	{{service.serviceName | capitalizeFirst}}
																	<span class="rupee-font">{{service.price |
																		currency:'&#8377;'}}</span>
																	<sup [matTooltipClass]="tooltipcls"
																		[matTooltip]="'Taxable'"
																		*ngIf="service.GSTpercentage > 0">Tax</sup>
																</div>
																<div class="quantity"
																	*ngIf="!source && bill_data.checkinStatus !== 'cancelled' ||
																	(bill_data.checkinStatus === 'cancelled' && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0))">
																	{{qnty_cap}}
																	{{service.quantity}}</div>
																<div class="quantity"
																	*ngIf="source && (bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected' ||
																	((bill_data.apptStatus === 'Cancelled' || bill_data.apptStatus === 'Rejected') && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
																	{{qnty_cap}}
																	{{service.quantity}}</div>
																<div class="price"
																	*ngIf="!source && bill_data.checkinStatus !== 'cancelled' ||
																(bill_data.checkinStatus === 'cancelled' && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0))">
																	<span class="rupee-font">{{(service.quantity *
																		service.price) |
																		currency:'&#8377;'}}</span>

																</div>
																<div class="price"
																	*ngIf="source && (bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected' ||
											((bill_data.apptStatus === 'Cancelled' || bill_data.apptStatus === 'Rejected') && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
																	<span class="rupee-font">
																		{{(service.quantity * service.price) |
																		currency:'&#8377;'}}
																	</span>
																</div>
																<div class="price"
																	style="color: red;font-size: smaller;" *ngIf="!source && bill_data.checkinStatus === 'cancelled' && bill_data.checkinedService === service.serviceId
																	&& service.quantity === 0">
																	Cancelled</div>
																<div class="price"
																	style="color: red;font-size: smaller;" *ngIf="source && (bill_data.apptStatus === 'Rejected' || bill_data.apptStatus === 'Cancelled') && bill_data.checkinedService === service.serviceId
																	&& service.quantity === 0">
																	Cancelled</div>
															</div>
															<div class="c-row two section-two">
																<div class="add-serv-item edit-row service edit-row discoup"
																	*ngIf="bill_data.service[i].showservicedisccoup">
																	<div
																		class="spr col-sm-12 col-md-12 col-lg-12 no-padding">
																		<div
																			class="spl col-md-12 col-sm-12 col-lg-12 notes">
																			<div class="item selectbox col-md-8 col-sm-8 col-lg-8 no-padding"
																				*ngIf="itemdiscounts.length > 0">
																				<div
																					class="item selectbox1 prov-bill-disc1">
																					<mat-form-field>
																						<mat-select
																							[(ngModel)]="bill_data.service[i].serviceDiscount"
																							[ngModelOptions]="{standalone: true}"
																							placeholder="{{select_discount_cap}}">
																							<mat-option
																								*ngFor="let discount of itemdiscounts; let i = index"
																								[value]="discount">
																								{{ discount.name }}
																							</mat-option>
																						</mat-select>
																					</mat-form-field>
																				</div>
																			</div>
																			<div
																				class="item qty col-md-4 col-sm-4 col-lg-4 no-padding">
																				<ng-container
																					*ngIf="bill_data.service[i].serviceDiscount.discType=='OnDemand'">
																					<span
																						class="label">{{value_cap}}</span>
																					<span class="number">
																						<mat-form-field
																							class="example-full-width">
																							<input type="text" matInput
																								#billdiscvalue
																								aria-label="Number"
																								max="{{price_limit}}"
																								min="0" matInput
																								value="1" size="3"
																								(keypress)="isNumeric($event)"
																								(keyup)="isvalid($event)"
																								[(ngModel)]="bill_data.service[i].serviceDiscount.discAmount"
																								[ngModelOptions]="{standalone: true}"
																								(blur)="blurQty($event.target.value, bill_data.service[i].serviceDiscount.discAmount)">
																						</mat-form-field>
																					</span>
																				</ng-container>
																			</div>
																		</div>
																		<div
																			class="col-md-12 col-sm-12 col-lg-12 notes">
																			<button class="cs-btn bt1"
																				[disabled]="bill_data.service[i].serviceDiscount==='' || disableButton"
																				(click)="applyServiceDiscount(bill_data.service[i])">{{apply_cap}}</button>
																			<button style="margin-left:5px;"
																				class="cs-btn bt2"
																				(click)="serviceDiscCoupSec(i)">{{cancel_btn_cap}}</button>
																		</div>
																	</div>
																</div>

																<div class="discount-row"
																	*ngFor="let discount of service.discount">
																	<div class="name">{{discount.name}}</div>
																	<div class="price">
																		<span
																			class="rupee-font">(-){{discount.discountValue
																			|
																			currency:'&#8377;'}}</span> <i
																			(click)="removeServiceDiscount(service.serviceId, discount.id)"
																			class="fa fa-window-close"
																			aria-hidden="true"></i>
																	</div>
																</div>
															</div>
															<div class="c-row three"
																*ngIf="service.discount && service.discount.length > 0">
																<div class="name">{{sub_tot_cap}}</div>
																<div class="price rupee-font">{{service.netRate |
																	currency:'&#8377;'}}</div>
															</div>
														</div>
														<div class="more"
															*ngIf="pos && !source && bill_data.billStatus!='Settled' && (bill_data.checkinStatus !== 'cancelled' ||
														(bill_data.checkinStatus === 'cancelled' && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
															<button mat-icon-button [matMenuTriggerFor]="menu">
																<mat-icon>more_vert</mat-icon>
															</button>
															<mat-menu #menu="matMenu">
																<button mat-menu-item (click)="serviceDiscCoupSec(i)"
																	*ngIf="itemdiscounts.length > 0">
																	<span>{{applydiscount_cap}}</span>
																</button>
																<button mat-menu-item
																	*ngIf="checkin.waitlistStatus != 'cancelled'"
																	(click)="adjustService(service.serviceName, service.quantity)">
																	<span>{{changeqty_cap}}</span>
																</button>
																<button mat-menu-item
																	(click)="removeService(service.serviceId, service.quantity)">
																	<span>{{removeservice_cap}}</span>
																</button>
															</mat-menu>
														</div>
														<div class="more"
															*ngIf="pos && source && bill_data.billStatus!='Settled' && (bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected' ||
														((bill_data.apptStatus === 'Cancelled' || bill_data.apptStatus === 'Rejected') && (bill_data.checkinedService !== service.serviceId || service.quantity !== 0)))">
															<button mat-icon-button [matMenuTriggerFor]="menu">
																<mat-icon>more_vert</mat-icon>
															</button>
															<mat-menu #menu="matMenu">
																<button mat-menu-item (click)="serviceDiscCoupSec(i)"
																	*ngIf="itemdiscounts.length > 0">
																	<span>{{applydiscount_cap}}</span>
																</button>
																<button mat-menu-item
																	*ngIf="bill_data.apptStatus !== 'Cancelled' && bill_data.apptStatus !== 'Rejected'"
																	(click)="adjustService(service.serviceName, service.quantity)">
																	<span>{{changeqty_cap}}</span>
																</button>
																<button mat-menu-item
																	(click)="removeService(service.serviceId, service.quantity)">
																	<span>{{removeservice_cap}}</span>
																</button>
															</mat-menu>
														</div>

													</div>
													<div class="list"
														*ngFor="let item of bill_data.items; let i = index">
														<div class="list-content">
															<div class="c-row one">
																<div class="name">
																	{{item.itemName | capitalizeFirst}}
																	<span
																		class="rupee-font">{{item.price|currency:'&#8377;'}}</span>
																	<sup [matTooltipClass]="tooltipcls"
																		[matTooltip]="'Taxable'"
																		*ngIf="item.GSTpercentage > 0">Tax</sup>
																</div>
																<div class="quantity">
																	{{qnty_cap}}
																	{{item.quantity}}</div>
																<div class="price rupee-font">{{(item.quantity *
																	item.price) |
																	currency:'&#8377;'}}</div>
															</div>
															<div class="c-row two section-two">

																<div class="add-serv-item edit-row service edit-row discoup"
																	*ngIf="bill_data.items[i].showitemdisccoup">
																	<div
																		class="spr  col-sm-12 col-md-12 col-lg-12 no-padding">
																		<div
																			class="spl col-md-12 col-sm-12 col-lg-12 notes">
																			<div class="item selectbox col-md-8 col-sm-8 col-lg-8 no-padding"
																				*ngIf="discounts.length > 0">
																				<div class="item selectbox1">
																					<mat-form-field>
																						<mat-select
																							[(ngModel)]="bill_data.items[i].itemDiscount"
																							[ngModelOptions]="{standalone: true}"
																							placeholder="{{select_discount_cap}}">
																							<mat-option
																								*ngFor="let discount of itemdiscounts; let i = index"
																								[value]="discount">
																								{{ discount.name }}
																							</mat-option>
																						</mat-select>
																					</mat-form-field>
																				</div>
																			</div>
																			<div
																				class="item qty col-md-4 col-sm-4 col-lg-4 no-padding">

																			</div>
																		</div>
																		<div
																			class="col-md-12 col-sm-12 col-lg-12 notes">
																			<button class="cs-btn bt1"
																				[disabled]="bill_data.items[i].itemDiscount==='' || disableitembtn"
																				(click)="applyItemDiscount(bill_data.items[i])">{{apply_cap}}</button>
																			<button style="margin-left:5px;"
																				class="cs-btn bt2"
																				(click)="itemDiscCoupSec(i)">{{cancel_btn_cap}}</button>
																		</div>
																	</div>
																</div>

																<div class="discount-row"
																	*ngFor="let discount of item.discount">
																	<div class="name">{{discount.name}}</div>
																	<div class="price rupee-font">
																		(-){{discount.discountValue |
																		currency:'&#8377;'}} <i
																			(click)="removeItemDiscount(item.itemId, discount.id)"
																			class="fa fa-window-close"
																			aria-hidden="true"></i></div>
																</div>
															</div>
															<div class="c-row three"
																*ngIf="item.discount &&item.discount.length > 0">
																<div class="name">{{sub_tot_cap}}</div>
																<div class="price rupee-font">{{item.netRate |
																	currency:'&#8377;'}}</div>
															</div>
														</div>
														<div class="more"
															*ngIf="bill_data.billStatus!='Settled' && pos">
															<button mat-icon-button [matMenuTriggerFor]="menu">
																<mat-icon>more_vert</mat-icon>
															</button>
															<mat-menu #menu="matMenu">
																<button mat-menu-item (click)="itemDiscCoupSec(i)"
																	*ngIf="itemdiscounts.length > 0">
																	<span>{{applydiscount_cap}}</span>
																</button>
																<button mat-menu-item
																	*ngIf="bill_data.billStatus !== 'Cancel'"
																	(click)="adjustItem(item.itemName, item.quantity)">
																	<span>{{changeqty_cap}}</span>
																</button>
																<button mat-menu-item
																	(click)="removeItem(item.itemId, item.quantity)">
																	<span>{{removeitem_cap}}</span>
																</button>
															</mat-menu>
														</div>
													</div>
												</div>
												<div class="amount-table">
													<div class="amt-content">
														<table class="amt-content">
															<tbody>
																<tr class="amt gross">
																	<td class="name">{{gross_amnt_cap}}</td>
																	<td class="price rupee-font">
																		{{bill_data.netTotal | currency:'&#8377;'}}
																	</td>
																</tr>
																<tr class="amt discount"
																	*ngIf="bill_data.jdn && bill_data.jdn.discount">
																	<td class="name">JDN</td>
																	<td class="price rupee-font">
																		(-){{bill_data.jdn.discount|
																		currency:'&#8377;'}} </td>
																</tr>
																<tr class="amt discount"
																	*ngFor="let discount of bill_data.discount">
																	<td class="name">{{discount.name}}</td>
																	<td class="price rupee-font">(-){{discount.discValue
																		|
																		currency:'&#8377;'}} <i
																			*ngIf="bill_data.billStatus!='Settled'"
																			(click)="removeOrderDiscount(discount)"
																			class="fa fa-window-close"
																			aria-hidden="true"></i></td>
																</tr>
																<tr class="amt coupon"
																	*ngFor="let coupon of bill_data.providerCoupon">
																	<td class="name">{{coupon.name}}</td>
																	<td class="price rupee-font">(-){{coupon.couponValue
																		|
																		currency:'&#8377;'}} <i
																			*ngIf="bill_data.billStatus!='Settled'"
																			(click)="removeProviderCoupon(coupon)"
																			class="fa fa-window-close"
																			aria-hidden="true"></i></td>
																</tr>
																<tr class="amt discount"
																	*ngFor="let jcoupon of bill_data.jCoupon | keyvalue">
																	<td class="name">{{jcoupon.key}} (Jaldee Coupon)
																	</td>
																	<td class="price rupee-font">(-)
																		<span (click)="showJCCouponNote(jcoupon)"
																			[class.couponAmt]="jcoupon.value.value === '0.0'"
																			style="margin-right: 5px">{{jcoupon.value.value
																			|
																			currency:'&#8377;'}}</span> <i
																			*ngIf="bill_data.billStatus!='Settled'"
																			(click)="removeJCoupon(jcoupon.key)"
																			class="fa fa-window-close"
																			aria-hidden="true"></i>
																	</td>
																</tr>
																<tr class="amt tax" *ngIf="bill_data.taxableTotal">
																	<td class="name"><span class="tax-top">Tax
																			{{bill_data.taxPercentage}}% of

																			<span class="rupee-font">
																				{{bill_data.taxableTotal |
																				currency:'&#8377;'}}
																			</span> </span><span
																			class="txn">(CGST-{{bill_data.taxPercentage/2}}%,
																			SGST-{{bill_data.taxPercentage/2}}%)</span>
																	</td>
																	<td class="price rupee-font">
																		(+){{bill_data.totalTaxAmount |
																		currency:'&#8377;'}}</td>
																</tr>
																<tr class="amt discount"
																	*ngIf="bill_data.deliveryCharges > 0">
																	<td class="name"><span class="tax-top">Delivery
																			Charge </span>
																	</td>
																	<td class="price rupee-font">
																		(+){{bill_data.deliveryCharges |
																		currency:'&#8377;'}}</td>
																</tr>
																<tr class="amt gross">
																	<td class="name">{{nettotal_cap}}</td>
																	<td class="price  rupee-font">{{bill_data.netRate |
																		currency:'&#8377;'}}</td>
																</tr>
																<tr class="amt paid"
																	*ngIf="bill_data.totalAmountPaid > 0">
																	<td class="name"><span class="link"
																			(click)="showpaidSection()">{{amount_paid_cap}}</span>
																	</td>
																	<td class="price rupee-font">
																		{{bill_data.totalAmountPaid |
																		currency:'&#8377;'}}</td>
																</tr>
																<tr class="amt total" *ngIf="bill_data.amountDue >= 0">
																	<td class="name">{{amountdue_cap}}</td>
																	<td class="price rupee-font">{{bill_data.amountDue |
																		currency:'&#8377;'}}</td>
																</tr>
																<tr class="amt total" *ngIf="bill_data.amountDue < 0">
																	<td class="name">Refund</td>
																	<td class="price rupee-font">{{refund_value |
																		currency:'&#8377;'}}</td>
																</tr>
																<tr class="amt total"
																	*ngIf="bill_data.refundedAmount > 0">
																	<td class="name">Amount Refunded</td>
																	<td class="price rupee-font">
																		{{bill_data.refundedAmount |
																		currency:'&#8377;'}}</td>
																</tr>
																<tr class="amountSaved"
																	*ngIf="bill_data.totalAmountSaved > 0 && bill_data.billPaymentStatus != 'FullyPaid'">
																	<td class="price rupee-font">{{customer_label |
																		capitalizeFirst}} will
																		save
																		{{bill_data.totalAmountSaved |
																		currency:'&#8377;'}}
																	</td>
																</tr>
																<tr class="amountSaved"
																	*ngIf="bill_data.totalAmountSaved > 0 && bill_data.billPaymentStatus == 'FullyPaid'">
																	<td class="price rupee-font">{{customer_label |
																		capitalizeFirst}} have
																		saved
																		{{bill_data.totalAmountSaved |
																		currency:'&#8377;'}}
																	</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
												<div class="section-four lg-tbl no-padding-small" *ngIf="showPaidlist">
													<div class="heading">
														<span class="back"
															(click)="showpaidSection()">{{back_cap}}</span>
														<h4>{{payment_logs_cap}}</h4>
													</div>
													<div class="list-outer">
														<div class="table-th">
															<div class="th one">{{date_cap}}</div>
															<div class="th two">{{amount_cap}}</div>
															<div class="th three"
																*ngIf="bill_data.billStatus!='Settled'">
																{{refundable_cap}}</div>
														</div>
														<div class="listing"
															*ngFor="let payment of pre_payment_log; let i = index">
															<div class="wrap">
																<div class="td one">

																	<span class="date">{{payment.paymentOn | date:
																		dateFormat}}</span>
																	<span class="time">{{payment.paymentTime}}</span>
																</div>
																<div class="td two">
																	<span class="amt rupee-font">{{payment.amount |
																		currency:'&#8377;'}}</span> <span
																		class="others"> <span class="status"> <span
																				class="title">{{status_cap}}</span>
																			<span><span
																					[class]="payment.status | lowercase">{{payment.status
																					| capitalizeFirst}}</span></span>
																		</span>
																		<span class="mode">
																			<span class="title">Payment Mode</span>
																			<span>{{payment.acceptPaymentBy |
																				capitalizeFirst}}<ng-container *ngIf="payment.paymentMode &&
																				payment.acceptPaymentBy != payment.paymentMode.toLowerCase()">/{{payment.paymentMode}}
																				</ng-container>
																			</span>
																		</span>
																		<span class="mode"
																			*ngIf="payment.paymentGateway">
																			<span class="title">Payment Gateway</span>
																			<span>{{payment.paymentGateway}}</span>
																		</span>
																	</span>
																</div>
																<div class="td three"
																	*ngIf="bill_data.billStatus!='Settled'">
																	<span class="amt rupee-font"
																		*ngIf="payment.refundableAmount > 0 && payment.status === 'SUCCESS' && payment.paymentPurpose == 'prePayment'">{{payment.refundableAmount
																		|
																		currency:'&#8377; '}}</span>
																	<button class="cs-btn bt3"
																		(click)="showRefund(payment)"
																		*ngIf="payment.refundableAmount > 0 && payment.status === 'SUCCESS' && payment.paymentPurpose == 'prePayment'">Refund</button>
																</div>
															</div>
															<div class="refunds-table"
																*ngIf="payment.refundDetails.length">
																<div class="table-th">
																	<h5>{{refunds_cap}}</h5>
																</div>
																<div class="table-th1">
																	<div class="th one">{{status_cap}}</div>
																	<div class="th two">{{mode_cap}}</div>
																	<div class="th three">{{amount_cap}}</div>
																</div>
																<div class="tbody"
																	*ngFor="let refund of payment.refundDetails">
																	<div class="td one">
																		<span
																			[class]="refund.status | lowercase">{{refund.status
																			| capitalizeFirst}}</span>
																	</div>
																	<div class="td two">
																		{{refund.refundMode | capitalizeFirst }}</div>
																	<div class="td three rupee-font">{{refund.amount |
																		currency:'&#8377;' }}</div>
																</div>
															</div>
														</div>

													</div>
												</div>
											</div>
										</div>
										<div class="section-three" *ngIf="bill_data && billNotesExists">
											<a class="learnmore-pointer" id="customer-help"
												(click)="billNotesClicked()">Bill notes</a>
											<div class="bill-notes"
												*ngIf="showBillNotes && (discountDisplayNotes || bill_data.displayNotes)">
												<div>Notes for {{customer_label}}:</div>
												<ul>
													<li *ngIf="bill_data.displayNotes">
														{{bill_data.displayNotes.displayNotes}}</li>
													<div class *ngFor="let discount of bill_data.discount">
														<li *ngIf="discount.displayNote">
															<span style="font-weight: 600"> {{discount.name}} - </span>
															{{discount.displayNote}}
														</li>
													</div>
												</ul>
											</div>
											<div class="bill-notes"
												*ngIf="showBillNotes && (discountPrivateNotes || bill_data.privateNotes)">
												<div>Private note:</div>
												<ul>
													<li *ngIf="bill_data.privateNotes">
														{{bill_data.privateNotes.privateNotes}}</li>
													<div class *ngFor="let discount of bill_data.discount">
														<li *ngIf="discount.privateNote">
															<span style="font-weight: 600"> {{discount.name}} - </span>
															{{discount.privateNote}}
														</li>
													</div>
												</ul>
											</div>
										</div>
										<div class="actiondiv bill_btns" *ngIf="pos">
											<ng-container *ngIf="showPayWorkBench">
												<div class="section-two pay-wb" style="display: flex;">
													<div class="add-serv-item edit-row service no-padding">
														<div class="spl no-padding">
															<div class="item qty no-padding" style="margin-left: 0px;">
																<span class="label"
																	style="font-size:.875rem;color: #000;">{{wbamount_cap}}</span>
																<span class="number">
																	<mat-form-field class="example-full-width">
																		<span matPrefix class="rupee-font"
																			style="font-size: larger;">  &nbsp;</span>
																		<mat-form-field class="bill-ip">
																			<input type="number" matInput #payamounttxt
																				aria-label="Number" matInput value="1"
																				size="5" max="{{price_limit}}" min="0"
																				[(ngModel)]="amountpay"
																				[ngModelOptions]="{standalone: true}"
																				(keyup)="isvalid($event)"
																				autocomplete="off">
																		</mat-form-field>
																	</mat-form-field>
																</span>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-12 p0">
													<div class="col-md-6 p0">
														<mat-form-field>
															<label style="font-weight: 500;">Leave a Payment Note
															</label>
															<textarea matInput style="margin-bottom: 10px;"
																[(ngModel)]="paynot"></textarea>
														</mat-form-field>
													</div>
												</div>
												<div>
													<button type="button" mat-button class="cs-btn bt1 accept"
														*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled'"
														(click)="initPayment('cash',amountpay,paynot)">{{paybycash_cap}}</button>
													<button type="button" mat-button class="cs-btn bt1 accept"
														*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled'"
														(click)="initPayment('other',amountpay,paynot)">{{paybyothers_cap}}</button>
													<button type="button" mat-button class="cs-btn bt2 cancel"
														(click)="hidePayWorkBench()">{{cancel_btn_cap}}</button>
												</div>
											</ng-container>
											<ng-container *ngIf="showRefundSection">
												<div class="section-two pay-wb" style="display: flex;">
													<div class="add-serv-item edit-row service no-padding">
														<div class="spl no-padding">
															<div class="item qty no-padding" style="margin-left: 0px;">
																<span class="label"
																	style="font-size:.875rem;color: #000;">{{wbamount_cap}}</span>
																<span class="number">
																	<mat-form-field class="example-full-width">
																		<span matPrefix class="rupee-font"
																			style="font-size: larger;"> &nbsp;</span>
																		<mat-form-field class="bill-ip">
																			<input type="number" matInput #payamounttxt
																				aria-label="Number" matInput value="1"
																				size="5" max="{{price_limit}}" min="0"
																				[(ngModel)]="amounttoRefund"
																				[ngModelOptions]="{standalone: true}"
																				(keyup)="isvalid($event)"
																				autocomplete="off">
																		</mat-form-field>
																	</mat-form-field>
																</span>
															</div>
														</div>
													</div>
												</div>
												<div>
													<button type="button" mat-button class="cs-btn bt1 accept"
														(click)="refundPayment('cash')">Pay by Cash</button>
													<button type="button" mat-button class="cs-btn bt1 accept"
														(click)="refundPayment('other')">Pay by Others</button>
													<button type="button"
														*ngIf="selectedPayment.paymentMode !== 'Cash' && selectedPayment.paymentMode !== 'Other'"
														mat-button class="cs-btn bt1 accept"
														(click)="refundPayment('online')">Pay Online</button>
													<button type="button" mat-button class="cs-btn bt2 cancel"
														(click)="showRefund()">{{cancel_btn_cap}}</button>
												</div>
											</ng-container>
											<div>
												<p class="hint"
													*ngIf="bill_data.billViewStatus == 'Notshow' && bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0 && paymentOnline && jaldeeConsumer && !showPayWorkBench && !showRefundSection">
													*Click on Pay By Jaldee App to send the updated bill to your
													{{customer_label}}.
												</p>
											</div>
											<div class="col-12 button-group"
												*ngIf="!showPayWorkBench && !showRefundSection">
												<button type="button" mat-button class="cs-btn bt1 settle"
													*ngIf="bill_data.billStatus!='Settled'"
													(click)="confirmSettleBill()">{{settle_bill_cap}}</button>
												<button type="button" mat-button class="cs-btn bt1 print"
													*ngIf="bill_data.billStatus=='Settled'"
													(click)="emailBill()">{{email_bill_cap}}</button>
												<button type="button" mat-button class="d-lg-block cs-btn bt1 print"
													*ngIf="bill_data.billStatus=='Settled'"
													(click)="printMe()">Print</button>
												<button type="button" mat-button class="cs-btn bt1 accept"
													*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0 && paymentOnline && jaldeeConsumer"
													(click)="makePayment('self_pay',bill_data.amountDue)">{{jaldeepay_cap}}</button>
												<button type="button" mat-button class="cs-btn bt1 accept"
													*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0 && paymentOnline"
													(click)="paymentlink()">SMS/Email link</button>
												<button type="button" mat-button class="cs-btn bt1 accept"
													*ngIf="bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus == 'New' && bill_data.billStatus!='Settled' && bill_data.amountDue > 0"
													(click)="showPayment()">{{paybycashothers_cap}}</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="clearfix"></div>
	</div>
</section> -->