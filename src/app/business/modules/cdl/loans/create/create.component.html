<div class="card pointer-cursor d-flex justify-content-between">
  <div class="d-flex align-items-center">
    <span (click)="goBack()"><i class="fa fa-angle-left"></i>&nbsp;&nbsp;Back</span>
  </div>
</div>

<div class="clearfix"></div>
<div class="card m-2">
  <!-- <div class="text-right">
    <div>
      <span class="font-weight-bold score">&nbsp;{{calculatedMafilScore}}</span>
    </div>
  </div> -->
  <div class="col-md-7 d-flex justify-content-between pl-0">
    <div class="d-flex align-items-center">
      <span class="font-weight-bold">&nbsp;{{headerText}}</span>
    </div>

    <div class="d-flex">
      <div class="mr-2 my-auto" (click)="closeAll()" *ngIf="allPanelsExpanded">
        <a class="btn btn-light">
          Close all
        </a>
      </div>
      <div *ngIf="!allPanelsExpanded">
        <a class="btn btn-primary open-all-btn" (click)="expandAll()">
          Expand all
        </a>
      </div>
    </div>
  </div>
  <div class="clearfix"></div>
  <br>
  <form [formGroup]="createLoan" enctype="multipart/form-data">
    <div class="row">
      <div class="col-md-7">

        <mat-accordion>
          <mat-expansion-panel [expanded]="customerDetailsPanel" (opened)="customerDetailsPanel = true"
            (closed)="customerDetailsPanel = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <div class="d-flex justify-content-center">
                  <div *ngIf="customerDetailsVerified">
                    <img width="30" height="30" src="../../../../assets/images/cdl/check-mark.png">
                  </div>
                  <div class="d-flex align-items-center">
                    Customer Details
                  </div>
                </div>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div>
              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Customer First Name <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #firstname
                        type="text" placeholder="Enter Customer First Name as in Pan Card" class="form-control"
                        autocomplete="off" formControlName="firstname" />
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Customer Last Name <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #lastname
                        type="text" placeholder="Enter Customer Last Name as in Pan Card" class="form-control"
                        autocomplete="off" formControlName="lastname" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Date of Birth <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #dob type="date"
                        class="form-control" autocomplete="off" formControlName="dob" />
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Gender <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" #gender formControlName="gender">
                        <mat-option [value]="gender.name" *ngFor="let gender of genders">
                          <div *ngIf="gender && gender.displayName">{{gender.displayName}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Phone Number <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <div class="d-flex">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                          placeholder="Enter Phone Number" class="form-control" autocomplete="off" #phone
                          [value]="phone" formControlName="phone"
                          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                          maxlength="10" [class.disabled]="verification" [class.disabled]="disablePhone" />
                        <a class="btn btn-verify" [class.btn-verified]="verification" *ngIf="!verification"
                          (click)="verifyotp()"><span>Verify</span></a>

                        <a class="btn btn-verify" *ngIf="verification" [class.btn-verified]="verification">
                          <span *ngIf="verification"><i class="fa fa-check"></i>&nbsp;Verified</span></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Email</div>
                    </div>
                    <div class="fieldPadding">
                      <div class="d-flex">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #email
                          [value]="email" type="email" placeholder="Enter Customer Email" class="form-control"
                          autocomplete="off" formControlName="email" [class.disabled]="emailverification" />

                        <a class="btn btn-verify" [class.btn-verified]="emailverification" *ngIf="!emailverification"
                          (click)="verifyEmail()"><span>Verify</span></a>

                        <a class="btn btn-verify" *ngIf="emailverification" [class.btn-verified]="emailverification">
                          <span *ngIf="emailverification"><i class="fa fa-check"></i>&nbsp;Verified</span></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>





              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Customer Photo <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding photo-border">
                      <div class="file"
                        *ngIf="!(selectedFiles['photo'] && selectedFiles['photo'].files && selectedFiles['photo'].files.length > 0)">
                        <label for='photoAttach' (click)="photoAttach.click()">
                          <!-- <i class="material-icons">cloud_upload</i> -->
                          Upload File
                        </label>
                        <input #photoAttach type='file' formControlName="customerphoto"
                          (change)="filesSelected($event,'photo')" accept="image/*;capture=camera" />
                      </div>
                      <div class="img-section clearfix"
                        *ngIf="selectedFiles['photo'] && selectedFiles['photo'].files && selectedFiles['photo'].files.length > 0">
                        <ul class="galul">
                          <li *ngFor="let file of selectedFiles['photo'].files;let i = index ">
                            <div class="galimg_outer">
                              <div class="gal_img pointer-cursor">
                                <img [src]="getImage(selectedFiles['photo'].base64[i], file)"
                                  *ngIf="selectedFiles['photo'].base64[i]" width="100px" height="100px">
                                <a [href]="file.s3path" target="_blank">
                                  <img [src]="file.s3path" *ngIf="!selectedFiles['photo'].base64[i] && file.s3path"
                                    width="100px" height="100px">
                                </a>
                              </div>
                              <div class="gal_action" (click)="deleteTempImage(i, 'photo',file)">
                                <i class=" fa fa-times-circle" aria-hidden="true"></i>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <button type="button"
                [disabled]="(!verification || !(selectedFiles && selectedFiles['photo'] && selectedFiles['photo'].files && selectedFiles['photo'].files.length > 0)) || disableBtn"
                class="btn btn-primary open-all-btn" (click)="saveCustomerDetails()">Save</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <br>

        <mat-accordion>
          <mat-expansion-panel [expanded]="kycDetailsPanel" (opened)="kycDetailsPanel = true"
            (closed)="kycDetailsPanel = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <div class="d-flex justify-content-center">
                  <div *ngIf="kycDetailsSaved">
                    <img width="30" height="30" src="../../../../assets/images/cdl/check-mark.png">
                  </div>
                  <div class="d-flex align-items-center">
                    KYC Details
                  </div>
                </div>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div>
              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Aadhar Number<span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <div class="d-flex">
                        <!-- [type]="aadharVerfied ? 'text':'number'" -->
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #aadharnumber
                          type="text" placeholder="Enter Aadhar Number" class="form-control" autocomplete="off"
                          formControlName="aadharnumber" [value]="aadharnumber"
                          [class.disabled]="action == 'update' && aadharverification && !verifyingUID"
                          oninput="javascript: if (this.value.length > this.maxLength || typeof(this.value)=='String') {this.value = this.value.slice(0, this.maxLength);}"
                          maxlength="12" />

                        <a class="btn btn-verify" [class.btn-verified]="aadharverification"
                          *ngIf="!aadharverification && !verifyingUID" (click)="idVerification('UID')"
                          [class.disabled]="documentVerifying"><span>Verify</span></a>

                        <a class="btn btn-verify" [class.btn-verified]="aadharverification" *ngIf="verifyingUID"
                          (click)="refreshAadharVerify()"><span>Refresh</span></a>

                        <a class="btn btn-verify" *ngIf="!verifyingUID && aadharverification"
                          [class.btn-verified]="aadharverification">
                          <span *ngIf="aadharverification"><i class="fa fa-check"></i>&nbsp;Verified</span></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="fieldPadding">
                      <div class="file" *ngIf="!aadharverification || verifyingUID">
                        <label for='input-file' (click)="aadharAttach.click()">
                          Upload File
                        </label>
                        <input #aadharAttach type='file' (change)="filesSelected($event, 'aadhar')"
                          accept="image/*;capture=camera" />
                      </div>
                      <div class="img-section clearfix"
                        *ngIf="selectedFiles['aadhar'] && selectedFiles['aadhar'].files && selectedFiles['aadhar'].files.length > 0">
                        <ul class="galul">
                          <li *ngFor="let file of selectedFiles['aadhar'].files;let i = index ">
                            <div class="galimg_outer">
                              <div class="gal_img pointer-cursor">
                                <img [src]="getImage(selectedFiles['aadhar'].base64[i], file)"
                                  *ngIf="selectedFiles['aadhar'].base64[i]" width="100px" height="100px">
                                <a [href]="file.s3path" target="_blank">
                                  <img [src]="getImagefromUrl(file.s3path,file)"
                                    *ngIf="!selectedFiles['aadhar'].base64[i] && file.s3path" width="100px"
                                    height="100px">
                                </a>
                              </div>
                              <div class="gal_action" *ngIf="!aadharverification"
                                (click)="deleteTempImage(i, 'aadhar',file)">
                                <i class=" fa fa-times-circle" aria-hidden="true"></i>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Pan Number <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <div class="d-flex">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #pannumber
                          [value]="pannumber" type="text" placeholder="Enter PAN Number" class="form-control"
                          autocomplete="off" formControlName="pannumber"
                          [class.disabled]="action == 'update' && panverification" maxlength="10" />

                        <a class="btn btn-verify" [class.btn-verified]="panverification" *ngIf="!panverification"
                          (click)="idVerification('Pan')" [class.disabled]="documentVerifying"><span>Verify</span></a>

                        <a class="btn btn-verify" *ngIf="panverification" [class.btn-verified]="panverification">
                          <span *ngIf="panverification"><i class="fa fa-check"></i>&nbsp;Verified</span></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <!-- <div class="d-flex">
                        <div class="form-title">Aadhar Atachment</div>
                      </div> -->
                    <div class="fieldPadding">
                      <div class="file" *ngIf="!panverification">
                        <label for='input-file' (click)="panAttach.click()">
                          <!-- <i class="material-icons">cloud_upload</i> -->
                          Upload File
                        </label>
                        <input #panAttach type='file' formControlName="panattachment"
                          (change)="filesSelected($event, 'pan')" accept="image/*;capture=camera" />
                      </div>
                      <div class="img-section clearfix"
                        *ngIf="selectedFiles['pan'] && selectedFiles['pan'].files && selectedFiles['pan'].files.length > 0">
                        <ul class="galul">
                          <li *ngFor="let file of selectedFiles['pan'].files;let i = index ">
                            <div class="galimg_outer">
                              <div class="gal_img pointer-cursor">
                                <img [src]="getImage(selectedFiles['pan'].base64[i], file)"
                                  *ngIf="selectedFiles['pan'].base64[i]" width="100px" height="100px">
                                <a [href]="file.s3path" target="_blank">
                                  <img [src]="getImagefromUrl(file.s3path,file)"
                                    *ngIf="!selectedFiles['pan'].base64[i] && file.s3path" width="100px" height="100px">
                                </a>
                              </div>
                              <div *ngIf="!panverification" class="gal_action" (click)="deleteTempImage(i, 'pan',file)">
                                <i class=" fa fa-times-circle" aria-hidden="true"></i>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>



              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Permanent Relation Type</div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" placeholder="" #permanentRelationType
                        formControlName="permanentRelationType">
                        <mat-option [value]="relation.relationEnum" *ngFor="let relation of addressRelations">
                          <div *ngIf="relation && relation.relationName">{{relation.relationName}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Permanent Relation Name</div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                        #permanentRelationName placeholder="Enter Permanent Relation Name" class="form-control"
                        autocomplete="off" formControlName="permanentRelationName" />
                    </div>
                  </div>
                </div>
              </div>



              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Address 1 <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                        [value]="permanentaddress1" #permanentaddress1 [value]="address1" type="text"
                        placeholder="Enter Address 1" class="form-control" autocomplete="off"
                        formControlName="permanentaddress1" />
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Address 2</div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                        [value]="permanentaddress2" #permanentaddress2 [value]="address2" type="text"
                        placeholder="Enter Address 2" class="form-control" autocomplete="off"
                        formControlName="permanentaddress2" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">District <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                        [value]="permanentcity" #permanentcity type="text" placeholder="Enter District"
                        class="form-control" autocomplete="off" formControlName="permanentcity" />
                    </div>
                  </div>
                </div>
              </div>

              <!-- <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">State</div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #permanentstate [value]="permanentstate" type="text"
                        placeholder="Enter State" class="form-control" autocomplete="off"
                        formControlName="permanentstate" />
                    </div>
                  </div>
                </div>
              </div> -->

              <div class="bggrey my-2" *ngIf="stateList">
                <div>
                  <div class="d-flex">
                    <div class="form-title">State <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #permanentstate formControlName="permanentstate">
                      <mat-option [value]="state.displayName" *ngFor="let state of stateList">
                        <div *ngIf="state && state.displayName">{{state.displayName}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Pincode <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #permanentpincode
                        [value]="permanentpincode" type="text" placeholder="Enter Pincode" class="form-control"
                        autocomplete="off" formControlName="permanentpincode"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                        maxlength="6" />
                    </div>
                  </div>
                </div>
              </div>



              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="fieldPadding">
                      <div class="form-check">
                        <input class="form-check-input" [checked]="addresscheck" type="checkbox" value=""
                          (change)="addresschange($event)">
                        <span class="form-check-label" for="flexCheckDefault">
                          Use this Address as current
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>




              <div *ngIf="showaddressfields">

                <div>
                  <div class="bggrey my-2">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">Current Relation Type</div>
                      </div>
                      <div class="fieldPadding">
                        <mat-select class="form-control widthWebKit" placeholder="" #currentRelationType
                          formControlName="currentRelationType">
                          <mat-option [value]="relation.relationEnum" *ngFor="let relation of addressRelations">
                            <div *ngIf="relation && relation.relationName">{{relation.relationName}}</div>
                          </mat-option>
                        </mat-select>
                      </div>
                    </div>
                  </div>
                </div>

                <div>
                  <div class="bggrey my-2">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">Current Relation Name</div>
                      </div>
                      <div class="fieldPadding">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                          #currentRelationName placeholder="Enter Current Relation Name" class="form-control"
                          autocomplete="off" formControlName="currentRelationName" />
                      </div>
                    </div>
                  </div>
                </div>


                <div>
                  <div class="bggrey my-2">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">Current Address 1</div>
                      </div>
                      <div class="fieldPadding">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                          [value]="currentaddress1" #currentaddress1 type="text" placeholder="Enter Address 1"
                          class="form-control" autocomplete="off" formControlName="currentaddress1" />
                      </div>
                    </div>
                  </div>
                </div>


                <div>
                  <div class="bggrey my-2">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">Current Address 2</div>
                      </div>
                      <div class="fieldPadding">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                          [value]="currentaddress2" #currentaddress2 type="text" placeholder="Enter Address 2"
                          class="form-control" autocomplete="off" formControlName="currentaddress2" />
                      </div>
                    </div>
                  </div>
                </div>

                <div>
                  <div class="bggrey my-2">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">Current Address District</div>
                      </div>
                      <div class="fieldPadding">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                          [value]="currentcity" #currentcity type="text" placeholder="Enter District"
                          class="form-control" autocomplete="off" formControlName="currentcity" />
                      </div>
                    </div>
                  </div>
                </div>

                <div *ngIf="stateList">
                  <div class="bggrey my-2">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">Current Address State</div>
                      </div>
                      <div class="fieldPadding">
                        <!-- <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" [value]="currentstate" #currentstate type="text"
                          placeholder="Enter State" class="form-control" autocomplete="off"
                          formControlName="currentstate" /> -->
                        <mat-select class="form-control widthWebKit" #currentstate formControlName="currentstate">
                          <mat-option [value]="state.displayName" *ngFor="let state of stateList">
                            <div *ngIf="state && state.displayName">{{state.displayName}}</div>
                          </mat-option>
                        </mat-select>
                      </div>
                    </div>
                  </div>
                </div>


                <div>
                  <div class="bggrey my-2">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">Current Address Pincode</div>
                      </div>
                      <div class="fieldPadding">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                          [value]="currentpincode" #currentpincode type="text" placeholder="Enter Pincode"
                          class="form-control" autocomplete="off" formControlName="currentpincode" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <button class="btn btn-primary open-all-btn" (click)="saveAddress()"
                [disabled]="!aadharverification || !panverification">Save</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>






        <br>

        <mat-accordion>
          <mat-expansion-panel [expanded]="loanDetailsPanel" (opened)="loanDetailsPanel = true"
            (closed)="loanDetailsPanel = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <div class="d-flex justify-content-center">
                  <div *ngIf="loanDetailsSaved">
                    <img width="30" height="30" src="../../../../assets/images/cdl/check-mark.png">
                  </div>
                  <div class="d-flex align-items-center">
                    Loan Details
                  </div>
                </div>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div>



              <div class="bggrey my-2">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Select Dealer</div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #dealer formControlName="dealer">
                      <mat-option value="0">
                        <div>Select Dealer Later</div>
                      </mat-option>
                      <mat-option [value]="dealer.id" *ngFor="let dealer of dealers">
                        <div *ngIf="dealer && dealer.partnerName">{{dealer.partnerName}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>

              <!-- <div class="bggrey my-2">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Employment Type</div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #employmenttype formControlName="employmenttype">
                      <mat-option [value]="employment.name" *ngFor="let employment of employmentTypes">
                        <div *ngIf="employment && employment.displayName">{{employment.displayName}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div> -->





              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.customerEducation">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Customer Education <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #customerEducation formControlName="customerEducation">
                      <mat-option [value]="education.id" *ngFor="let education of mafilScoreFields.customerEducation">
                        <div *ngIf="education && education.name" (click)="scoreCalculate(education.score)">
                          {{education.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.customerEmployement">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Customer Employement <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #customerEmployement
                      formControlName="customerEmployement">
                      <mat-option [value]="employment.id"
                        *ngFor="let employment of mafilScoreFields.customerEmployement">
                        <div *ngIf="employment && employment.name">{{employment.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Customer Occupation<span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #customerOccupation
                        type="text" placeholder="Enter Customer Occupation" class="form-control" autocomplete="off"
                        formControlName="customerOccupation" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Net Monthly Income <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #salary
                        [value]="salary" type="number" placeholder="Enter Monthly Income" class="form-control"
                        autocomplete="off" formControlName="salary" maxlength="7"
                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" />
                    </div>
                  </div>
                </div>
              </div>


              <!-- <div class="bggrey my-2">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Montly Income</div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #monthlyIncome formControlName="monthlyIncome">
                      <mat-option [value]="income.id" *ngFor="let income of mafilScoreFields.monthlyIncome">
                        <div *ngIf="income && income.name">{{income.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div> -->


              <!-- <div class="bggrey my-2">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Existing Customer</div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #existingCustomer formControlName="existingCustomer">
                      <mat-option [value]="customer.id" *ngFor="let customer of mafilScoreFields.existingCustomer">
                        <div *ngIf="customer && customer.name">{{customer.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div> -->


              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.salaryRouting">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Salary Routing <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #salaryRouting formControlName="salaryRouting">
                      <mat-option [value]="salary.id" *ngFor="let salary of mafilScoreFields.salaryRouting">
                        <div *ngIf="salary && salary.name">{{salary.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.familyDependants">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Family Dependants <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #familyDependants formControlName="familyDependants">
                      <mat-option [value]="dependant.id" *ngFor="let dependant of mafilScoreFields.familyDependants">
                        <div *ngIf="dependant && dependant.name">{{dependant.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>

              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.existingCustomer">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Mafil Existing Customer <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #existingCustomer formControlName="existingCustomer">
                      <mat-option [value]="customer.id" *ngFor="let customer of mafilScoreFields.existingCustomer">
                        <div *ngIf="customer && customer.name">{{customer.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>

              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.earningMembers">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Earning Members <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #earningMembers formControlName="earningMembers">
                      <mat-option [value]="member.id" *ngFor="let member of mafilScoreFields.earningMembers">
                        <div *ngIf="member && member.name">{{member.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.noOfYearsAtPresentAddress">
                <div>
                  <div class="d-flex">
                    <div class="form-title">No of Years at Present Address <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #noOfYearsAtPresentAddress
                      formControlName="noOfYearsAtPresentAddress">
                      <mat-option [value]="years.id" *ngFor="let years of mafilScoreFields.noOfYearsAtPresentAddress">
                        <div *ngIf="years && years.name">{{years.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.currentResidenceOwnershipStatus">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Current Residence Ownership Status <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #currentResidenceOwnershipStatus
                      formControlName="currentResidenceOwnershipStatus">
                      <mat-option [value]="ownership.id"
                        *ngFor="let ownership of mafilScoreFields.currentResidenceOwnershipStatus">
                        <div *ngIf="ownership && ownership.name">{{ownership.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.ownedMovableAssets">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Owned Movable Assets <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #ownedMovableAssets
                      formControlName="ownedMovableAssets" (selectionChange)="changeMovableAssets($event)">
                      <mat-option [value]="assets.id" *ngFor="let assets of mafilScoreFields.ownedMovableAssets">
                        <div *ngIf="assets && assets.name">{{assets.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div *ngIf="movableAssets">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Vehicle No <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #vehicleNo
                        type="text" placeholder="Enter Vehicle No" class="form-control" autocomplete="off"
                        formControlName="vehicleNo" />
                    </div>
                  </div>
                </div>
              </div>


              <div class="bggrey my-2" *ngIf="mafilScoreFields && mafilScoreFields.goodsFinanced">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Goods Financed <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" #goodsFinanced formControlName="goodsFinanced">
                      <mat-option [value]="goods.id" *ngFor="let goods of mafilScoreFields.goodsFinanced">
                        <div *ngIf="goods && goods.name">{{goods.name}}</div>
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div class="bggrey my-2">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Mafil Employee <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" (selectionChange)="mafilEmployeeStatus()"
                      formControlName="employee">
                      <mat-option [value]="true">
                        Yes
                      </mat-option>
                      <mat-option [value]="false">
                        No
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>

              <div *ngIf="mafilEmployee">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Employee Code <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input #employeeCode type="text" placeholder="Employee Code" class="form-control"
                        autocomplete="off" formControlName="employeeCode" />
                    </div>
                  </div>
                </div>
              </div>

              <!-- <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Montly Income</div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #salary [value]="salary" type="text"
                        placeholder="Enter Customer Salary" class="form-control" autocomplete="off"
                        formControlName="salary" />
                    </div>
                  </div>
                </div>
              </div> -->


              <!-- <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Preferred Scheme</div>
                    </div>
                    <div class="fieldPadding">
                      <input (click)="openSchemes()" (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #scheme type="text"
                        placeholder="Preferred Scheme" class="form-control" autocomplete="off" formControlName="scheme"
                        readonly />
                    </div>
                  </div>
                </div>
              </div> -->




              <div class="bggrey my-2">
                <div>
                  <div class="d-flex">
                    <div class="form-title">Subvention Loan <span class="text-danger">*</span></div>
                  </div>
                  <div class="fieldPadding">
                    <mat-select class="form-control widthWebKit" (selectionChange)="subventionLoanStatus()"
                      formControlName="subventionLoan">
                      <mat-option [value]="true">
                        Yes
                      </mat-option>
                      <mat-option [value]="false">
                        No
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Number of Existing EMI's Paid Monthly <span class="text-danger">*</span>
                      </div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #emicount
                        type="number" placeholder="Enter Number of Existing EMI's Paid Monthly" class="form-control"
                        autocomplete="off" formControlName="emicount" maxlength="1"
                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" />
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Select Type <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" #loantype formControlName="loantype">
                        <mat-option [value]="loantype.id" *ngFor="let loantype of loanTypes">
                          <div *ngIf="loantype && loantype.name">{{loantype.name}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Enter Employee Referral Code </div>
                    </div>
                    <div class="fieldPadding">
                      <input #referralCode type="text" placeholder="Enter Employee Referral Code" class="form-control"
                        autocomplete="off" formControlName="referralCode" />
                    </div>
                  </div>
                </div>
              </div>



              <!-- <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Select Loan Category</div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" #category formControlName="category">
                        <mat-option [value]="category.id" *ngFor="let category of loanCategories">
                          <div *ngIf="category && category.name">
                            {{category.name}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div> -->


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Select Product Category <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" #productcategory formControlName="productcategory"
                        (selectionChange)="changeProductCategory($event)">
                        <mat-option [value]="category.id" *ngFor="let category of loanProductCategories">
                          <div *ngIf="category && category.name">{{category.name}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>

              <div *ngIf="loanProductSubCategories && loanProductSubCategories.length>0">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Select Product Sub-Category <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" #productsubcategory
                        formControlName="productsubcategory" (selectionChange)="changeProductSubCategory($event)">
                        <mat-option [value]="category.id" *ngFor="let category of loanProductSubCategories">
                          <div *ngIf="category && category.name">{{category.name}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>

              <!-- <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Select Category</div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" #category formControlName="category">
                        <mat-option [value]="category.id" *ngFor="let category of loanCategories">
                          <div *ngIf="category && category.name">{{category.name}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div> -->

              <div *ngIf="productCategoryId">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Select Product <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <p-multiSelect [options]="loanProducts" formControlName="loanproduct" [showToggleAll]="false"
                        [virtualScroll]="true" [filter]="true" [itemSize]="34" defaultLabel="Select loan product"
                        optionLabel="productName" [(ngModel)]="SelectedloanProducts"
                        class="multiselect-custom-virtual-scroll" (onChange)="productSelect($event.value)">
                      </p-multiSelect>
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Total Bill Amount <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="totalPayment($event)" #totalpayment type="text" placeholder="Enter Bill Amount"
                        class="form-control" autocomplete="off" [value]="totalpayment" formControlName="totalpayment"
                        (keypress)="onlyAcceptNumberInput($event)" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Down Payment <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input type="text" #downpayment placeholder="Enter Down Payment" class="form-control"
                        autocomplete="off" [value]="downpayment" formControlName="downpayment" (keyup)="payment($event)"
                        (keypress)="onlyAcceptNumberInput($event)" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Loan Required <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="number"
                        #loanamount placeholder="Enter Required Loan Amount" class="form-control" autocomplete="off"
                        disabled="true" [value]="loanamount" formControlName="loanamount" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Nominee Name <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                        #nomineename placeholder="Enter Nominee Name" class="form-control" autocomplete="off"
                        [value]="nomineename" formControlName="nomineename" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Nominee Relation <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" placeholder="" #nomineetype
                        formControlName="nomineetype">
                        <mat-option [value]="relation.name" *ngFor="let relation of relations">
                          <div *ngIf="relation && relation.displayName">{{relation.displayName}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>


              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Nominee Phone Number <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                        placeholder="Enter Nominee Phone Number" class="form-control" autocomplete="off" #nomineePhone
                        formControlName="nomineePhone"
                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                        maxlength="10" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Nominee Date of Birth <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #nomineeDob
                        type="date" class="form-control" autocomplete="off" formControlName="nomineeDob" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Nominee Gender</div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" #nomineeGender formControlName="nomineeGender">
                        <mat-option [value]="gender.name" *ngFor="let gender of genders">
                          <div *ngIf="gender && gender.displayName">{{gender.displayName}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>


              <!-- <div *ngIf="showCoapplicant">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Co Applicant Name <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text" #guarantorName placeholder="Enter Co Applicant Name"
                        class="form-control" autocomplete="off" formControlName="guarantorName" />
                    </div>
                  </div>
                </div>
              </div>

              <div *ngIf="showCoapplicant">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Co Applicant Relation <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <mat-select class="form-control widthWebKit" placeholder="" #guarantorType
                        formControlName="guarantorType">
                        <mat-option [value]="relation.name" *ngFor="let relation of relations">
                          <div *ngIf="relation && relation.displayName">{{relation.displayName}}</div>
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>

              <div *ngIf="showCoapplicant">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Co Applicant Date of Birth <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #guarantorDob type="date" class="form-control" autocomplete="off"
                        formControlName="guarantorDob" />
                    </div>
                  </div>
                </div>
              </div>

              <div *ngIf="showCoapplicant">
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Co Applicant Phone <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <div class="d-flex">
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text" placeholder="Enter Co Applicant Phone Number"
                          class="form-control" autocomplete="off" #guarantorPhone formControlName="guarantorPhone"
                          maxlength="10" [class.disabled]="guarantorVerification" />
                        <a class="btn btn-verify" [class.btn-verified]="guarantorVerification"
                          *ngIf="!guarantorVerification" (click)="verifyGuarantorotp()"><span>Verify</span></a>

                        <a class="btn btn-verify" *ngIf="guarantorVerification"
                          [class.btn-verified]="guarantorVerification">
                          <span *ngIf="guarantorVerification"><i class="fa fa-check"></i>&nbsp;Verified</span></a>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->




              <!-- <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Nominee Date of Birth</div>
                    </div>
                    <div class="fieldPadding">
                      <div>
                        <p-calendar class="validDateCalendar" [defaultDate]="minDob" [maxDate]="minDob" #nomineeDob
                          dataType="date" formControlName="nomineeDob">
                        </p-calendar>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->



            </div>
            <div>
              <button class="btn btn-primary open-all-btn" (click)="saveLoanDetails()">Save</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <br>

        <mat-accordion>
          <mat-expansion-panel [expanded]="bankDetailsPanel" (opened)="bankDetailsPanel = true"
            (closed)="bankDetailsPanel = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <div class="d-flex justify-content-center">
                  <div *ngIf="bankDetailsVerified">
                    <img width="30" height="30" src="../../../../assets/images/cdl/check-mark.png">
                  </div>
                  <div class="d-flex align-items-center">
                    Bank Details
                  </div>
                </div>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div>

              <div class="d-md-flex">
                <div class="mr-3">
                  <div *ngIf="!accountaggregatingStatusShowing">
                    <button class="btn btn-primary open-all-btn" (click)="aggregateAccount()">Aggregate
                      Statements</button>
                  </div>
                  <div *ngIf="accountaggregatingStatusShowing">
                    <div class="btn btn-primary open-all-btn-success">Statement Aggregation
                      {{accountaggregatingStatus}}
                    </div>
                  </div>
                </div>

                <div class="mx-5">
                  <span class="font-weight-bold">OR</span>
                </div>

                <!-- *ngIf="showBankAttachments" -->
                <div>
                  <div class="bggrey">
                    <div>
                      <div class="fieldPadding">
                        <div class="file"
                          *ngIf="!(selectedFiles['bank'] && selectedFiles['bank'].files && selectedFiles['bank'].files.length > 0)">
                          <label for='bankAttach' (click)="bankAttach.click()">
                            <!-- <i class="material-icons">cloud_upload</i> -->
                            Upload Statements
                          </label>
                          <input #bankAttach type='file' formControlName="bankstatements"
                            (change)="filesSelected($event,'bank')" accept=".pdf" />
                        </div>
                        <div class="img-section clearfix"
                          *ngIf="selectedFiles['bank'] && selectedFiles['bank'].files && selectedFiles['bank'].files.length > 0">
                          <ul class="galul">
                            <li *ngFor="let file of selectedFiles['bank'].files;let i = index ">
                              <div class="galimg_outer">
                                <div class="gal_img pointer-cursor">
                                  <img [src]="getImage(selectedFiles['bank'].base64[i], file)"
                                    *ngIf="selectedFiles['bank'].base64[i]" width="100px" height="100px">
                                  <a [href]="file.s3path" target="_blank">
                                    <img [src]="getImagefromUrl(file.s3path,file)"
                                      *ngIf="!selectedFiles['bank'].base64[i] && file.s3path" width="100px"
                                      height="100px">
                                  </a>
                                </div>
                                <div class="gal_action" (click)="deleteTempImage(i, 'bank',file)">
                                  <i class=" fa fa-times-circle" aria-hidden="true"></i>
                                </div>
                              </div>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <div class="my-3">
                <a class="my-3 pointer-cursor" data-toggle="modal" data-target="#exampleModal">
                  <u><i class="fa fa-info-circle" aria-hidden="true"></i> List of Banks that Account Aggregator Supports</u>
                </a>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Select Bank <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <!-- <select class="form-control" formControlName="bank">
                        <option>KOTAK</option>
                        <option>ICICI</option>
                        <option>SBI</option>
                        <option>HDFC</option>
                        <option>BOI</option>
                        <option>AXIS</option>
                      </select> -->
                      <div *ngIf="banksList" class="bankList mt-2">
                        <mat-form-field [style.width.%]="100">
                          <input type="text" class="form-control" matInput [matAutocomplete]="auto"
                            [formControl]="banksListNames" formControlName="bank" [(ngModel)]="bankListName">
                          <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                          <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let bank of filteredOptions | async" [value]="bank.bankName">
                              {{bank.bankName}}
                            </mat-option>
                          </mat-autocomplete>
                        </mat-form-field>

                        <!-- <p-dropdown [options]="banksList" formControlName="bank" optionLabel="bankName" [filter]="true"
                          filterBy="bankName" optionValue="bankName" dropdownIcon="fa fa-caret-down" [showClear]="true"
                          placeholder="Select Bank">
                          <ng-template let-bank pTemplate="item">
                            <div class="bank-item">
                              <div>{{bank.bankName}}</div>
                            </div>
                          </ng-template>
                        </p-dropdown> -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>






              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Bank Account Number <span class="text-danger">*</span></div>
                    </div>
                    <!-- <div class="d-flex"> -->
                    <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                      placeholder="Enter Account Number" class="form-control" formControlName="account"
                      autocomplete="off" />
                    <!-- <a class="btn btn-verify" [class.btn-verified]="accountverification" (click)="verifyAccount()">
                        <span *ngIf="!accountverification">Verify</span><span *ngIf="accountverification"><i
                            class="fa fa-check"></i>&nbsp;Verified</span></a> -->
                    <!-- </div> -->
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Bank IFSC <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                        placeholder="Enter Bank IFSC" class="form-control" formControlName="ifsc" autocomplete="off" />
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div class="bggrey my-2">
                  <div>
                    <div class="d-flex">
                      <div class="form-title">Bank Branch <span class="text-danger">*</span></div>
                    </div>
                    <div class="fieldPadding">
                      <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                        placeholder="Enter Bank Branch" class="form-control" formControlName="bankbranch"
                        autocomplete="off" />
                    </div>
                  </div>
                </div>
              </div>



            </div>
            <div class="d-flex">
              <div *ngIf="!bankDetailsVerified">
                <button class="btn btn-primary open-all-btn mr-2" (click)="verifyBankDetails()">Verify</button>
              </div>
              <div *ngIf="bankDetailsVerified">
                <button class="btn btn-primary open-all-btn mr-2" (click)="saveBankDetails()">Save</button>
              </div>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion *ngIf="showCoapplicant">
          <br>
          <mat-expansion-panel [expanded]="coApplicantDetailsPanel" (opened)="coApplicantDetailsPanel = true"
            (closed)="coApplicantDetailsPanel = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <div class="d-flex justify-content-center">
                  <div *ngIf="coApplicantDetailsPanelVerified">
                    <img width="30" height="30" src="../../../../assets/images/cdl/check-mark.png">
                  </div>
                  <div class="d-flex align-items-center">
                    Co-Applicant Details
                  </div>
                </div>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container formArrayName="coapplicants">
              <div *ngFor="let coapplicant of coapplicants().controls; let i=index" [formGroupName]="i">
                <div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Relation With Applicant <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <mat-select class="form-control widthWebKit" #coapplicantrelation
                            formControlName="coapplicantrelation">
                            <mat-option [value]="relation.name" *ngFor="let relation of relations">
                              <div *ngIf="relation && relation.displayName">{{relation.displayName}}</div>
                            </mat-option>
                          </mat-select>
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">First Name <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                            #coapplicantfirstname type="text" placeholder="Enter First Name as in Pan Card"
                            class="form-control" autocomplete="off" formControlName="coapplicantfirstname" />
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Last Name <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                            #coapplicantlastname type="text" placeholder="Enter Last Name as in Pan Card"
                            class="form-control" autocomplete="off" formControlName="coapplicantlastname" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Date of Birth <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #coapplicantdob
                            type="date" class="form-control" autocomplete="off" formControlName="coapplicantdob" />
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Gender</div>
                        </div>
                        <div class="fieldPadding">
                          <mat-select class="form-control widthWebKit" #coapplicantgender
                            formControlName="coapplicantgender">
                            <mat-option [value]="gender.name" *ngFor="let gender of genders">
                              <div *ngIf="gender && gender.displayName">{{gender.displayName}}</div>
                            </mat-option>
                          </mat-select>
                        </div>
                      </div>
                    </div>
                  </div>




                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Phone Number <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <div class="d-flex">
                            <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                              placeholder="Enter Phone Number" class="form-control" autocomplete="off" #coapplicantphone
                              formControlName="coapplicantphone"
                              oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                              maxlength="10" [class.disabled]="coapplicantPhoneVerification"
                              [disabled]="coapplicantPhoneVerification" />
                            <a class="btn btn-verify" [class.btn-verified]="coapplicantPhoneVerification"
                              *ngIf="!coapplicantPhoneVerification"
                              (click)="verifycoApplicantOtp(i)"><span>Verify</span></a>

                            <a class="btn btn-verify" *ngIf="coapplicantPhoneVerification"
                              [class.btn-verified]="coapplicantPhoneVerification">
                              <span *ngIf="coapplicantPhoneVerification"><i
                                  class="fa fa-check"></i>&nbsp;Verified</span></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Email</div>
                        </div>
                        <div class="fieldPadding">
                          <div class="d-flex">
                            <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                              #coapplicantemail type="email" placeholder="Enter Email" class="form-control"
                              autocomplete="off" formControlName="coapplicantemail"
                              [class.disabled]="coapplicantemailverification" />

                            <a class="btn btn-verify" [class.btn-verified]="coapplicantemailverification"
                              *ngIf="!coapplicantemailverification"
                              (click)="verifyCoApplicantEmail(i)"><span>Verify</span></a>

                            <a class="btn btn-verify" *ngIf="coapplicantemailverification"
                              [class.btn-verified]="coapplicantemailverification">
                              <span *ngIf="coapplicantemailverification"><i
                                  class="fa fa-check"></i>&nbsp;Verified</span></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Co-Applicant Photo <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding photo-border">
                          <div class="file"
                            *ngIf="!(selectedFiles['coapplicantphoto'] && selectedFiles['coapplicantphoto'].files && selectedFiles['coapplicantphoto'].files.length > 0)">
                            <label for='coapplicantphotoAttach' (click)="coapplicantphotoAttach.click()">
                              <!-- <i class="material-icons">cloud_upload</i> -->
                              Upload File
                            </label>
                            <input #coapplicantphotoAttach type='file'
                              (change)="filesSelected($event,'coapplicantphoto')" accept="image/*;capture=camera" />
                          </div>
                          <div class="img-section clearfix"
                            *ngIf="selectedFiles['coapplicantphoto'] && selectedFiles['coapplicantphoto'].files && selectedFiles['coapplicantphoto'].files.length > 0">
                            <ul class="galul">
                              <li *ngFor="let file of selectedFiles['coapplicantphoto'].files;let i = index ">
                                <div class="galimg_outer">
                                  <div class="gal_img pointer-cursor">
                                    <img [src]="getImage(selectedFiles['coapplicantphoto'].base64[i], file)"
                                      *ngIf="selectedFiles['coapplicantphoto'].base64[i]" width="100px" height="100px">
                                    <a [href]="file.s3path" target="_blank">
                                      <img [src]="file.s3path"
                                        *ngIf="!selectedFiles['coapplicantphoto'].base64[i] && file.s3path"
                                        width="100px" height="100px">
                                    </a>
                                  </div>
                                  <div class="gal_action" (click)="deleteTempImage(i, 'coapplicantphoto',file)">
                                    <i class=" fa fa-times-circle" aria-hidden="true"></i>
                                  </div>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Aadhar Number <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <div class="d-flex">
                            <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                              #coapplicantaadharnumber type="text" placeholder="Enter Aadhar Number"
                              class="form-control" autocomplete="off" formControlName="coapplicantaadharnumber"
                              [class.disabled]="action == 'update' && coapplicantaadharverification && !coapplicantverifyingUID"
                              oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              maxlength="12" />

                            <a class="btn btn-verify" [class.btn-verified]="coapplicantaadharverification"
                              *ngIf="!coapplicantaadharverification && !coapplicantverifyingUID"
                              (click)="coApplicangtIdVerification('UID',i)"
                              [class.disabled]="coapplicantDocumentVerifying"><span>Verify</span></a>

                            <a class="btn btn-verify" [class.btn-verified]="coapplicantaadharverification"
                              *ngIf="coapplicantverifyingUID"
                              (click)="refreshcoApplicantAadharVerify()"><span>Refresh</span></a>

                            <a class="btn btn-verify" *ngIf="!coapplicantverifyingUID && coapplicantaadharverification"
                              [class.btn-verified]="coapplicantaadharverification">
                              <span *ngIf="coapplicantaadharverification"><i
                                  class="fa fa-check"></i>&nbsp;Verified</span></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="fieldPadding">
                          <div class="file" *ngIf="!coapplicantaadharverification || coapplicantverifyingUID">
                            <label for='input-file' (click)="aadharAttach.click()">
                              Upload File
                            </label>
                            <input #aadharAttach type='file' (change)="filesSelected($event, 'coapplicantaadhar')"
                              accept="image/*;capture=camera" />
                          </div>
                          <div class="img-section clearfix"
                            *ngIf="selectedFiles['coapplicantaadhar'] && selectedFiles['coapplicantaadhar'].files && selectedFiles['coapplicantaadhar'].files.length > 0">
                            <ul class="galul">
                              <li *ngFor="let file of selectedFiles['coapplicantaadhar'].files;let i = index ">
                                <div class="galimg_outer">
                                  <div class="gal_img pointer-cursor">
                                    <img [src]="getImage(selectedFiles['coapplicantaadhar'].base64[i], file)"
                                      *ngIf="selectedFiles['coapplicantaadhar'].base64[i]" width="100px" height="100px">
                                    <a [href]="file.s3path" target="_blank">
                                      <img [src]="getImagefromUrl(file.s3path,file)"
                                        *ngIf="!selectedFiles['coapplicantaadhar'].base64[i] && file.s3path"
                                        width="100px" height="100px">
                                    </a>
                                  </div>
                                  <div class="gal_action" *ngIf="!coapplicantaadharverification"
                                    (click)="deleteTempImage(i, 'coapplicantaadhar',file)">
                                    <i class=" fa fa-times-circle" aria-hidden="true"></i>
                                  </div>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Pan Number <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <div class="d-flex">
                            <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                              #coapplicantpannumber type="text" placeholder="Enter PAN Number" class="form-control"
                              autocomplete="off" formControlName="coapplicantpannumber"
                              [class.disabled]="action == 'update' && coapplicantpanverification" maxlength="10" />

                            <a class="btn btn-verify" [class.btn-verified]="coapplicantpanverification"
                              *ngIf="!coapplicantpanverification" (click)="coApplicangtIdVerification('Pan',i)"
                              [class.disabled]="coapplicantDocumentVerifying"><span>Verify</span></a>

                            <a class="btn btn-verify" *ngIf="coapplicantpanverification"
                              [class.btn-verified]="coapplicantpanverification">
                              <span *ngIf="coapplicantpanverification"><i
                                  class="fa fa-check"></i>&nbsp;Verified</span></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <!-- <div class="d-flex">
                                          <div class="form-title">Aadhar Atachment</div>
                                        </div> -->
                        <div class="fieldPadding">
                          <div class="file" *ngIf="!coapplicantpanverification">
                            <label for='input-file' (click)="panAttach.click()">
                              <!-- <i class="material-icons">cloud_upload</i> -->
                              Upload File
                            </label>
                            <input #panAttach type='file' (change)="filesSelected($event, 'coapplicantpan')"
                              accept="image/*;capture=camera" />
                          </div>
                          <div class="img-section clearfix"
                            *ngIf="selectedFiles['coapplicantpan'] && selectedFiles['coapplicantpan'].files && selectedFiles['coapplicantpan'].files.length > 0">
                            <ul class="galul">
                              <li *ngFor="let file of selectedFiles['coapplicantpan'].files;let i = index ">
                                <div class="galimg_outer">
                                  <div class="gal_img pointer-cursor">
                                    <img [src]="getImage(selectedFiles['coapplicantpan'].base64[i], file)"
                                      *ngIf="selectedFiles['coapplicantpan'].base64[i]" width="100px" height="100px">
                                    <a [href]="file.s3path" target="_blank">
                                      <img [src]="getImagefromUrl(file.s3path,file)"
                                        *ngIf="!selectedFiles['coapplicantpan'].base64[i] && file.s3path" width="100px"
                                        height="100px">
                                    </a>
                                  </div>
                                  <div *ngIf="!coapplicantpanverification" class="gal_action"
                                    (click)="deleteTempImage(i, 'coapplicantpan',file)">
                                    <i class=" fa fa-times-circle" aria-hidden="true"></i>
                                  </div>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>



                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Current Address 1</div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                            #coapplicantcurrentaddress1 type="text" placeholder="Enter Address 1" class="form-control"
                            autocomplete="off" formControlName="coapplicantcurrentaddress1" />
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Current Address 2</div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                            #coapplicantcurrentaddress2 type="text" placeholder="Enter Address 2" class="form-control"
                            autocomplete="off" formControlName="coapplicantcurrentaddress2" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Current Address District</div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                            #coapplicantcurrentdistrict type="text" placeholder="Enter District" class="form-control"
                            autocomplete="off" formControlName="coapplicantcurrentdistrict" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Current Address State</div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #coapplicantcurrentstate type="text" placeholder="Enter State"
                            class="form-control" autocomplete="off" formControlName="coapplicantcurrentstate" />
                        </div>
                      </div>
                    </div>
                  </div> -->

                  <div class="bggrey my-2" *ngIf="stateList">
                    <div>
                      <div class="d-flex">
                        <div class="form-title">State <span class="text-danger">*</span></div>
                      </div>
                      <div class="fieldPadding">
                        <mat-select class="form-control widthWebKit" #coapplicantcurrentstate
                          formControlName="coapplicantcurrentstate">
                          <mat-option [value]="state.displayName" *ngFor="let state of stateList">
                            <div *ngIf="state && state.displayName">{{state.displayName}}</div>
                          </mat-option>
                        </mat-select>
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Current Address Pincode</div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()"
                            #coapplicantcurrentpincode type="text" placeholder="Enter Pincode" class="form-control"
                            autocomplete="off" formControlName="coapplicantcurrentpincode" />
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Select Bank <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <div *ngIf="banksList" class="bankList mt-2">
                            <mat-form-field [style.width.%]="100">
                              <input type="text" class="form-control" matInput [matAutocomplete]="auto"
                                [formControl]="coApplicantbanksListNames" [(ngModel)]="coApplicantbankListName">
                              <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                              <mat-autocomplete #auto="matAutocomplete">
                                <mat-option *ngFor="let bank of coapplicantfilteredOptions | async"
                                  [value]="bank.bankName">
                                  {{bank.bankName}}
                                </mat-option>
                              </mat-autocomplete>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>






                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Bank Account Number <span class="text-danger">*</span></div>
                        </div>
                        <!-- <div class="d-flex"> -->
                        <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                          placeholder="Enter Account Number" class="form-control" formControlName="coapplicantaccount"
                          autocomplete="off" />
                        <!-- <a class="btn btn-verify" [class.btn-verified]="accountverification" (click)="verifyAccount()">
                                                      <span *ngIf="!accountverification">Verify</span><span *ngIf="accountverification"><i
                                                          class="fa fa-check"></i>&nbsp;Verified</span></a> -->
                        <!-- </div> -->
                      </div>
                    </div>
                  </div>

                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Bank IFSC <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                            placeholder="Enter Bank IFSC" class="form-control" formControlName="coapplicantifsc"
                            autocomplete="off" />
                        </div>
                      </div>
                    </div>
                  </div>


                  <div>
                    <div class="bggrey my-2">
                      <div>
                        <div class="d-flex">
                          <div class="form-title">Bank Branch <span class="text-danger">*</span></div>
                        </div>
                        <div class="fieldPadding">
                          <input (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" type="text"
                            placeholder="Enter Bank Branch" class="form-control" formControlName="coapplicantbankbranch"
                            autocomplete="off" />
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </ng-container>
            <!-- <div>
              <button class="btn btn-primary open-all-btn" (click)="addCoApplicant()">Add Co-Applicant</button>
            </div> -->
            <div class="mt-4">
              <button class="btn btn-primary open-all-btn" (click)="saveCoApplicantDetails(0)">Save</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>


        <br>
        <div>
          <div class="bggrey my-2">
            <div>
              <div class="d-flex">
                <div class="form-title">Remarks</div>
              </div>
              <div class="fieldPadding">
                <textarea (keyup)="resetErrors()" oninput="this.value = this.value.toUpperCase()" #remarks
                  [value]="remarks" type="text" placeholder="Enter Remarks" class="form-control" autocomplete="off"
                  formControlName="remarks"></textarea>
              </div>
            </div>
          </div>
        </div>



      </div>

    </div>
    <div class="d-flex justify-content-center">
      <div>
        <button class="mr-2 btn btn-draft" [disabled]="!customerDetailsVerified" (click)="saveAsLead()">
          Save
        </button>
      </div>
      <div>
        <button class="btn btn-primary" [disabled]="!bankDetailsSaved" (click)="checkELigibility()">
          Check Eligibility
        </button>
      </div>
    </div>
  </form>
</div>




<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">List of Banks that Account Aggregator Supports</h5>
        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button> -->
      </div>
      <div class="modal-body">
        1 . AUBank<br>

        2 . Axis Bank<br>

        3 .  BANK OF BARODA<br>

        4 . Bank Of India<br>

        5 . Bank of Maharastra<br>

        6 . Canara Bank<br>

        7 . Central Bank<br>

        8 . City Union Bank<br>

        9 . FEDERAL BANK<br>

        10 . HDFC Bank<br>

        11 . ICICI Bank<br>

        12 . ICICI Prudential Life<br>

        13 . IDFC FIRST BANK<br>

        14 . Indian Bank<br>

        15 . Indian Overseas Bank<br>

        16 . IndusInd Bank Ltd . <br>

        17 . Karur Vysya Bank<br>

        18 . Punjab and Sind Bank<br>

        19 . Punjab National Bank<br>

        20 . SBI Life<br>

        21 . STATE BANK OF INDIA<br>

        22 . Tata AIA Life Insurance<br>

        23 . UCO Bank<br>

        24 . Union Bank Of India<br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
      </div>
    </div>
  </div>
</div>
