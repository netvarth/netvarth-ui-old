<div class="card card-custom gutter-b">
  <div class="card-body p-0">
    <div class="card-title col-12 col-sm-7 col-lg-7 p-0">
      <h3 class="service-name">
        <i *ngIf="waitlist_data.service.serviceType === 'virtualService'"></i>
        {{waitlist_data.service.name}}
      </h3>
      <div *ngIf="bookingType === 'checkin'" class="service-status" [ngClass]="{'custom-color-red': waitlist_data.waitlistStatus == 'failed' || waitlist_data.waitlistStatus == 'cancelled', 
                    'custom-color-green': waitlist_data.waitlistStatus == 'started' || waitlist_data.waitlistStatus == 'done', 
                    'custom-color-yellow':  waitlist_data.waitlistStatus == 'prepaymentPending' || waitlist_data.waitlistStatus == 'checkedIn' || waitlist_data.waitlistStatus == 'arrived' 
                   }">
        <i class="fa fa-circle" aria-hidden="true"></i>
        {{waitlist_data.waitlistStatus | capitalizeFirst}}
      </div>
      <div *ngIf="bookingType === 'appointment'" class="service-status" [ngClass]="{'custom-color-red': waitlist_data.apptStatus == 'failed' || waitlist_data.apptStatus == 'Cancelled' || waitlist_data.apptStatus == 'Rejected', 
                    'custom-color-green': waitlist_data.apptStatus == 'Started' || waitlist_data.apptStatus == 'Confirmed' || waitlist_data.apptStatus == 'Completed', 
                    'custom-color-yellow':  waitlist_data.apptStatus == 'prepaymentPending' || waitlist_data.apptStatus == 'Arrived' 
                   }">
        <i class="fa fa-circle" aria-hidden="true"></i>
        {{waitlist_data.apptStatus | capitalizeFirst}}
      </div>
      <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding mgn-up-10 tele-msg"
        *ngIf="waitlist_data.service.virtualCallingModes && waitlist_data.service.virtualCallingModes[0] && (waitlist_data.service.virtualCallingModes[0].callingMode === 'WhatsApp' || waitlist_data.service.virtualCallingModes[0].callingMode === 'Phone') && is_web">
        <div class="">
          <span class="custom-red">Note: {{(waitlist_data.service.virtualCallingModes[0].callingMode == 'Phone')?
            'Phone' :
            'WhatsApp'}}</span>
          <span class="custom-red">
            {{notSupported}}</span>
        </div>
        <div class="mgn-up-10 call-inst"
          *ngIf="waitlist_data.service.virtualCallingModes[0].callingMode === 'WhatsApp'">
          You can call the {{customer_label}} directly at
          +{{waitlist_data.virtualService['WhatsApp']}}
        </div>
        <div class="mgn-up-20 call-inst" *ngIf="waitlist_data.service.virtualCallingModes[0].callingMode === 'Phone'">
          You can call the {{customer_label}} directly at
          +{{waitlist_data.virtualService['Phone']}}
        </div>
      </div>
    </div>
    <div class="card-toolbar col-12 col-sm-5 col-lg-5 p-0 disp-grid">
      <div *ngIf="showStart" class="action-buttons-container">
        <button type="button" class="start-service-btn btn mb-2 btn-block" (click)="changeWaitlistStatus('STARTED')">
          Start
        </button>
      </div>
      <div *ngIf="showTeleserviceStart && !showInProgress" class="action-buttons-container">
        <button type="button" class="start-service-btn btn mb-2 btn-block" (click)="asktoLaunch()">
          <div class="action-box-sub">
            <span class="meet-icon"
              *ngIf="waitlist_data.service.serviceType === 'virtualService' && waitlist_data.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></span>
            <span class="zoom-icon"
              *ngIf="waitlist_data.service.serviceType === 'virtualService' && waitlist_data.service.virtualCallingModes[0].callingMode === 'Zoom'"></span>
            <span class="phon-icon"
              *ngIf="waitlist_data.service.serviceType === 'virtualService' && waitlist_data.service.virtualCallingModes[0].callingMode === 'Phone'"></span>
            <span class="wtsapaud-icon"
              *ngIf="waitlist_data.service.serviceType === 'virtualService' && waitlist_data.service.virtualCallingModes[0].callingMode === 'WhatsApp' && waitlist_data.service.virtualServiceType === 'audioService'"></span>
            <span class="wtsapvid-icon"
              *ngIf="waitlist_data.service.serviceType === 'virtualService' && waitlist_data.service.virtualCallingModes[0].callingMode === 'WhatsApp' && waitlist_data.service.virtualServiceType === 'videoService'"></span>
            <span class="icon-text">
              Launch Meeting
            </span>
          </div>
        </button>
      </div>
      <div class="action-buttons-container">
        <a *ngIf="showTeleserviceStart && !servStarted" class="btn mb-2 action-button"
          (click)="sendReminderorMeetingDetails('reminder')">
          <i class="fa fa-bell"></i>Send reminder
        </a>
        <a *ngIf="showTeleserviceStart" class="btn mb-2 action-button" (click)="sendReminderorMeetingDetails('share')">
          <i class="fa fa-share-alt"></i>Share {{(waitlist_data.service?.virtualServiceType ==
          'videoService')? 'video' : 'audio'}} call instructions
        </a>
        <a *ngIf="showAssign || showAssignMyself || showUnassign || showAssignTeam" class="btn mb-2 action-button"
          (click)="showActionsPopup('assign')">
          <i class="fa fa-paperclip" aria-hidden="true"></i>Assign
        </a>
        <a *ngIf="waitlist_data.waitlistStatus==='blocked' || waitlist_data.apptStatus==='blocked'"
          class="btn mb-2 action-button" (click)="addCustomerDetails()">
          <i class="fa fa-unlock-alt"></i>Add {{customer_label}}
        </a>
        <a *ngIf="waitlist_data.waitlistStatus==='blocked' || waitlist_data.apptStatus==='blocked'"
          class="btn mb-2 action-button" (click)="unBlockWaitlist()">
          <i class="fa fa-unlock-alt"></i>Unblock
        </a>
        <a class="btn mb-2 action-button" (click)="showActionsPopup('status')" *ngIf="showStatusChange">
          <i class="fa fa-exchange"></i>Status change
        </a>
      </div>
      <div class="viewmore text-center" (click)="showActions()" *ngIf="showFirstSection"><a>View {{(showMoreActions) ?
          'Less <<' : 'More >>' }}</a>
      </div>
    </div>
    <div class="card-toolbar col-12 col-sm-12 col-lg-12 p-0 disp-grid mgn-up-10" *ngIf="showMoreActions">
      <div class="action-buttons-container">
        <a *ngIf="waitlist_data.waitlistStatus == 'checkedIn' || waitlist_data.waitlistStatus == 'arrived'"
          class="btn mb-2 action-button" (click)="witlistRescheduleActionClicked()">
          <i class="fa fa-repeat"></i>Reschedule
        </a>
        <a *ngIf="waitlist_data.apptStatus == 'Confirmed' || waitlist_data.apptStatus == 'Arrived'"
          class="btn mb-2 action-button" (click)="apptRescheduleActionClicked()">
          <i class="fa fa-repeat"></i>Reschedule
        </a>
        <a *ngIf="showCall" class="btn mb-2 action-button" (click)="callingWaitlist()">
          <ng-container *ngIf="waitlist_data.callingStatus">
            <i class="fa fa-stop"></i>Stop
          </ng-container>
          <ng-container *ngIf="!waitlist_data.callingStatus">
            <i class="fa fa-stop"></i>Alert
          </ng-container>
        </a>
        <a *ngIf="showSendDetails" class="btn mb-2 action-button" (click)="smsCheckin()">
          <i class="fa fa-share-square-o"></i>Share booking info
        </a>
        <a *ngIf="trackStatus" class="btn mb-2 action-button" (click)="locateCustomer()">
          <i class="fa fa-question-circle"></i>Where is my customer
        </a>
        <a *ngIf="timeType !== 3" class="btn mb-2 action-button" (click)="printCheckin()">
          <i class="fa fa-print" aria-hidden="true"></i>Print
        </a>
      </div>
    </div>
  </div>
</div>
<div class="dashqr" *ngIf="showQR">
  <ngx-qrcode id="print-section" [elementType]="elementType" [value]="qr_value">
  </ngx-qrcode>
</div>