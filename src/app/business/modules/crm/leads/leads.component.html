<section class="clearfix">
  <div class="pull-left pad-10 mgn-lt-5 mgn-rt-5">
    <div class="dash-head"> <i style="color:#1D3E77 !important" class="fa fa-arrow-left pointer-cursor"
        aria-hidden="true" (click)="goBack()"></i>
      <span></span>&nbsp;&nbsp;&nbsp; <div style="color:#1D3E77 !important" *ngIf="headerName">{{headerName}}</div>
    </div>
  </div>
  <div class="pull-right">
    <nav class="navbar navbar-static-top no-margin" role="navigation">
      <div class="navbar-custom-menu width100pc">
        <ul class="nav navbar-nav width100pc">
          <li class="dropdown messages-menu loc-lst queue-menu pull-right">
            <i class="icon-location dropdown-toggle " data-toggle="dropdown" style="color:#1D3E77 !important"></i>
            <a href="#" class="dropdown-toggle navbar-item-color bold nav-lc-sh-icon" data-toggle="dropdown"
              *ngIf="selected_location" style="padding-top: 12px !important;color:#1D3E77 !important">
              {{selected_location.place | capitalizeFirst}}
            </a>
            <ul class="dropdown-menu">
              <li>
                <ul *ngIf="selected_location" class="menu">
                  <li *ngFor="let location of locations;let i = index"
                    [ngClass]="{'active': (location.place === selected_location.place)}">
                    <a class="pointer-cursor" (click)="onChangeLocationSelect(i)">
                      <h4 *ngIf="location.place.length>='27'" style="color:#1D3E77 !important">
                        {{ location.place.substring(0,24) | capitalizeFirst }}...</h4>
                      <h4 *ngIf="location.place.length<'27'" style="color:#1D3E77 !important">{{ location.place |
                        capitalizeFirst }}</h4>
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</section>
<section>
  <div class="content comn-cls dashboard audit" *ngIf="!api_loading">
    <div class="col-md-12 no-padding-small">
      <span (click)="showFilterSidebar()" class="btn btn-primary pull-right mb-2">
        <i class="icon-filter-one mt-2" [matTooltipClass]="tooltipcls" [matTooltip]="filtericonTooltip"
          style="cursor: pointer;"></i>
        <span>Filter</span>
      </span> &nbsp;&nbsp;&nbsp;
      <div class="row">
        <div class="card p0 w-dta">
          <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
          <div class="table-responsive dash-list">
            <table class="table" style="background-color: white;">
              <thead>
                <tr class="tble-filtr-tr heght">
                  <th class="head_color">Lead Id</th>
                  <th class="head_color">Customer Name</th>
                  <th class="head_color">Employee</th>
                  <th class="head_color">Lead Created Date</th>
                  <th class="head_color" *ngIf="bStatusTableHead">Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>

                  <div>
                    <aside class="filterSidebar filter-sidebar" *ngIf="filter_sidebar">
                      <section id="filterContainer" class="sidebar sidebar-bottom checkfilter filter-container">
                        <div class="filterClosebtn filter-head" [class.pd-btm-30]="!filterapplied">
                          <span class="filter-head-title">Filters</span>
                          <i class="icon-filter-one-op ng-star-inserted pointer-cursor pull-right"
                            (click)="hideFilterSidebar()" [matTooltipClass]="tooltipcls"
                            [matTooltip]="'Close filter window'"></i>
                        </div>
                        <div [ngStyle]="{'height.px': filterapplied === true ? 95 : 44 }">&nbsp;</div>
                        <ul class="sidebar-menu accordion" id="accordion1">
                          <div class="card">
                            <div class="card-header">
                              <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse"
                                  data-target="#collapseDate3" aria-expanded="false">
                                  <div>
                                    <div style="display: inline-block !important;">
                                      <i class="fa fa-calendar-o"></i>
                                    </div>
                                    <span>&nbsp;Date</span>
                                  </div>
                                  <i class="fa fa-angle-down"></i>
                                </button>
                              </h2>
                            </div>
                            <div id="collapseDate3" class="collapse in" data-parent="#accordion3">
                              <div class="card-body">
                                <div class="filterTextinput filter-text-input">
                                  <li class="filterli filterDatepicker filter-li">
                                    <input type="text" [(ngModel)]="filter.check_in_start_date"
                                      [matDatepicker]="startpicker" #Fdate class="filterTextbox filter-textbox"
                                      [max]="maxday" placeholder="Enter Start Date" (dateChange)="keyPressed()">
                                    <mat-datepicker-toggle matSuffix [for]="startpicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #startpicker></mat-datepicker>
                                  </li>
                                </div>
                                <div class="filterTextinput filter-text-input">
                                  <li class="filterli filterDatepicker filter-li">
                                    <input type="text" [(ngModel)]="filter.check_in_end_date"
                                      [matDatepicker]="endpicker" #Fdate class="filterTextbox filter-textbox"
                                      placeholder="Enter End Date" [min]="endminday" [max]="endmaxday"
                                      (dateChange)="keyPressed()">
                                    <mat-datepicker-toggle matSuffix [for]="endpicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #endpicker></mat-datepicker>
                                  </li>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ul>
                      </section>
                      <div class="filter-footer mt-1 mx-auto text-center" *ngIf="filterapplied === true">
                        <button class="btn reset-btn" (click)="clearFilter()" style="margin-top: 5px;">
                          <i class="fa fa-undo"></i>&nbsp;Reset
                        </button>
                        <button class="btn apply-btn" (click)="applyFilter()">
                          <i class="fa fa-check"></i>&nbsp;Apply
                        </button>
                      </div>
                    </aside>
                  </div>

                </tr>
              </tbody>
              <tbody>
                <ng-container *ngIf="leads.length === 0">
                  <tr>
                    <td class="nodatafound" colspan="5">{{no_leads_cap}}</td>
                  </tr>
                </ng-container>
                <ng-container *ngIf="leads.length>0">
                  <tr *ngFor="let lead of leads | paginate: config; let i=index" (click)="openLead(lead.uid)"
                    style="cursor:pointer">
                    <td data-title="Lead Details" class="td1" *ngIf="lead.leadId">{{lead.leadId}}</td>
                    <td data-title="Lead Details" class="td2">
                      <span *ngIf="lead.customer && lead.customer.name">{{lead.customer.name}}</span>
                      <span *ngIf="lead.customer && (lead.customer.name===undefined)">---------</span>
                    </td>
                    <td data-title="Lead Details" class="td2"><span
                        *ngIf="lead.assignee && lead.assignee.name">{{lead.assignee.name}}</span>
                    </td>
                    <td data-title="Lead Details" class="td2" *ngIf="lead.createdDate">
                      {{lead.createdDate  |date: newDateFormat}}
                    </td>
                    <td data-title="Lead Details" class="td2"
                      *ngIf="(lead.status && (lead.status.name==='New' || lead.status.name==='Sales Verified'))&& lead.isRedirected">
                      Redirected
                    </td>
                    <td data-title="Lead Details" class="td2"
                      *ngIf="(lead.status && (lead.status.name==='New' || lead.status.name==='Sales Verified'))&& (!lead.isRedirected)">
                      Pending
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
            <div class="search_paging my-2" *ngIf="pagination.totalCnt>10 ">
              <pagination-template *ngIf="pagination.totalCnt>10" #p="paginationApi" [id]="config.id"
                (pageChange)="config.currentPage = $event">
                <div
                  class="custom-pagination d-flex justify-content-between align-items-center flex-wrap pull-right mb-0">
                  <div class="pagination-previous mx-2" [class.disabled]="p.isFirstPage()" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="previous">
                    <a *ngIf="!p.isFirstPage()" (click)="p.previous()">
                      < </a>
                  </div>
                  <div *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value">
                    <a (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value">
                      <span class="mx-2">{{ page.label }}</span>
                    </a>
                    <div *ngIf="p.getCurrent() === page.value">
                      <span>{{ page.label }}</span>
                    </div>
                  </div>
                  <div class="pagination-next mx-2" [class.disabled]="p.isLastPage()" data-bs-toggle="tooltip"
                    data-bs-placement="top" title="next">
                    <a *ngIf="!p.isLastPage()" (click)="p.next()"> > </a>
                  </div>
                </div>
              </pagination-template>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>