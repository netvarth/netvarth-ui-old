<!-----card header start-->
<section class="card cardBoxShadow">
    <div class="title-gb no-padding">
      <div class="mgn-up-15 mgn-lt-15 mgn-rt-15 dash-head">
        <span class="fa fa-arrow-left pointer-cursor" (click)="goback()"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
       {{selectHeader}}
        <!-- <i class="fa fa-question-circle-o fa-lg fl-right" (click)="goback()"></i> -->
      </div>
    </div>
  </section>
  <!-----card header end-->
  <br>
  <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
  <!----task card start-->
  <section  class="card">
      <div class=" card bgColor">
        <form    [formGroup]="createTaskForm">
            <!----task title statrt-->
            <div>
                <div class="taskTitle">
                  <div>Task Title</div>
                  <div class="astericColor">*</div>
                </div>
                <!--input field start-->
                <div class="fieldPadding">
                      <!-- <label class="p-0 pb-1 m-0">Enter your third party listing site *</label> -->
                      <input (keyup)="resetErrors()" type="text" #taskTitle (ngModelChange)="hamdleTaskTitle(taskTitle.value)"
                  placeholder="Enter task title"class="form-control"formControlName="taskTitle"autocomplete="off" [value]="taskTitle" /> 
                     <!-- <div *ngIf="boolenTaskError">{{taskErrorText}}</div> -->
                      <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                          </app-field-error-display>
                </div>                                      
                <!---input field end-->
  
            </div>
            <!---task title end-->
            <!----task description start-->
           <div>
            <div class="taskTitle">
                <div>Task Description</div>
                <div class="astericColor">*</div>
              </div>
              <!--textarea start-->
             <div  class="fieldPadding">
                    <textarea rowa="10" class="form-control" formControlName="taskDescription"
                    #taskDescription (change)="handleTaskDescription(taskDescription.value)"(keyup)="autoGrowTextZone($event)"
                    maxlength="1000" placeholder="Enter task description"></textarea>
                    <!-- <div *ngIf="boolenTaskError">{{taskErrorText}}</div> -->
                    <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                    </app-field-error-display>  
             </div>                           
              <!--textarea end-->
           </div>
            <!-----task description end-->
            <!--assign member start-->
            <div>
                <div class="taskTitle">
                    <div>Task Assign Member</div>
                    <div class="astericColor">*</div>
                  </div>
                  <!--textarea start-->
             <div class="fieldPadding">
                <div>
                    <div [(ngModel)]="selectMember" class="form-control" style="display: flex;justify-content: space-between;"(click)="selectMemberDialog(selectMember)" >
                        <div >{{selectMember}}</div>
                        <div style="cursor: pointer;"  ><i class="fa fa-user" aria-hidden="true"></i></div>
                    </div>
                </div>
                <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                </app-field-error-display>  
             </div>                           
              <!--textarea end-->

            </div>
            <!---assign member end-->
            <!--manager start-->
            <div>
                <div class="taskTitle">
                    <div>Task Manager</div>
                    <div class="astericColor">*</div>
                  </div>
                 <!--input field start-->
                <div class="fieldPadding">
                    <!-- <label class="p-0 pb-1 m-0">Enter your third party listing site *</label> -->
                    <!-- <input (keyup)="resetErrors()" type="text" #taskManager (ngModelChange)="hamdleTaskManager(taskManager.value)"
                placeholder="Enter task manager"class="form-control"formControlName="taskManager"autocomplete="off" />  -->
                <div>
                    <div  [(ngModel)]="selectTaskManger" class="form-control" style="display: flex;justify-content: space-between;"(click)="selectManagerDialog(selectTaskManger)" >
                        <div>{{selectTaskManger}}</div>
                        <div style="cursor: pointer;"  ><i class="fa fa-user" aria-hidden="true"></i></div>
                    </div>
                </div>
                   
                    <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                        </app-field-error-display>
              </div>                                      
              <!---input field end-->

            </div>
            <!---manager end-->
            <div style="display: flex;gap: 5px" >
 <!---category start-->
                <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding">
                    <div class="taskTitle">
                        <div>Task Category</div>
                        <div class="astericColor">*</div>
                      </div>
                      <!--dropdown start-->
                      <div class="fieldPadding">
                                <mat-select class="form-control widthWebKit" placeholder="Enter Category"
                                    #userTaskCategory formControlName="userTaskCategory" >
                                    <mat-option *ngFor="let item of categoryListData[0];let index=i" [value]="item.id"  (selectionChange)="handleTaskCategorySelection(userTaskCategory.value)">
                                    <div>
                                        {{item.name}}
                                    </div>
                                    </mat-option>
                                </mat-select>
                      </div>
                      <!--dropdown end-->
    
                </div>
                <!---category end-->
                <!----task type start-->
                <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding">
                    <div class="taskTitle">
                        <div>Type</div>
                        <div class="astericColor">*</div>
                      </div>
                      <!--dropdown start-->
                      <div class="fieldPadding">
                                <mat-select class="form-control widthWebKit" placeholder="Enter Type"
                                    #userTaskType formControlName="userTaskType" >
                                    <mat-option *ngFor="let item of taskTypeList[0];let index=i" [value]="item.id"  (selectionChange)="handleTaskTypeSelection(userTaskType.value)">
                                    <div>
                                        {{item.name}}
                                    </div>
                                    </mat-option>
                                </mat-select>
                      </div>
                      <!--dropdown end-->
    
                </div>
                 <!----task type end-->
            </div>
            <!----location & status start-->
            <div style="display: flex;gap: 5px" >
                <!---location start-->
                               <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding">
                                   <div class="taskTitle">
                                       <div>Location</div>
                                       <div class="astericColor">*</div>
                                     </div>
                                     <div class="fieldPadding">
                                        <input (keyup)="resetErrors()" [(ngModel)]="locationName" type="text" #taskLocation (ngModelChange)="handleTaskLocation(taskLocation.value)"
                                        placeholder="Enter task location"class="form-control widthWebKit"formControlName="taskLocation"autocomplete="off" [value]="taskLocation.name" /> 
                                            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                                                </app-field-error-display>
                                               
                                     </div>
                               </div>
                               <!---location end-->
                               <!----status type start-->
                               <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding">
                                   <div class="taskTitle">
                                       <div>Status</div>
                                       <div class="astericColor">*</div>
                                     </div>
                                     <!--dropdown start-->
                                     <div class="fieldPadding">
                                        <!-- <input (keyup)="resetErrors()" type="text" #taskStatus (ngModelChange)="handleTaskStatus(taskStatus.value)"
                                        placeholder="Enter task status"class="form-control"formControlName="taskStatus"autocomplete="off" />  -->
                                        <mat-select class="form-control widthWebKit" placeholder="Enter task status"
                                #taskStatus formControlName="taskStatus" name="item" [(ngModel)]="taskStatusModal" (selectionChange)="handleTaskStatus(taskStatus.value)">
                                <mat-option *ngFor="let item of taskStatusList[0];let index=i" [value]="item.id"  >
                                <div>
                                    {{item.name | capitalizeFirst}}
                                </div>
                                </mat-option>
                            </mat-select>
                                           
                                            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                                                </app-field-error-display>
                                     </div>
                                     <!--dropdown end-->
                   
                               </div>
                                <!----status type end-->
                           </div>
            <!---location & status end-->
            <!--date & time start-->
            <div style="display: flex;gap: 5px" >
                <!---date start-->
                               <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding">
                                   <div class="taskTitle">
                                       <div>Due Date</div>
                                       <div class="astericColor">*</div>
                                     </div>
                                     <div class="pickerouter fieldPadding dt dateWithMatDtae" >
                                        <input [(ngModel)]="taskDueDate" formControlName="taskDate" class="form-control widthWebKit positionNameInput" type="text"  matInput
                                            [matDatepicker]="picker" [min]="minDate" [max]="maxDate"
                                            [value]="ddate" (dateChange)="handleDateChange($event)" placeholder="Enter Date" #taskDate>
                                            <mat-datepicker-toggle matSuffix [for]="picker">
                                            </mat-datepicker-toggle>
                                            <mat-datepicker #picker [dateClass]="dateClass.bind(this)">
                                            </mat-datepicker>
                                            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                                                </app-field-error-display>
                                               
                                     </div>
                               </div>
                               <!---date end-->
                               <!----time start-->
                               <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding" *ngIf="bEstDuration" >
                                   <div class="taskTitle">
                                       <div>Est Duration</div>
                                       <div class="astericColor">*</div>
                                     </div>
                                     <!-- *ngIf="createBTimeField" -->
                                     <div class="fieldPadding"  >
                                        <input [(ngModel)]="taskDueTime" [value]="taskTime" (keyup)="resetErrors()"  type="time" #taskTime (ngModelChange)="handleTaskEstDuration(taskTime.value)"
                                        placeholder="Enter Est Duration"class="form-control widthWebKit" formControlName="taskTime"autocomplete="off" /> 
                                           
                                            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
                                                </app-field-error-display>
                                     </div>
                                     <!-- <div class="fieldPadding" *ngIf="updateBTimefield" >
                                         <div class="form-control" style="display: flex !important;justify-content: space-between;align-items: center;">
                                           <div>{{updateValue.estDuration.days}}days,{{this.updateValue.estDuration.hours}}hours,{{this.updateValue.estDuration.minutes}}minutes</div>
                                           <div (click)="openTimeField()"><mat-icon>access_time</mat-icon></div>
                                         </div>
                                     </div> -->
                   
                               </div>

                               <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding" *ngIf="updateBTimefield">
                                <div class="taskTitle">
                                    <div>Est Duration</div>
                                    <div class="astericColor">*</div>
                                  </div>
                                  <div class="fieldPadding"  >
                                      <div class="form-control widthWebKit" style="display: flex !important;justify-content: space-between;align-items: center;" *ngIf=" updateValue.estDuration.hours !=0">
                                        <div>{{updateValue.estDuration.days}}(Days),{{this.updateValue.estDuration.hours}}(Hours)</div>
                                      </div>
                                      <div class="form-control widthWebKit" style="display: flex !important;justify-content: space-between;align-items: center;" *ngIf=" updateValue.estDuration.hours ===0">
                                        <div>{{updateValue.estDuration.days}}(Days)</div>
                                      </div>
                                  </div>
                
                            </div>
                                <!----time end-->
                           </div>
            <!--date & time end-->
            <!---priority start-->
            <div >
                <div class="taskTitle">
                    <div>Priority</div>
                    <div class="astericColor">*</div>
                  </div>
                  <!--dropdown start-->
                  <div class="fieldPadding">
                            <mat-select class="form-control" placeholder="Select Priority"
                                #userTaskPriority formControlName="userTaskPriority"[(ngModel)]="taskPriority" (ngModelChange)="handleTaskPrioritySelection(userTaskPriority.value,'taskPriority')">
                                <mat-option  *ngFor="let item of taskPriorityList[0];let index=i" [value]="item.id"  >
                                <div>
                                    {{item.name}}
                                </div>
                                </mat-option>
                            </mat-select>
                  </div>
                  <!--dropdown end-->
            </div>
            <!---priority end-->
            <!---target potential & target result start-->
            <div style="display: flex;gap: 5px" >
                <!---target result start-->
                               <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding">
                                   <div class="taskTitle">
                                       <div>Target Potential</div>
                                       <div class="astericColor">*</div>
                                     </div>
                                     <div class="fieldPadding">
                                        <input (keyup)="resetErrors()" type="text" #targetResult (ngModelChange)="handleTargetResult(targetResult.value)"
                                        placeholder="Enter potential"class="form-control widthWebKit"formControlName="targetResult"autocomplete="off" /> 
                                            
                                     </div>
                   
                               </div>
                               <!---target result end-->
                               <!----target potential start-->
                               <div class="lbl col-sm-8 col-md-4 col-lg-3 no-padding">
                                   <div class="taskTitle">
                                       <div>Business Potential</div>
                                       <div class="astericColor">*</div>
                                     </div>
                                     <!--dropdown start-->
                                     <div class="fieldPadding">
                                        <input (keyup)="resetErrors()" type="text" #targetPotential (ngModelChange)="handleTargetPotential(targetPotential.value)"
                                        placeholder="Enter currency"class="form-control widthWebKit"formControlName="targetPotential"autocomplete="off" /> 
                                               
                                     </div>
                                     <!--dropdown end-->
                   
                               </div>
                                <!----target potential end-->
                           </div>
            <!---target potential & target result end-->

            <!---cancel save btn start-->
            <div style="text-align: center;margin-top: 15px;">
                <ng-container >
                    <div class=" mgn-bt-20 mgn-up-10">
                            <button type="button" class="btn btn-primary font-weight-bold cancelBtn" (click)="goback()"
                            >Cancel</button>
                        <button
                        [ngClass]="{
                            'btn btn-primary font-weight-bold cancelBtn': !createTaskForm.valid,
                            'btn btn-primary font-weight-bold confirmBtn': createTaskForm.valid
                          }" [class.spinner]="api_loading" 
                          [class.disabled]="api_loading" [class.spinner-center]="api_loading"  type="button"  (click)="saveCreateTask()"
                            >{{showCreateTaskButtonCaption()}}</button>
                            
                            
                    </div>
                </ng-container>
            </div>

            <!---cancel save btn end-->
        </form>

      </div>
      

  </section>
  <!----task card end-->
