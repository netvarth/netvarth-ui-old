<section class="card">
  <div class="title-gb no-padding">
    <div class="dash-head text-primary">
      <span class="fa fa-arrow-left pointer-cursor border-cirlce" (click)="goBack()"></span>&nbsp;
     {{headerName}}
    </div>
  </div>
  
</section>
<section class="container card mt-4 mx-auto" *ngIf="taskDetails">
  <!-- <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner> -->
  <div >
  <div stye="padding:10px">
    <div class="headerName">
      {{headerName}}
    </div>
    <hr />
  </div>
  <!----task details start-->
  <div class="taskAndNote">
    <div class="formWidth">
    <div class="taskDetailsEnterHeader">
      {{taskDetailsDescription}}
    </div>
    <hr />
    <form [formGroup]="taskDetailsForm">
      <div >
      <!---activityu name start-->
      <div class="formTop" *ngIf="bTaskTitle">
        <div class="taskTitle">
            <div class="inputlabel">Activity Name</div>
            <div class="astericColor">*</div>
        </div>
        <div>
          <div class="fieldPadding">
            <input (keyup)="resetErrors()" type="text" #taskTitle (ngModelChange)="oneField(taskTitle.value)"
                (ngModelChange)="handleTaskTitle(taskTitle.value,$event)" placeholder="Enter task title"
                class="form-control" formControlName="taskTitle" autocomplete="off"
                [value]="taskTitle" />
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;"
                *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>
        </div>
        </div>
      </div>
      <!---activityu name start-->
      <!---description start-->
      <div class="formTop" *ngIf="bTaskDescription">
        <div class="taskTitle">
          <div>Description</div>
        </div>
      <div class="fieldPadding">
          <textarea rowa="10" class="form-control" formControlName="taskDescription" #taskDescription
              (ngModelChange)="handTaskDescription(taskDescription.value)"(keyup)="autoGrowTextZone($event)"
              maxlength="1000" placeholder="Enter task description" [value]="taskDescription" (ngModelChange)="oneField(taskDescription.value)">
      </textarea>
          <app-field-error-display [displayError]="true" style="color: #f24949 !important;"
              *ngIf="taskError" errorMsg="{{taskError}}">
          </app-field-error-display>
      </div>
      </div>
      <!----description end-->
      <!----area start-->
      <div class="formTop" *ngIf="bTaskAreaName">
        <div class="taskTitle">
            <div>Area</div>
        </div>
        <div class="fieldPadding">
            <input (keyup)="resetErrors()"[value]="areaName" #areaName (ngModelChange)="oneField(areaName.value)" (ngModelChange)="handeAreaName(areaName.value)" type="text"placeholder=""class="form-control" formControlName="areaName" autocomplete="off" placeholder="Enter area name" /> 
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>    
        </div>
      </div>
      <!----area end-->
      <!---assignee start-->
      <div class="formTop" *ngIf="bAssigneeName">
        <div class="taskTitle">
            <div>Assign Member</div>
            <div class="astericColor">*</div>
        </div>
        <div class="fieldPadding">
            <div>
                <div formControlName="selectMember" class="form-control" style="display: flex;justify-content: space-between;" >
                    <div >{{selectMember}}</div>
                    <div style="cursor: pointer;" (ngModelChange)="oneField(selectMember)" (click)="selectMemberDialog(selectMember)" ><i  class="fa fa-user" aria-hidden="true"></i></div>
                </div>
            </div>
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>  
        </div>                           
    </div>
      <!---assignee end-->
      <!----date start-->
      <div class="formTop" *ngIf="bTaskDate">
        <div class="taskTitle">
            <div>Due Date</div>
        </div>
        <div class="pickerouter fieldPadding dt dateWithMatDtae"  >
            <input formControlName="taskDate" class="form-control positionNameInput" type="text" matInput [matDatepicker]="picker" [min]="minDate" [max]="maxDate"
              [value]="ddate" (ngModelChange)="oneField(taskDate.value)" (dateChange)="handleDateChange($event)" placeholder="Enter Date" #taskDate>
            <mat-datepicker-toggle matSuffix [for]="picker">
              <!-- <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon> -->
            </mat-datepicker-toggle>
            <mat-datepicker #picker [dateClass]="dateClass.bind(this)">
            </mat-datepicker>
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>       
        </div>
    </div>
      <!----date end-->
      <!---category start-->
      <div class="formTop" *ngIf="bTaskCategory">
        <div class="taskTitle">
            <div>Category</div>
            <div class="astericColor">*</div>
        </div>
        <div class="fieldPadding">
        <mat-select class="form-control " placeholder="Enter Category"
            #userTaskCategory formControlName="userTaskCategory" (ngModelChange)="oneField(userTaskCategory.value)" (selectionChange)="handleTaskCategorySelection(userTaskCategory.value)" >
            <mat-option *ngFor="let item of categoryListData[0];let index=i" [value]="item.id"  (ngModelChange)="handleTaskCategorySelection(userTaskCategory.value)" >
                <div>
                    {{item.name}}
                </div>
            </mat-option>
        </mat-select>
        </div>
        <!-- <div *ngIf="bErrormsgCategory" style="color: #f24949 !important;font-size: 12px;">{{errorMsgAnyCategory}}</div> -->
    </div>
      <!----category end-->
      <!----tasktype start-->
      <div class="formTop" *ngIf="bTaskType">
        <div class="taskTitle">
            <div>Type</div>
            <div class="astericColor">*</div>
        </div>
        <div class="fieldPadding">
        <mat-select class="form-control" placeholder="Enter Type"
            #userTaskType formControlName="userTaskType" (ngModelChange)="oneField(userTaskType.value)" (selectionChange)="handleTaskTypeSelection(userTaskType.value)">
            <mat-option *ngFor="let item of taskTypeList[0];let index=i" [value]="item.id"  (ngModelChange)="handleTaskTypeSelection(userTaskType.value)">
                <div>
                    {{item.name}}
                </div>
            </mat-option>
        </mat-select>
        </div>  
    </div>
      <!----task type end-->
      <!----location start-->
      <div class="formTop" *ngIf="bTaskLocation">
        <div class="taskTitle">
            <div>Location</div>
            <div class="astericColor">*</div>
        </div>
        <div class="fieldPadding">
            <input (keyup)="resetErrors()" (ngModelChange)="oneField(taskLocation.value)"  type="text" #taskLocation (ngModelChange)="handleTaskLocation(taskLocation.value)"
            placeholder="Enter activity location"class="form-control" formControlName="taskLocation" autocomplete="off" [value]="taskLocation.name" /> 
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>    
        </div>
    </div>
      <!----location end-->
      <!----task manager start-->
      <div class="formTop" *ngIf="bTaskManager">
        <div class="taskTitle">
            <div>Manager</div>
        </div>
        <div class="fieldPadding">
            <div>
                <div (ngModelChange)="oneField(selectTaskManger)"  [formControlName]="selectTaskManger" class="form-control" style="display: flex;justify-content: space-between;"(click)="selectManagerDialog(selectTaskManger)" >
                    <div>{{selectTaskManger}}</div>
                    <div style="cursor: pointer;"  ><i class="fa fa-user" aria-hidden="true"></i></div>
                </div>
            </div>
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>
        </div>                                     
    </div>
      <!---task manager end-->
      <!----est duration start-->
      <div class="formTop" *ngIf="bTaskEstDuration">
        <div class="taskTitle">
            <div>Est Duration</div>
        </div>
        <div class="fieldPadding d-flex" style="gap: 5px;flex-wrap: wrap;"  >
            <div class="estField">
                <div class="secondEst">
                    <input id="days" (ngModelChange)="oneField(taskDays.value)" [value]="taskDays" (keyup)="resetErrors()"  type="number" #taskDays (ngModelChange)="handleTaskEstDuration(taskDays.value)"
                placeholder="Days" class="form-control " formControlName="taskDays"   autocomplete="off" min="0"/>
                </div>
                <div class="timeField">Days</div>
            </div>
            <div class="estField">
                <div class="secondEst">
                    <input id="hrs" (ngModelChange)="oneField(taskHrs.value)" [value]="taskHrs" (keyup)="resetErrors()"  type="number" #taskHrs (ngModelChange)="handleTaskEstDuration(taskHrs.value)"
            placeholder="Hours" class="form-control " formControlName="taskHrs"   autocomplete="off" min="0" max="23"/>
                </div>
                <div class="timeField"> Hours </div>
            </div>
            <div class="estField">
                <div class="secondEst">
                    <input id="min" (ngModelChange)="oneField(taskMin.value)" [value]="taskMin" (keyup)="resetErrors()"  type="number" #taskMin (ngModelChange)="handleTaskEstDuration(taskMin.value)"
                    placeholder="Minutes" class="form-control" formControlName="taskMin"   autocomplete="off" min="0" max="59"/>
                </div>
                <div class="timeField">
                    Minutes 
                </div>
            </div>
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>
        </div>
    </div>
      <!----est duration end-->
      <!---priority start-->
      <div class="formTop" *ngIf="bTaskPriority"> 
        <div class="taskTitle">
            <div>Priority</div>
        </div>
        <div class="fieldPadding">
            <mat-select class="form-control" placeholder="Select Priority"
                #userTaskPriority formControlName="userTaskPriority" (ngModelChange)="oneField(userTaskPriority.value)" (ngModelChange)="handleTaskPrioritySelection(userTaskPriority.value,'taskPriority')">
                <mat-option  *ngFor="let item of taskPriorityList[0];let index=i" [value]="item.id" >
                    <div>
                        {{item.name}}
                    </div>
                </mat-option>
            </mat-select>
        </div>
    </div>
      <!--priority end-->
      <!---status start-->
      <div class="formTop" *ngIf="bTaskStatus">
        <div class="taskTitle">
            <div>Status</div>
        </div>
        <div class="fieldPadding">
          <!-- [disabled]="!editable" -->
            <mat-select [disabled]="!editable"  class="form-control" placeholder="Enter activity status"
                #taskStatus formControlName="taskStatus" name="item" (ngModelChange)="oneField(taskStatus.value)"  (selectionChange)="handleTaskStatus(taskStatus.value)">
                <mat-option *ngFor="let item of taskStatusList[0];let index=i" [value]="item.id"  >
                    <!-- <div>
                        {{item.name | capitalizeFirst}}
                    </div> -->
                    <div [ngStyle]="{'color': getColor(item.name)}">
                        {{item.name | capitalizeFirst}}
                    </div>
                </mat-option>
            </mat-select>
            <app-field-error-display [displayError]="true" style="color: #f24949 !important;" *ngIf="taskError" errorMsg="{{taskError}}">
            </app-field-error-display>
        </div>
    </div>
      <!---status end-->
      <!---target potential start-->
      <div class="formTop" *ngIf="bTaskTargetPotential">
        <div class="taskTitle">
            <div>Target Potential</div>
        </div>
        <div class="fieldPadding">
            <input (keyup)="resetErrors()" type="text" (ngModelChange)="oneField(targetResult.value)" #targetResult (ngModelChange)="handleTargetResult(targetResult.value)"
            placeholder="Enter potential"class="form-control "formControlName="targetResult"  autocomplete="off" /> 
        </div>
    </div>
      <!---target potential end-->
      <!----business potential start-->
      <div class="formTop" *ngIf="bTaskBusinessPotential">
        <div class="taskTitle">
            <div>Business Potential</div>
        </div>
        <div class="fieldPadding" >
            <input min="0" (ngModelChange)="oneField(targetPotential.value)" (keyup)="resetErrors()" type="number" #targetPotential (ngModelChange)="handleTargetPotential(targetPotential.value)" 
            placeholder="Enter ({{rupee_symbol}})"class="form-control "formControlName="targetPotential"autocomplete="off" />           
        </div>
    </div>
      <!---business potential end-->
      <div >
        <div *ngIf="taskDetails.title ==='Follow Up 1' || taskDetails.title ==='Follow Up 2'" >
          <div class="card" style="border: 0.772915px solid #D9D5D5 !important;" >
            <div class="statusResult">
              <div style="font-size: 12px;font-weight: bold;">Enter Result</div>
            <div class="statusListClass">
              <div *ngFor="let item of taskStatusList[0]">
                <div *ngIf="item.name==='Proceed'" class="statusClass1" (click)="selectStatus(item)" id="A">
                  <div>{{item.name}}</div>
                  <div>
                    <img class="imageStatus" src="/assets/images/crmImages/completed2.png" />
                  </div>
                </div>
                <div *ngIf="item.name==='Pending'" class="statusClass2" (click)="selectStatus(item)" id="B">
                  <div>{{item.name}}</div>
                  <div>
                    <img class="imageStatus" src="/assets/images/crmImages/inProgress2.png" />
                  </div>
                </div>
                <div *ngIf="item.name==='Rejected'" class="statusClass3" (click)="selectStatus(item)" id="C">
                  <div>{{item.name}}</div>
                  <div>
                    <img class="imageStatus" src="/assets/images/crmImages/cancelled.png" />
                  </div>
                </div>
              </div>
            </div>
            </div>
          </div>
        </div>
      </div>
      
      <!----for web cancel save btn-->
      <div style="text-align: center;margin-top: 15px;" class="forWeb" *ngIf=" !bTaskFollowUpResult">
        <ng-container >
            <div class=" mgn-bt-20 mgn-up-10">
                <button type="button" class="btn btn-primary font-weight-bold cancelBtn" (click)="goback()"
                    >Cancel
                </button>
                <button class="btn btn-primary font-weight-bold confirmBtn"
                  [class.spinner]="api_loading" 
                    [class.disabled]="api_loading" [class.spinner-center]="api_loading"  type="button"  (click)="saveCreateTask()">Save
                </button>
            </div>
        </ng-container>
    </div>
    <!------for web cancel & save btn -->
    </div>
    </form>
  </div>
  <!----\files start-->
  <div class="notesWidth">
    <div class="notesSection">
      <div class="fiesWithIcon">
        <div>
          <span class="card-title"><b>Files</b></span> 
        </div>
        <div *ngIf="taskDetails.attachments.length>0">
          <span (click)="attatchmentDialog(taskDetails.attachments)" class="pointer-cursor fa fa-external-link"></span>
        </div>
      </div>
      <!-- <hr /> -->
      <div class="text-left" >
          <div class="filesUploadThings">
            <div *ngIf="taskType !=='SubTask'"  mat-button [mat-dialog-close]="true" class="lnk action pointer-cursor btn btn-primary upload-file-btn text-primary inputFile"  (click)="uploadFiles()">
              <div class="filesUploadThingsAction">
               <img width="25px" src="/assets/images/crmImages/fileUpload.png"  />
              <div class="text-dark btn-text">Click or Upload Files related to activity</div>
              </div>
            </div>
            <div *ngIf="taskType==='SubTask'" mat-button [mat-dialog-close]="true" class="lnk action pointer-cursor btn btn-primary upload-file-btn text-primary inputFile"  (click)="uploadFiles()">
              <div class="filesUploadThingsAction">
               <img width="25px" src="/assets/images/crmImages/fileUpload.png"  />
             <div class="text-dark btn-text">Click or Upload Files related to subactivity</div>
              </div>
            </div>
          </div>
          <!-- <span class="label" ><b></b></span> -->
          <div *ngIf="taskDetails.attachments.length>0" style="display: flex;align-items: center;margin-left: 10px;gap:5px" >
            <div>
              <img style="height:25px" src="/assets/images/crmImages/fileUploADHeader.png" />
            </div>
            <div class="label"style="padding:0px !important">
             ( Uploaded Files )
            </div>
          </div>
          <div class="my-2  height-limit" *ngIf="taskDetails.attachments.length>0">
            <div >
              <div *ngFor="let attachment of taskDetails.attachments;let i=index" class="allNotesList">
                <div class="notesListSection">
                  <div style="color: #121212;">{{attachment.originalName}}<br><span class="labelFile"><b>File Type : </b>{{attachment.type}} &nbsp;&nbsp;&nbsp;<b>Size : </b>{{attachment.size}} MB</span></div>
                  <a style="cursor: pointer;" href="{{attachment.s3path}}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i></a>
                </div>
               </div>
            </div>
          </div>
      </div>
    </div>
    <!---notes start-->
  <div style="margin-top:10px" >
    <div class="textareaStart">
      <div class="fiesWithIcon">
        <div>
          <span class="card-title"><b>Remarks</b></span> 
        </div>
        <div *ngIf="taskDetails.notes.length>0">
          <span (click)="noteView(taskDetails)" class="pointer-cursor fa fa-external-link"></span>
        </div>
      </div>
      <div style="padding:10px">
        <textarea  rows="10" class="form-control" [(ngModel)]="notesTextarea" #taskDescription
      (ngModelChange)="handleNotesDescription(taskDescription.value)" (keyup)="autoGrowTextZone($event)"
      maxlength="1000" placeholder="Enter remarks description" style=" height: 85px !important;background: #FCFCFC !important;border: 1.07315px solid #C9C9C9 !important;border-radius: 11.8046px !important;"></textarea>
      </div>
      <div *ngIf="errorMsg" class="errorMsg">
        <div>{{assignMemberErrorMsg}}</div>
    </div>
      <!---cancel save btn start-->
    <div style="display: flex;justify-content: flex-end;align-items: center;margin-right: 10px;margin-bottom: 10px;">
      <div style="text-align: center;">
          <ng-container>
              <div>
                  <button type="button" class="btn btn-primary font-weight-bold confirmBtn"
                      (click)="saveCreateNote(notesTextarea)">Add Remarks</button>
              </div>
          </ng-container>
      </div>
    </div>
  <!---cancel save btn end-->
  <!-- <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner> -->
  <!-- <span class="label" *ngIf="taskDetails.notes.length>0 "><b>Saved Remarks</b></span> -->
  <div *ngIf="taskDetails.notes.length>0 " style="display: flex;align-items: center;margin-left: 10px;" >
    <div>
      <img style="height:25px" src="/assets/images/crmImages/noteIcon.png" />
    </div>
    <div class="label"style="padding:0px !important">
     ( Saved Remarks)
    </div>
  </div>
          <div class="my-2  height-limit" *ngIf="taskDetails.notes.length>0 ">
            <!-- <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner> -->
            <div >
              <div *ngFor="let note of taskDetails.notes;let i=index" class="allNotesList" style="display: flex;justify-content: space-between;align-items: center;">
                <div class="notesListSection">
                  {{note.note}}
                </div>
                <div class="notesListSection">
                   <div>{{note.createdDate}}</div>
                </div>
               </div>
            </div>
          </div>
    </div>
  </div>
  <!---notes end-->

  </div>
  
  <!----files end-->
  </div>
  <!----task details end -->
  <!----for mobile cancel & save btn-->
  <div style="text-align: center;margin-top: 15px;" class="forMobile">
    <ng-container >
        <div class=" mgn-bt-20 mgn-up-10">
            <button type="button" class="btn btn-primary font-weight-bold cancelBtn" (click)="goback()"
                >Cancel
            </button>
            <button class="btn btn-primary font-weight-bold confirmBtn"
              [class.spinner]="api_loading" 
                [class.disabled]="api_loading" [class.spinner-center]="api_loading"  type="button"  (click)="saveCreateTask()">Save
            </button>
        </div>
    </ng-container>
</div>
  <!----for mobile cancel & save btn-->
</div>
</section>



<!-- <section class="container card mt-4 mx-auto" *ngIf="taskDetails">
  <h3>{{taskDetails.title}}</h3>
  <div class="task-description mb-2">
    {{taskDetails.description}}
  </div>
  <div class="text-primary location-name mb-2">
    <i *ngIf="taskDetails && taskDetails.locationArea || (taskDetails && taskDetails.location && taskDetails.location.name)" class="fa fa-map-marker"></i>&nbsp;
    <span *ngIf="taskDetails.locationArea">{{taskDetails.locationArea}},</span>
    <span *ngIf="taskDetails && taskDetails.location && taskDetails.location.name">{{taskDetails.location.name}}</span>
  </div>
  <div class="d-flex" *ngIf="taskDetails && taskDetails.status && taskDetails.status.name != 'Completed'">
    <div>
      <a [matTooltipClass]="tooltipcls"
          class="navbar-item-color bold pointer-cursor">
            <button type="button"   [matMenuTriggerFor]="appMenu" class="btn btn-outline-primary"> 
             <span class="text-dark">Actions</span><i style="margin-left: 5px;" class="fa fa-chevron-down"></i>
            </button>
            <mat-menu #appMenu="matMenu">
                <button style="align-items:center !important;" mat-menu-item  (click)="openEditTask(taskDetails,'Update',taskDetailsData)"  data-toggle="modal" data-target="#exampleModalCenter">
                  <span>
                    <img class="imageStatus" src="/assets/images/crmImages/edit.png" />
                  </span>
                  <span *ngIf="(taskType != 'SubTask')" class="text-dark">Edit Activity</span>
                  <span *ngIf="(taskType === 'SubTask')"class="text-dark">Edit SubActivity</span>
                </button>
                <button style="align-items:center !important;" mat-menu-item (click)="createSubTask(taskUid)" *ngIf="taskType != 'SubTask'">
                  <span >
                    <i class="text-primary fa fa-plus-square-o"></i>
                  </span>
                  <span class="text-dark">Create Subactivity</span>
                </button>
                <button style="align-items:baseline !important;" mat-menu-item (click)="progressbarDialog()" >
                  <span >
                    <i class='fa fa-spinner green-color'></i>&nbsp;&nbsp;
                  </span>
                  <span class="text-dark">Change Progress</span>
                </button>
                <button style="align-items:baseline !important;" mat-menu-item (click)="openDialogStatusChange(taskDetails)" *ngIf="taskType != 'SubTask'">
                  <span >
                    <i class="fa fa-refresh" aria-hidden="true"></i>&nbsp;&nbsp;
                  </span>
                  <span class="text-dark">Change Status</span>
                </button>
                <button style="align-items:baseline !important;" mat-menu-item (click)="openDialogStatusChangeLeadToTask(taskDetails)" *ngIf="taskType === 'SubTask'">
                  <span >
                    <i class="fa fa-refresh" aria-hidden="true"></i>&nbsp;&nbsp;
                  </span>
                  <span class="text-dark">Change Status</span>
                </button>
            </mat-menu>
          </a>
    </div>



    <div>
      <button class="btn btn-outline-primary mx-2" (click)="openAddNoteDialog('AddNote')">Add Remarks</button>
    </div>
    <div *ngIf="taskDetails && taskDetails.status && taskDetails.status.name != 'Cancelled'">
      <button class="btn btn-outline-primary mx-2" (click)="markAsDone(taskUid)">Mark as done</button>
    </div>
  </div>
</section> -->

<!-- <section>
  <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
  <div class="container card mt-2 mx-auto" *ngIf="!api_loading">
    <div class="col-md-12 no-padding-small" *ngIf="taskDetails">
      <div class="row d-lg-flex justify-content-between">
        <div class="border col-md-12 col-lg-12 col-sm-12 col-xs-12 no-padding">
          <div class="d-flex">
            <div>
              <circle-progress class="circle__progress" [percent]="taskDetails.progress" [animation]="true"
                              [animationDuration]="300" [startFromZero]="true" [showInnerStroke]="true"
                              [titleFontSize]="'10'" [titleFontWeight]="'900'" [height]="'100'" [unitsFontSize]="'10'"
                              [unitsFontWeight]="'700'" [subtitle]="taskDetails.status && taskDetails.status.name" [subtitleFontSize]="'7'"
                              [lazy]="false"></circle-progress>
            </div>
            <div class="ml-3">
              <span class="details text-dark" *ngIf="taskDetails && taskDetails.assignee && taskDetails.assignee.name"><b> Assigned to {{taskDetails.assignee.name}} </b></span><br>
              <span class="details text-secondary" *ngIf="taskDetails && taskDetails.manager && taskDetails.manager.name">Manager : {{taskDetails.manager.name}}</span><br>
              <span class="details text-warning" *ngIf="taskDetails && taskDetails.priority && taskDetails.priority.name">Priority : {{taskDetails.priority.name}} </span><br>
              <span class="details text-secondary" *ngIf="taskDetails && taskDetails.dueDate">Due date : {{taskDetails.dueDate | date:newDateFormat}} </span><br>
              <span class="details text-dark" *ngIf="taskDetails && taskDetails.actualResult"><b>Actual Result : <span class="text-success">{{taskDetails.actualResult}}</span> </b></span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row d-lg-flex justify-content-lg-start">
        <div class="border col-md-4 col-lg-4 col-sm-12 col-xs-12 no-padding mt-2">
          <div class="d-flex justify-content-between">
            <div>
              <span class="card-title"><b>Files</b></span> 
            </div>
            <div *ngIf="taskDetails.attachments.length>0">
              <span (click)="attatchmentDialog(taskDetails.attachments)" class="pointer-cursor fa fa-external-link"></span>
            </div>
          </div>
          <hr class="my-2 py-2">
          <div class="text-left  height-limit" >
            <span>  
              <a *ngIf="taskType !=='SubTask'"  mat-button [mat-dialog-close]="true" class="lnk action pointer-cursor btn btn-primary upload-file-btn text-primary"  (click)="uploadFiles()"><i class="fa fa-paperclip mgn-rt-5" aria-hidden="true"></i>Upload
                  File<br><span class="text-dark btn-text">Add or Upload Files related to activity</span>
              </a>
              <a  *ngIf="taskType==='SubTask'" mat-button [mat-dialog-close]="true" class="lnk action pointer-cursor btn btn-primary upload-file-btn text-primary"  (click)="uploadFiles()"><i class="fa fa-paperclip mgn-rt-5" aria-hidden="true"></i>Upload
                File<br><span class="text-dark btn-text">Add or Upload Files related to subactivity</span>
            </a>
              <div class="my-2">
                <div *ngFor="let attachment of taskDetails.attachments;let i=index" class="allNotesList">
                  <div class="notesListSection">
                    <div class="text-primary">{{attachment.originalName}}<br><span class="label"><b>File Type : </b>{{attachment.type}} &nbsp;&nbsp;&nbsp;<b>Size : </b>{{attachment.size}} MB</span></div>
                    <a style="cursor: pointer;" href="{{attachment.s3path}}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i></a>
                  </div>
                 </div>
              </div>
            </span>
          </div>
        </div>

        <div class="border  col-md-4 col-lg-4 col-sm-12 col-xs-12 no-padding mt-2" *ngIf="taskDetails.notes.length>0">
          <div class="d-flex justify-content-between">
            <div>
              <span class="card-title"><b>Remarks</b></span> 
            </div>
            <div>
              <span (click)="noteView(taskDetails)" class="pointer-cursor fa fa-external-link"></span>
            </div>
          </div>
          <hr class="my-2 py-2">
          <div class="text-left height-limit">
            <span>
              <div class="my-2">
                <div *ngFor="let note of taskDetails.notes;let i=index" class="allNotesList">
                  <div class="notesListSection">
                    {{note.note}}
                  </div>
                 </div>
              </div>
            </span>
          </div>
        </div>
        
      </div>

      <div class="row d-lg-flex justify-content-lg-start" *ngIf="(taskType != 'SubTask')">
        <div  class="subtask-border  col-md-12 col-lg-12 col-sm-12 col-xs-12 no-padding mt-2" *ngIf="(taskDetails && taskDetails.status && taskDetails.status.name != ('Completed'))">
          <app-subtasks [taskid]="taskUid" ></app-subtasks>
        </div>
      </div>
      <div class="row d-lg-flex justify-content-lg-start">
        <div  class="subtask-border  col-md-12 col-lg-12 col-sm-12 col-xs-12 no-padding mt-2">
          <app-activitylog [taskType]="taskType" [taskid]="taskkid" [action]="changeAction"></app-activitylog>
        </div>
      </div>
    </div>
  </div>



</section> -->