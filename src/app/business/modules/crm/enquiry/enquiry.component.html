<section class="card">
    <div class="title-gb no-padding">
      <div class="dash-head"*ngIf="!api_loading">
       <div> <i class="fa fa-arrow-left" style="color:#1D3E77 !important" aria-hidden="true" (click)="goback()"></i></div>
       <div  style="color:#1D3E77" *ngIf="headerName">{{headerName}}</div>
      </div>
    </div>
  </section>
  <section class="card mgn-up-15">
      <div>
        <div>
            <form [formGroup]="createEnquiryForm">
                <div class="customer">
                    <div class="infoHeader ">{{customer_label | capitalizeFirst}} Info</div>
                </div>
                <div class="customerInfo mgn-up-15" >
                    <input  type="text" formControlName="enquiryDetails" #enquiry autocomplete="off"
                        class="form-control" name="search" placeholder={{searchby}} (ngModelChange)="enquiryDetailsInput(enquiry.value,$event)" (keypress)="validationField($event)" />
                        <div class="webDisplay">
                            <button id="pw" type="button" class="btn confirmBtnFind" (click)="searchCustomer($event)">
                                Search<i style="color:#fff;margin-left: 5px;" class="fa fa-search"></i> </button>
                        </div>
                          <div class="mobileDisplay">
                              <button type="button" class="btn confirmBtnFindMObile" (click)="searchCustomer($event)">
                                <i style="color:#fff;" class="fa fa-search"></i> </button>
                            </div>
                </div>
                <div class="errorClass">
                    {{errorMsg}}
                </div>
                <div *ngIf="api_loading_SearchCustomer" class="mt-2">
                    <app-common-innerloading-spinner *ngIf="api_loading_SearchCustomer"></app-common-innerloading-spinner>
                </div>
                <div class="mgn-up-15" *ngIf="!api_loading_SearchCustomer">
                    <div class="customer">
                        <div class="infoHeader ">{{customerActivityText}} {{ customer_label | capitalizeFirst}}</div>
                    </div>
                </div>
                <div class="mgn-up-15" *ngIf="!api_loading_SearchCustomer" >
                    <div class="formField">
                        <div class="taskInputField" style="margin-top: 5px;">
                            <div class="taskTitle">
                                <div>First Name</div>
                            </div>
                            <div class="fieldPadding">
                                <input (keypress)="handleNameField('firstName',firstName.value,$event)"  autocomplete="off" formControlName="firstNameValue" type="text" #firstName
                                    placeholder="{{enterFirstName}}"
                                    class="form-control" autocomplete="off" [value]="firstName" />
                            </div>
                        </div>
                        <div class="taskInputField" style="margin-top: 5px;">
                            <div class="taskTitle">
                                <div>Last Name</div>
                            </div>
                            <div class="fieldPadding">
                                <input (keypress)="handleNameField('lastName',lastName.value,$event)" autocomplete="off" formControlName="lastNameValue" type="text" #lastName
                                    placeholder="{{enterSecondName}}"
                                    class="form-control" autocomplete="off" [value]="lastName" />
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="taskInputField" style="margin-top: 5px;">
                            <div class="taskTitle">
                                <div>Phone Number</div>
                            </div>
                            <div class="fieldPadding">
                                <input (keypress)="handleNameField('phoneNo',phoneNo.value,$event)" autocomplete="off" formControlName="phoneNoValue" #phoneNo type="text"
                                     placeholder="{{enterPhoNeNo}}"
                                    class="form-control" autocomplete="off" minlength="10" maxlength="10" [value]="phoneNo" />
                            </div>
                        </div>
                        <div class="taskInputField" style="margin-top: 5px;">
                            <div class="taskTitle">
                                <div>Email</div>
                            </div>
                            <div class="fieldPadding">
                                <input (onblur)="handleNameField('email',email.value,$event)" autocomplete="off" formControlName="emailValue" type="email" #email
                                     placeholder="{{enterEmailId}}"
                                    class="form-control" autocomplete="off" [value]="email" />
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div style="margin-top: 5px;width: -webkit-fill-available;">
                            <div> 
                                <div class="taskTitle">
                                    <div>Sourcing Channel</div>
                                </div>
                                <div class="fieldPadding">
                                    <mat-select  (ngModelChange)="handleNameField('sourcingChannel',sourcingChannel.value,$event)" class="form-control" placeholder="{{sourcingChannelPlaceholder}}"
                                        #sourcingChannel formControlName="sourcingChannel">
                                        <!-- {{sourcingChhannelCatListNew[0] | json}} -->
                                        <mat-option  *ngFor="let item of sourcingChhannelCatList[0];let index=i" [value]="item.id" >
                                            <div>
                                                {{item.name}}
                                            </div>
                                        </mat-option>
                                    </mat-select>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 5px;width: -webkit-fill-available;">
                            <div> 
                                <div class="taskTitle">
                                    <div>Select Product</div>
                                </div>
                                <div class="fieldPadding">
                                    <mat-select  (ngModelChange)="handleNameField('userTaskCategory',userTaskCategory.value,$event)" class="form-control" placeholder="{{selectProduct}}"
                                        #userTaskCategory formControlName="userTaskCategory">
                                        <mat-option  *ngFor="let item of categoryList[0];let index=i" [value]="item.id" >
                                            <div>
                                                {{item.title.value}}
                                            </div>
                                        </mat-option>
                                    </mat-select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="formField">
                        <div class="taskInputField" style="margin-top: 5px;">
                            <div class="taskTitle">
                                <div>Proposed Amount</div>
                            </div>
                            <div class="fieldPadding">
                                <input (ngModelChange)="handleNameField('proposedAmount',proposedAmount.value,$event)" min="100000" autocomplete="off" formControlName="proposedAmount" type="number" #proposedAmount 
                                     placeholder="{{enterproposedAmount}}"
                                    class="form-control" autocomplete="off"  [value]="proposedAmount" />
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;margin-top: 15px;" *ngIf="!api_loading_SearchCustomer" >
                    <ng-container >
                        <div class=" mgn-bt-20 mgn-up-10">
                            <button [ngClass]="{'cursorDiasable': api_loading}" type="button" class="btn btn-primary font-weight-bold cancelBtn" (click)="!api_loading && goback()"
                                >Cancel
                            </button>
                            <button [ngClass]="{'cursorDiasable': api_loading}" class="btn btn-primary font-weight-bold confirmBtn" type="button"  (click)="!api_loading && saveCreateEnquiry()">
                                    <app-common-innerloading-spinner [spinnerParams]="{diameter:30}" *ngIf="api_loading"></app-common-innerloading-spinner>
                                    <span *ngIf="!api_loading">Save</span>
                            </button>
                        </div>
                    </ng-container>
                </div>
                <div *ngIf="emptyFielderror">
                    <app-field-error-display style="color: #f24949 !important;" [displayError]="true" 
                    errorMsg="Sorry, We were not able to find the record in our {{customer_label}}s list. 
                          Please create {{customer_label}} to take appointment">
                  </app-field-error-display>
                </div>
                
            </form>
        </div>
      </div>
  </section>