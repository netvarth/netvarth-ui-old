<section class="">
  <div class="card title-gb">
    <h5 class="mgn-up-10">
      <span class="fa fa-arrow-left pointer-cursor"  (click)="redirecToPrescriptionHome()"></span>&nbsp;&nbsp;&nbsp;&nbsp;
     {{heading}}
   </h5>

        </div>
  <!-- </section>
  <section>
      <div class="content loc-list">
          <div class="col-md-12 no-padding-small"> -->
                  <div class="card title-gb">
                          <div class="mgn-up-10">

                              <!-- <p>
                                <b>Patient:</b>
                                <span color="blue"> {{patientDetails.jaldeeId}} &nbsp;</span>
                                <span>{{patientDetails.firstName | capitalizeFirst}} {{patientDetails.lastName}}</span>
                                <span *ngIf="patientDetails.dob|| patientDetails.gender ">({{patientDetails.dob}} {{patientDetails.gender | capitalizeFirst}})</span>
                              </p> -->
                              <hr>
                             <label>Patient Name</label>  <span> {{patientDetails.firstName | capitalizeFirst}} {{patientDetails.lastName}} </span><br>
                             <label>Patient Id</label> <span> {{display_PatientId}}</span><br *ngIf="display_PatientId">
                             <label *ngIf="patientDetails.dob">DOB</label>  <span *ngIf="patientDetails.dob"> {{patientDetails.dob  | date:display_dateFormat}}</span><br *ngIf="patientDetails.dob">
                             <label *ngIf="patientDetails.gender">Gender</label> <span *ngIf="patientDetails.gender"> {{patientDetails.gender | capitalizeFirst}}</span>
                              <hr>

                          </div>
                          <app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>
<ng-container *ngIf="!loading">

 <div class="pad-20 table-responsive" *ngIf="drugList.length>0">
  <h5> Medicines added to the prescription</h5>
<table class="table table-bordered" >
    <thead>
    <tr >
      <th>
          Medicine
      </th>
      <th>
          Duration(days)
      </th>
       <th>
          Dosage
      </th>
      <th>
          Frequency
      </th>
      <th>
          Instructions
      </th>
      <th>

      </th>
    </tr>
  </thead>
    <tbody>
      <tr *ngFor="let drug of drugList; let i = index;" >
        <td >
          {{drug.medicine_name}}
        </td>
        <td >
          {{drug.duration}}
        </td>
        <td>
              {{drug.dosage}}
           </td>
        <td>
               {{drug.frequency}}
            </td>
            <td  *ngIf="instrutionType(drug.instructions) === 0">
              <span>{{truncateInst(drug.instructions)}}...<span (click)="instructPopUp(drug)"><u style="color: #3c8dbc ; font-size: smaller;cursor: pointer;">more</u></span></span>
             </td>
             <td *ngIf="instrutionType(drug.instructions) === 1">
               {{drug.instructions}}
           </td>
         <td>
          <span (click)="deleteDrug(i)"> <i class="fa fa-trash" aria-hidden="true"></i></span> &nbsp;<span (click)="editDrug(drug,i)"><i class="fa fa-pencil" aria-hidden="true"></i></span>
         </td>

      </tr>
    </tbody>
  </table>
  <span (click)="addDrug()" class="lnk action pointlist" style="color: #3c8dbc; font-size: smaller"><u>Add more</u></span>

  <!-- <div class="mgn-up-10">
      <span *ngIf="!digitalSign && selectedMessage.files && selectedMessage.files.length == 0"><span class="red">You never uploaded digital signature,</span><a class="lnk action pointer-cursor"
          (click)="imagefile.click()"><input #imagefile type="file"
              accept="/*;capture=camera" style="display:none;" multiple
              (change)="filesSelected($event)"> <u> create or Upload digital signature for sharing Rx</u></a>
         </span>

         <ng-container class="attachment"
    *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
    <div class="row col-md-12 col-xs-12 col-sm-12 mgn-up-10"
        *ngFor="let item of selectedMessage.files; let i = index">
        <div class="col-md-7 col-xs-9 col-sm-9 col-lg-7">
            <span class="ln-hgt-40">{{item.name}}</span>
        </div>
        <div class="col-md-5 col-xs-3 col-sm-3 col-lg-5">
            <span class="">
                <button type="button" mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu">
                    <button type="button" (click)="deleteTempImage(i)" mat-menu-item>
                        <i class="icon-delete"></i>
                        <span>delete</span>
                    </button>
                </mat-menu>
            </span>
        </div>
        <div class="col-md-12 col-xs-12 col-sm-12  actiondiv">
              <button type="button"  class="cs-btn bt2"  (click)="deleteTempImage(i)">cancel</button>
            <button mat-button class="cs-btn bt1 savemember mgn-lt-5" (click)="saveDigitalSignImages(i)">OK</button>
        </div>
    </div>

</ng-container>
  </div> -->

  <div  *ngIf="drugList.length > 0 && showSave" class="mgn-up-10">
      <button type="button" mat-button  class="cs-btn bt1" [disabled]="disable" (click)="saveRx()">Save Prescription </button>
  </div>
  <!-- <div *ngIf="drugList.length > 0 && !showSave && digitalSign">
          <button type="button" mat-button  style= "margin-left: 40%; margin-top: 4%;" class="cs-btn bt1" (click)="shareManualRx()" >

              <i class="fa fa-share-alt" aria-hidden="true"></i>&nbsp;Share Rx</button>

      </div> -->
      <!-- <div *ngIf="drugList.length > 0 && !showSave && !digitalSign">
          <button type="button"   style= "margin-left: 40%; margin-top: 4%;" class="cs-btn bt2"  >

              <i class="fa fa-share-alt" aria-hidden="true"></i>&nbsp;Share Rx</button>

      </div> -->

</div>
<div class=" pad-20 table-responsive" *ngIf="drugList.length === 0">
      <h5> Create prescription of your own</h5>
      <table  class="table ">
              <thead>
                      <tr >
                        <th>
                         Medicine
                        </th>
                        <th>
                            Duration(days)
                        </th>
                         <th>
                            Dosage
                        </th>
                        <th>
                            Frequency
                        </th>
                        <th>
                            Instructions
                        </th>

                      </tr>
                    </thead>
                      <tbody>

                  No Medicines Added

              </tbody>
            </table>
            <span (click)="addDrug()" class="lnk action pointlist" style="color: #3c8dbc; font-size: smaller"><u>Add more</u></span>

</div>
</ng-container>
<!-- </div>
</div> -->
</div>
</section>

