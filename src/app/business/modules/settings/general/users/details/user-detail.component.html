<section>
    <app-breadcrumb [breadcrumbs]="breadcrumbs"></app-breadcrumb>
</section>
<section>
    <div class="content loc-list bsp">
        <div class="col-md-12 no-padding-small">
            <div class="row">
                <div class="card p0">
                    <div class="copy locd">
                        <div class="lbl col-md-12 no padding"> 
                            <div class="card" *ngIf="api_loading">
                                <app-common-innerloading-spinner></app-common-innerloading-spinner>
                            </div>
                            <div class="col-md-12" *ngIf="actionparam.type !== 'view' && !api_loading">
                                <div  class="create-dept">
                                    <ul class="info-lst serviceadd-info">
                                            <li> <a class="pointlist"
                                                        routerLink="/provider/license/addons">To create a User, You need to purchase a 'Multi User'
                                                        add-on from the License section.</a>
                                            </li>
                                            <!-- <li> <a class="pointlist"
                                                (click)="enabledepartment()">To
                                                complete the process Department feature needs to enabled to add a doctor.</a> 
                                            </li> -->
                                    </ul>
                                </div>
                                <!-- <div *ngIf="filterBydept" class="create-dept">
                                    <ul class="info-lst serviceadd-info">
                                        <li> <a class="pointlist"
                                            routerLink="/provider/license/addons">To create a User, You need to purchase a 'Multi User'
                                            add-on from the License section.</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <form [formGroup]="userForm" (ngSubmit)="userForm.valid &&
onSubmit(userForm.value)" class="ynw-common-form-nm" (keyup)="resetApiErrors()">
                                    <!-- <div class="col-md-6 col-sm-6 col-xs-12 " *ngIf="type !== 'ADMIN'">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <mat-select formControlName="selectedUserType"
                                                    placeholder="Choose Usertype *"
                                                    (selectionChange)="onUserSelect($event)">
                                                    <mat-option *ngFor="let user of userTypesFormfill" [value]="user">
                                                        {{user}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div> -->
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <input matInput type="text" class="form-control" id="first_name"
                                                    placeholder="First Name *" formControlName="first_name"
                                                    autocomplete="off">
                                            </mat-form-field>
                                            <app-field-error-display
                                                [displayError]="fed_service.isFieldValid(userForm,'first_name')"
                                                [errorMsgs]="fed_service.getErrorMessage(userForm,'first_name',
                        {
                        'required' : 'First name is required',
                        'pattern' : 'Only alphabets are allowed'
                        })">
                                            </app-field-error-display>
                                            <app-field-error-display [displayError]="true"
                                                *ngIf="fnameerror != null && !fed_service.isFieldValid(userForm,'first_name')"
                                                [errorMsg]="fnameerror">
                                            </app-field-error-display>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <input matInput type="text" class="form-control" id="last_name"
                                                    placeholder="Last Name *" formControlName="last_name"
                                                    autocomplete="off">
                                            </mat-form-field>
                                            <app-field-error-display
                                                [displayError]="fed_service.isFieldValid(userForm,'last_name')"
                                                [errorMsgs]="fed_service.getErrorMessage(userForm,'last_name',
                        {
                        'required' : 'Last name is required',
                        'pattern' : 'Only alphabets are allowed'
                        })">
                                            </app-field-error-display>
                                            <app-field-error-display [displayError]="true"
                                                *ngIf="!fed_service.isFieldValid(userForm,'last_name')"
                                                [errorMsg]="lnameerror">
                                            </app-field-error-display>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>

                                    <!-- <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <input matInput type="text" class="form-control" id="add_ress"
                                                    placeholder="Address" formControlName="address" autocomplete="off">
                                            </mat-form-field>

                                        </div>
                                    </div>

                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <input matInput type="text" class="form-control" id="city"
                                                    placeholder="City" formControlName="city" autocomplete="off">
                                            </mat-form-field>

                                        </div>
                                    </div>
                                    <div class="clearfix"></div> -->
                                    <!-- <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <input matInput type="text" class="form-control" id="state"
                                                    placeholder="State" formControlName="state" autocomplete="off">
                                            </mat-form-field>

                                        </div>
                                    </div> -->
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group mobile-field" style="width: 100%">
                                            <mat-form-field>
                                                <div class="input-group">
                                                    <div class="input-group-prepend mob-prefix">
                                                        <span class="input-group-text" id="">{{mob_prefix_cap}}</span>
                                                    </div>
                                                    <input type="text" (keypress)="isNumeric($event)" matInput
                                                        class="form-control text-width" id="phonenumber"
                                                        placeholder="Enter Mobile # *" formControlName="phonenumber"
                                                        autocomplete="off" maxlength="10">
                                                </div>
                                            </mat-form-field>
                                            <app-field-error-display
                                                [displayError]="fed_service.isFieldValid(userForm,'phonenumber')"
                                                [errorMsgs]="fed_service.getErrorMessage(userForm,'phonenumber',
            {
            'required' : 'Mobile number is required',
            'minlength' : 'Enter a 10 digit mobile number',
            'maxlength' : 'Enter a 10 digit mobile number',
            'pattern' : 'Enter a 10 digit mobile number'
            })">
                                            </app-field-error-display>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <input matInput type="text" class="form-control" id="email"
                                                    formControlName="email" placeholder="Email(user@xyz.com)"
                                                    autocomplete="off" onpaste="return false;" oncopy="return false"
                                                    oncut="return false" ondrag="return false"
                                                    ondrop="return false">
                                            </mat-form-field>
                                            <app-field-error-display [displayError]="true"
                                                *ngIf="emailerror != null && !fed_service.isFieldValid(userForm,'email')"
                                                [errorMsg]="emailerror">
                                            </app-field-error-display>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>



                                    <!-- <div class="col-md-6 col-sm-6 col-xs-12">
    <div class="form-group">
        <mat-form-field>
            <input class="form-control" placeholder="Enter default password *"
                matInput formControlName="password" reverse="true" type="password">
        </mat-form-field>
        <app-field-error-display
            [displayError]="fed_service.isFieldValid(userForm,'password')"
            [errorMsgs]="fed_service.getErrorMessage(userForm,'password',
                {'required' : 'Enter Password Required',
                'pattern' : 'Use minimum 8 characters with atleast one uppercase, lowercase and number'})">
        </app-field-error-display>
    </div>
</div> -->
                                    <!-- <div class="col-md-6 col-sm-6 col-xs-12" *ngIf="showPrvdrFields">
                                        <div class="form-group">
                                            <mat-form-field>
                                                <mat-select placeholder="{{select_subdomain_cap}}" subdom
                                                    formControlName="selectedSubDomain"  (selectionChange)="resetApiErrors()"#subdom>
                                                    <mat-option *ngFor="let subdomain of subDomains; let i = index"
                                                        [value]="subdomain.id">
                                                        {{subdomain.displayName}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <app-field-error-display [displayError]="true"
                                                    *ngIf="subdomainerror != null && !fed_service.isFieldValid(userForm,'selectedSubDomain')"
                                                    [errorMsg]="subdomainerror">
                                                </app-field-error-display>{{subdomainerror}}
                                        </div>
                                    </div> -->
                                    <div class="col-md-6 col-sm-6 col-xs-12 " *ngIf="type !== 'ADMIN'">
                                            <div class="form-group" *ngIf="actionparam.type === 'edit'">
                                                    <mat-form-field>
                                                            <input matInput readonly type="text" class="form-control" value="{{type}}"
                                                                placeholder="Usertype" 
                                                                autocomplete="off">
                                                        </mat-form-field>
                                                </div>
                                        <div class="form-group" *ngIf="actionparam.type !== 'edit'">
                                            <mat-form-field>
                                                <mat-select formControlName="selectedUserType"
                                                    placeholder="Choose Usertype *"
                                                    (selectionChange)="onUserSelect($event)">
                                                    <mat-option *ngFor="let user of userTypesFormfill" [value]="user">
                                                        {{user}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12"
                                        *ngIf="filterBydept && departments.length > 0 && showPrvdrFields">
                                        <div class="form-group">
                                            <mat-form-field *ngIf="deptLength == 1">
                                             <input matInput *ngFor="let dept of departments" [readonly]="true" 
                                                placeholder="Select department *"  value="{{dept.departmentName | capitalizeFirst}}">
                                            </mat-form-field>
                                             <mat-form-field *ngIf="deptLength > 1">
                                               <mat-select placeholder="Select department *" formControlName="selectedDepartment" #deptsel>
                                                  <mat-option *ngFor="let dept of departments"
                                                     [value]="dept.departmentId">
                                                        {{dept.departmentName}}
                                                   </mat-option>
                                                 </mat-select>
                                             </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="col-md-6 col-sm-6 col-xs-12" *ngIf="showPrvdrFields">
                                        <div class="form-group">
                                                <mat-checkbox  formControlName="privileges">
                                                    Admin Privileges
                                                </mat-checkbox>
                                        </div>
                                    </div>


                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <a class="learnmore-pointer" (click)="advancedClick()"> Additional details</a>
                                    </div>
                                    
                                    <div class="col-md-12 col-sm-12 col-xs-12" *ngIf="showAdvancedSection">
                                        <!-- <div class="col-md-6 col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <mat-form-field>
                                                    <input matInput type="text" class="form-control" id="email"
                                                        formControlName="email" placeholder="Email(user@xyz.com)"
                                                        autocomplete="off" onpaste="return false;" oncopy="return false"
                                                        oncut="return false" ondrag="return false"
                                                        ondrop="return false">
                                                </mat-form-field>
                                                <app-field-error-display [displayError]="true"
                                                    *ngIf="emailerror != null && !fed_service.isFieldValid(userForm,'email')"
                                                    [errorMsg]="emailerror">
                                                </app-field-error-display>
                                            </div>
                                        </div> -->
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <div class="form-group">
                                                <label class="col-form-label" for="gender">{{gender_cap}} </label>
                                                <mat-radio-group formControlName="gender">
                                                    <mat-radio-button class="mgright50" value="male">{{male_cap}}
                                                    </mat-radio-button>
                                                    <mat-radio-button value="female">{{female_cap}}</mat-radio-button>
                                                </mat-radio-group>
                                                <app-field-error-display
                                                    [displayError]="fed_service.isFieldValid(userForm,'gender')"
                                                    errorMsg="Please select the gender.">
                                                </app-field-error-display>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <div class="form-group col-md-7 no-padding picker-form-group">
                                                <mat-form-field>
                                                    <input matInput [matDatepicker]="picker" placeholder="Date of birth"
                                                        #inputdob formControlName="dob" [max]="tday" [min]="minday"
                                                        disabled class="nofocus" tabindex="-1">
                                                    <mat-datepicker-toggle matSuffix [for]="picker">
                                                    </mat-datepicker-toggle>
                                                    <mat-datepicker #picker [disabled]="false"></mat-datepicker>
                                                </mat-form-field>
                                                <app-field-error-display
                                                    [displayError]="fed_service.isFieldValid(userForm,'dob')"
                                                    errorMsg="Please select the date of birth.">
                                                </app-field-error-display>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="actiondiv labelsave" style="margin-top: 20px;position: relative; display: inline-flex;">
                                            <button (click)="onCancel()" type="button"
                                                class="cs-btn bt2">{{cancel_btn}}</button>
                                            &nbsp;
                                            <button type="submit" mat-button [disabled]="!userForm.valid"
                                                class="cs-btn bt2">{{button_title}}</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
<!-- 
            <div class="row"  *ngIf="userId && showPrvdrFields " >
                <div class="card p0">
                    <span class="b-link onlineProfile" (click)="onlineProfile()">
                        <h5>Online profile</h5>
                        <span class="form-level-settings">Manage profile name and basic information of you or your business here.</span>
                    </span>
                </div>
            </div> -->
        </div>
    </div>
    <div class="clearfix"></div>
</section>