<section>
    <app-breadcrumb (performAction)="performActions()" [breadcrumbs]="breadcrumbs"
    [moreOptions]="breadcrumb_moreoptions"></app-breadcrumb>
</section>
<section>
    <div class="content w-manager settings comn-cls lic-page">
        <div class="col-md-12 no-padding-small">
            <div class="w-dta">
                <div class="row">
                    <div class="copy one col-a col-xs-12 col-sm-12 no-padding">
                        <div class="card p0 w-dta active add-extra">
                            <mat-accordion>
                                <mat-expansion-panel [expanded]="true">
                                    <mat-expansion-panel-header class="min90">
                                        <mat-panel-title class="block-level">
                                            {{additional_info_cap}}
                                            <p class="form-level-settings">{{frm_additional_cap}}
                                                
                                                <!-- <a
                                                    class="learnmore-pointer" id="customer-help"
                                                    (click)="learnmore_clicked('additional-info', $event)">Learn
                                                    More</a> -->
                                                </p>
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div class="no-dta"
                                        *ngIf="normal_domainfield_show==1 || normal_subdomainfield_show==1">
                                        <app-innerloading-spinner spinnerParams="loadingParams">
                                        </app-innerloading-spinner>
                                    </div>
                                    <div class="no-dta"
                                        *ngIf="normal_domainfield_show== 4 && normal_subdomainfield_show== 4">
                                        <p>{{have_not_add_cap}} {{additional_cap}} {{info_cap}}.</p>
                                    </div>
                                    <ng-container
                                        *ngIf="normal_subdomainfield_show==3 || normal_subdomainfield_show==4">
                                        <div class="acc-cont" *ngFor="let fields of subdomain_fields">
                                                <ng-container *ngIf="fields.mandatory == false">
                                            <mat-accordion class="acc-btn" [class.acc-btn-data]="fields['value']">
                                                <mat-expansion-panel
                                                    [expanded]="fields['value'] && fields['value'] != ''"
                                                    [disabled]="!fields['value']" [hideToggle]="!fields['value']">
                                                    <mat-expansion-panel-header [collapsedHeight]="'40px'"
                                                        [expandedHeight]="'40px'">
                                                        <mat-panel-title>
                                                            {{fields.displayName}}<span *ngIf="fields.mandatory == true"
                                                                class="red">&nbsp;*</span>
                                                                <span class="mci-warning" *ngIf="!fields.value && fields.name==='docmci'">
                                                                <i class="fa fa-exclamation-triangle"
                                                                aria-hidden="true"> </i>  Fill within 2 weeks </span>
                                                        </mat-panel-title>
                                                        <mat-panel-description class="acc-plus-btn">
                                                            <button mat-icon-button *ngIf="!fields['value']"
                                                                (click)="addDynamicField(fields, 'subdomain_questions')">
                                                                <mat-icon>{{add_circle_outline}}</mat-icon>
                                                            </button>
                                                        </mat-panel-description>
                                                    </mat-expansion-panel-header>

                                                    <ng-container [ngSwitch]="fields.dataType">

                                                        <ng-container *ngSwitchCase="'TEXT'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value | capitalizeFirst}}</p>
                                                                
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'TEXT_MED'">
                                                            <div class="cont-btn">
                                                                <p [innerHTML]="fields.value | nl2br | capitalizeFirst">
                                                                    {{fields.value | nl2br | capitalizeFirst}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Boolean'">
                                                            <div class="cont-btn">
                                                                <p> {{(fields.value == 'true' || fields.value == true ) ?
                                                                                'Yes' : 'No'}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Age'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Number'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'URL'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>


                                                        <ng-container *ngSwitchCase="'Date'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value | date:dateFormat}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'DOB'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Phone'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>


                                                        <ng-container *ngSwitchCase="'Email'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Enum'">
                                                            <div class="cont-btn">
                                                                <p> {{ getdispVal('subdomain',fields)}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'EnumList'">
                                                            <div class="cont-btn">
                                                                <p>{{ getdispVal('subdomain', fields)}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Gender'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value | capitalizeFirst}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'subdomain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'DataGrid'">
                                                            <div class="table-outer">
                                                                <table class="table table-striped">
                                                                    <thead class="cf">
                                                                        <tr>
                                                                            <th class="cth"
                                                                                *ngFor="let column of fields.Columns">
                                                                                {{column.displayName}}</th>
                                                                            <th></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr
                                                                            *ngFor="let row of fields.value;let i = index">
                                                                            <td *ngFor="let column of fields.Columns;let j = index"
                                                                                [attr.data-title]="fields.Columns[j].displayName">
                                                                                {{column.type=='Enum' ? vkeyNameMap[row[column.key]] : row[column.key]}}
                                                                            </td>
                                                                            <td class="action"><span class="mbt">
                                                                                    <button type="button"
                                                                                        mat-icon-button
                                                                                        [matMenuTriggerFor]="menu">
                                                                                        <mat-icon>more_vert
                                                                                        </mat-icon>
                                                                                    </button>
                                                                                    <mat-menu #menu="matMenu">
                                                                                        <button type="button"
                                                                                            mat-menu-item
                                                                                            (click)="editGridDynamicField(fields.name,'subdomain_questions', i)">
                                                                                            <i class="icon-edit"></i>
                                                                                            <span>{{edit_cap}}</span>
                                                                                        </button>
                                                                                        <button type="button"
                                                                                            mat-menu-item
                                                                                            (click)="deleteGridDynamicField(fields.name, 'subdomain_questions', i)">
                                                                                            <i class="icon-delete"></i>
                                                                                            <span>{{delete_btn}}</span>
                                                                                        </button>
                                                                                    </mat-menu>
                                                                                </span>
                                                                                <span class="mbt-mobile-show">
                                                                                    <button class="editcls"
                                                                                        type="button"
                                                                                        (click)="editGridDynamicField(fields.name,'subdomain_questions', i)">{{edit_cap}}</button>
                                                                                    <button class="deletecls"
                                                                                        type="button"
                                                                                        (click)="deleteGridDynamicField(fields.name, 'subdomain_questions', i)">{{delete_btn}}</button>
                                                                                </span>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                                <span
                                                                    (click)="editGridDynamicField(fields.name,'subdomain_questions', null)"
                                                                    class="addbt"></span>
                                                            </div>
                                                        </ng-container>
                                                    </ng-container>
                                                </mat-expansion-panel>
                                            </mat-accordion>
                                            </ng-container>
                                        </div>

                                    </ng-container>

                                    <ng-container *ngIf="normal_domainfield_show==3 || normal_domainfield_show==4">
                                        <div class="acc-cont" *ngFor="let fields of domain_fields">
                                            <ng-container *ngIf="fields.mandatory == false">
                                            <mat-accordion class="acc-btn" [class.acc-btn-data]="fields['value']">
                                                <mat-expansion-panel [expanded]="fields['value']"
                                                    [disabled]="!fields['value']" [hideToggle]="!fields['value']">
                                                    <mat-expansion-panel-header [collapsedHeight]="'40px'"
                                                        [expandedHeight]="'40px'">
                                                        <mat-panel-title>
                                                            {{fields.displayName}}<span *ngIf="fields.mandatory == true"
                                                                class="red">&nbsp;*</span>
                                                        </mat-panel-title>
                                                        <mat-panel-description class="acc-plus-btn">
                                                            <button mat-icon-button *ngIf="!fields['value']"
                                                                (click)="addDynamicField(fields, 'domain_questions')">
                                                                <mat-icon>{{add_circle_outline}}</mat-icon>
                                                            </button>
                                                        </mat-panel-description>
                                                    </mat-expansion-panel-header>

                                                    <ng-container [ngSwitch]="fields.dataType">
                                                        <ng-container *ngSwitchCase="'TEXT'">
                                                            <div class="cont-btn">
                                                                <p> {{ fields.value | capitalizeFirst}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'TEXT_MED'">
                                                            <div class="cont-btn">
                                                                <p [innerHTML]="fields.value | nl2br | capitalizeFirst">
                                                                    {{fields.value | nl2br | capitalizeFirst }}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Boolean'">
                                                            <div class="cont-btn">
                                                                <p> {{(fields.value == 'true' || fields.value == true ) ?
                                                                                'Yes' : 'No'}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngSwitchCase="'Age'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Number'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'URL'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>


                                                        <ng-container *ngSwitchCase="'Date'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value | date:dateFormat}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'DOB'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Phone'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>


                                                        <ng-container *ngSwitchCase="'Email'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Enum'">
                                                            <div class="cont-btn">
                                                                <p>{{ getdispVal('domain', fields)}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'EnumList'">
                                                            <div class="cont-btn">
                                                                <p>{{ getdispVal('domain', fields)}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'Gender'">
                                                            <div class="cont-btn">
                                                                <p> {{fields.value | capitalizeFirst}}</p>
                                                                <span class="editbt"
                                                                    (click)="editDynamicField(fields.name, 'domain_questions')"></span>
                                                            </div>
                                                        </ng-container>

                                                        <ng-container *ngSwitchCase="'DataGrid'">
                                                            <div class="table-outer">
                                                                <table class="table table-striped">
                                                                    <thead class="cf">
                                                                        <tr>
                                                                            <th class="cth"
                                                                                *ngFor="let column of fields.Columns">
                                                                                {{column.displayName}}</th>
                                                                            <th></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr
                                                                            *ngFor="let row of fields.value;let i = index">
                                                                            <td *ngFor="let column of fields.Columns;let j = index"
                                                                                [attr.data-title]="fields.Columns[j].displayName">
                                                                                {{row[column.key]}}</td>
                                                                            <td class="action">
                                                                                <span class="mbt">
                                                                                    <button type="button"
                                                                                        mat-icon-button
                                                                                        [matMenuTriggerFor]="menu">
                                                                                        <mat-icon>more_vert
                                                                                        </mat-icon>
                                                                                    </button>
                                                                                    <mat-menu #menu="matMenu">
                                                                                        <button type="button"
                                                                                            mat-menu-item
                                                                                            (click)="editGridDynamicField(fields.name,'domain_questions', i)">
                                                                                            <i class="icon-edit"></i>
                                                                                            <span>{{edit_cap}}</span>
                                                                                        </button>
                                                                                        <button type="button"
                                                                                            mat-menu-item
                                                                                            (click)="deleteGridDynamicField(fields.name, 'domain_questions', i)">
                                                                                            <i class="icon-delete"></i>
                                                                                            <span>{{delete_btn}}</span>
                                                                                        </button>
                                                                                    </mat-menu>
                                                                                </span>

                                                                                <span class="mbt-mobile-show">
                                                                                    <button class="editcls"
                                                                                        type="button"
                                                                                        (click)="editGridDynamicField(fields.name,'domain_questions', i)">{{edit_cap}}</button>
                                                                                    <button class="deletecls"
                                                                                        type="button"
                                                                                        (click)="deleteGridDynamicField(fields.name, 'domain_questions', i)">{{delete_btn}}</button>
                                                                                </span>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                                <span
                                                                    (click)="editGridDynamicField(fields.name,'domain_questions', null)"
                                                                    class="addbt"></span>
                                                            </div>
                                                        </ng-container>
                                                    </ng-container>
                                                </mat-expansion-panel>
                                            </mat-accordion>
                                        </ng-container>
                                        </div>
                                    </ng-container>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       <div class="clearfix"></div>
    </div>
</section>