<!-- <section>
    <app-breadcrumb (performAction)="performActions($event)" [breadcrumbs]="breadcrumbs"
        [moreOptions]="breadcrumb_moreoptions"></app-breadcrumb>
</section> -->
<section class="">
    <div class="card title-gb">
        <h5 class="mgn-up-10">
            <!-- <button type="button" class="btn default profile-back" (click)="redirecToQmanager()">
            <span class="fa fa-chevron-left">&nbsp;Back</span> </button>&nbsp;&nbsp;&nbsp; -->
            <span class="fa fa-arrow-left pointer-cursor"
                (click)="redirecToQmanager()"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            {{services_cap}}
            <!-- <button type="button" style="float: right;" class="btn default profile-back" (click)= "redirecToHelp()">
               Help
          </button>  -->
            <i class="fa fa-question-circle-o fa-lg fl-right" (click)="redirecToHelp()"></i>
        </h5>
    </div>
</section>
<section>
    <div class="content loc-list">
        <div class="col-md-12 no-padding-small">

            <div class="card p0 w-dta">

                <p-table #dt [value]="service_list" [(selection)]="selectedServices" dataKey="id"
                    styleClass="p-datatable-customers" [rowHover]="true" [rows]="10" [showCurrentPageReport]="true"
                    [rowsPerPageOptions]="[10,25,50]" [loading]="api_loading" [paginator]="true"
                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
                    [globalFilterFields]="['name']">
                    <ng-template pTemplate="caption">
                        <div class="table-header">
                            List of Customers
                            <span class="p-input-icon-left pull-right">
                                <i class="pi pi-search"></i>
                                <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
                                    placeholder="Global Search" />
                            </span>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 3rem">
                                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                            </th>
                            <th pSortableColumn="name">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Name
                                    <p-sortIcon field="name"></p-sortIcon>
                                    <p-columnFilter type="text" field="name" display="menu" class="p-ml-auto">
                                    </p-columnFilter>
                                </div>
                            </th>
                            <!-- <th pSortableColumn="country.name">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Country
                                    <p-sortIcon field="country.name"></p-sortIcon>
                                    <p-columnFilter type="text" field="country.name" display="menu" class="p-ml-auto">
                                    </p-columnFilter>
                                </div>
                            </th>
                            <th pSortableColumn="representative.name">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Agent
                                    <p-sortIcon field="representative.name"></p-sortIcon>
                                    <p-columnFilter field="representative" matchMode="in" display="menu"
                                        [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"
                                        class="p-ml-auto">
                                        <ng-template pTemplate="header">
                                            <div class="p-px-3 p-pt-3 p-pb-0">
                                                <span class="p-text-bold">Agent Picker</span>
                                            </div>
                                        </ng-template>
                                        <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                            <p-multiSelect [ngModel]="value" [options]="representatives"
                                                placeholder="Any" (onChange)="filter($event.value)" optionLabel="name">
                                                <ng-template let-option pTemplate="item">
                                                    <div class="p-multiselect-representative-option">
                                                        <img [alt]="option.label" src="assets/images/{{option.image}}"
                                                            width="32" style="vertical-align: middle" />
                                                        <span class="p-ml-1">{{option.name}}</span>
                                                    </div>
                                                </ng-template>
                                            </p-multiSelect>
                                        </ng-template>
                                    </p-columnFilter>
                                </div>
                            </th>
                            <th pSortableColumn="date">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Date
                                    <p-sortIcon field="date"></p-sortIcon>
                                    <p-columnFilter type="date" field="date" display="menu" class="p-ml-auto">
                                    </p-columnFilter>
                                </div>
                            </th>
                            <th pSortableColumn="balance">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Balance
                                    <p-sortIcon field="balance"></p-sortIcon>
                                    <p-columnFilter type="numeric" field="balance" display="menu" currency="USD"
                                        class="p-ml-auto"></p-columnFilter>
                                </div>
                            </th> -->
                            <!-- <th pSortableColumn="status">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Status
                                    <p-sortIcon field="status"></p-sortIcon>
                                    <p-columnFilter field="status" matchMode="equals" display="menu" class="p-ml-auto">
                                        <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                            <p-dropdown [ngModel]="value" [options]="statuses"
                                                (onChange)="filter($event.value)" placeholder="Any">
                                                <ng-template let-option pTemplate="item">
                                                    <span
                                                        [class]="'customer-badge status-' + option.value">{{option.label}}</span>
                                                </ng-template>
                                            </p-dropdown>
                                        </ng-template>
                                    </p-columnFilter>
                                </div>
                            </th> -->
                            <!-- <th pSortableColumn="activity">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Activity
                                    <p-sortIcon field="activity"></p-sortIcon>
                                    <p-columnFilter field="activity" matchMode="between" display="menu"
                                        [showMatchModes]="true" [showOperator]="true" [showAddButton]="false"
                                        class="p-ml-auto">
                                        <ng-template pTemplate="filter" let-filter="filterCallback">
                                            <p-slider [ngModel]="activityValues" [range]="true"
                                                (onSlideEnd)="filter($event.values)" styleClass="p-m-3"></p-slider>
                                            <div class="p-d-flex p-ai-center p-jc-between p-px-2">
                                                <span>{{activityValues[0]}}</span>
                                                <span>{{activityValues[1]}}</span>
                                            </div>
                                        </ng-template>
                                    </p-columnFilter>
                                </div>
                            </th> -->
                            <!-- <th style="width: 8rem"></th> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-service>
                        <tr class="p-selectable-row">
                            <td>
                                <p-tableCheckbox [value]="service"></p-tableCheckbox>
                            </td>
                            <td>
                                <span class="p-column-title"></span>
                                {{service.name}}
                            </td>
                            <!-- <td>
                                <span class="p-column-title">Country</span>
                                <img src="assets/images/avatar5.png" [class]="'flag flag-' + customer.country.code"
                                    width="30">
                                <span class="image-text">{{customer.country.name}}</span>
                            </td>
                            <td>
                                <span class="p-column-title">Representative</span>
                                <img [alt]="customer.representative.name" src="assets/images/avatar5.png" width="32"
                                    style="vertical-align: middle" />
                                <span class="image-text">{{customer.representative.name}}</span>
                            </td>
                            <td>
                                <span class="p-column-title">Date</span>
                                {{customer.date | date: 'MM/dd/yyyy'}}
                            </td>
                            <td>
                                {{customer.balance | currency:'USD':'symbol'}}
                            </td>
                            <td>
                                <span class="p-column-title">Status</span>
                                <span [class]="'customer-badge status-' + customer.status">{{customer.status}}</span>
                            </td>
                            <td>
                                <span class="p-column-title">Activity</span>
                                <p-progressBar [value]="customer.activity" [showValue]="false"></p-progressBar>
                            </td>
                            <td style="text-align: center">
                                <button pButton type="button" class="p-button-secondary" icon="pi pi-cog"></button>
                            </td> -->
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="8">No customers found.</td>
                        </tr>
                    </ng-template>
                </p-table>

                <!-- <table class="table childDetails singleDash" style="font-size: .875rem;">
                    <thead id="childActionBar" class="qBoardselected-table">
                        <tr>
                            <th style="padding: 20px;"></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th><a style="float: right;width: 100px;" (click)="addservice()"><span><i class="fa fa-plus"></i>Add Service</span></a></th>
                        </tr>
                    </thead>
                    <tbody *ngIf="!api_loading && service_list.length === 0">
                        <tr>
                            <td colspan="5" class="no-appt">
                                No services added.
                            </td>
                        </tr>
                    </tbody>
                    <tbody *ngFor="let service of service_list | orderBy: order">
                        <tr class="grid-pad" [class.grid-disabled]="service.status=='INACTIVE'" *ngIf="!api_loading">
                            <td class="serv-name no-padding-small">
                                <div class="bold pull-left mgn-lt-5 name pointer-cursor teli-wtsap-a"
                                    (click)="goServiceDetail(service)">
                                    {{service.name | capitalizeFirst}}
                                </div>
                            </td>
                            <td class="no-padding-small">
                                <span
                                    *ngIf="service.serviceType==='virtualService' && service.virtualServiceType === 'audioService'"
                                    class="link"> <i class="fa fa-volume-up cal-mod-font" aria-hidden="true"></i></span>
                                <span
                                    *ngIf="service.serviceType==='virtualService' && service.virtualServiceType === 'videoService'"
                                    class="link"> <i class="fa fa-video-camera cal-mod-font"
                                        aria-hidden="true"></i></span>&nbsp;
                                <span>
                                    <span *ngIf="service.serviceType === 'virtualService' && (service.virtualCallingModes[0].callingMode === 'Phone'||service.virtualCallingModes[0].callingMode === 'GoogleMeet')">&nbsp;</span>
                                    <i class="fa phon-icon"
                                        *ngIf="service.serviceType === 'virtualService' && service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                    <i class="fa meet-icon"
                                        *ngIf="service.serviceType === 'virtualService' && service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                    <i class="fa zoom-icon"
                                        *ngIf="service.serviceType === 'virtualService' && service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                    <i class="fa wtsapaud-icon"
                                        *ngIf="service.serviceType === 'virtualService' && service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType === 'audioService'"></i>
                                        <i class="fa wtsapvid-icon"
                                        *ngIf="service.serviceType === 'virtualService' && service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType === 'videoService'"></i>
                                </span>
                            </td>
                            <td class="no-padding-small">
                                <span *ngIf="service.provider" class="setings">{{service.provider.firstName}}</span>
                            </td>
                            <td class="pad-right-30 no-padding-small">
                                {{service.deptName | capitalizeFirst}}
                            </td>
                            <td class="no-padding-small" style="width: 30px;">
                                <div class="copy">
                                    <span class="mbt" style="top: -18px;">
                                        <button type="button" mat-icon-button [matMenuTriggerFor]="appMenu">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                    </span>
                                    <span>
                                        <mat-menu #appMenu="matMenu">
                                            <button mat-menu-item (click)="editService(service)"
                                                *ngIf="service.status=='ACTIVE' && service.serviceType !== 'virtualService'">
                                                <i class="icon-edit chkin-mobic"></i>Edit
                                            </button>
                                            <button mat-menu-item
                                                [class.disabled]="!is_virtual_enbl && service.serviceType === 'virtualService'"
                                                (click)="(is_virtual_enbl && service.serviceType === 'virtualService') && editService(service)"
                                                *ngIf="service.status=='ACTIVE'&& service.serviceType === 'virtualService'">
                                                <i class="icon-edit chkin-mobic"
                                                    *ngIf="is_virtual_enbl && service.serviceType === 'virtualService'"></i>
                                                <i [matTooltip]="'Please turn on Teleservice in settings'"
                                                    *ngIf="!is_virtual_enbl && service.serviceType === 'virtualService'"
                                                    class="material-icons" style="cursor: help;">help</i>Edit
                                            </button>
                                            <button mat-menu-item (click)="changeServiceStatus(service)">
                                                <i *ngIf="service.status=='INACTIVE' || !service.status"
                                                    class="icon-enable"></i>
                                                <i *ngIf="service.status=='ACTIVE'" class="icon-disable"></i>
                                                {{(service.status=='ACTIVE') ? 'Disable' :'Enable'}}
                                            </button>
                                        </mat-menu>
                                    </span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="5">
                                <app-pager *ngIf="pagination.totalCnt != 0" [total_pages]="pagination.totalCnt"
                                    [pagesize]="pagination.perPage" (pagerclick)="handle_pageclick($event)"
                                    [curpage]="pagination.startpageval"></app-pager>
                            </td>
                        </tr>
                    </tfoot>
                </table> -->
            </div>


        </div>
        <div class="clearfix"></div>
    </div>
</section>
<app-field-error-display [displayError]="true" *ngIf="api_error" errorMsg="{{api_error}}"></app-field-error-display>
<app-form-success-display [displayMsg]="true" *ngIf="api_success" successMsg="{{api_success}}">
</app-form-success-display>