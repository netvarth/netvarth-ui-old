<section>
    <app-breadcrumb [breadcrumbs]="breadcrumbs"></app-breadcrumb>
</section>
<section>
    <div class="content loc-list">
        <div class="col-md-12 no-padding-small">
            <div class="row">
                <div class="card p0" *ngIf="api_loading">
                    <app-common-innerloading-spinner></app-common-innerloading-spinner>
                </div>
                <div class="card p0" *ngIf="!api_loading">
                    <div class="copy locd">
                        <div class="lbl col-sm-12 col-md-8 col-lg-8">
                            <form *ngIf="action=='add' || action === 'edit' && amForm" [formGroup]="amForm" novalidate
                                (ngSubmit)="amForm.valid && onSubmit(amForm.value)" (keyup)="resetApiErrors()"
                                class="ynw-common-form-nm">
                                <div class="form-group">
                                    <mat-form-field>
                                        <input matInput type="text" class="form-control" id="displayName"
                                            placeholder="{{item_name_cap}} *" formControlName="displayName"
                                            autocomplete="off">
                                    </mat-form-field>
                                    <app-field-error-display
                                        [displayError]="fed_service.isFieldValid(amForm,'displayName')" [errorMsgs]="fed_service.getErrorMessage(amForm,'displayName',
                                {
                                  'required' : 'Please enter item name',
                                  'maxlength' : 'Name can contain only ' + maxChars + ' characters'
                                })">
                                    </app-field-error-display>
                                </div>

                                <div class="form-group">
                                    <mat-form-field>
                                        <input matInput type="text" class="form-control" id="shortDesc"
                                            placeholder="{{short_desc_cap}} " formControlName="shortDesc"
                                            autocomplete="off" maxlength="50">
                                    </mat-form-field>
                                    <app-field-error-display
                                        [displayError]="fed_service.isFieldValid(amForm,'shortDesc')" [errorMsgs]="fed_service.getErrorMessage(amForm,'shortDesc',
                                {
                                  'required' : 'Please enter the short description',
                                  'maxlength' : 'Short description can contain only ' + maxChars + ' characters'
                                })">
                                    </app-field-error-display>
                                </div>

                                <div class="form-group">
                                    <mat-form-field>
                                        <textarea matInput class="form-control" id="shortDesc"
                                            placeholder="{{detailed_dec_cap}} " formControlName="displayDesc"
                                            (keyup)="setCharCount()" (focus)="setDescFocus()" (blur)="lostDescFocus()"
                                            maxlength="500"></textarea>
                                    </mat-form-field>
                                    <app-field-error-display
                                        [displayError]="fed_service.isFieldValid(amForm,'displayDesc')" [errorMsgs]="fed_service.getErrorMessage(amForm,'displayDesc',
                                {
                                  'required' : 'Please enter detailed description.',
                                  'maxlength' : 'Detailed description can contain only ' + maxCharslong + ' characters'
                                })">
                                    </app-field-error-display>
                                    <span class="max-char-length" *ngIf="isfocused">You have {{char_count}}
                                        characters remaining</span>
                                </div>

                                <div class="form-group">
                                    <mat-form-field>
                                        <input matInput type="text" min="0" max="100000" (keypress)="isNumeric($event)"
                                            (keyup)="isvalid($event)" class="form-control number-ip-sm"
                                            formControlName="price" id="price"
                                            placeholder="{{price_cap}} ({{rupee_symbol}}) *" autocomplete="off">
                                    </mat-form-field>
                                    <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'price')"
                                        errorMsg="" [errorMsgs]="fed_service.getErrorMessage(amForm,'price',
                                {
                                  'required' : 'Please enter the price.',
                                  'pattern' : 'Please enter valid price',
                                  'maxlength' : 'Price can have only ' + maxNumbers + ' digits'
                                })">
                                    </app-field-error-display>
                                </div>

                                <div class="form-group">
                                    <label class="col-form-label" for="taxable">{{taxable_cap}} </label>
                                    <mat-slide-toggle formControlName="taxable" (change)="handleTaxablechange()"
                                        [checked]="holdtaxable">
                                    </mat-slide-toggle>
                                    <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'taxable')"
                                        errorMsg="Please select taxable">
                                    </app-field-error-display>
                                </div>
                                <div class="col-md-12 col-xs-12 col-sm-12 actiondiv mgn-up-20 mgn-bt-20 no-padding" style="display: inline-flex;">
                                    <button (click)="onCancel()" type="button"
                                        class="cs-btn bt2">{{cancel_btn_cap}}</button>
                                    &nbsp;
                                    <button type="submit" class="cs-btn bt1" mat-button
                                        [disabled]="!amForm.valid || disableButton">{{save_btn_cap}}</button>
                                    <!-- <app-common-innerloading-spinner [spinnerParams]="{diameter:30}"
                                        *ngIf="api_loading"> -->
                                    <!-- </app-common-innerloading-spinner> -->
                                </div>
                            </form>
                            <app-field-error-display class="itemerror"[displayError]="true" *ngIf="api_error" errorMsg="{{api_error}}">
                            </app-field-error-display>
                            <app-form-success-display [displayMsg]="true" *ngIf="api_success"
                                successMsg="{{api_success}}">
                            </app-form-success-display>
                            <div class="content comn-cls">
                                <div class="col-md-12 no-padding-small">
                                    <div class="w-dta">
                                        <div class="row">
                                            <div class="card"
                                                style="margin-bottom: unset !important; box-shadow: none !important;">
                                                <div class="copy">
                                                    <div class="itm-d">
                                                        <div class="itm-r item-detail" *ngIf="item && action==='view'">
                                                            <span class="editbt" (click)="editViewedItem(item)"
                                                                *ngIf="item.status=='ACTIVE'">

                                                            </span>
                                                            <h3>{{item_detail_cap}}</h3>
                                                            <div class="dtls">
                                                                <span class="label">{{item_name_cap}}</span>
                                                                <span class="ttle">
                                                                    {{item.displayName}}
                                                                </span>
                                                            </div>
                                                            <div class="dtls" *ngIf="item.shortDesc">
                                                                <span class="label">{{short_desc_cap}}</span>
                                                                <span class="ttle">
                                                                    {{item.shortDesc}}
                                                                </span>
                                                            </div>
                                                            <div class="dtls" *ngIf="item.displayDesc">
                                                                <span class="label">{{detail_desc_cap}}</span>
                                                                <span class="ttle">
                                                                    {{item.displayDesc}}
                                                                </span>
                                                            </div>
                                                            <div class="dtls">
                                                                <span class="label">{{price_cap}}</span>
                                                                <span class="ttle">
                                                                    {{item.price | currency:'&#8377; '}}
                                                                </span>
                                                            </div>
                                                            <div class="dtls">
                                                                <span class="label">{{taxable_cap}}</span>
                                                                <span class="ttle">
                                                                    {{(item.taxable===true)?'Yes':'No'}}
                                                                </span>
                                                            </div>
                                                            <div class="dtls">
                                                                <span class="label">{{status_cap}}</span>
                                                                <span class="ttle"
                                                                    [ngClass]="{'green-text' : item.status=='ACTIVE'}">{{item.status}}
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="lbr col-sm-12 col-md-4 col-lg-4">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>