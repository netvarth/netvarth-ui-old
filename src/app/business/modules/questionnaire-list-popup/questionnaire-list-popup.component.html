<!-- Questionnaire View Popup -->
<!-- <ng-container *ngIf="selectedQnr">
  <h1 class="mat-dialog-title">
    <span class="mgn-lt-10">{{(selectedQnr.questionnaireName) ? selectedQnr.questionnaireName :
      selectedQnr.questionnaireId}}</span>
    <button mat-dialog-close class="modal_close" tabindex="-1" (click)="closeDialog()"><i class="fa fa-window-close"
        aria-hidden="true"></i></button>
  </h1>
  <div class="qnr-details" *ngIf="data.status=='unReleased'">
    <app-questionnaire [questionnaireList]="selectedQnr" [source]="'qnrView'"></app-questionnaire>
  </div>
  <div class="qnr-details" *ngIf="data.status!='unReleased'">
    <app-questionnaire [questionnaireList]="selectedQnr" [source]="(data.waitlistStatus) ? 'proCheckin' : 'proAppt' "
      [uuid]="uid" [type]="'details'" [waitlistStatus]="(data.waitlistStatus) ? data.waitlistStatus : data.apptStatus"
      (returnAnswers)="getQuestionAnswers($event)">
    </app-questionnaire>
  </div>
</ng-container> -->

<!-- Questionnaires List Page -->
<!-- <ng-container *ngIf="!selectedQnr">
  <section class="" *ngIf="!type">
    <div class="card title-gb">
      <h5 class="mgn-up-10">
        <span class="fa fa-arrow-left pointer-cursor" (click)="gotoPrev()"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <span>Questionnaires</span>
      </h5>
    </div>
  </section>
  <section class="qnrlist " [class.bookingQnr]="type">
    <div class="content">
      <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding-small" [class.no-padding]="type">
        <div class="card no-padding-small" *ngIf="questionnaires && questionnaires.length >1">
          <app-questionnaire [questionnaireList]="waitlist_data.questionnaires[0]"
            [source]="(waitlist_data.waitlistStatus) ? 'proCheckin' : 'proAppt'" [uuid]="uid" [type]="'details'"
            [waitlistStatus]="(waitlist_data.waitlistStatus) ? waitlist_data.waitlistStatus : waitlist_data.apptStatus">
          </app-questionnaire>
        </div> 
        <div class="card no-padding-small" *ngIf="questionnaires && questionnaires.length > 0">
          <app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>
          <div class="table-responsive1" *ngIf="!loading">
            <table class="table table-head-custom table-head-bg table-borderless table-vertical-center mgn-bt-10">
              <tbody>
                <tr class="row_data" *ngFor="let qnr of questionnaires">
                  <td class="qnr-name wrd-brk" style="width:54%">{{qnr.questionnaireId}}</td>
                  <td  style="width:31%" class="wrd-brk">{{qnrStatuses[getQnrStatus(qnr.id)]}}</td>
                  <td class="qnr-action-btns"  style="width:7%"> <a (click)="viewQnr(qnr, getQnrStatus(qnr.id))">View</a></td>
                  <td class="qnr-action-btns"  style="width:8%"> <a (click)="changeReleaseStatus(qnr.id)"
                      *ngIf="getQnrStatus(qnr.id)!='submitted'">{{(getQnrStatus(qnr.id) ===
                      'released') ? 'Unrelease' : 'Release'}}</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div> 
      </div>
    </div>
  </section>
</ng-container>-->
<section class="">
  <div class="card title-gb">
    <h5 class="mgn-up-10">
      <a class="user-title" style="cursor:auto;">
        <div class="pad-tp-5 display-min-none bold">
          <span (click)="gotoPrev()"><i class="fa fa-arrow-left"></i>&nbsp;</span>
          Questionnaires
        </div>
      </a>
    </h5>
  </div>
</section>
<ng-container *ngIf="questionnaires.length > 1">
  <mat-accordion class="qnr-accord no-padding" *ngFor="let qnr of questionnaires">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="qnrstatus" style="width:50%">
            {{qnr.questionnaireName ? (qnr.questionnaireName.length>20)? (qnr.questionnaireName |
            slice:0:20)+'...':(qnr.questionnaireName) :
            (qnr.questionnaireId.length>20)? (qnr.questionnaireId | slice:0:20)+'...':(qnr.questionnaireId)}}
          </div>
          <div class="qnrstatus" style="width:20%">
            {{qnrStatuses[getQnrStatus(qnr.id?qnr.id:qnr.questionnaireId)]}}
            <!-- <span class="greenc"
                          *ngIf="getQnrStatus(qnr) === 'submitted'">Submitted</span>
                      <span class="red"
                          *ngIf="getQnrStatus(qnr) !== 'submitted'">Released</span> -->
          </div>
          <div class="qnr-action-btns ml-auto p-1" style="width:30%">
            <a class="btn" (click)="changeReleaseStatus(qnr.id, $event)"
              *ngIf="getQnrStatus(qnr.id?qnr.id:qnr.questionnaireId)!='submitted'">{{(getQnrStatus(qnr.id?qnr.id:qnr.questionnaireId)
              ===
              'released') ? 'Unrelease' : 'Release'}}</a>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="c-details">
        <!-- <div class="col-xs-12">
          <div class="pull-right">
            <button class="normal-btn edit" mat-flat-button
              (click)="changeMode(qnr)">{{qnr['edit']?'View':'Edit'}}</button>
          </div>
        </div> -->
        <div class="col-xs-12" *ngIf="qnr['edit']">
          <app-questionnaire [questionnaireList]="qnr" [mode]="'edit'" [source]="(waitlist_data.waitlistStatus) ? 'proCheckin' : 'proAppt'" [uuid]="waitlist_data.uid"
            [accountId]="waitlist_data.providerAccount.id" [type]="'details'" 
            [waitlistStatus]="(waitlist_data.waitlistStatus) ? waitlist_data.waitlistStatus : waitlist_data.apptStatus" (returnAnswers)="getQuestionAnswers($event)">
          </app-questionnaire>
        </div>
        <div class="col-xs-12" *ngIf="!qnr['edit']">
          <app-questionaire-view id="{{qnr.questionnaireId}}" [questionaire]="qnr"
          [source]="(waitlist_data.waitlistStatus) ? 'proCheckin' : 'proAppt'"></app-questionaire-view>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</ng-container>
<ng-container *ngIf="questionnaires.length === 1">
  <div class="card">
      <div class="c-details" *ngFor="let qnr of questionnaires">
          <!-- <div class="col-xs-12">
              <div class="pull-right">
                  <button class="normal-btn edit" mat-flat-button
                      (click)="changeMode(qnr)">{{qnr['edit']?'View':'Edit'}}</button>
              </div>
          </div> -->
          <div class="col-xs-12" *ngIf="qnr['edit']">
              <app-questionnaire [questionnaireList]="qnr" [mode]="'edit'"
              [source]="(waitlist_data.waitlistStatus) ? 'proCheckin' : 'proAppt'" [uuid]="waitlist_data.uid"
                  [accountId]="waitlist_data.providerAccount.id" [type]="'details'"
                  [waitlistStatus]="(waitlist_data.waitlistStatus) ? waitlist_data.waitlistStatus : waitlist_data.apptStatus"
                  (returnAnswers)="getQuestionAnswers($event)">
              </app-questionnaire>
          </div>
          <div class="col-xs-12" *ngIf="!qnr['edit']">
              <app-questionaire-view id="{{qnr.questionnaireId}}"
                  [questionaire]="qnr"
                  [source]="(waitlist_data.waitlistStatus) ? 'proCheckin' : 'proAppt'"></app-questionaire-view>
          </div>
      </div>
  </div>
</ng-container>