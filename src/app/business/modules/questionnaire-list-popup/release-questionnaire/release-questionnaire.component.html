<h1 class="mat-dialog-title" style="font-size: 1.5rem !important;">Share the Questionnaire
  <button class="modal_close" (click)="closeDialog()">
    <i class="fa fa-window-close black" aria-hidden="true"></i>
  </button>
</h1>
<app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>
<div *ngIf="!loading">
  <form [formGroup]="amForm" class="ynw-common-form" novalidate (ngSubmit)="amForm.valid && shareQnr(amForm.value)"
    (keyup)="resetErrors()">
    <mat-dialog-content>
      <div class="customer-details">
        <h5
          *ngIf="data.source == 'checkin' && (data.waitlist_data.waitlistingFor[0].firstName || data.waitlist_data.waitlistingFor[0].lastName)">
          {{data.waitlist_data.waitlistingFor[0].firstName}}
          {{data.waitlist_data.waitlistingFor[0].lastName}}
        </h5>
        <h5
          *ngIf="data.source == 'appt' && (data.waitlist_data.appmtFor[0].firstName || data.waitlist_data.appmtFor[0].lastName)">
          {{data.waitlist_data.appmtFor[0].firstName}}
          {{data.waitlist_data.appmtFor[0].lastName}}
        </h5>
        <div class="email" *ngIf="data.waitlist_data.token">
          <span class="value">Token: {{data.waitlist_data.token}}</span>
        </div>
        <div class="contact-no">
          <i class="fa fa-cogs icon"></i>
          <span class="value">{{data.waitlist_data.service.name}}</span>
        </div>
        <div class="contact-no" *ngIf="data.source == 'checkin' && data.waitlist_data.waitlistPhoneNumber">
          <i class="fa fa-mobile icon"></i>
          <span class="value">{{data.waitlist_data.countryCode}} {{data.waitlist_data.waitlistPhoneNumber}}</span>
        </div>
        <div class="contact-no" *ngIf="data.source == 'appt' && data.waitlist_data.phoneNumber">
          <i class="fa fa-mobile icon"></i>
          <span class="value">{{data.waitlist_data.countryCode}} {{data.waitlist_data.phoneNumber}}</span>
        </div>
        <div class="email" *ngIf="data.source == 'checkin' && data.waitlist_data.waitlistingFor[0].email">
          <i class="fa fa-envelope icon"></i>
          <span class="value">{{data.waitlist_data.waitlistingFor[0].email}}</span>
        </div>
        <div class="email" *ngIf="data.source == 'appt' && data.waitlist_data.providerConsumer.email">
          <i class="fa fa-envelope icon"></i>
          <span class="value">{{data.waitlist_data.providerConsumer.email}}</span>
        </div>
        <div class="email" *ngIf="data.source == 'checkin'">
          <i class="fa fa-calendar-o icon"></i>
          <span class="value">{{data.waitlist_data.date | date: newDateFormat }},
            {{data.waitlist_data.queue.queueStartTime}} -
            {{data.waitlist_data.queue.queueEndTime}}</span>
        </div>
        <div class="email" *ngIf="data.source == 'appt'">
          <i class="fa fa-calendar-o icon"></i>
          <span class="value">{{data.waitlist_data.appmtDate | date: newDateFormat }},
            {{getSingleTime(data.waitlist_data.appmtTime)}}</span>
        </div>
      </div>
      <div class="form-group mgn-bt-30">
        <label class="link-label">Enter a message for your {{customer_label}} to be sent along with the
          questionnaire</label>
        <mat-form-field>
          <textarea matInput class="form-control" id="message" placeholder="Message * " formControlName="message"
            maxlength="330">
                </textarea>
        </mat-form-field>
        <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'message')"
          errorMsg="Please enter a message.">
        </app-field-error-display>
      </div>
      <div class="form-group">
        <label class="link-label">Link</label>
        <mat-form-field>
          <input matInput class="form-control" [value]="qnrLink" #qrLink readonly style="padding: 0 !important;"
            onpaste="return false;" oncopy="return false" oncut="return false" ondrag="return false"
            ondrop="return false">
          <a class="copy-btn" aria-hidden="true" (click)="copyMessageInfo()">Copy</a>
        </mat-form-field>
      </div>
      <div class="form-group">
        <label class="link-label"> Or Share Via</label>
        <div class="coupon-outer">
          <mat-checkbox *ngIf="data.isPhone" class="mgright50 example-margin" [(ngModel)]="sms"
            [ngModelOptions]="{standalone: true}">
            SMS
          </mat-checkbox>
          <mat-checkbox *ngIf="data.isEmail" class="mgright50 example-margin" [(ngModel)]="email"
            [ngModelOptions]="{standalone: true}">Email
          </mat-checkbox>
          <mat-checkbox *ngIf="isPush" class="mgright50 example-margin" [(ngModel)]="pushnotify"
            [ngModelOptions]="{standalone: true}">App
            notification
          </mat-checkbox>
          <mat-checkbox *ngIf="isTelegram && data.isPhone" class="mgright50 example-margin" [(ngModel)]="telegram"
            [ngModelOptions]="{standalone: true}">
            Telegram
          </mat-checkbox>
        </div>
        <div class="sms_credit_warn mgn-up-10" *ngIf="is_smsLow">{{smsWarnMsg}} <a (click)="gotoSmsAddon()">{{is_noSMS?
            'Purchase now': 'Upgrade now'}}</a>{{is_noSMS? '' : ' to avoid undelivered SMS'}}</div>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions class="mat-scrool">
      <div class="col-md-12" style="margin-top: 15px;display: inline-flex;">
        <button type="button" class="cs-btn bt2" [disabled]="disableButton"
          (click)="closeDialog()">{{cancel_btn_cap}}</button>
        <button type="submit" class="cs-btn bt1 mat-button" mat-button [disabled]="sendBtnDisable()">Share</button>
      </div>
    </mat-dialog-actions>
    <app-field-error-display [displayError]="true" *ngIf="api_error" errorMsg="{{api_error}}">
    </app-field-error-display>
  </form>
</div>