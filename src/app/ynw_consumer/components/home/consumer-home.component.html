<section class="container consumer-dashhome no-padding no-padding-small">
    <div class="panel panel-default">
        <div class="panel-heading top-row">
            <app-header [headerTitle]=""></app-header>
        </div>
        <div class="panel-body no-padding">
            <div class="content consumer-dash mgn-bt-10" *ngIf="api_loading">
                <app-common-innerloading-spinner>
                </app-common-innerloading-spinner>
            </div>
            <div class="content consumer-dash" *ngIf="!api_loading">
                <div class="c_card card c-checkins">
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xs-12">
                        <div class="col-sm-8 col-md-8 col-lg-8 col-xs-12">
                            <h1 class="ng-tns-c16-8 txt-align">
                                <span class="ng-tns-c16-8 greeting">
                                    Hello {{usr_details.userName}} !
                                </span> <br>
                                <button class="mgn-up-20 find-sp-btn" mat-raised-button (click)="do_search()">Find
                                    Service
                                    Provider &nbsp; <i class="fa fa-search"></i></button>
                            </h1>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4 bg-visible fl-right no-padding">
                            <img class="myjaldee-bg fl-right" _ngcontent-ywv-c30=""
                                src="assets/images/myjaldee/Group92.png">
                        </div>
                    </div>


                    <h2 class="ng-tns-c16-8 bg-yelow">
                        <div class="jld-option">
                            <div class="col-sm-4 col-md-4 col-lg-4 col-xs-5 mgn-up-10 no-padding-small mgn-lft-2"
                                *ngIf="!showOrder">MY BOOKINGS</div>
                            <div class="col-sm-4 col-md-4 col-lg-4 col-xs-5 mgn-up-10 no-padding-small mgn-lft-2"
                                *ngIf="showOrder">MY ORDERS</div>
                            <div class="col-sm-8 col-md-8 col-lg-8 col-xs-9 no-padding-small">
                                <div class="fl-right disply-flex">
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button *ngIf="!showOrder" class="flat-btn full-wdth" mat-flat-button
                                            (click)="showOrders()">My Orders</button>
                                        <button *ngIf="!showOrder" class="flat-icon-btn" mat-flat-button
                                            (click)="showOrders()" [matTooltip]="'Orders'">
                                            <i class="fa ordr_ico"></i>
                                        </button>

                                        <button *ngIf="showOrder" class="flat-btn full-wdth" mat-flat-button
                                            (click)="showBookings()">My Bookings</button>
                                        <button *ngIf="showOrder" class="flat-icon-btn" mat-flat-button
                                            (click)="showBookings()" [matTooltip]="'Bookings'">
                                            <i class="fa bookin_ico"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button (click)="paymentsClicked()" class="flat-btn full-wdth"
                                            mat-flat-button>My
                                            Payments</button>
                                        <button class="flat-icon-btn" mat-flat-button (click)="paymentsClicked()"
                                            [matTooltip]="'My Payments'">
                                            <i class="fa myjld-payment"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button class="flat-btn full-wdth" mat-flat-button
                                            (click)="getmyfavourites()">My
                                            Favourites</button>
                                        <button class="flat-icon-btn" mat-flat-button (click)="getmyfavourites()"
                                            [matTooltip]="'My Favourites'">
                                            <i class="fa myjld-fav"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button class="flat-btn full-wdth" mat-flat-button
                                            (click)="gotoHistory()">History</button>
                                        <button class="flat-icon-btn" mat-flat-button (click)="gotoHistory()"
                                            [matTooltip]="'History'">
                                            <i class="fa myjld-histry"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h2>
                    <div *ngIf="((today_totalbookings.length == 0 && future_totalbookings.length == 0) && !loading && !showOrder)"
                        class="col-md-12 col-xs-12 col-sm-12 mgn-up-20 nocheckins">
                        <p class="locate-customer">No Active Bookings</p>
                    </div>
                    <div class="table-outer1 booking-dash ng-tns-c16-57" *ngIf="!loading && !showOrder">

                        <!-- begin revamp bookings -->
                        <!-- TODAY BOOKINGS-->
                        <div *ngIf="(today_totalbookings.length != 0)" class="day_hed">
                            TODAY
                        </div>
                        <div *ngIf="today_totalbookings.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of todayBookings;"
                                    (click)="showBookingDetails(booking, 'today')">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                        <app-appt-card [booking]="booking" type="today" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-appt-card>
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <app-wl-card [booking]="booking" type="today" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-wl-card>
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_tdybookingsShow && today_totalbookings.length > 3"
                            (click)="showMoreTdyBookings()" class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <div class="mgn-up-10 mgn-bt-10 grid-card" *ngIf="more_tdybookingsShow">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of todayBookings_more;"
                                    (click)="showBookingDetails(booking, 'today')">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                        <app-appt-card [booking]="booking" type="today" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-appt-card>
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <app-wl-card [booking]="booking" type="today" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-wl-card>
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- Show less -->
                        <div *ngIf="more_tdybookingsShow" (click)="showlessTdyBookings()" class="pad-lt-10">
                            <a class="show_more">Show less...</a>
                        </div>


                        <!--------------------------- FUTURE BOOKINGS----------------------------------------->
                        <hr>
                        <div *ngIf="(future_totalbookings.length != 0)" class="day_hed">
                            UPCOMING
                        </div>
                        <div *ngIf="future_totalbookings.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of futureBookings;"
                                    (click)="showBookingDetails(booking, 'future')">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                        <app-appt-card [booking]="booking" type="future" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-appt-card>
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">      
                                        <app-wl-card [booking]="booking" type="future" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-wl-card>                      
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_futrbookingsShow && future_totalbookings.length > 3"
                            (click)="showMoreFutrBookings()" class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <div class="mgn-up-10 mgn-bt-10 grid-card" *ngIf="more_futrbookingsShow">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of futureBookings_more;"
                                    (click)="showBookingDetails(booking, 'future')">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                      <app-appt-card type="future" [booking]="booking" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-appt-card>                                       
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <app-wl-card type="future" [booking]="booking" [extras]="extras" (actionPerformed)="cardClicked($event)"></app-wl-card>
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- Show less -->
                        <div *ngIf="more_futrbookingsShow" (click)="showlessFutrBookings()" class="pad-lt-10">
                            <a class="show_more">Show less...</a>
                        </div>
                        <!-- end revamp order -->

                    </div>



                    <!-- Order Section -->
                    <!-- If there is no order -->
                    <div *ngIf="((total_tdy_order.length == 0 && total_future_order == 0) && !loading) && showOrder"
                        class="col-md-12 col-xs-12 col-sm-12 mgn-up-20 nocheckins">
                        <p class="locate-customer">No Active Orders</p>
                    </div>

                    <!-- if there is order -->
                    <div class="table-outer1  ng-tns-c16-57" *ngIf="!loading && showOrder">
                        <!-- begin revamp order -->
                        <!-- TODAY ORDERS-->
                        <div *ngIf="(total_tdy_order.length != 0)" class="day_hed">
                            TODAY
                        </div>
                        <div *ngIf="total_tdy_order.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let oder of todayOrderslst;" (click)="showBookingDetails(oder)">
                                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                        <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                            <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                    [matTooltip]="'Store Pickup'"></i>
                                                <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                    [matTooltip]="'Home Delivery'"></i>
                                            </div>
                                        </div>
                                        <div class="more_opt">
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item
                                                    *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                    (click)="doCancelWaitlist(oder,'order')">
                                                    <i class="fa cross-icon"></i>
                                                    Cancel</button>

                                                <button mat-menu-item (click)="showBookingDetails(oder)">
                                                    <i class="fa fa-sticky-note-o"></i>Order details
                                                </button>
                                                <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                    (click)="rateService(oder,'order')">
                                                    <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                </button>
                                                <!-- <button mat-menu-item >
                                                    <span class="rate-service" [class.rated]="isRated(oder)"
                                                        (click)="rateService(oder,'order')">{{rate_visit}}</span>
                                                </button> -->
                                                <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                            </mat-menu>
                                        </div>
                                        <div
                                            class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                            <span class="ordr_no">{{oder.orderNumber}}</span>
                                            <div class="tdisplay-block">
                                                <span class="sp_name"
                                                    (click)="providerDetail(oder.providerAccount,$event)">
                                                    {{oder.providerAccount.businessName || '' | capitalizeFirst}}</span>
                                                <!-- <div class="userName">
                                                    <i class="fa fa-user for"></i>
                                                    {{oder.orderFor.firstName}}
                                                    {{oder.orderFor.lastName}}
                                                </div> -->
                                                <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                    {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                    {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                        class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                    <span>{{oder.totalItemQuantity}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                            <button
                                                *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                mat-flat-button class="btns rupee-font"
                                                (click)="viewBill(oder,'order',$event)">Pay
                                                {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                            <span
                                                *ngIf="oder.bill && oder.bill.amountPaid > 0|| oder.advanceAmountPaid > 0"
                                                class="amtPaid">Paid
                                                {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                currency:'&#8377;') : (oder.advanceAmountPaid |
                                                currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                            <span *ngIf="oder.bill && oder.bill.refundedAmount >0" style="color:green">
                                                Refunded </span>
                                            <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                <button mat-flat-button class="btns"
                                                    *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                    (click)="viewBill(oder,'order',$event)">Receipt</button>
                                            </span>

                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                            [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                            {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                            confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                    </div>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_tdyOrdersShow && total_tdy_order.length > 3" (click)="showMoreTdyOrders()"
                            class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <ng-container *ngIf="more_tdyOrdersShow">
                            <div *ngIf="total_tdy_order.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                                <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                    <mat-grid-tile *ngFor="let oder of todayOrderslst_more;"
                                        (click)="showBookingDetails(oder)">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                                <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                        [matTooltip]="'Store Pickup'"></i>
                                                    <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                        [matTooltip]="'Home Delivery'"></i>
                                                </div>
                                            </div>
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                        (click)="doCancelWaitlist(oder,'order')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>

                                                    <button mat-menu-item (click)="showBookingDetails(oder)">
                                                        <i class="fa fa-sticky-note-o"></i>Order details
                                                    </button>
                                                    <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                        (click)="rateService(oder,'order')">
                                                        <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                        <!-- <span class="rate-service" [class.rated]="isRated(oder)"
                                                            (click)="rateService(oder,'order')"><i class="fa fa-star-o" aria-hidden="true"></i>{{rate_visit}}</span> -->
                                                    </button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourites</span>
                                                    </button>
                                                </mat-menu>
                                            </div>
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                                <span class="ordr_no">{{oder.orderNumber}}</span>
                                                <div class="tdisplay-block">
                                                    <span class="sp_name"
                                                        (click)="providerDetail(oder.providerAccount,$event)">
                                                        {{oder.providerAccount.businessName || '' |
                                                        capitalizeFirst}}</span>
                                                    <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                        {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                        {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                    <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                            class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                        <span>{{oder.totalItemQuantity}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <button
                                                    *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                    mat-flat-button class="btns rupee-font"
                                                    (click)="viewBill(oder,'order',$event)">Pay
                                                    {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span
                                                    *ngIf="oder.bill && oder.bill.amountPaid > 0|| oder.advanceAmountPaid > 0"
                                                    class="amtPaid">Paid
                                                    {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                    currency:'&#8377;') : (oder.advanceAmountPaid |
                                                    currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                                <span *ngIf="oder.bill && oder.bill.refundedAmount >0"
                                                    style="color:green"> Refunded </span>
                                                <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                        (click)="viewBill(oder,'order',$event)">Receipt</button>
                                                </span>

                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                                [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                                {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                                confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                        </div>
                                    </mat-grid-tile>
                                </mat-grid-list>
                            </div>
                        </ng-container>
                        <!-- Show less -->
                        <div class="pad-lt-10" *ngIf="more_tdyOrdersShow" (click)="showlessTdyOrders()">
                            <a class="show_more">Show less...</a>
                        </div>

                        <!-- FUTURE ORDERS-->
                        <hr>
                        <div *ngIf="total_future_order && (total_future_order.length != 0)" class="day_hed">
                            UPCOMING
                        </div>
                        <div *ngIf="total_future_order && (total_future_order.length != 0)"
                            class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let oder of futureOrderslst;" (click)="showBookingDetails(oder)">
                                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                        <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                            <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                    [matTooltip]="'Store Pickup'"></i>
                                                <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                    [matTooltip]="'Home Delivery'"></i>
                                            </div>
                                        </div>
                                        <div class="more_opt">
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item
                                                    *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                    (click)="doCancelWaitlist(oder,'order')">
                                                    <i class="fa cross-icon"></i>
                                                    Cancel</button>

                                                <button mat-menu-item (click)="showBookingDetails(oder)">
                                                    <i class="fa fa-sticky-note-o"></i>Order details
                                                </button>
                                                <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                    (click)="rateService(oder,'order')">
                                                    <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                </button>
                                                <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                            </mat-menu>
                                        </div>
                                        <div
                                            class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                            <span class="ordr_no">{{oder.orderNumber}}</span>
                                            <div class="tdisplay-block">
                                                <span class="sp_name"
                                                    (click)="providerDetail(oder.providerAccount,$event)">
                                                    {{oder.providerAccount.businessName || '' | capitalizeFirst}}</span>
                                                <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                    {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                    {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                <!-- <div class="userName">
                                                    <i class="fa fa-user for"></i>
                                                    {{oder.orderFor.firstName}}
                                                    {{oder.orderFor.lastName}}
                                                </div> -->
                                                <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                        class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                    <span>{{oder.totalItemQuantity}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                            <button
                                                *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                mat-flat-button class="btns rupee-font"
                                                (click)="viewBill(oder,'order',$event)">Pay
                                                {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                            <span
                                                *ngIf="oder.bill && oder.bill.amountPaid > 0 || oder.advanceAmountPaid > 0"
                                                class="amtPaid">Paid
                                                {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                currency:'&#8377;') : (oder.advanceAmountPaid |
                                                currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                            <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                <button mat-flat-button class="btns"
                                                    *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                    (click)="viewBill(oder,'order',$event)">Receipt</button>
                                            </span>

                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                            [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                            {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                            confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                    </div>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_futrOrdersShow && total_future_order &&total_future_order.length > 3"
                            (click)="showMoreFutOrders()" class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <ng-container *ngIf="more_futrOrdersShow">
                            <div *ngIf="total_future_order && total_future_order.length != 0"
                                class="mgn-up-10 mgn-bt-10 grid-card">
                                <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                    <mat-grid-tile *ngFor="let oder of futureOrderslst_more;"
                                        (click)="showBookingDetails(oder)">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                                <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                        [matTooltip]="'Store Pickup'"></i>
                                                    <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                        [matTooltip]="'Home Delivery'"></i>
                                                </div>
                                            </div>
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                        (click)="doCancelWaitlist(oder,'order')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>

                                                    <button mat-menu-item (click)="showBookingDetails(oder)">
                                                        <i class="fa fa-sticky-note-o"></i>Order details
                                                    </button>
                                                    <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                        (click)="rateService(oder,'order')">
                                                        <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                    </button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourites</span>
                                                    </button>
                                                </mat-menu>
                                            </div>
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                                <span class="ordr_no">{{oder.orderNumber}}</span>
                                                <div class="tdisplay-block">
                                                    <span class="sp_name"
                                                        (click)="providerDetail(oder.providerAccount,$event)">
                                                        {{oder.providerAccount.businessName || '' |
                                                        capitalizeFirst}}</span>
                                                    <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                        {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                        {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                    <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                            class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                        <span>{{oder.totalItemQuantity}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <button
                                                    *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                    mat-flat-button class="btns rupee-font"
                                                    (click)="viewBill(oder,'order',$event)">Pay
                                                    {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span
                                                    *ngIf="oder.bill && oder.bill.amountPaid > 0|| oder.advanceAmountPaid > 0"
                                                    class="amtPaid">Paid
                                                    {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                    currency:'&#8377;') : (oder.advanceAmountPaid |
                                                    currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                                <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                        (click)="viewBill(oder,'order',$event)">Receipt</button>
                                                </span>

                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                                [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                                {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                                confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                        </div>
                                    </mat-grid-tile>
                                </mat-grid-list>
                            </div>
                        </ng-container>
                        <!-- Show less -->
                        <div class="pad-lt-10" *ngIf="more_futrOrdersShow" (click)="showlessFutOrders()">
                            <a class="show_more">Show less...</a>
                        </div>
                        <!-- end revamp order -->
                    </div>

                    <ks-modal-gallery [id]="0" *ngIf="image_list_popup && image_list_popup.length>0"
                        [modalImages]="image_list_popup" [plainGalleryConfig]="customPlainGalleryRowConfig"
                        [buttonsConfig]="customButtonsFontAwesomeConfig" (buttonBeforeHook)="onButtonBeforeHook()"
                        (buttonAfterHook)="onButtonAfterHook()"></ks-modal-gallery>
                </div>
            </div>
        </div>
    </div>
</section>
