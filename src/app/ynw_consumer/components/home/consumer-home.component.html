<section class="container consumer-dashhome no-padding no-padding-small">
    <div class="panel panel-default">
        <div class="panel-heading top-row ">
            <app-header [headerTitle]=""></app-header>
        </div>
        <div class="panel-body no-padding">
            <div class="content consumer-dash mgn-bt-10" *ngIf="api_loading">
                <app-common-innerloading-spinner>
                </app-common-innerloading-spinner>
            </div>
            <div class="content consumer-dash" *ngIf="!api_loading">
                <div class="card c-checkins">
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xs-12">
                        <div class="col-sm-8 col-md-8 col-lg-8 col-xs-12">
                            <h1 class="ng-tns-c16-8 txt-align">
                                <span class="ng-tns-c16-8 greeting">
                                    Hello {{usr_details.userName}} !
                                </span> <br>
                                <button class="mgn-up-20 find-sp-btn" mat-raised-button (click)="do_search()">Find
                                    Service
                                    Provider &nbsp; <i class="fa fa-search"></i></button>
                            </h1>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4 bg-visible">
                            <img class="myjaldee-bg" _ngcontent-ywv-c30="" src="assets/images/myjaldee/Group92.png">
                        </div>
                    </div>
                    <h2 class="ng-tns-c16-8 bg-yelow">
                        <div class="jld-option">
                            <div class="col-sm-4 col-md-6 col-lg-6 col-xs-6 mgn-up-10">MY BOOKINGS</div>
                            <div class="col-sm-8 col-md-6 col-lg-6 col-xs-7">
                                <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4">
                                    <button (click)="paymentsClicked()" class="flat-btn full-wdth" mat-flat-button>My
                                        Payments</button>
                                    <button class="flat-icon-btn" mat-flat-button (click)="paymentsClicked()"
                                        [matTooltip]="'My Payments'">
                                        <i class="fa myjld-payment"></i>
                                    </button>
                                </div>
                                <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4">
                                    <button class="flat-btn full-wdth" mat-flat-button (click)="getmyfavourites()">My
                                        Favourites</button>
                                    <button class="flat-icon-btn" mat-flat-button (click)="getmyfavourites()"
                                        [matTooltip]="'My Favourites'">
                                        <i class="fa myjld-fav"></i>
                                    </button>
                                </div>
                                <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4">
                                    <button class="flat-btn full-wdth" mat-flat-button
                                        (click)="gotoHistory()">History</button>
                                    <button class="flat-icon-btn" mat-flat-button (click)="gotoHistory()"
                                        [matTooltip]="'History'">
                                        <i class="fa myjld-histry"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </h2>
                    <div *ngIf="((today_totalbookings.length == 0 && future_totalbookings.length == 0) && !loading)"
                        class="col-md-12 col-xs-12 col-sm-12 mgn-up-20 nocheckins">
                        <p class="locate-customer">No current Bookings available</p>
                    </div>
                    <div class="table-outer1 ng-tns-c16-57" *ngIf="!loading">
                        <table class="table">

                            <!-- TODAY BOOKINGS  -->
                            <thead class="header" *ngIf="(today_totalbookings.length != 0)">
                                <th colspan="6">TODAY</th>
                            </thead>
                            <tbody *ngIf="today_totalbookings.length != 0">
                                <tr [ngClass]="{'custId-cursor': !booking.donationStatus}"
                                    *ngFor="let booking of todayBookings;" (click)="showBookingDetails(booking)">
                                    <ng-container *ngIf="booking.apptStatus">
                                        <td>
                                            <h4 class="disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa appt-icon" [matTooltip]="'Appointment'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    {{getSingleTime(booking.appmtTime)}}
                                                </span>
                                            </h4>
                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span class="doctrnme" *ngIf="booking.provider">
                                                Provider : {{booking.provider.firstName}}
                                                {{booking.provider.lastName}}<br>
                                            </span>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}
                                                <!-- for
                                                <span>{{booking.appmtFor[0].userName}}</span> -->
                                            </span>
                                            <div class="userName" *ngIf="booking.appmtFor[0].firstName">
                                                <i class="fa fa-user for"></i>
                                                {{booking.appmtFor[0].firstName}}
                                                {{booking.appmtFor[0].lastName}}
                                            </div>
                                        </td>
                                        <td>
                                            <h6
                                                [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">
                                                <span
                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                <span
                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                    <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                        <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </h6>
                                            
                                            <!-- <span *ngIf="booking.apptStatus == 'Confirmed'">
                                                <a href="{{path}}status/{{booking.appointmentEncId}}"
                                                    (click)="stopprop($event)" target="blank"><u class="font-smalr">VIEW
                                                        STATUS</u></a></span> -->
                                        </td>
                                        <td class="pay-wdth">
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">

                                                <button class="bt3 cust-btn"
                                                    (click)="viewBill(booking,'appointment',$event)">Pay
                                                    &#8377;{{booking.amountDue}}</button>
                                            </span>
                                            <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                <button class="bt3 cust-btn cursor-auto">
                                                    Paid
                                                    &#8377;{{booking.amountPaid}}
                                                </button>
                                            </span>
                                        </td>
                                        <td class="pay-wdth">
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn"
                                                    *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                    (click)="viewBill(booking,'appointment',$event)">View
                                                    Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                    (click)="viewBill(booking,'appointment',$event)">View
                                                    Receipt</button>
                                                <!-- <button class="bt3 cust-btn"
                                                    *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                    (click)="viewBill(booking,'appointment',$event)">View Bill</button> -->
                                            </span>
                                        </td>
                                        <td>
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item  *ngIf="booking.apptStatus == 'Confirmed' ||
                                                    booking.apptStatus == 'Arrived'" (click)="gotoAptmtReschedule(booking)">
                                                    <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                <button mat-menu-item
                                                    *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                    (click)="doCancelWaitlist(booking,'appointment')">
                                                    <i class="fa cross-icon"></i>
                                                    Cancel</button>
                                                <button mat-menu-item (click)="addWaitlistMessage(booking,'appt')">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="booking.apptStatus == 'Completed'">
                                                    <span class="rate-service" [class.rated]="isRated(booking)"
                                                        (click)="rateService(booking,'appointment')">{{rate_visit}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                && booking.apptStatus !== 'Cancelled'"
                                                    (click)="getMeetingDetails(booking,'appt')">
                                                    <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                    Meeting details
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                                <button class="custId-cursor" mat-menu-item
                                                    *ngIf="(booking.apptStatus=='Confirmed'|| 'prepaymentPending') && (booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed')" (click)="gotoLivetrackPage('true',booking)">
                                                    <i class="fa fa-check fl-right"></i> Sharing location
                                                </button>
                                                <button mat-menu-item
                                                    *ngIf="!booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed'"
                                                    (click)="gotoLivetrack(booking.uid,booking.providerAccount.id,'false')">
                                                    <i class="fa fa-times fl-right"></i>Sharing location
                                                </button>

                                                <button class="custId-cursor" mat-menu-item *ngIf="booking.prescShared"
                                                (click)="viewprescription(booking)">
                                                <i class="mr-rx-icon-customer"></i>view prescription</button>
                                            </mat-menu>
                                        </td>
                                    </ng-container>
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <td>
                                            <h4 *ngIf="!booking.token && !booking.serviceTime && (booking.appxWaitingTime == 0 && booking.waitlistStatus != 'cancelled' && booking.waitlistStatus != 'done')"
                                                class="now disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    &nbsp;Now
                                                </span>
                                            </h4>
                                            <h4 *ngIf="!booking.token && booking.serviceTime && (booking.appxWaitingTime == 0 && booking.waitlistStatus != 'cancelled' && booking.waitlistStatus != 'done')"
                                                class="now disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    {{booking.serviceTime}}
                                                </span>
                                            </h4>
                                            <h4 *ngIf="!booking.token && !booking.serviceTime && (booking.appxWaitingTime > 0 && booking.waitlistStatus != 'cancelled')"
                                                class="disp-grid">
                                                <span class="mgn-up-10 disp-flex">
                                                    <div class="circle-tokens"><i class="fa chckn-icon"
                                                            [matTooltip]="'Check-in'"></i></div>
                                                    <div class="disp-grid">
                                                        <span class="est-wait-time">Est Wait Time</span>
                                                        <span>
                                                            {{getTimeToDisplay(booking.appxWaitingTime)}}
                                                           
                                                        </span>
                                                    </div>
                                                </span>
                                            </h4>
                                            <h4 *ngIf="!booking.token && booking.serviceTime && (booking.appxWaitingTime > 0 && booking.waitlistStatus != 'cancelled')"
                                                class="disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    {{booking.serviceTime}}
                                                </span>
                                            </h4>

                                            <h4 *ngIf="booking.token" class="disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa token-icon" [matTooltip]="'Token'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    Token #{{booking.token}}
                                                </span>
                                            </h4>
                                            <span class="est-wait-time"
                                                *ngIf="!booking.serviceTime && ( booking.appxWaitingTime >=0 && booking.token && (booking.waitlistStatus !== 'cancelled' && booking.waitlistStatus !=='done'))">Est
                                                Wait Time : {{getTimeToDisplay(booking.appxWaitingTime)}} </span>

                                            <span class="est-wait-time"
                                                *ngIf="booking.serviceTime && ( booking.appxWaitingTime >=0 && booking.token && (booking.waitlistStatus !== 'cancelled' && booking.waitlistStatus !=='done'))">Starts
                                                at : {{booking.serviceTime}}</span>

                                            <h4
                                                *ngIf="(booking.waitlistStatus == 'cancelled' || booking.waitlistStatus =='done') && !booking.token && booking.appxWaitingTime == 0">
                                                <div class="circle-tokens">
                                                    <i class="fa chckn-icon" [matTooltip]="'Token'"></i>
                                                </div>
                                            </h4>
                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span class="doctrnme" *ngIf="booking.provider">
                                                Provider : {{booking.provider.businessName}}<br>
                                            </span>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}
                                            </span>
                                            <div class="userName" *ngIf="booking.waitlistingFor[0].firstName">
                                                <i class="fa fa-user for"></i>
                                                {{booking.waitlistingFor[0].firstName}}
                                                {{booking.waitlistingFor[0].lastName}}
                                            </div>
                                        </td>
                                        <td>
                                            <h6
                                                [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                                <span
                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                </span>

                                                <span *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                </span>
                                                <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                    <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                </span>
                                            </h6>
                                            
                                            <!-- <span *ngIf="booking.waitlistStatus == 'checkedIn'">
                                                <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"
                                                    (click)="stopprop($event)"><u class="font-smalr">VIEW
                                                        STATUS</u></a></span> -->
                                        </td>
                                        <td class="pay-wdth">
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                                <button class="bt3 cust-btn"
                                                    (click)="viewBill(booking,'checkin',$event)">Pay
                                                    &#8377;{{booking.amountDue}}</button>
                                            </span>
                                            <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                <button class="bt3 cust-btn cursor-auto">
                                                    Paid
                                                    &#8377;{{booking.amountPaid}}
                                                </button>
                                            </span>
                                        </td>
                                        <td class="pay-wdth">
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn"
                                                    *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(booking,'checkin',$event)">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                    (click)="viewBill(booking,'checkin',$event)">View Receipt</button>
                                                <!-- <button class="bt3 cust-btn"
                                                    *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(booking,'checkin',$event)">View Bill</button> -->
                                            </span>
                                        </td>
                                        <td>
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item  
                                                    *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                     (click)="gotoWaitlistReschedule(booking)">
                                                    <i class="consumer-reschedule-icon"></i>
                                                    Reschedule</button>
                                                <button mat-menu-item
                                                    *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                    (click)="doCancelWaitlist(booking,'checkin')">
                                                    <i class="fa cross-icon"></i>
                                                    Cancel</button>
                                                <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'">
                                                    <span class="rate-service" [class.rated]="isRated(booking)"
                                                        (click)="rateService(booking,'checkin')">{{rate_visit}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                    (click)="getMeetingDetails(booking,'waitlist')">
                                                    <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                    Meeting details
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                                <button class="custId-cursor" mat-menu-item
                                                    *ngIf="(booking.waitlistStatus=='checkedIn'|| 'prepaymentPending') && (booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn')" (click)="gotoLivetrackPage('true',booking)">
                                                    <i class="fa fa-check fl-right"></i> Sharing location
                                                </button>
                                                <button mat-menu-item
                                                    *ngIf="!booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn'"
                                                    (click)="gotoLivetrackchekin(booking.ynwUuid,booking.providerAccount.id,'false')">
                                                    <i class="fa fa-times fl-right"></i>Sharing location
                                                </button>

                                                <button class="custId-cursor" mat-menu-item *ngIf="booking.prescShared"
                                                (click)="viewprescription(booking)">
                                                <i class="mr-rx-icon-customer"></i>view prescription</button>
                                            </mat-menu>
                                        </td>
                                    </ng-container>

                                </tr>
                                <tr *ngIf="!more_tdybookingsShow && today_totalbookings.length > 3"
                                    (click)="showMoreTdyBookings()">
                                    <td colspan="6"><a>Show more...</a></td>
                                </tr>
                                <ng-container *ngIf="more_tdybookingsShow">
                                    <tr *ngFor="let booking of todayBookings_more;"
                                        [ngClass]="{'custId-cursor': !booking.donationStatus}"
                                        (click)="showBookingDetails(booking)">
                                        <ng-container *ngIf="booking.apptStatus">
                                            <td>
                                                <h4 class="disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa appt-icon" [matTooltip]="'Appointment'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">
                                                        {{getSingleTime(booking.appmtTime)}}
                                                    </span>
                                                </h4>
                                            </td>
                                            <td class="tdisplay-block">
                                                <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' | capitalizeFirst}}
                                                </h4>
                                                <span class="doctrnme" *ngIf="booking.provider">
                                                    Provider :
                                                    {{booking.provider.firstName}}
                                                {{booking.provider.lastName}}<br>
                                                </span>
                                                <span>
                                                    <i class="fa phon-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                </span>
                                                <span class="servName">{{booking.service.name | capitalizeFirst}}
                                                    <!-- for
                                                    <span>{{booking.appmtFor[0].userName}}</span> -->
                                                </span>
                                                <div class="userName" *ngIf="booking.appmtFor[0].firstName">
                                                    <i class="fa fa-user for"></i>
                                                    {{booking.appmtFor[0].firstName}}
                                                {{booking.appmtFor[0].lastName}}
                                                </div>
                                            </td>
                                            <td>
                                                <h6
                                                    [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">
                                                    <span
                                                        *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                    <span
                                                        *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                        <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                            <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                        </span>
                                                    </h6>
                                                
                                                <!-- <span *ngIf="booking.apptStatus == 'Confirmed'">
                                                    <a href="{{path}}status/{{booking.appointmentEncId}}" target="blank"
                                                        (click)="stopprop($event)"><u class="font-smalr">VIEW
                                                            STATUS</u></a></span> -->
                                            </td>
                                            <td class="pay-wdth">
                                                <span
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">

                                                    <button class="bt3 cust-btn"
                                                        (click)="viewBill(booking,'appointment',$event)">Pay
                                                        &#8377;{{booking.amountDue}}</button>
                                                </span>
                                                <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                    <button class="bt3 cust-btn cursor-auto">
                                                        Paid
                                                        &#8377;{{booking.amountPaid}}
                                                    </button>
                                                </span>
                                            </td>
                                            <td class="pay-wdth">
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(booking,'appointment',$event)">View
                                                        Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'appointment',$event)">View
                                                        Receipt</button>
                                                    <!-- <button class="bt3 cust-btn"
                                                        *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(booking,'appointment',$event)">View
                                                        Bill</button> -->
                                                </span>
                                            </td>
                                            <td>
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item  *ngIf="booking.apptStatus == 'Confirmed' ||
                                                        booking.apptStatus == 'Arrived'" (click)="gotoAptmtReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                    <button mat-menu-item
                                                        *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                        (click)="doCancelWaitlist(booking,'appointment')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(booking,'appt')">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.apptStatus == 'Completed'">
                                                        <span class="rate-service" [class.rated]="isRated(booking)"
                                                            (click)="rateService(booking,'appointment')">{{rate_visit}}</span>
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                    && booking.apptStatus !== 'Cancelled'"
                                                        (click)="getMeetingDetails(booking,'appt')">
                                                        <i class="fa fa-sticky-note-o"></i>
                                                        Meeting details
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourite</span>
                                                    </button>
                                                    <button class="custId-cursor" mat-menu-item
                                                        *ngIf="(booking.apptStatus=='Confirmed'|| 'prepaymentPending') && (booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed')" (click)="gotoLivetrackPage('true',booking)">
                                                        <i class="fa fa-check fl-right"></i> Sharing location
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed'"
                                                        (click)="gotoLivetrack(booking.uid,booking.providerAccount.id,'false')">
                                                        <i class="fa fa-times fl-right"></i>Sharing location
                                                    </button>
                                                    <button class="custId-cursor" mat-menu-item *ngIf="booking.prescShared"
                                                    (click)="viewprescription(booking)">
                                                    <i class="mr-rx-icon-customer"></i>view prescription</button>
                                                </mat-menu>
                                            </td>
                                        </ng-container>
                                        <ng-container *ngIf="booking.waitlistStatus">
                                            <td>
                                                <h4 *ngIf="!booking.token && !booking.serviceTime && (booking.appxWaitingTime == 0 && booking.waitlistStatus != 'cancelled' && booking.waitlistStatus != 'done')"
                                                    class="now disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">&nbsp;Now</span>
                                                </h4>
                                                <h4 *ngIf="!booking.token && booking.serviceTime && (booking.appxWaitingTime == 0 && booking.waitlistStatus != 'cancelled' && booking.waitlistStatus != 'done')"
                                                    class="now disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">{{booking.serviceTime}}</span>
                                                </h4>

                                                <h4 *ngIf="!booking.token && !booking.serviceTime && (booking.appxWaitingTime > 0 && booking.waitlistStatus != 'cancelled')"
                                                    class="disp-grid">
                                                    <span class="mgn-up-10 disp-flex">
                                                        <div class="circle-tokens">
                                                            <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                        </div>
                                                        <div class="disp-grid">
                                                            <span class="est-wait-time">Est Wait Time</span>
                                                            <span>
                                                                {{getTimeToDisplay(booking.appxWaitingTime)}}
                                                            </span>
                                                        </div>
                                                    </span>
                                                </h4>
                                                <h4 *ngIf="!booking.token && booking.serviceTime && (booking.appxWaitingTime > 0 && booking.waitlistStatus != 'cancelled')"
                                                    class="disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">
                                                        {{booking.serviceTime}}
                                                    </span>
                                                </h4>

                                                <h4 *ngIf="booking.token" class="disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa token-icon" [matTooltip]="'Token'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">
                                                        Token #{{booking.token}}
                                                    </span>
                                                </h4>
                                                <span class="est-wait-time"
                                                    *ngIf="!booking.serviceTime && ( booking.appxWaitingTime >= 0 && booking.token && (booking.waitlistStatus !== 'cancelled' && booking.waitlistStatus !=='done'))">Est
                                                    Wait Time : {{getTimeToDisplay(booking.appxWaitingTime)}} </span>

                                                <span class="est-wait-time"
                                                    *ngIf="booking.serviceTime && ( booking.appxWaitingTime >=0 && booking.token && (booking.waitlistStatus !== 'cancelled' && booking.waitlistStatus !=='done'))">Starts
                                                    at : {{booking.serviceTime}}</span>

                                                <h4
                                                    *ngIf="(booking.waitlistStatus == 'cancelled' || booking.waitlistStatus =='done') && !booking.token && booking.appxWaitingTime == 0">
                                                    <div class="circle-tokens">
                                                        <i class="fa chckn-icon" [matTooltip]="'Token'"></i>
                                                    </div>
                                                </h4>
                                            </td>
                                            <td class="tdisplay-block">
                                                <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' | capitalizeFirst}}
                                                </h4>
                                                <span class="doctrnme" *ngIf="booking.provider">
                                                    Provider :
                                                    {{booking.provider.businessName}}<br>
                                                </span>
                                                <span>
                                                    <i class="fa phon-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                </span>
                                                <span class="servName">{{booking.service.name | capitalizeFirst}}
                                                </span>
                                                <div class="userName" *ngIf="booking.waitlistingFor[0].firstName">
                                                    <i class="fa fa-user for"></i>
                                                    {{booking.waitlistingFor[0].firstName}}
                                                    {{booking.waitlistingFor[0].lastName}}
                                                </div>
                                            </td>
                                            <td>
                                                <h6
                                                    [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                                    <span
                                                        *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                    </span>

                                                    <span *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                    </span>
                                                    <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                        <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </h6>
                                                
                                                <!-- <span *ngIf="booking.waitlistStatus == 'checkedIn'">
                                                    <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"
                                                        (click)="stopprop($event)"><u class="font-smalr">VIEW
                                                            STATUS</u></a></span> -->
                                            </td>
                                            <td class="pay-wdth">
                                                <span
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                                    <button class="bt3 cust-btn"
                                                        (click)="viewBill(booking,'checkin',$event)">Pay
                                                        &#8377;{{booking.amountDue}}</button>
                                                </span>
                                                <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                    <button class="bt3 cust-btn cursor-auto">
                                                        Paid
                                                        &#8377;{{booking.amountPaid}}
                                                    </button>
                                                </span>
                                            </td>
                                            <td class="pay-wdth">
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(booking,'checkin',$event)">View
                                                        Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'checkin',$event)">View
                                                        Receipt</button>
                                                    <!-- <button class="bt3 cust-btn"
                                                        *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(booking,'checkin',$event)">View Bill</button> -->
                                                </span>
                                            </td>
                                            <td>
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item  
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                         (click)="gotoWaitlistReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>
                                                        Reschedule</button>
                                                    <button mat-menu-item
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                        (click)="doCancelWaitlist(booking,'checkin')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'">
                                                        <span class="rate-service" [class.rated]="isRated(booking)"
                                                            (click)="rateService(booking,'checkin')">{{rate_visit}}</span>
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                        (click)="getMeetingDetails(booking,'waitlist')">
                                                        <i class="fa fa-sticky-note-o"></i> Meeting details
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourite</span>
                                                    </button>
                                                    <button class="custId-cursor" mat-menu-item
                                                        *ngIf="(booking.waitlistStatus=='checkedIn'|| 'prepaymentPending') && (booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn')" (click)="gotoLivetrackPage('true',booking)">
                                                        <i class="fa fa-check fl-right"></i> Sharing location
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn'"
                                                        (click)="gotoLivetrackchekin(booking.ynwUuid,booking.providerAccount.id,'false')">
                                                        <i class="fa fa-times fl-right"></i>Sharing location
                                                    </button>

                                                    <button class="custId-cursor" mat-menu-item *ngIf="booking.prescShared"
                                                    (click)="viewprescription(booking)">
                                                    <i class="mr-rx-icon-customer"></i>view prescription</button>
                                                </mat-menu>
                                            </td>
                                        </ng-container>

                                    </tr>
                                    <tr *ngIf="more_tdybookingsShow" (click)="showlessTdyBookings()">
                                        <td colspan="6"><a>Show less...</a></td>
                                    </tr>
                                </ng-container>
                            </tbody>


                            <!-- FUTURE BOOKINGS -->
                            <thead class="header" *ngIf="(future_totalbookings.length != 0)">
                                <th colspan="6">UPCOMING</th>
                            </thead>
                            <tbody *ngIf="future_totalbookings.length != 0">
                                <tr *ngFor="let booking of futureBookings;" class="custId-cursor"
                                    (click)="showBookingDetails(booking)">
                                    <ng-container *ngIf="booking.apptStatus">
                                        <td>
                                            <h4 class="disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa appt-icon" [matTooltip]="'Appointment'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    {{getSingleTime(booking.appmtTime)}}
                                                </span>
                                            </h4>
                                            <span class="datefont">{{booking.appmtDate | date: dateFormat}}</span>

                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span class="doctrnme" *ngIf="booking.provider">
                                                Provider : {{booking.provider.firstName}}
                                                {{booking.provider.lastName}}<br>
                                            </span>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}
                                            </span>
                                            <div class="userName" *ngIf="booking.appmtFor[0].firstName">
                                                <i class="fa fa-user for"></i>
                                                {{booking.appmtFor[0].firstName}}
                                                {{booking.appmtFor[0].lastName}}
                                            </div>
                                        </td>
                                        <td>
                                            <h6
                                                [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">
                                                {{booking.apptStatus}}
                                                <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                    <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                </span>
                                            </h6>
                                            
                                            <!-- <span *ngIf="booking.apptStatus == 'Confirmed'"><a
                                                    href="{{path}}status/{{booking.appointmentEncId}}" target="blank"
                                                    (click)="stopprop($event)"><u class="font-smalr">VIEW
                                                        STATUS</u></a></span> -->
                                        </td>
                                        <td class="pay-wdth">
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">

                                                <button class="bt3 cust-btn"
                                                    (click)="viewBill(booking,'appointment',$event)">Pay
                                                    &#8377;{{booking.amountDue}}</button>
                                            </span>
                                            <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                <button class="bt3 cust-btn cursor-auto">
                                                    Paid
                                                    &#8377;{{booking.amountPaid}}
                                                </button>
                                            </span>
                                        </td>
                                        <td class="pay-wdth">
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn"
                                                    *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                    (click)="viewBill(booking,'appointment',$event)">View
                                                    Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                    (click)="viewBill(booking,'appointment',$event)">View
                                                    Receipt</button>
                                                <!-- <button class="bt3 cust-btn"
                                                    *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                    (click)="viewBill(booking,'appointment',$event)">View Bill</button> -->
                                            </span>
                                        </td>
                                        <td>
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item  *ngIf="booking.apptStatus == 'Confirmed' ||
                                                    booking.apptStatus == 'Arrived'" (click)="gotoAptmtReschedule(booking)">
                                                    <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                <button mat-menu-item
                                                    *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                    (click)="doCancelWaitlist(booking,'appointment')">
                                                    <i class="fa cross-icon"></i>Cancel</button>
                                                <button mat-menu-item (click)="addWaitlistMessage(booking,'appt')">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                && booking.apptStatus !== 'Cancelled'"
                                                    (click)="getMeetingDetails(booking,'appt')">
                                                    <i class="fa fa-sticky-note-o"></i>
                                                    Meeting details
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                            </mat-menu>
                                        </td>
                                    </ng-container>
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <td>
                                            <h4 *ngIf="!booking.token" class="disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    &nbsp;{{booking.serviceTime}}
                                                </span>
                                            </h4>
                                            <h4 *ngIf="booking.token" class="disp-flex">
                                                <div class="circle-tokens">
                                                    <i class="fa token-icon" [matTooltip]="'Token'"></i>
                                                </div>
                                                <span class="mgn-up-10">
                                                    Token #{{booking.token}}
                                                </span>
                                            </h4>
                                            <span class="datefont">{{booking.date | date: dateFormat}}</span>
                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span class="doctrnme" *ngIf="booking.provider">
                                                Provider : {{booking.provider.businessName}}<br>
                                            </span>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}
                                            </span>
                                            <div class="userName" *ngIf="booking.waitlistingFor[0].firstName">
                                                <i class="fa fa-user for"></i>
                                                {{booking.waitlistingFor[0].firstName}}
                                                {{booking.waitlistingFor[0].lastName}}
                                            </div>
                                        </td>
                                        
                                        <td>
                                            <h6
                                                [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                                <span
                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                </span>

                                                <span *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                </span>
                                                <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                    <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                </span>
                                            </h6>
                                            
                                            <!-- <span *ngIf="booking.waitlistStatus == 'checkedIn'">
                                                <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"
                                                    (click)="stopprop($event)"><u class="font-smalr">VIEW
                                                        STATUS</u></a></span> -->
                                        </td>
                                        <td class="pay-wdth">
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                                <button class="bt3 cust-btn"
                                                    (click)="viewBill(booking,'checkin',$event)">Pay
                                                    &#8377;{{booking.amountDue}}</button>
                                            </span>
                                            <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                <button class="bt3 cust-btn cursor-auto">
                                                    Paid
                                                    &#8377;{{booking.amountPaid}}
                                                </button>
                                            </span>
                                        </td>
                                        <td class="pay-wdth">
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn"
                                                    *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(booking,'checkin',$event)">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                    (click)="viewBill(booking,'checkin',$event)">View Receipt</button>
                                                <!-- <button class="bt3 cust-btn"
                                                    *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(booking,'checkin',$event)">View Bill</button> -->
                                            </span>
                                        </td>
                                        <td>
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item  
                                                    *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                     (click)="gotoWaitlistReschedule(booking)">
                                                    <i class="consumer-reschedule-icon"></i>
                                                    Reschedule</button>
                                                <button mat-menu-item
                                                    *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                    (click)="doCancelWaitlist(booking,'checkin')">
                                                    <i class="fa cross-icon"></i> Cancel</button>
                                                <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                    (click)="getMeetingDetails(booking,'waitlist')">
                                                    <i class="fa fa-sticky-note-o"></i> Meeting details
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                            </mat-menu>
                                        </td>
                                    </ng-container>
                                </tr>
                                <tr *ngIf="!more_futrbookingsShow && future_totalbookings.length > 3"
                                    (click)="showMoreFutrBookings()">
                                    <td colspan="6">
                                        <a>Show more...</a>
                                    </td>
                                </tr>
                                <ng-container *ngIf="more_futrbookingsShow">
                                    <tr *ngFor="let booking of futureBookings_more;" class="custId-cursor"
                                        (click)="showBookingDetails(booking)">
                                        <ng-container *ngIf="booking.apptStatus">
                                            <td>
                                                <h4 class="disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa appt-icon" [matTooltip]="'Appointment'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">
                                                        {{getSingleTime(booking.appmtTime)}}
                                                    </span>
                                                </h4>
                                                <span class="datefont">{{booking.appmtDate | date: dateFormat}}</span>
                                            </td>
                                            <td class="tdisplay-block">
                                                <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' | capitalizeFirst}}
                                                </h4>
                                                <span class="doctrnme" *ngIf="booking.provider">
                                                    Provider :
                                                    {{booking.provider.firstName}}
                                                    {{booking.provider.lastName}}<br>
                                                </span>
                                                <span>
                                                    <i class="fa phon-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                </span>
                                                <span class="servName">{{booking.service.name | capitalizeFirst}}
                                                </span>
                                                <div class="userName" *ngIf="booking.appmtFor[0].firstName">
                                                    <i class="fa fa-user for"></i>
                                                    {{booking.appmtFor[0].firstName}}
                                                {{booking.appmtFor[0].lastName}}
                                                </div>
                                            </td>
                                            <td>
                                                <h6
                                                    [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">
                                                    {{booking.apptStatus}}
                                                    <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                        <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </h6>
                                                
                                                <!-- <span *ngIf="booking.apptStatus == 'Confirmed'"><a
                                                        href="{{path}}status/{{booking.appointmentEncId}}"
                                                        target="blank" (click)="stopprop($event)"><u
                                                            class="font-smalr">VIEW STATUS</u></a></span> -->
                                            </td>
                                            <td class="pay-wdth">
                                                <span
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">

                                                    <button class="bt3 cust-btn"
                                                        (click)="viewBill(booking,'appointment',$event)">Pay
                                                        &#8377;{{booking.amountDue}}</button>
                                                </span>
                                                <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                    <button class="bt3 cust-btn cursor-auto">
                                                        Paid
                                                        &#8377;{{booking.amountPaid}}
                                                    </button>
                                                </span>
                                            </td>
                                            <td class="pay-wdth">
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(booking,'appointment',$event)">View
                                                        Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'appointment',$event)">View
                                                        Receipt</button>
                                                    <!-- <button class="bt3 cust-btn"
                                                        *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(booking,'appointment',$event)">View
                                                        Bill</button> -->
                                                </span>
                                            </td>
                                            <td>
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item  *ngIf="booking.apptStatus == 'Confirmed' ||
                                                        booking.apptStatus == 'Arrived'" (click)="gotoAptmtReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                    <button mat-menu-item
                                                        *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                        (click)="doCancelWaitlist(booking,'appointment')"><i
                                                            class="fa cross-icon"></i>Cancel</button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(booking,'appt')">
                                                        <i class="fa chat-icon"></i>{{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                    && booking.apptStatus !== 'Cancelled'"
                                                        (click)="getMeetingDetails(booking,'appt')">
                                                        <i class="fa fa-sticky-note-o"></i>Meeting details
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourite</span>
                                                    </button>
                                                </mat-menu>
                                            </td>

                                        </ng-container>
                                        <ng-container *ngIf="booking.waitlistStatus">
                                            <td>
                                                <h4 *ngIf="!booking.token" class="disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">
                                                        {{booking.serviceTime}}
                                                    </span>
                                                </h4>
                                                <h4 *ngIf="booking.token" class="disp-flex">
                                                    <div class="circle-tokens">
                                                        <i class="fa token-icon" [matTooltip]="'Token'"></i>
                                                    </div>
                                                    <span class="mgn-up-10">Token #{{booking.token}}</span>
                                                </h4>
                                                <span class="datefont">{{booking.date | date: dateFormat}}</span>
                                            </td>
                                            <td class="tdisplay-block">
                                                <h4 (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' | capitalizeFirst}}
                                                </h4>
                                                <span class="doctrnme" *ngIf="booking.provider">
                                                    Provider :
                                                    {{booking.provider.businessName}}<br>
                                                </span>
                                                <span>
                                                    <i class="fa phon-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                </span>
                                                <span class="servName">{{booking.service.name | capitalizeFirst}}
                                                </span>
                                                <div class="userName" *ngIf="booking.waitlistingFor[0].firstName">
                                                    <i class="fa fa-user for"></i>
                                                    {{booking.waitlistingFor[0].firstName}}
                                                    {{booking.waitlistingFor[0].lastName}}
                                                </div>
                                            </td>
                                            <td>
                                                <h6
                                                    [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                                    <span
                                                        *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                    </span>

                                                    <span *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                    </span>
                                                    <span *ngIf="booking.isRescheduled" class="circle-tokens">
                                                        <i class="consumer-reschedule-icon" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </h6>
                                                
                                                <!-- <span *ngIf="booking.waitlistStatus == 'checkedIn'">
                                                    <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"
                                                        (click)="stopprop($event)"><u class="font-smalr">VIEW
                                                            STATUS</u></a></span> -->
                                            </td>
                                            <td class="pay-wdth">
                                                <span
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                                    <button class="bt3 cust-btn"
                                                        (click)="viewBill(booking,'checkin',$event)">Pay
                                                        &#8377;{{booking.amountDue}}</button>
                                                </span>
                                                <span *ngIf="booking.amountPaid && booking.paymentStatus !== 'FullyPaid'">
                                                    <button class="bt3 cust-btn cursor-auto">
                                                        Paid
                                                        &#8377;{{booking.amountPaid}}
                                                    </button>
                                                </span>
                                            </td>
                                            <td class="pay-wdth">
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(booking,'checkin',$event)">View
                                                        Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'checkin',$event)">View
                                                        Receipt</button>
                                                    <!-- <button class="bt3 cust-btn"
                                                        *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(booking,'checkin',$event)">View Bill</button> -->
                                                </span>
                                            </td>
                                            <td>
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item  
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                         (click)="gotoWaitlistReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>
                                                        Reschedule</button>
                                                    <button mat-menu-item
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                        (click)="doCancelWaitlist(booking,'checkin')"><i
                                                            class="fa cross-icon"></i>Cancel</button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                        <i class="fa chat-icon"></i>{{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                        (click)="getMeetingDetails(booking,'waitlist')">
                                                        <i class="fa fa-sticky-note-o"></i>Meeting details
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourite</span>
                                                    </button>
                                                </mat-menu>
                                            </td>
                                        </ng-container>
                                    </tr>
                                    <tr *ngIf="more_futrbookingsShow" (click)="showlessFutrBookings()">
                                        <td colspan="6">
                                            <a>Show less...</a>
                                        </td>
                                    </tr>
                                </ng-container>
                            </tbody>


                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div [innerHTML]="payment_popup" #div [style.display]="'none'"></div>