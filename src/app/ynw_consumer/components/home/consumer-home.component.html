<section class="container consumer-dashhome no-padding no-padding-small">
    <div class="panel panel-default">
        <div class="panel-heading top-row">
            <app-header [headerTitle]=""></app-header>
        </div>
        <div class="panel-body no-padding">
            <div class="content consumer-dash mgn-bt-10" *ngIf="api_loading">
                <app-common-innerloading-spinner>
                </app-common-innerloading-spinner>
            </div>
            <div class="content consumer-dash" *ngIf="!api_loading">
                <div class="c_card card c-checkins">
                    <div class="col-sm-12 col-md-12 col-lg-12 col-xs-12">
                        <div class="col-sm-8 col-md-8 col-lg-8 col-xs-12">
                            <h1 class="ng-tns-c16-8 txt-align">
                                <span class="ng-tns-c16-8 greeting">
                                    Hello {{usr_details.userName}} !
                                </span> <br>
                                <button class="mgn-up-20 find-sp-btn" mat-raised-button (click)="do_search()">Find
                                    Service
                                    Provider &nbsp; <i class="fa fa-search"></i></button>
                            </h1>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4 bg-visible fl-right no-padding">
                            <img class="myjaldee-bg fl-right" _ngcontent-ywv-c30=""
                                src="assets/images/myjaldee/Group92.png">
                        </div>
                    </div>


                    <h2 class="ng-tns-c16-8 bg-yelow">
                        <div class="jld-option">
                            <div class="col-sm-4 col-md-4 col-lg-4 col-xs-5 mgn-up-10 no-padding-small mgn-lft-2"
                                *ngIf="!showOrder">MY BOOKINGS</div>
                            <div class="col-sm-4 col-md-4 col-lg-4 col-xs-5 mgn-up-10 no-padding-small mgn-lft-2"
                                *ngIf="showOrder">MY ORDERS</div>
                            <div class="col-sm-8 col-md-8 col-lg-8 col-xs-9 no-padding-small">
                                <div class="fl-right disply-flex">
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button *ngIf="!showOrder" class="flat-btn full-wdth" mat-flat-button
                                            (click)="showOrders()">My Orders</button>
                                        <button *ngIf="!showOrder" class="flat-icon-btn" mat-flat-button
                                            (click)="showOrders()" [matTooltip]="'Orders'">
                                            <i class="fa ordr_ico"></i>
                                        </button>

                                        <button *ngIf="showOrder" class="flat-btn full-wdth" mat-flat-button
                                            (click)="showBookings()">My Bookings</button>
                                        <button *ngIf="showOrder" class="flat-icon-btn" mat-flat-button
                                            (click)="showBookings()" [matTooltip]="'Bookings'">
                                            <i class="fa bookin_ico"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button (click)="paymentsClicked()" class="flat-btn full-wdth"
                                            mat-flat-button>My
                                            Payments</button>
                                        <button class="flat-icon-btn" mat-flat-button (click)="paymentsClicked()"
                                            [matTooltip]="'My Payments'">
                                            <i class="fa myjld-payment"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button class="flat-btn full-wdth" mat-flat-button
                                            (click)="getmyfavourites()">My
                                            Favourites</button>
                                        <button class="flat-icon-btn" mat-flat-button (click)="getmyfavourites()"
                                            [matTooltip]="'My Favourites'">
                                            <i class="fa myjld-fav"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-2 col-md-2 col-lg-2 col-xs-2 no-padding item-btn-div">
                                        <button class="flat-btn full-wdth" mat-flat-button
                                            (click)="gotoHistory()">History</button>
                                        <button class="flat-icon-btn" mat-flat-button (click)="gotoHistory()"
                                            [matTooltip]="'History'">
                                            <i class="fa myjld-histry"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </h2>
                    <div *ngIf="((today_totalbookings.length == 0 && future_totalbookings.length == 0) && !loading && !showOrder)"
                        class="col-md-12 col-xs-12 col-sm-12 mgn-up-20 nocheckins">
                        <p class="locate-customer">No Active Bookings</p>
                    </div>
                    <div class="table-outer1 booking-dash ng-tns-c16-57" *ngIf="!loading && !showOrder">

                        <!-- begin revamp bookings -->
                        <!-- TODAY BOOKINGS-->
                        <div *ngIf="(today_totalbookings.length != 0)" class="day_hed">
                            TODAY
                        </div>
                        <div *ngIf="today_totalbookings.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of todayBookings;"
                                    (click)="showBookingDetails(booking)">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <!-- Icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div><i style="width: 4rem;" class="fa appt-icon"
                                                        [matTooltip]="'Appointment'"></i>
                                                </div>
                                            </div>

                                            <!-- more options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item *ngIf="booking.apptStatus=='Confirmed' ||
                                                        booking.apptStatus=='Arrived'"
                                                        �(click)="gotoAptmtReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                    <button mat-menu-item
                                                        *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                        (click)="doCancelWaitlist(booking,'appointment')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(booking,'appt')">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item (click)="sendAttachment(booking,'appt')">
                                                        <i class="material-icons">attach_file</i>
                                                        Send Attachments
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.hasAttachment"
                                                        (click)="viewAttachment(booking,'appt')">
                                                        <i class="material-icons">attach_file</i>
                                                        View Attachments
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.apptStatus == 'Completed'"
                                                        (click)="rateService(booking,'appointment')">
                                                        <i class="fa fa-star-o" aria-hidden="true"></i>{{rate_visit}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                && booking.apptStatus !== 'Cancelled'"
                                                        (click)="getMeetingDetails(booking,'appt')">
                                                        <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                        Meeting details
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourites</span>
                                                    </button>
                                                    <button class="custId-cursor" mat-menu-item
                                                        *ngIf="(booking.apptStatus=='Confirmed'|| 'prepaymentPending') && (booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed')"
                                                        (click)="gotoLivetrackPage('true',booking)">
                                                        <i class="fa fa-check fl-right"></i> Sharing location
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed'"
                                                        (click)="gotoLivetrack(booking.uid,booking.providerAccount.id,'false')">
                                                        <i class="fa fa-times fl-right"></i>Sharing location
                                                    </button>

                                                    <button class="custId-cursor" mat-menu-item
                                                        *ngIf="booking.prescShared" (click)="viewprescription(booking)">
                                                        <i class="mr-rx-icon-customer"></i>view
                                                        prescription</button>
                                                </mat-menu>
                                            </div>

                                            <!-- Basic info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <div class="ordr_no font-size-9">Today,
                                                    {{getSingleTime(booking.appmtTime)}}</div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- Extra Info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <!-- serv-width -->
                                                    <div class="pull-left  col-xs-6 no-padding ">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">
                                                            <span class="serv-name">
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>
                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-left  col-xs-6 con-width">
                                                        <div class="prov_lbl">Appointment for</div>
                                                        <div class="prov_nme"> {{booking.appmtFor[0].firstName}}
                                                            {{booking.appmtFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <!-- <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                </div> -->
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left col-xs-6 no-padding" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->
                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>



                                            <!-- Actions and status -->
                                            <mat-grid-tile-footer>
                                                <!-- <div class="book_stats mgn-up-20">
                                                    <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                        *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                    <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                        *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                    <span *ngIf="booking.isRescheduled">
                                                        <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </div> -->
                                                <div class="mgn-lft-10">
                                                    <!-- <span
                                                        *ngIf="booking.service.serviceType === 'virtualService' && (booking.apptStatus === 'Started' || booking.apptStatus === 'Arrived' || booking.apptStatus === 'Confirmed')">
                                                        <button mat-flat-button class="btns"
                                                            (click)="btnJoinVideoClicked(booking,$event)">Join</button>
                                                    </span> -->
                                                    <button
                                                        *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected' && booking.billStatus!='Settled'"
                                                        mat-flat-button class="btns rupee-font"
                                                        (click)="viewBill(booking,'appointment',$event)">Pay
                                                        {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                    <span *ngIf="booking.amountPaid" class="amtPaid rupee-font">Paid
                                                        {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                    <span *ngIf="booking.billViewStatus == 'Show'">
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                            (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                            (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                    </span>
                                                </div>
                                            </mat-grid-tile-footer>

                                        </div>
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <div *ngIf="booking.token" class="ribbon">&nbsp;&nbsp;Token
                                                {{booking.token}}
                                            </div>

                                            <!-- icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div>
                                                    <i *ngIf="!booking.token" style="width: 3.8rem;"
                                                        class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    <i *ngIf="booking.token" style="width: 3.8rem;"
                                                        class="fa token-icon" [matTooltip]="'Token'"></i>
                                                </div>
                                            </div>

                                            <!-- More options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                        (click)="gotoWaitlistReschedule(booking)"><i
                                                            class="consumer-reschedule-icon"></i>
                                                        Reschedule
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                        (click)="doCancelWaitlist(booking,'checkin')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item (click)="sendAttachment(booking,'checkin')">
                                                        <i class="material-icons">attach_file</i>
                                                        Send Attachments
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.hasAttachment"
                                                        (click)="viewAttachment(booking,'checkin')">
                                                        <i class="material-icons">attach_file</i>
                                                        View Attachments
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'"
                                                        (click)="rateService(booking,'checkin')">
                                                        <i class="fa fa-star-o" aria-hidden="true"></i>{{rate_visit}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                        (click)="getMeetingDetails(booking,'waitlist')">
                                                        <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                        Meeting details
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourites</span>
                                                    </button>
                                                    <button class="custId-cursor" mat-menu-item
                                                        *ngIf="(booking.waitlistStatus=='checkedIn'|| 'prepaymentPending') && (booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn')"
                                                        (click)="gotoLivetrackPage('true',booking)">
                                                        <i class="fa fa-check fl-right"></i> Sharing location
                                                    </button>
                                                    <button mat-menu-item
                                                        *ngIf="!booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn'"
                                                        (click)="gotoLivetrackchekin(booking.ynwUuid,booking.providerAccount.id,'false')">
                                                        <i class="fa fa-times fl-right"></i>Sharing location
                                                    </button>

                                                    <button class="custId-cursor" mat-menu-item
                                                        *ngIf="booking.prescShared" (click)="viewprescription(booking)">
                                                        <i class="mr-rx-icon-customer"></i>view
                                                        prescription</button>
                                                </mat-menu>
                                            </div>

                                            <!-- Basic Info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <span class="ordr_no"
                                                    *ngIf="(booking.waitlistStatus == 'arrived' || booking.waitlistStatus == 'checkedIn') && booking.calculationMode !== 'NoCalc'">
                                                    <span *ngIf="!booking.serviceTime">
                                                        Est wait time: {{getTimeToDisplay(booking.appxWaitingTime)}}
                                                    </span>
                                                    <span *ngIf="booking.serviceTime">
                                                        Starts at: {{booking.serviceTime}}
                                                    </span>
                                                </span>
                                                <div class="ordr_no font-size-9">Today, {{booking.queue.queueStartTime}}
                                                    -
                                                    {{booking.queue.queueEndTime}}</div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- extra info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <!-- serv-width -->
                                                    <div class="pull-left  col-xs-6 no-padding">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">
                                                            <span class="serv-name">
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>
                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-left  col-xs-6 con-width">
                                                        <div class="prov_lbl" *ngIf="booking.showToken">Token for</div>
                                                        <div class="prov_lbl" *ngIf="!booking.showToken">Check-in for
                                                        </div>
                                                        <div class="prov_nme"> {{booking.waitlistingFor[0].firstName}}
                                                            {{booking.waitlistingFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <!-- <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                </div> -->
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left col-xs-6 no-padding" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->
                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20"
                                                                *ngIf="booking.service.serviceType !== 'virtualService'">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">
                                                                        {{booking.waitlistStatus | capitalizeFirst}}
                                                                    </span>
                                                                </span>

                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="booking.service.serviceType!=='virtualService'">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">
                                                                        {{booking.waitlistStatus | capitalizeFirst}}
                                                                    </span>
                                                                </span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Actions and Status -->
                                            <mat-grid-tile-footer>
                                                <!-- <div class="book_stats mgn-up-20"
                                                    *ngIf="booking.service.serviceType !== 'virtualService'">
                                                    <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                        *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                            | capitalizeFirst}}</span>
                                                    </span>

                                                    <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                        *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                            | capitalizeFirst}}</span>
                                                    </span>
                                                    <span *ngIf="booking.isRescheduled">
                                                        <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </div> -->
                                                <div class="mgn-lft-10">
                                                    <!-- <span
                                                        *ngIf="booking.service.serviceType === 'virtualService' && (booking.waitlistStatus === 'started' || booking.waitlistStatus === 'arrived' || booking.waitlistStatus === 'checkedIn')">
                                                        <button mat-flat-button class="btns"
                                                            (click)="btnJoinVideoClicked(booking,$event)">Join</button>
                                                    </span> -->
                                                    <button
                                                        *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled' && booking.billStatus!='Settled'"
                                                        mat-flat-button class="btns rupee-font"
                                                        (click)="viewBill(booking,'checkin',$event)">Pay
                                                        {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                    <span *ngIf="booking.amountPaid" class="amtPaid  rupee-font">Paid
                                                        {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                    <span *ngIf="booking.billViewStatus == 'Show'">
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                            (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                            (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                    </span>
                                                </div>
                                            </mat-grid-tile-footer>
                                        </div>
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_tdybookingsShow && today_totalbookings.length > 3"
                            (click)="showMoreTdyBookings()" class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <div class="mgn-up-10 mgn-bt-10 grid-card" *ngIf="more_tdybookingsShow">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of todayBookings_more;"
                                    (click)="showBookingDetails(booking)">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <!-- Icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div><i style="width: 4rem;" class="fa appt-icon"
                                                        [matTooltip]="'Appointment'"></i>
                                                </div>
                                            </div>

                                            <!-- more options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item *ngIf="booking.apptStatus=='Confirmed' ||
                                                        booking.apptStatus=='Arrived'" (click)="gotoAptmtReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                        <button mat-menu-item
                                                            *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                            (click)="doCancelWaitlist(booking,'appointment')">
                                                            <i class="fa cross-icon"></i>
                                                            Cancel</button>
                                                        <button mat-menu-item
                                                            (click)="addWaitlistMessage(booking,'appt')">
                                                            <i class="fa chat-icon"></i>
                                                            {{send_msg_cap}}
                                                        </button>
                                                        <button mat-menu-item (click)="sendAttachment(booking,'appt')">
                                                            <i class="material-icons">attach_file</i>
                                                            Send Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.hasAttachment"
                                                            (click)="viewAttachment(booking,'appt')">
                                                            <i class="material-icons">attach_file</i>
                                                            View Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.apptStatus == 'Completed'"
                                                            (click)="rateService(booking,'appointment')">
                                                            <i class="fa fa-star-o"
                                                                aria-hidden="true"></i>{{rate_visit}}
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                && booking.apptStatus !== 'Cancelled'"
                                                            (click)="getMeetingDetails(booking,'appt')">
                                                            <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                            Meeting details
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite-filled"
                                                                (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite"
                                                                (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                                to Favourites</span>
                                                        </button>
                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="(booking.apptStatus=='Confirmed'|| 'prepaymentPending') && (booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed')"
                                                            (click)="gotoLivetrackPage('true',booking)">
                                                            <i class="fa fa-check fl-right"></i> Sharing location
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!booking.jaldeeApptDistanceTime && booking.service.livetrack && booking.apptStatus === 'Confirmed'"
                                                            (click)="gotoLivetrack(booking.uid,booking.providerAccount.id,'false')">
                                                            <i class="fa fa-times fl-right"></i>Sharing location
                                                        </button>

                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="booking.prescShared"
                                                            (click)="viewprescription(booking)">
                                                            <i class="mr-rx-icon-customer"></i>view
                                                            prescription</button>
                                                </mat-menu>
                                            </div>

                                            <!-- Basic info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <div class="ordr_no font-size-9">Today,
                                                    {{getSingleTime(booking.appmtTime)}}</div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- Extra Info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <!-- serv-width -->
                                                    <div class="pull-left  col-xs-6 no-padding">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">

                                                            <span class="serv-name">
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>
                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-left  col-xs-6 con-width">
                                                        <div class="prov_lbl">Appointment for</div>
                                                        <div class="prov_nme"> {{booking.appmtFor[0].firstName}}
                                                            {{booking.appmtFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left col-xs-6 no-padding" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->
                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                </div> -->
                                            </div>

                                            <!-- Actions and status -->
                                            <mat-grid-tile-footer>
                                                <!-- <div class="book_stats mgn-up-20">
                                                    <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                        *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                    <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                        *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                    <span *ngIf="booking.isRescheduled">
                                                        <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </div> -->
                                                <div class="mgn-lft-10">
                                                    <!-- <span
                                                        *ngIf="booking.service.serviceType === 'virtualService' && (booking.apptStatus === 'Started' || booking.apptStatus === 'Arrived' || booking.apptStatus === 'Confirmed')">
                                                        <button mat-flat-button class="btns"
                                                            (click)="btnJoinVideoClicked(booking,$event)">Join</button>
                                                    </span> -->
                                                    <button
                                                        *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected' && booking.billStatus!='Settled'"
                                                        mat-flat-button class="btns rupee-font"
                                                        (click)="viewBill(booking,'appointment',$event)">Pay
                                                        {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                    <span *ngIf="booking.amountPaid" class="amtPaid  rupee-font">Paid
                                                        {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                    <span *ngIf="booking.billViewStatus == 'Show'">
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                            (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                            (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                    </span>
                                                </div>
                                            </mat-grid-tile-footer>

                                        </div>
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <div *ngIf="booking.token" class="ribbon">&nbsp;&nbsp;Token
                                                {{booking.token}}
                                            </div>

                                            <!-- icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div>
                                                    <i *ngIf="!booking.token" style="width: 3.8rem;"
                                                        class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    <i *ngIf="booking.token" style="width: 3.8rem;"
                                                        class="fa token-icon" [matTooltip]="'Token'"></i>
                                                </div>
                                            </div>

                                            <!-- More options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                        (click)="gotoWaitlistReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>
                                                        Reschedule</button>
                                                        <button mat-menu-item
                                                            *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                            (click)="doCancelWaitlist(booking,'checkin')">
                                                            <i class="fa cross-icon"></i>
                                                            Cancel</button>
                                                        <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                            <i class="fa chat-icon"></i>
                                                            {{send_msg_cap}}
                                                        </button>
                                                        <button mat-menu-item
                                                            (click)="sendAttachment(booking,'checkin')">
                                                            <i class="material-icons">attach_file</i>
                                                            Send Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.hasAttachment"
                                                            (click)="viewAttachment(booking,'checkin')">
                                                            <i class="material-icons">attach_file</i>
                                                            View Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'"
                                                            (click)="rateService(booking,'checkin')">
                                                            <i class="fa fa-star-o"
                                                                aria-hidden="true"></i>{{rate_visit}}
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                            (click)="getMeetingDetails(booking,'waitlist')">
                                                            <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                            Meeting details
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite-filled"
                                                                (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite"
                                                                (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                                to Favourites</span>
                                                        </button>
                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="(booking.waitlistStatus=='checkedIn'|| 'prepaymentPending') && (booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn')"
                                                            (click)="gotoLivetrackPage('true',booking)">
                                                            <i class="fa fa-check fl-right"></i> Sharing location
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn'"
                                                            (click)="gotoLivetrackchekin(booking.ynwUuid,booking.providerAccount.id,'false')">
                                                            <i class="fa fa-times fl-right"></i>Sharing location
                                                        </button>

                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="booking.prescShared"
                                                            (click)="viewprescription(booking)">
                                                            <i class="mr-rx-icon-customer"></i>view
                                                            prescription</button>
                                                </mat-menu>
                                            </div>

                                            <!-- Basic Info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <span class="ordr_no"
                                                    *ngIf="(booking.waitlistStatus == 'arrived' || booking.waitlistStatus == 'checkedIn') && booking.calculationMode !== 'NoCalc'">
                                                    <span *ngIf="!booking.serviceTime">
                                                        Est wait time: {{getTimeToDisplay(booking.appxWaitingTime)}}
                                                    </span>
                                                    <span *ngIf="booking.serviceTime">
                                                        Starts at: {{booking.serviceTime}}
                                                    </span>
                                                </span>
                                                <div class="ordr_no font-size-9">Today, {{booking.queue.queueStartTime}}
                                                    -
                                                    {{booking.queue.queueEndTime}}</div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- extra info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <!-- serv-width  -->
                                                    <div class="pull-left  col-xs-6 no-padding ">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">

                                                            <span class="serv-name">
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>

                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-left col-xs-6 con-width">
                                                        <div class="prov_lbl" *ngIf="booking.showToken">Token for</div>
                                                        <div class="prov_lbl" *ngIf="!booking.showToken">Check-in for
                                                        </div>
                                                        <div class="prov_nme"> {{booking.waitlistingFor[0].firstName}}
                                                            {{booking.waitlistingFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left col-xs-6 no-padding" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->

                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                                        | capitalizeFirst}}</span>
                                                                </span>

                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                                        | capitalizeFirst}}</span>
                                                                </span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left" *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                </div> -->
                                            </div>

                                            <!-- Actions and Status -->
                                            <mat-grid-tile-footer>
                                                <!-- <div class="book_stats mgn-up-20">
                                                    <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                        *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                            | capitalizeFirst}}</span>
                                                    </span>

                                                    <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                        *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                        <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                        <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                            Checked-in
                                                        </span>
                                                        <span
                                                            *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                            | capitalizeFirst}}</span>
                                                    </span>
                                                    <span *ngIf="booking.isRescheduled">
                                                        <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                    </span>
                                                </div> -->
                                                <!-- mgn-lft-10 -->
                                                <div class="">
                                                    <!-- <span
                                                        *ngIf="booking.service.serviceType === 'virtualService' && (booking.waitlistStatus === 'started' || booking.waitlistStatus === 'arrived' || booking.waitlistStatus === 'checkedIn')">
                                                        <button mat-flat-button class="btns"
                                                            (click)="btnJoinVideoClicked(booking,$event)">Join</button>
                                                    </span> -->
                                                    <button
                                                        *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled' && booking.billStatus!='Settled'"
                                                        mat-flat-button class="btns rupee-font"
                                                        (click)="viewBill(booking,'checkin',$event)">Pay
                                                        {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                    <span *ngIf="booking.amountPaid" class="amtPaid rupee-font">Paid
                                                        {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                    <span *ngIf="booking.billViewStatus == 'Show'">
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                            (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                        <button mat-flat-button class="btns"
                                                            *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                            (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                    </span>
                                                </div>
                                            </mat-grid-tile-footer>
                                        </div>
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- Show less -->
                        <div *ngIf="more_tdybookingsShow" (click)="showlessTdyBookings()" class="pad-lt-10">
                            <a class="show_more">Show less...</a>
                        </div>


                        <!--------------------------- FUTURE BOOKINGS----------------------------------------->
                        <hr>
                        <div *ngIf="(future_totalbookings.length != 0)" class="day_hed">
                            UPCOMING
                        </div>
                        <div *ngIf="future_totalbookings.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of futureBookings;"
                                    (click)="showBookingDetails(booking)">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                        <!-- Header Date -->

                                        <!-- <mat-grid-tile-header>
                                            <div class="center">
                                                <div>{{booking.appmtDate | date: newDateFormat}}</div>
                                            </div>
                                        </mat-grid-tile-header> -->

                                        <!-- Body -->
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in mgn-up-10 no-padding">

                                            <!-- Icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div><i style="width: 4rem;" class="fa appt-icon"
                                                        [matTooltip]="'Appointment'"></i>
                                                </div>
                                                <!-- <div class="resch-box" *ngIf="booking.isRescheduled">
                                                    <i style="width: 4rem;" class="consumer-reschedule-icon"
                                                        [matTooltip]="'Rescheduled'"></i>
                                                </div> -->
                                            </div>

                                            <!-- more options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item *ngIf="booking.apptStatus=='Confirmed'
                                                        ||
                                                        booking.apptStatus=='Arrived'" (click)="gotoAptmtReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                        <button mat-menu-item
                                                            *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                            (click)="doCancelWaitlist(booking,'appointment')">
                                                            <i class="fa cross-icon"></i>Cancel</button>
                                                        <button mat-menu-item
                                                            (click)="addWaitlistMessage(booking,'appt')">
                                                            <i class="fa chat-icon"></i>
                                                            {{send_msg_cap}}
                                                        </button>
                                                        <button mat-menu-item (click)="sendAttachment(booking,'appt')">
                                                            <i class="material-icons">attach_file</i>
                                                            Send Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.hasAttachment"
                                                            (click)="viewAttachment(booking,'appt')">
                                                            <i class="material-icons">attach_file</i>
                                                            View Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                    && booking.apptStatus !== 'Cancelled'"
                                                            (click)="getMeetingDetails(booking,'appt')">
                                                            <i class="fa fa-sticky-note-o"></i>
                                                            Meeting details
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite-filled"
                                                                (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite"
                                                                (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                                to Favourites</span>
                                                        </button>
                                                        <!-- <button class="custId-cursor" mat-menu-item (click)="gotoQuestionnaire(booking)">
                                                    <i class="mr-rx-icon-customer"></i>Update Questionnaire</button> -->
                                                </mat-menu>
                                            </div>

                                            <!-- Basic info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <!-- <div class="ordr_no">{{getSingleTime(booking.appmtTime)}}
                                                </div> -->
                                                <div class="ordr_no font-size-9">{{booking.appmtDate | date:
                                                    monthFormat}},
                                                    {{getSingleTime(booking.appmtTime)}}</div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- Extra Info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <div class="pull-left  col-xs-6 no-padding">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">
                                                            <span>
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>
                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-left  col-xs-6">
                                                        <div class="prov_lbl">Appointment for</div>
                                                        <div class="prov_nme"> {{booking.appmtFor[0].firstName}}
                                                            {{booking.appmtFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left  col-xs-6 no-padding"
                                                        *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->
                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Actions and status -->
                                        <mat-grid-tile-footer>
                                            <!-- <div class="book_stats mgn-up-20">
                                                <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                <span *ngIf="booking.isRescheduled">
                                                    <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                </span>
                                            </div> -->
                                            <!-- mgn-lft-10 -->
                                            <div class="">
                                                <button
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected' && booking.billStatus!='Settled'"
                                                    mat-flat-button class="btns rupee-font"
                                                    (click)="viewBill(booking,'appointment',$event)">Pay
                                                    {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span *ngIf="booking.amountPaid" class="amtPaid rupee-font">Paid
                                                    {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                </span>
                                            </div>
                                        </mat-grid-tile-footer>
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <!-- Header Date -->
                                        <!-- <mat-grid-tile-header>
                                            <div class="center">
                                                <div>{{booking.date | date: newDateFormat}}</div>
                                            </div>
                                        </mat-grid-tile-header> -->

                                        <!-- Body -->
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 mgn-up-10 fit_in no-padding">
                                            <div *ngIf="booking.token" class="ribbon">&nbsp;&nbsp;Token
                                                {{booking.token}}
                                            </div>

                                            <!-- icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div>
                                                    <i *ngIf="!booking.token" style="width: 3.8rem;"
                                                        class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    <i *ngIf="booking.token" style="width: 3.8rem;"
                                                        class="fa token-icon" [matTooltip]="'Token'"></i>
                                                </div>
                                            </div>

                                            <!-- More options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                        (click)="gotoWaitlistReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>
                                                        Reschedule</button>
                                                        <button mat-menu-item
                                                            *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                            (click)="doCancelWaitlist(booking,'checkin')">
                                                            <i class="fa cross-icon"></i>
                                                            Cancel</button>
                                                        <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                            <i class="fa chat-icon"></i>
                                                            {{send_msg_cap}}
                                                        </button>
                                                        <button mat-menu-item
                                                            (click)="sendAttachment(booking,'checkin')">
                                                            <i class="material-icons">attach_file</i>
                                                            Send Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.hasAttachment"
                                                            (click)="viewAttachment(booking,'checkin')">
                                                            <i class="material-icons">attach_file</i>
                                                            View Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'"
                                                            (click)="rateService(booking,'checkin')">
                                                            <i class="fa fa-star-o"
                                                                aria-hidden="true"></i>{{rate_visit}}
                                                        </button>
                                                        <!-- <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'">
                                                        <span class="rate-service" [class.rated]="isRated(booking)"
                                                            (click)="rateService(booking,'checkin')">{{rate_visit}}</span>
                                                    </button> -->
                                                        <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                            (click)="getMeetingDetails(booking,'waitlist')">
                                                            <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                            Meeting details
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite-filled"
                                                                (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite"
                                                                (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                                to Favourites</span>
                                                        </button>
                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="(booking.waitlistStatus=='checkedIn'|| 'prepaymentPending') && (booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn')"
                                                            (click)="gotoLivetrackPage('true',booking)">
                                                            <i class="fa fa-check fl-right"></i> Sharing location
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn'"
                                                            (click)="gotoLivetrackchekin(booking.ynwUuid,booking.providerAccount.id,'false')">
                                                            <i class="fa fa-times fl-right"></i>Sharing location
                                                        </button>

                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="booking.prescShared"
                                                            (click)="viewprescription(booking)">
                                                            <i class="mr-rx-icon-customer"></i>view
                                                            prescription</button>
                                                        <!-- <button class="custId-cursor" mat-menu-item (click)="gotoQuestionnaire(booking)">
                                                        <i class="mr-rx-icon-customer"></i>Update Questionnaire</button> -->
                                                </mat-menu>
                                            </div>

                                            <!-- Basic Info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <span class="ordr_no"
                                                    *ngIf="(booking.waitlistStatus == 'arrived' || booking.waitlistStatus == 'checkedIn') && booking.calculationMode !== 'NoCalc'">
                                                    <span *ngIf="!booking.serviceTime">
                                                        Est wait time: {{getTimeToDisplay(booking.appxWaitingTime)}}
                                                    </span>
                                                    <span *ngIf="booking.serviceTime">
                                                        Starts at: {{booking.serviceTime}}
                                                    </span>
                                                </span>
                                                <div class="ordr_no font-size-9">{{booking.date | date: monthFormat}},
                                                    {{booking.queue.queueStartTime}} - {{booking.queue.queueEndTime}}
                                                </div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- extra info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <div class="pull-left col-xs-6 no-padding">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">
                                                            <span>
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>
                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-right col-xs-6">
                                                        <div class="prov_lbl" *ngIf="booking.showToken">Token for</div>
                                                        <div class="prov_lbl" *ngIf="!booking.showToken">Check-in for
                                                        </div>
                                                        <div class="prov_nme"> {{booking.waitlistingFor[0].firstName}}
                                                            {{booking.waitlistingFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left  col-xs-6 no-padding"
                                                        *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->
                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                                        | capitalizeFirst}}</span>
                                                                </span>

                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                                        | capitalizeFirst}}</span>
                                                                </span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <!-- Actions and Status -->
                                        <mat-grid-tile-footer>
                                            <!-- <div class="book_stats mgn-up-20">
                                                <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                        | capitalizeFirst}}</span>
                                                </span>

                                                <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                        | capitalizeFirst}}</span>
                                                </span>
                                                <span *ngIf="booking.isRescheduled">
                                                    <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                </span>
                                            </div> -->
                                            <!-- mgn-lft-10 -->
                                            <div class="">
                                                <button
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled' && booking.billStatus!='Settled'"
                                                    mat-flat-button class="btns  rupee-font"
                                                    (click)="viewBill(booking,'checkin',$event)">Pay
                                                    {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span *ngIf="booking.amountPaid" class="amtPaid rupee-font">Paid
                                                    {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                </span>
                                            </div>
                                        </mat-grid-tile-footer>
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_futrbookingsShow && future_totalbookings.length > 3"
                            (click)="showMoreFutrBookings()" class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <div class="mgn-up-10 mgn-bt-10 grid-card" *ngIf="more_futrbookingsShow">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="240px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let booking of futureBookings_more;"
                                    (click)="showBookingDetails(booking)">
                                    <!-- Appointments -->
                                    <ng-container *ngIf="booking.apptStatus">
                                        <!-- Header Date -->
                                        <!-- <mat-grid-tile-header>
                                            <div class="center">
                                                <div>{{booking.appmtDate | date: newDateFormat}}</div>
                                            </div>
                                        </mat-grid-tile-header> -->

                                        <!-- Body -->
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in mgn-up-10 no-padding">

                                            <!-- Icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div><i style="width: 4rem;" class="fa appt-icon"
                                                        [matTooltip]="'Appointment'"></i>
                                                </div>
                                                <!-- <div class="resch-box" *ngIf="booking.isRescheduled">
                                                    <i style="width: 4rem;" class="consumer-reschedule-icon"
                                                        [matTooltip]="'Rescheduled'"></i>
                                                </div> -->
                                            </div>

                                            <!-- more options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item *ngIf="booking.apptStatus=='Confirmed'
                                                        ||
                                                        booking.apptStatus=='Arrived'" (click)="gotoAptmtReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>Reschedule</button>
                                                        <button mat-menu-item
                                                            *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                            (click)="doCancelWaitlist(booking,'appointment')">
                                                            <i class="fa cross-icon"></i>Cancel</button>
                                                        <button mat-menu-item
                                                            (click)="addWaitlistMessage(booking,'appt')">
                                                            <i class="fa chat-icon"></i>
                                                            {{send_msg_cap}}
                                                        </button>
                                                        <button mat-menu-item (click)="sendAttachment(booking,'appt')">
                                                            <i class="material-icons">attach_file</i>
                                                            Send Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.hasAttachment" ï¿½
                                                            (click)="viewAttachment(booking,'appt')">
                                                            <i class="material-icons">attach_file</i>
                                                            View Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Completed'
                                                    && booking.apptStatus !== 'Cancelled'"
                                                            (click)="getMeetingDetails(booking,'appt')">
                                                            <i class="fa fa-sticky-note-o"></i>
                                                            Meeting details
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite-filled"
                                                                (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite"
                                                                (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                                to Favourites</span>
                                                        </button>
                                                        <!-- <button class="custId-cursor" mat-menu-item (click)="gotoQuestionnaire(booking)">
                                                    <i class="mr-rx-icon-customer"></i>Update Questionnaire</button> -->
                                                </mat-menu>
                                            </div>

                                            <!-- Basic info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <!-- <div class="ordr_no">{{getSingleTime(booking.appmtTime)}}
                                                </div> -->
                                                <div class="ordr_no font-size-9">{{booking.appmtDate | date:
                                                    monthFormat}},
                                                    {{getSingleTime(booking.appmtTime)}}</div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- Extra Info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <div class="pull-left  col-xs-6 no-padding">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">
                                                            <span>
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>
                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-left  col-xs-6">
                                                        <div class="prov_lbl">Appointment for</div>
                                                        <div class="prov_nme"> {{booking.appmtFor[0].firstName}}
                                                            {{booking.appmtFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left  col-xs-6 no-padding"
                                                        *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->
                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.apptStatus)"
                                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Actions and status -->
                                        <mat-grid-tile-footer>
                                            <!-- <div class="book_stats mgn-up-20">
                                                <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.apptStatus !== 'Arrived')">{{booking.apptStatus}}</span>
                                                <span [class]="getBookingStatusClass(booking.apptStatus)"
                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">{{booking.apptStatus}}</span>
                                                <span *ngIf="booking.isRescheduled">
                                                    <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                </span>
                                            </div> -->
                                            <!-- mgn-lft-10 -->
                                            <div class="">
                                                <button
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected' && booking.billStatus!='Settled'"
                                                    mat-flat-button class="btns rupee-font"
                                                    (click)="viewBill(booking,'appointment',$event)">Pay
                                                    {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span *ngIf="booking.amountPaid" class="amtPaid rupee-font">Paid
                                                    {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'appointment',$event)">Receipt</button>
                                                </span>
                                            </div>
                                        </mat-grid-tile-footer>
                                    </ng-container>
                                    <!-- Checkins -->
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <!-- Header Date -->
                                        <!-- <mat-grid-tile-header>
                                            <div class="center">
                                                <div>{{booking.date | date: newDateFormat}}</div>
                                            </div>
                                        </mat-grid-tile-header> -->

                                        <!-- Body -->
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 mgn-up-10 fit_in no-padding">
                                            <div *ngIf="booking.token" class="ribbon">&nbsp;&nbsp;Token
                                                {{booking.token}}
                                            </div>

                                            <!-- icon -->
                                            <div
                                                class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding mgn-up-10">
                                                <div>
                                                    <i *ngIf="!booking.token" style="width: 3.8rem;"
                                                        class="fa chckn-icon" [matTooltip]="'Check-in'"></i>
                                                    <i *ngIf="booking.token" style="width: 3.8rem;"
                                                        class="fa token-icon" [matTooltip]="'Token'"></i>
                                                </div>
                                            </div>

                                            <!-- More options -->
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived'"
                                                        (click)="gotoWaitlistReschedule(booking)">
                                                        <i class="consumer-reschedule-icon"></i>
                                                        Reschedule</button>
                                                        <button mat-menu-item
                                                            *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                            (click)="doCancelWaitlist(booking,'checkin')">
                                                            <i class="fa cross-icon"></i>
                                                            Cancel</button>
                                                        <button mat-menu-item (click)="addWaitlistMessage(booking)">
                                                            <i class="fa chat-icon"></i>
                                                            {{send_msg_cap}}
                                                        </button>
                                                        <button mat-menu-item
                                                            (click)="sendAttachment(booking,'checkin')">
                                                            <i class="material-icons">attach_file</i>
                                                            Send Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.hasAttachment"
                                                            (click)="viewAttachment(booking,'checkin')">
                                                            <i class="material-icons">attach_file</i>
                                                            View Attachments
                                                        </button>
                                                        <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'"
                                                            (click)="rateService(booking,'checkin')">
                                                            <i class="fa fa-star-o"
                                                                aria-hidden="true"></i>{{rate_visit}}
                                                        </button>
                                                        <!-- <button mat-menu-item *ngIf="booking.waitlistStatus == 'done'">
                                                        <span class="rate-service" [class.rated]="isRated(booking)"
                                                            (click)="rateService(booking,'checkin')">{{rate_visit}}</span>
                                                    </button> -->
                                                        <button mat-menu-item *ngIf="booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'done'
                                                && booking.waitlistStatus !== 'cancelled'"
                                                            (click)="getMeetingDetails(booking,'waitlist')">
                                                            <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                            Meeting details
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite-filled"
                                                                (click)="doDeleteFavProvider(booking.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!checkIfFav(booking.providerAccount.id)">
                                                            <span class="icon-favourite"
                                                                (click)="addFavProvider(booking.providerAccount.id)">&nbsp;&nbsp;Add
                                                                to Favourites</span>
                                                        </button>
                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="(booking.waitlistStatus=='checkedIn'|| 'prepaymentPending') && (booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn')"
                                                            (click)="gotoLivetrackPage('true',booking)">
                                                            <i class="fa fa-check fl-right"></i> Sharing location
                                                        </button>
                                                        <button mat-menu-item
                                                            *ngIf="!booking.jaldeeWaitlistDistanceTime && booking.service.livetrack && booking.waitlistStatus === 'checkedIn'"
                                                            (click)="gotoLivetrackchekin(booking.ynwUuid,booking.providerAccount.id,'false')">
                                                            <i class="fa fa-times fl-right"></i>Sharing location
                                                        </button>

                                                        <button class="custId-cursor" mat-menu-item
                                                            *ngIf="booking.prescShared"
                                                            (click)="viewprescription(booking)">
                                                            <i class="mr-rx-icon-customer"></i>view
                                                            prescription</button>
                                                        <!-- <button class="custId-cursor" mat-menu-item (click)="gotoQuestionnaire(booking)">
                                                        <i class="mr-rx-icon-customer"></i>Update Questionnaire</button> -->
                                                </mat-menu>
                                            </div>

                                            <!-- Basic Info -->
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10 mgn-up-20 pad-lt-40">
                                                <span class="ordr_no"
                                                    *ngIf="(booking.waitlistStatus == 'arrived' || booking.waitlistStatus == 'checkedIn') && booking.calculationMode !== 'NoCalc'">
                                                    <span *ngIf="!booking.serviceTime">
                                                        Est wait time: {{getTimeToDisplay(booking.appxWaitingTime)}}
                                                    </span>
                                                    <span *ngIf="booking.serviceTime">
                                                        Starts at: {{booking.serviceTime}}
                                                    </span>
                                                </span>
                                                <div class="ordr_no font-size-9">{{booking.date | date: monthFormat}},
                                                    {{booking.queue.queueStartTime}} - {{booking.queue.queueEndTime}}
                                                </div>
                                                <div class="sp_name wrap_txt"
                                                    (click)="providerDetail(booking.providerAccount,$event)">
                                                    {{booking.providerAccount.businessName || '' |
                                                    capitalizeFirst}}</div>
                                            </div>

                                            <!-- extra info -->
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 m-hgt-50 no-padding">
                                                    <div class="pull-left  col-xs-6 no-padding">
                                                        <div class="prov_lbl">Service</div>
                                                        <!-- [class.mgn-tp-8]="booking.service.serviceType === 'virtualService'" -->
                                                        <div class="prov_nme disply-flex">
                                                            <span>
                                                                <span>
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                                </span>
                                                                {{booking.service.name |
                                                                capitalizeFirst}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="pull-left  col-xs-6">
                                                        <div class="prov_lbl" *ngIf="booking.showToken">Token for</div>
                                                        <div class="prov_lbl" *ngIf="!booking.showToken">Check-in for
                                                        </div>
                                                        <div class="prov_nme"> {{booking.waitlistingFor[0].firstName}}
                                                            {{booking.waitlistingFor[0].lastName}}</div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 no-padding mgn-up-5">
                                                    <div class="pull-left  col-xs-6 no-padding"
                                                        *ngIf="booking.provider">
                                                        <div class="prov_lbl">Provider</div>
                                                        <div class="prov_nme">{{booking.provider.businessName}}</div>
                                                    </div>
                                                    <!-- <div *ngIf="booking.service.serviceType === 'virtualService'"
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme"
                                                            [class.red]="booking.videoCallButton==='DISABLED'"
                                                            [class.green]="booking.videoCallButton==='ENABLED'">
                                                            {{booking.videoCallMessage}}</div>
                                                    </div> -->
                                                    <div
                                                        [class.col-xs-6]="booking.provider"
                                                        [class.pull-left]="booking.provider"
                                                        [class.col-xs-12]="!booking.provider"
                                                        [class.no-padding]="!booking.provider">
                                                        <div class="prov_lbl">Status</div>
                                                        <div class="prov_nme">
                                                            <div class="book_stats mgn-up-20">
                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                                        | capitalizeFirst}}</span>
                                                                </span>

                                                                <span
                                                                    [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                                        Checked-in
                                                                    </span>
                                                                    <span
                                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                                        | capitalizeFirst}}</span>
                                                                </span>
                                                                <span *ngIf="booking.isRescheduled">
                                                                    <i class="resche_ico_wtlist"
                                                                        [matTooltip]="'Rescheduled'"></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <!-- Actions and Status -->
                                        <mat-grid-tile-footer>
                                            <!-- <div class="book_stats mgn-up-20">
                                                <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                    *ngIf="(booking.service.serviceType === 'virtualService' && booking.waitlistStatus !== 'arrived')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                        | capitalizeFirst}}</span>
                                                </span>

                                                <span [class]="getBookingStatusClass(booking.waitlistStatus)"
                                                    *ngIf="(booking.service.serviceType !== 'virtualService')">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span *ngIf="booking.waitlistStatus=='checkedIn'">
                                                        Checked-in
                                                    </span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done' && booking.waitlistStatus !=='checkedIn'">{{booking.waitlistStatus
                                                        | capitalizeFirst}}</span>
                                                </span>
                                                <span *ngIf="booking.isRescheduled">
                                                    <i class="resche_ico_wtlist" [matTooltip]="'Rescheduled'"></i>
                                                </span>
                                            </div> -->
                                            <div class="mgn-lft-10">
                                                <button
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled' && booking.billStatus!='Settled'"
                                                    mat-flat-button class="btns rupee-font"
                                                    (click)="viewBill(booking,'checkin',$event)">Pay
                                                    {{booking.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span *ngIf="booking.amountPaid" class="amtPaid rupee-font">Paid
                                                    {{booking.amountPaid | currency:'&#8377;'}}</span> &nbsp;&nbsp;
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(booking,'checkin',$event)">Receipt</button>
                                                </span>
                                            </div>
                                        </mat-grid-tile-footer>
                                    </ng-container>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- Show less -->
                        <div *ngIf="more_futrbookingsShow" (click)="showlessFutrBookings()" class="pad-lt-10">
                            <a class="show_more">Show less...</a>
                        </div>
                        <!-- end revamp order -->

                    </div>



                    <!-- Order Section -->
                    <!-- If there is no order -->
                    <div *ngIf="((total_tdy_order.length == 0 && total_future_order == 0) && !loading) && showOrder"
                        class="col-md-12 col-xs-12 col-sm-12 mgn-up-20 nocheckins">
                        <p class="locate-customer">No Active Orders</p>
                    </div>

                    <!-- if there is order -->
                    <div class="table-outer1  ng-tns-c16-57" *ngIf="!loading && showOrder">
                        <!-- begin revamp order -->
                        <!-- TODAY ORDERS-->
                        <div *ngIf="(total_tdy_order.length != 0)" class="day_hed">
                            TODAY
                        </div>
                        <div *ngIf="total_tdy_order.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let oder of todayOrderslst;" (click)="showBookingDetails(oder)">
                                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                        <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                            <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                    [matTooltip]="'Store Pickup'"></i>
                                                <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                    [matTooltip]="'Home Delivery'"></i>
                                            </div>
                                        </div>
                                        <div class="more_opt">
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item
                                                    *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                    (click)="doCancelWaitlist(oder,'order')">
                                                    <i class="fa cross-icon"></i>
                                                    Cancel</button>

                                                <button mat-menu-item (click)="showBookingDetails(oder)">
                                                    <i class="fa fa-sticky-note-o"></i>Order details
                                                </button>
                                                <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                    (click)="rateService(oder,'order')">
                                                    <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                </button>
                                                <!-- <button mat-menu-item >
                                                    <span class="rate-service" [class.rated]="isRated(oder)"
                                                        (click)="rateService(oder,'order')">{{rate_visit}}</span>
                                                </button> -->
                                                <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                            </mat-menu>
                                        </div>
                                        <div
                                            class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                            <span class="ordr_no">{{oder.orderNumber}}</span>
                                            <div class="tdisplay-block">
                                                <span class="sp_name"
                                                    (click)="providerDetail(oder.providerAccount,$event)">
                                                    {{oder.providerAccount.businessName || '' | capitalizeFirst}}</span>
                                                <!-- <div class="userName">
                                                    <i class="fa fa-user for"></i>
                                                    {{oder.orderFor.firstName}}
                                                    {{oder.orderFor.lastName}}
                                                </div> -->
                                                <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                    {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                    {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                        class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                    <span>{{oder.totalItemQuantity}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                            <button
                                                *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                mat-flat-button class="btns rupee-font"
                                                (click)="viewBill(oder,'order',$event)">Pay
                                                {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                            <span
                                                *ngIf="oder.bill && oder.bill.amountPaid > 0|| oder.advanceAmountPaid > 0"
                                                class="amtPaid">Paid
                                                {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                currency:'&#8377;') : (oder.advanceAmountPaid |
                                                currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                            <span *ngIf="oder.bill && oder.bill.refundedAmount >0" style="color:green">
                                                Refunded </span>
                                            <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                <button mat-flat-button class="btns"
                                                    *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                    (click)="viewBill(oder,'order',$event)">Receipt</button>
                                            </span>

                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                            [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                            {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                            confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                    </div>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_tdyOrdersShow && total_tdy_order.length > 3" (click)="showMoreTdyOrders()"
                            class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <ng-container *ngIf="more_tdyOrdersShow">
                            <div *ngIf="total_tdy_order.length != 0" class="mgn-up-10 mgn-bt-10 grid-card">
                                <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                    <mat-grid-tile *ngFor="let oder of todayOrderslst_more;"
                                        (click)="showBookingDetails(oder)">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                                <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                        [matTooltip]="'Store Pickup'"></i>
                                                    <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                        [matTooltip]="'Home Delivery'"></i>
                                                </div>
                                            </div>
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                        (click)="doCancelWaitlist(oder,'order')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>

                                                    <button mat-menu-item (click)="showBookingDetails(oder)">
                                                        <i class="fa fa-sticky-note-o"></i>Order details
                                                    </button>
                                                    <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                        (click)="rateService(oder,'order')">
                                                        <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                        <!-- <span class="rate-service" [class.rated]="isRated(oder)"
                                                            (click)="rateService(oder,'order')"><i class="fa fa-star-o" aria-hidden="true"></i>{{rate_visit}}</span> -->
                                                    </button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourites</span>
                                                    </button>
                                                </mat-menu>
                                            </div>
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                                <span class="ordr_no">{{oder.orderNumber}}</span>
                                                <div class="tdisplay-block">
                                                    <span class="sp_name"
                                                        (click)="providerDetail(oder.providerAccount,$event)">
                                                        {{oder.providerAccount.businessName || '' |
                                                        capitalizeFirst}}</span>
                                                    <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                        {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                        {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                    <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                            class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                        <span>{{oder.totalItemQuantity}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <button
                                                    *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                    mat-flat-button class="btns rupee-font"
                                                    (click)="viewBill(oder,'order',$event)">Pay
                                                    {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span
                                                    *ngIf="oder.bill && oder.bill.amountPaid > 0|| oder.advanceAmountPaid > 0"
                                                    class="amtPaid">Paid
                                                    {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                    currency:'&#8377;') : (oder.advanceAmountPaid |
                                                    currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                                <span *ngIf="oder.bill && oder.bill.refundedAmount >0"
                                                    style="color:green"> Refunded </span>
                                                <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                        (click)="viewBill(oder,'order',$event)">Receipt</button>
                                                </span>

                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                                [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                                {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                                confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                        </div>
                                    </mat-grid-tile>
                                </mat-grid-list>
                            </div>
                        </ng-container>
                        <!-- Show less -->
                        <div class="pad-lt-10" *ngIf="more_tdyOrdersShow" (click)="showlessTdyOrders()">
                            <a class="show_more">Show less...</a>
                        </div>

                        <!-- FUTURE ORDERS-->
                        <hr>
                        <div *ngIf="total_future_order && (total_future_order.length != 0)" class="day_hed">
                            UPCOMING
                        </div>
                        <div *ngIf="total_future_order && (total_future_order.length != 0)"
                            class="mgn-up-10 mgn-bt-10 grid-card">
                            <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                <mat-grid-tile *ngFor="let oder of futureOrderslst;" (click)="showBookingDetails(oder)">
                                    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                        <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                            <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                    [matTooltip]="'Store Pickup'"></i>
                                                <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                    [matTooltip]="'Home Delivery'"></i>
                                            </div>
                                        </div>
                                        <div class="more_opt">
                                            <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                (click)="stopprop($event)">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>
                                            <mat-menu #appMenu="matMenu">
                                                <button mat-menu-item
                                                    *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                    (click)="doCancelWaitlist(oder,'order')">
                                                    <i class="fa cross-icon"></i>
                                                    Cancel</button>

                                                <button mat-menu-item (click)="showBookingDetails(oder)">
                                                    <i class="fa fa-sticky-note-o"></i>Order details
                                                </button>
                                                <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                    (click)="rateService(oder,'order')">
                                                    <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                </button>
                                                <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                    <i class="fa chat-icon"></i>
                                                    {{send_msg_cap}}
                                                </button>
                                                <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite-filled"
                                                        (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                </button>
                                                <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                    <span class="icon-favourite"
                                                        (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                        to Favourites</span>
                                                </button>
                                            </mat-menu>
                                        </div>
                                        <div
                                            class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                            <span class="ordr_no">{{oder.orderNumber}}</span>
                                            <div class="tdisplay-block">
                                                <span class="sp_name"
                                                    (click)="providerDetail(oder.providerAccount,$event)">
                                                    {{oder.providerAccount.businessName || '' | capitalizeFirst}}</span>
                                                <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                    {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                    {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                <!-- <div class="userName">
                                                    <i class="fa fa-user for"></i>
                                                    {{oder.orderFor.firstName}}
                                                    {{oder.orderFor.lastName}}
                                                </div> -->
                                                <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                        class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                    <span>{{oder.totalItemQuantity}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                            <button
                                                *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                mat-flat-button class="btns rupee-font"
                                                (click)="viewBill(oder,'order',$event)">Pay
                                                {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                            <span
                                                *ngIf="oder.bill && oder.bill.amountPaid > 0 || oder.advanceAmountPaid > 0"
                                                class="amtPaid">Paid
                                                {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                currency:'&#8377;') : (oder.advanceAmountPaid |
                                                currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                            <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                <button mat-flat-button class="btns"
                                                    *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                    (click)="viewBill(oder,'order',$event)">Receipt</button>
                                            </span>

                                        </div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                            [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                            {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                            confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                    </div>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        <!-- show more -->
                        <div *ngIf="!more_futrOrdersShow && total_future_order &&total_future_order.length > 3"
                            (click)="showMoreFutOrders()" class="mgn-up-10 mgn-bt-10 pad-lt-10">
                            <span><a class="show_more">Show more...</a></span>
                        </div>
                        <ng-container *ngIf="more_futrOrdersShow">
                            <div *ngIf="total_future_order && total_future_order.length != 0"
                                class="mgn-up-10 mgn-bt-10 grid-card">
                                <mat-grid-list cols="{{no_of_grids}}" rowHeight="175px" [gutterSize]="'10px'">
                                    <mat-grid-tile *ngFor="let oder of futureOrderslst_more;"
                                        (click)="showBookingDetails(oder)">
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 fit_in no-padding">
                                            <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-xs-2 no-padding">
                                                <div><i *ngIf="oder.storePickup" class="fa store_pick_ico"
                                                        [matTooltip]="'Store Pickup'"></i>
                                                    <i *ngIf="oder.homeDelivery" class="fa hom_deliver_ico"
                                                        [matTooltip]="'Home Delivery'"></i>
                                                </div>
                                            </div>
                                            <div class="more_opt">
                                                <button mat-icon-button [matMenuTriggerFor]="appMenu"
                                                    (click)="stopprop($event)">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #appMenu="matMenu">
                                                    <button mat-menu-item
                                                        *ngIf="oder.orderStatus=='Order Received' || oder.orderStatus=='Order Acknowledged' || oder.orderStatus=='Order Confirmed'"
                                                        (click)="doCancelWaitlist(oder,'order')">
                                                        <i class="fa cross-icon"></i>
                                                        Cancel</button>

                                                    <button mat-menu-item (click)="showBookingDetails(oder)">
                                                        <i class="fa fa-sticky-note-o"></i>Order details
                                                    </button>
                                                    <button mat-menu-item *ngIf="oder.orderStatus !='Cancelled'"
                                                        (click)="rateService(oder,'order')">
                                                        <i class="fa fa-star-o" aria-hidden="true"></i>Rate Your Order
                                                    </button>
                                                    <button mat-menu-item (click)="addWaitlistMessage(oder,'orders')">
                                                        <i class="fa chat-icon"></i>
                                                        {{send_msg_cap}}
                                                    </button>
                                                    <button mat-menu-item *ngIf="checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite-filled"
                                                            (click)="doDeleteFavProvider(oder.providerAccount)">&nbsp;&nbsp;{{remove_fav_cap}}</span>
                                                    </button>
                                                    <button mat-menu-item *ngIf="!checkIfFav(oder.providerAccount.id)">
                                                        <span class="icon-favourite"
                                                            (click)="addFavProvider(oder.providerAccount.id)">&nbsp;&nbsp;Add
                                                            to Favourites</span>
                                                    </button>
                                                </mat-menu>
                                            </div>
                                            <div
                                                class="col-sm-10 col-md-10 col-lg-10 col-xl-10 col-xs-10  mgn-up-5 ln-ht-o">
                                                <span class="ordr_no">{{oder.orderNumber}}</span>
                                                <div class="tdisplay-block">
                                                    <span class="sp_name"
                                                        (click)="providerDetail(oder.providerAccount,$event)">
                                                        {{oder.providerAccount.businessName || '' |
                                                        capitalizeFirst}}</span>
                                                    <div class="ordr_no">{{oder.orderDate | date: display_dateFormat}},
                                                        {{oder.orderTimeWindow.timeSlots[0].sTime}} -
                                                        {{oder.orderTimeWindow.timeSlots[0].eTime}}</div>
                                                    <div *ngIf="oder.totalItemQuantity > 0" class="bold"><span
                                                            class="ordr_no">Qty</span>&nbsp;&nbsp;&nbsp;
                                                        <span>{{oder.totalItemQuantity}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12">
                                                <button
                                                    *ngIf="oder.amountDue>0 && oder.bill && (oder.bill.billViewStatus =='Show') && oder.orderStatus != 'Cancelled' && oder.bill.billStatus!='Settled'"
                                                    mat-flat-button class="btns rupee-font"
                                                    (click)="viewBill(oder,'order',$event)">Pay
                                                    {{oder.amountDue | currency:'&#8377;'}}</button>&nbsp;&nbsp;
                                                <span
                                                    *ngIf="oder.bill && oder.bill.amountPaid > 0|| oder.advanceAmountPaid > 0"
                                                    class="amtPaid">Paid
                                                    {{(oder.bill && oder.bill.amountPaid ? (oder.bill.amountPaid |
                                                    currency:'&#8377;') : (oder.advanceAmountPaid |
                                                    currency:'&#8377;'))}}</span> &nbsp;&nbsp;
                                                <span *ngIf="oder.bill && oder.bill.billViewStatus == 'Show'">
                                                    <button mat-flat-button class="btns"
                                                        *ngIf="oder.amountDue ==0 && oder.orderStatus != 'Cancelled'"
                                                        (click)="viewBill(oder,'order',$event)">Receipt</button>
                                                </span>

                                            </div>
                                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xs-12 setAtBottom "
                                                [ngClass]="oder.orderStatus === 'Cancelled'?'darkred':'darkblue'">
                                                {{oder.orderStatus==='Order Received' ? 'Order Placed - Waiting for
                                                confirmation':oder.orderStatus| capitalizeFirst}}</div>
                                        </div>
                                    </mat-grid-tile>
                                </mat-grid-list>
                            </div>
                        </ng-container>
                        <!-- Show less -->
                        <div class="pad-lt-10" *ngIf="more_futrOrdersShow" (click)="showlessFutOrders()">
                            <a class="show_more">Show less...</a>
                        </div>
                        <!-- end revamp order -->
                    </div>

                    <ks-modal-gallery [id]="0" *ngIf="image_list_popup && image_list_popup.length>0"
                        [modalImages]="image_list_popup" [plainGalleryConfig]="customPlainGalleryRowConfig"
                        [buttonsConfig]="customButtonsFontAwesomeConfig" (buttonBeforeHook)="onButtonBeforeHook()"
                        (buttonAfterHook)="onButtonAfterHook()"></ks-modal-gallery>


                </div>
            </div>
        </div>
    </div>
</section>