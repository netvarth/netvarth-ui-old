<section #consumer_checkin class="c-checkin-new container no-padding" [ngClass]="theme?theme:''">
    <div [ngClass]="{'loadingpaytm': loadingPaytm}"></div>
    <div class="content p0 loc-list ynw-common-form-nm">
        <div class="panel panel-default">
            <div class="panel-heading top-row ">
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <a class="pull-left back-btn mgn-up-5" (click)="goBack('back')"><i class="fa fa-arrow-left"></i></a>
                </div>
                <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 no-padding">
                    <app-header *ngIf="sharedFunctionobj.checkLogin()" [includedfrom]="'checkin'"
                        [accountId]="businessId" [customId]="customId"></app-header>
                </div>
            </div>
            <app-common-innerloading-spinner *ngIf="loadingPaytm"></app-common-innerloading-spinner>
            <div class="pad-10 d-flex flex-column-fluid">
                <div class="card card-custom" class="cardwidth">
                    <div class="card-body p-0">
                        <div class="wizard wizard-1" id="kt_wizard_v1" data-wizard-state="step-first"
                            data-wizard-clickable="false">
                            <div class="row justify-content-center">
                                <div class="loading-hgt" *ngIf="!questionnaireLoaded">
                                    <app-common-innerloading-spinner></app-common-innerloading-spinner>
                                </div>
                                <div *ngIf="questionnaireLoaded">
                                    <div
                                        class="lbl col-sm-12 col-md-5 col-lg-4 col-xs-12 col-sm-12 no-padding displ-none">
                                        <div class="wizard-nav" *ngIf="type !='waitlistreschedule'">
                                            <div class="wizard-steps p-8 p-lg-10">
                                                <div class="wizard-step tab-selected wizard-mgn-30"
                                                    data-wizard-type="step" *ngIf="tele_srv_stat === 'true'">
                                                    <div class="wizard-label">
                                                        <div class="step-icon">1</div>
                                                        <h3 class="wizard-title mgn-lt-15 no-padding no-margin">Personal
                                                            Information</h3>
                                                    </div>
                                                    <span class="svg-icon svg-icon-xl wizard-arrow">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                                                            height="24px" viewBox="0 0 24 24" version="1.1">
                                                            <g stroke="none" stroke-width="1" fill="none"
                                                                fill-rule="evenodd">
                                                                <polygon points="0 0 24 0 24 24 0 24" />
                                                                <rect fill="#000000" opacity="0.3"
                                                                    transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                                    x="11" y="5" width="2" height="14" rx="1" />
                                                                <path
                                                                    d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                                    fill="#000000" fill-rule="nonzero"
                                                                    transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="wizard-step tab-selected wizard-mgn-30"
                                                    data-wizard-type="step" [class.tab-selected]="bookStep>=1">
                                                    <div class="wizard-label">
                                                        <div class="step-icon"> {{tele_srv_stat === 'true'?'2':'1'}}
                                                        </div>
                                                        <h3 class="wizard-title mgn-lt-15">Booking Window</h3>
                                                    </div>
                                                    <span class="svg-icon svg-icon-xl wizard-arrow">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                                                            height="24px" viewBox="0 0 24 24" version="1.1">
                                                            <g stroke="none" stroke-width="1" fill="none"
                                                                fill-rule="evenodd">
                                                                <polygon points="0 0 24 0 24 24 0 24" />
                                                                <rect fill="#000000" opacity="0.3"
                                                                    transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                                    x="11" y="5" width="2" height="14" rx="1" />
                                                                <path
                                                                    d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                                    fill="#000000" fill-rule="nonzero"
                                                                    transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="wizard-step tab-selected wizard-mgn-30"
                                                    data-wizard-type="step" [class.tab-selected]="bookStep>=2"
                                                    *ngIf="questionnaireList.labels && questionnaireList.labels.length > 0">
                                                    <div class="wizard-label">
                                                        <div class="step-icon">{{tele_srv_stat === 'true'?'3':'2'}}
                                                        </div>
                                                        <h3 class="wizard-title mgn-lt-15">More Info</h3>
                                                    </div>
                                                    <span class="svg-icon svg-icon-xl wizard-arrow">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                                                            height="24px" viewBox="0 0 24 24" version="1.1">
                                                            <g stroke="none" stroke-width="1" fill="none"
                                                                fill-rule="evenodd">
                                                                <polygon points="0 0 24 0 24 24 0 24" />
                                                                <rect fill="#000000" opacity="0.3"
                                                                    transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                                    x="11" y="5" width="2" height="14" rx="1" />
                                                                <path
                                                                    d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                                    fill="#000000" fill-rule="nonzero"
                                                                    transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="wizard-step" data-wizard-type="step"
                                                    [class.tab-selected]="bookStep>=3">
                                                    <div class="wizard-label">
                                                        <div class="step-icon">{{getBookStep()}}</div>
                                                        <h3 class="wizard-title mgn-lt-15">Confirm</h3>
                                                    </div>
                                                    <span class="svg-icon svg-icon-xl wizard-arrow last">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                                                            height="24px" viewBox="0 0 24 24" version="1.1">
                                                            <g stroke="none" stroke-width="1" fill="none"
                                                                fill-rule="evenodd">
                                                                <polygon points="0 0 24 0 24 24 0 24" />
                                                                <rect fill="#000000" opacity="0.3"
                                                                    transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                                    x="11" y="5" width="2" height="14" rx="1" />
                                                                <path
                                                                    d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                                    fill="#000000" fill-rule="nonzero"
                                                                    transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="booking-img"></div>
                                    </div>
                                    <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding right-part"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 0">
                                        <div
                                            class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding pull-right border-left">
                                            <div
                                                class="col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding check-new-group border-tp border-rt">
                                                <div class="col-md-12 col-xs-12 col-sm-12 no-padding border-bt"
                                                    *ngIf="this.selectedUserParam && selectedUser">
                                                    <div class="col-sm-2 col-xs-3 col-md-4 ">
                                                        <img class="card-img" [src]="getPic(selectedUser)"
                                                            alt="Profile Pic">
                                                    </div>
                                                    <div class="col-sm-10 col-xs-9 col-md-8 no-padding">
                                                        <div class="">
                                                            <h6 class="card-title mgn-up-5">
                                                                <span
                                                                    *ngIf="selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                <span
                                                                    *ngIf="!selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                            </h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10"
                                                    *ngIf="hideTokenFor">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 mgn-up-5">
                                                        {{showCheckinButtonCaption()}} For
                                                    </div>
                                                    <div class="col-sm-12 col-xs-12 col-md-12">
                                                        <div class=""
                                                            *ngIf="selectedServiceId || type == 'waitlistreschedule'">
                                                            <div class="service-icon pull-left"
                                                                *ngIf="selectedService.serviceType == 'virtualService'">
                                                                <i class="fa phon-icon"
                                                                    *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                <i class="fa meet-icon"
                                                                    *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                <i class="fa zoom-icon zoom1"
                                                                    *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                                    *ngIf="selectedService.virtualCallingModes  && selectedService.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                                <i class="fa wtsapaud-icon"
                                                                    *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType === 'audioService'"></i>
                                                                <i class="fa wtsapvid-icon"
                                                                    *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType === 'videoService'"></i>
                                                            </div>
                                                            <h6 class="card-title service mgn-bt-10">
                                                                {{selectedService.name}}
                                                            </h6>
                                                            <div class="" style="font-size: 1rem"
                                                                *ngIf="selectedService.price && type != 'reschedule'">
                                                                <p class="module-nomargin line-clamp no-margin"
                                                                    *ngIf="selectedService.description && !showmoreSpec"
                                                                    (click)="showSpec()">
                                                                    {{selectedService.description}}</p>
                                                                <p *ngIf="showmoreSpec" (click)="showSpec()">
                                                                    {{selectedService.description}}</p>
                                                            </div>
                                                            <div class="">
                                                                <div class="callingmode mgn-lt-10"
                                                                    *ngIf="selectedService && selectedService.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                                    <div class="mgn-bt-10 mgn-up-5">
                                                                        <div class=""
                                                                            *ngFor="let mode of selectedService.virtualCallingModes;let i = index">
                                                                            <div style="visibility: hidden;">
                                                                                {{callingModesDisplayName[mode.callingMode]}}
                                                                            </div>
                                                                            <div class="cal-mod-instrct pre-check-title color-grey"
                                                                                *ngIf="mode.callingMode">
                                                                                {{mode.instructions}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="prenotes mgn-bt-10"
                                                                    *ngIf="selectedService.preInfoEnabled">
                                                                    <div class="preinfo-title">
                                                                        {{selectedService.preInfoTitle}}</div>
                                                                    <div>{{(readMore) ? selectedService.preInfoText :
                                                                        selectedService.preInfoText | slice:0:200}}
                                                                        <a class="changeitem pointer-cursor mgn-lt-5 mgn-rt-20 pull-right"
                                                                            (click)="showText()"
                                                                            *ngIf="selectedService.preInfoText.length > 200">
                                                                            {{(readMore) ? 'less': 'more'}}</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div
                                                class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">
                                                <form [formGroup]="virtualForm"
                                                    class="login-form custom-login-form consumer-join-component virtual-fields"
                                                    [ngClass]="theme?theme:''" novalidate>
                                                    <div class="cust-loginpge-color">
                                                        <div class="mat-dialog-content"
                                                            style="overflow: auto !important;">

                                                            <div *ngIf="hideLanguages">
                                                                <div class="mgn-up-10 ">
                                                                    <label class="col-form-label"
                                                                        for="name">Consultation For</label>
                                                                    <br />
                                                                    <div class="form-group form-inline">
                                                                        <mat-radio-group formControlName="serviceFor"
                                                                            class="mgn-up-5 userGroup m-0 p-2"
                                                                            (change)="onServiceForChange($event.value)">
                                                                            <mat-radio-button
                                                                                [value]="parentCustomer.id">
                                                                                {{parentCustomer.userProfile.firstName}}
                                                                                {{parentCustomer.userProfile.lastName}}
                                                                            </mat-radio-button>

                                                                            <mat-radio-button class="flx"
                                                                                [value]="member.user"
                                                                                *ngFor="let member of familyMembers">
                                                                                {{member.userProfile.firstName}}
                                                                                &nbsp;
                                                                                {{member.userProfile.lastName}}
                                                                            </mat-radio-button>
                                                                            <mat-radio-button value="new_member">
                                                                                Someone
                                                                                else</mat-radio-button>
                                                                        </mat-radio-group>
                                                                    </div>
                                                                </div>
                                                                <fieldset>
                                                                    <div class="mgn-up-10 mgn-bt-10"
                                                                        style="font-size: 0.75rem !important; display: flex !important;justify-content: left;">
                                                                        Please provide basic information about the
                                                                        &nbsp;
                                                                        <span
                                                                            style="margin-right: 5px;padding-right: 5px;">{{consumer_label}}</span>
                                                                    </div>
                                                                    <div class="form-group"
                                                                        *ngIf="virtualForm.get('serviceFor').value==='new_member'">
                                                                        <label class="col-form-label"
                                                                            for="firstName">First
                                                                            Name <span class="red">*</span></label>
                                                                        <input placeholder="Enter your first name"
                                                                            class="form-control" style="width:50%"
                                                                            formControlName="firstName"
                                                                            [ngStyle]="{'background-color': bgColor}">
                                                                    </div>
                                                                    <div class="form-group"
                                                                        *ngIf="virtualForm.get('serviceFor').value==='new_member'">
                                                                        <label class="col-form-label"
                                                                            for="lastName">Last
                                                                            Name <span class="red">*</span></label>
                                                                        <input placeholder="Enter your last name"
                                                                            class="form-control" style="width:50%"
                                                                            formControlName="lastName"
                                                                            [ngStyle]="{'background-color': bgColor}">
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="col-form-label"
                                                                            for="gender">{{gender_cap}} <span
                                                                                class="red">*</span></label>
                                                                        <br />
                                                                        <mat-radio-group formControlName="gender"
                                                                            class=" m-0 p-2">
                                                                            <mat-radio-button value="male" class="mx-2">
                                                                                Male
                                                                            </mat-radio-button>
                                                                            <mat-radio-button value="female"
                                                                                class="mx-2">Female
                                                                            </mat-radio-button>
                                                                            <mat-radio-button value="other">Other
                                                                            </mat-radio-button>
                                                                        </mat-radio-group>
                                                                        <app-field-error-display
                                                                            [displayError]="fed_service.isFieldValid(virtualForm,'gender')"
                                                                            errorMsg="Please select the gender.">
                                                                        </app-field-error-display>
                                                                    </div>
                                                                    <div class="form-group ">
                                                                        <label class="col-form-label"
                                                                            for="lastName">Age(in years)<span
                                                                                class="red">*</span></label><br>
                                                                        <input type="text" min="1" max="150"
                                                                            class="form-control vt_dt no-padding mgn-up-5"
                                                                            formControlName="age" style="width:100px"
                                                                            (keypress)=isNumeric($event)
                                                                            [ngStyle]="{'color': bgColor}">
                                                                        <div
                                                                            style="display: flex; justify-content: space-between;">
                                                                            <app-field-error-display
                                                                                [displayError]="fed_service.isFieldValid(virtualForm,'age') "
                                                                                [errorMsgs]="fed_service.getErrorMessage(virtualForm,'age',
                                                                                {
                                                                                    'required' : 'Age is required',
                                                                                    'min' : 'Minimum age required is 0',
                                                                                    'max' : 'Maximum age is 150'
                                                                                
                                                                                })">
                                                                            </app-field-error-display>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pwd"
                                                                        *ngIf="parentCustomer.userProfile.countryCode=='+91'">
                                                                        <label for="pincode"
                                                                            class="col-form-label">Residing Pincode in
                                                                            India <span class="red">*</span></label>
                                                                        <input type="text" placeholder="xxxxxx"
                                                                            class="form-control vt_dt no-padding mgn-up-5"
                                                                            id="location" formControlName="pincode"
                                                                            (keypress)="isNumeric($event)"
                                                                            (keyup)="showLocations($event)"
                                                                            style="width:50%"
                                                                            [ngStyle]="{'background-color': bgColor}">
                                                                        <div
                                                                            style="display: flex; justify-content: space-between;">
                                                                            <app-field-error-display
                                                                                [displayError]="fed_service.isFieldValid(virtualForm,'pincode')"
                                                                                errorMsg="Pincode is required">
                                                                            </app-field-error-display>
                                                                        </div>
                                                                        <app-common-innerloading-spinner
                                                                            *ngIf="loading">
                                                                        </app-common-innerloading-spinner>
                                                                        <div *ngIf="!loading && locations"
                                                                            class="mgn-up-10">
                                                                            <mat-radio-group
                                                                                aria-label="Select your location"
                                                                                class="mgn-up-5"
                                                                                formControlName='location'>
                                                                                <mat-radio-button
                                                                                    *ngFor="let location of locations.PostOffice"
                                                                                    [value]="location">
                                                                                    {{location.Name}},
                                                                                    {{location.State}}
                                                                                </mat-radio-button>
                                                                            </mat-radio-group>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group"
                                                                        *ngIf="parentCustomer.userProfile.countryCode !=='+91'">
                                                                        <label class="col-form-label"
                                                                            for="lastName">Location <span
                                                                                class="red">*</span></label>
                                                                        <input placeholder="Enter your location"
                                                                            class="form-control"
                                                                            formControlName="localarea"
                                                                            [ngStyle]="{'background-color': bgColor}">
                                                                    </div>
                                                                    <div class="form-group"
                                                                        *ngIf="parentCustomer.userProfile.countryCode !=='+91'">
                                                                        <label class="col-form-label" for="state">
                                                                            Residing State<span
                                                                                class="red">*</span></label>
                                                                        <input placeholder="Enter your state"
                                                                            class="form-control" formControlName="state"
                                                                            [ngStyle]="{'background-color': bgColor}">
                                                                    </div>
                                                                    <div class="form-group" id="plng"
                                                                        *ngIf="lngknown==='yes'">
                                                                        <label class="col-form-label" for="v">Select
                                                                            your preferred language <span
                                                                                class="red">*</span></label>
                                                                        <br />
                                                                        <mat-radio-group aria-label="Select an option"
                                                                            (change)="toggleLanguages($event)"
                                                                            class="mgn-up-5  m-0 p-2"
                                                                            formControlName="islanguage">
                                                                            <mat-radio-button value="yes" class="mx-2">
                                                                                English
                                                                            </mat-radio-button>
                                                                            <mat-radio-button value="no">Other Languages
                                                                            </mat-radio-button>
                                                                        </mat-radio-group>
                                                                        <div
                                                                            style="display: flex; justify-content: space-between;">
                                                                            <app-field-error-display
                                                                                [displayError]="fed_service.isFieldValid(virtualForm,'islanguage') "
                                                                                errorMsg="please choose one">
                                                                            </app-field-error-display>
                                                                        </div>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                            <div
                                                                *ngIf="hideLanguages && virtualForm.get('preferredLanguage').value.length >0 && lngknown==='no'">
                                                                <label class="col-form-label"
                                                                    for="preferredLanguage">{{virtualForm.get('preferredLanguage').value.length
                                                                    >1?'Your preferred languages': 'Your preferred
                                                                    language'}}
                                                                </label><br />
                                                                <fieldset>
                                                                    <div class="col-form-label edtlang">
                                                                        <span
                                                                            style="word-wrap: break-word; padding-right: 5px;margin-right: 5px;">{{virtualForm.get('preferredLanguage').value}}</span>
                                                                        <span (click)="editLanguage()"
                                                                            style="color:rgb(255, 255, 255)"><i
                                                                                class="fa fa-edit fa-1x"
                                                                                style="font-size: large;"
                                                                                data-bs-toggle="tooltip"
                                                                                data-bs-placement="right"
                                                                                title="Edit"></i></span>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                            <div *ngIf="!hideLanguages" class="form-group">
                                                                <div class="form-group" id="plng"
                                                                    *ngIf="iseditLanguage">
                                                                    <label class="col-form-label" for="v">Select
                                                                        your preferred language <span
                                                                            class="red">*</span></label>
                                                                    <br /> <br />
                                                                    <mat-radio-group aria-label="Select an option"
                                                                        (change)="toggleLanguages($event)"
                                                                        class="mgn-up-5" formControlName="islanguage">
                                                                        <mat-radio-button value="yes" class="mx-2">
                                                                            English
                                                                        </mat-radio-button>
                                                                        <mat-radio-button value="no">Other Languages
                                                                        </mat-radio-button>
                                                                    </mat-radio-group><br />
                                                                    <div
                                                                        style="display: flex; justify-content: space-between;">
                                                                        <app-field-error-display
                                                                            [displayError]="fed_service.isFieldValid(virtualForm,'islanguage') "
                                                                            errorMsg="please choose one">
                                                                        </app-field-error-display>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label *ngIf="lngknown==='no'"
                                                                        class="col-form-label"
                                                                        for="preferredLanguage">Choose your
                                                                        preferred languages
                                                                        <span class="red">*</span></label>
                                                                    <div class="form-group form-inline">
                                                                        <div class="languagesouter"
                                                                            *ngIf="languages.length >0 && lngknown==='no'">
                                                                            <div *ngFor="let lang of languages">
                                                                                <mat-checkbox
                                                                                    style="padding-left: 10px;"
                                                                                    (change)="langSel(lang)"
                                                                                    [checked]="checklangExists(lang)">
                                                                                    {{lang}}</mat-checkbox>
                                                                            </div>
                                                                        </div>
                                                                        <div class="actiondiv col-md-12"
                                                                            style="margin-top: 15px;display: inline-flex;">
                                                                            <button (click)="saveLanguages()"
                                                                                type="button" mat-button
                                                                                class="cs-btn bt1"
                                                                                [disabled]="disableButton">Ok</button>&nbsp;&nbsp;
                                                                            <button (click)="cancelLanguageSelection()"
                                                                                type="button" mat-button
                                                                                class="cs-btn bt1">Cancel</button>
                                                                        </div>
                                                                    </div>
                                                                    <div
                                                                        style="display: flex; justify-content: space-between;">
                                                                        <app-field-error-display
                                                                            [displayError]="fed_service.isFieldValid(virtualForm,'preferredLanguage')"
                                                                            errorMsg="Language is required">
                                                                        </app-field-error-display>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <fieldset>
                                                                <ng-container *ngIf="hideLanguages">
                                                                    <label class="col-form-label" for="name">Contact
                                                                        Information </label>
                                                                    <div class="form-level-settings smallfont">
                                                                        Provide your contact info for alerts,status
                                                                        updates and for any other booking related
                                                                        communications
                                                                    </div>
                                                                    <div class="mgn-up-10 mgn-bt-10">
                                                                        <label class="col-form-label" for="phone">Phone
                                                                            # </label>
                                                                        <br />
                                                                        {{parentCustomer.userProfile.countryCode}}
                                                                        {{parentCustomer.userProfile.primaryMobileNo}}
                                                                    </div>
                                                                    <div class="col-xs-12 no-padding optional">
                                                                        <label><i class="fa fa-whatsapp"
                                                                                style="color:green"></i> Whatsapp
                                                                            #</label>
                                                                        <div class="disp-flex">
                                                                            <div class="form-group no-margin">
                                                                                <input type="text"
                                                                                    (keypress)="isNumericSign($event)"
                                                                                    matInput
                                                                                    class="form-control input-group-text"
                                                                                    id="countryCode_whtsap"
                                                                                    placeholder=""
                                                                                    formControlName="countryCode_whtsap"
                                                                                    autocomplete="off" maxlength="5"
                                                                                    style="width:60px"
                                                                                    [ngStyle]="{'background-color': bgColor}">
                                                                            </div>
                                                                            <div class="form-group width-100">
                                                                                <input type="text"
                                                                                    (keypress)="isNumeric($event)"
                                                                                    matInput
                                                                                    class="form-control text-width"
                                                                                    id="whatsappnumber"
                                                                                    formControlName="whatsappnumber"
                                                                                    autocomplete="off" style="width:50%"
                                                                                    [ngStyle]="{'background-color': bgColor}">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class=" col-xs-12 no-padding optional">
                                                                        <label><i class="fa fa-telegram"
                                                                                style="color:#29b6f6;"></i> Telegram
                                                                            #</label>
                                                                        <div class="disp-flex">

                                                                            <div class="form-group no-margin">
                                                                                <input type="text"
                                                                                    (keypress)="isNumericSign($event)"
                                                                                    matInput
                                                                                    class="form-control input-group-text"
                                                                                    id="countryCode_telegram"
                                                                                    placeholder=""
                                                                                    formControlName="countryCode_telegram"
                                                                                    autocomplete="off" maxlength="5"
                                                                                    style="width:60px"
                                                                                    [ngStyle]="{'background-color': bgColor}">
                                                                            </div>
                                                                            <div class="form-group width-100">
                                                                                <input type="text"
                                                                                    (keypress)="isNumeric($event)"
                                                                                    matInput
                                                                                    class="form-control text-width"
                                                                                    id="telegramnumber"
                                                                                    formControlName="telegramnumber"
                                                                                    autocomplete="off" style="width:50%"
                                                                                    [ngStyle]="{'background-color': bgColor}">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group optional">
                                                                        <label for="email"
                                                                            class="col-form-label">Email</label>
                                                                        <input type="email" class="form-control"
                                                                            formControlName="email" style="width:55%"
                                                                            [ngStyle]="{'background-color': bgColor}" />
                                                                        <mat-checkbox class="updateemail"
                                                                            formControlName="updateEmail">Update Email
                                                                            to 'My Account'</mat-checkbox>
                                                                        <app-field-error-display
                                                                            [displayError]="fed_service.isFieldValid(virtualForm,'email')"
                                                                            [errorMsgs]="fed_service.getErrorMessage(virtualForm,'email',
                                                                            {
                                                                                'pattern' : 'Please enter valid email'
                                                                            })">
                                                                        </app-field-error-display>
                                                                    </div>
                                                                </ng-container>
                                                            </fieldset>
                                                            <div class="">&nbsp;</div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                            <button type="button"
                                                class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                (click)="goToStep('next')" *ngIf="hideLanguages">
                                                Next
                                            </button> &nbsp;
                                        </div>
                                    </div>
                                    <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding right-part"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 1">
                                        <div class="panel-body no-padding">
                                            <div
                                                class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding pull-right border-left">
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding check-new-group border-tp border-rt">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding border-bt"
                                                        *ngIf="this.selectedUserParam && selectedUser">
                                                        <div class="col-sm-2 col-xs-3 col-md-4 ">
                                                            <img class="card-img" [src]="getPic(selectedUser)"
                                                                alt="Profile Pic">
                                                        </div>
                                                        <div class="col-sm-10 col-xs-9 col-md-8 no-padding">
                                                            <div class="">
                                                                <h6 class="card-title mgn-up-5">
                                                                    <span
                                                                        *ngIf="selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                    <span
                                                                        *ngIf="!selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                </h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 mgn-up-5">
                                                            {{showCheckinButtonCaption()}} For
                                                        </div>
                                                        <div class="col-sm-12 col-xs-12 col-md-12">
                                                            <div class=""
                                                                *ngIf="selectedServiceId || type == 'waitlistreschedule'">
                                                                <div class="service-icon pull-left"
                                                                    *ngIf="selectedService.serviceType == 'virtualService'">
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon zoom1"
                                                                        *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                                        *ngIf="selectedService.virtualCallingModes  && selectedService.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType === 'audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType === 'videoService'"></i>
                                                                </div>
                                                                <h6 class="card-title service mgn-bt-10">
                                                                    {{selectedService.name}}
                                                                </h6>
                                                                <div class="" style="font-size: 1rem"
                                                                    *ngIf="selectedService && selectedService.description">
                                                                    <p class="module-nomargin line-clamp no-margin"
                                                                        *ngIf="selectedService && selectedService.description && !showmoreSpec"
                                                                        (click)="showSpec()">
                                                                        {{selectedService.description}}</p>
                                                                    <p class="more" (click)="showSpec()"
                                                                        *ngIf="selectedService && selectedService.description && selectedService.description.length > 200 && !showmoreSpec">
                                                                        Read more</p>
                                                                    <p *ngIf="selectedService && selectedService.description && showmoreSpec"
                                                                        (click)="showSpec()">
                                                                        {{selectedService.description}}</p>
                                                                </div>
                                                                <div class="">
                                                                    <div class="callingmode mgn-lt-10"
                                                                        *ngIf="selectedService && selectedService.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                                        <div class="mgn-bt-10 mgn-up-5">
                                                                            <div class=""
                                                                                *ngFor="let mode of selectedService.virtualCallingModes;let i = index">
                                                                                <div style="visibility: hidden;">
                                                                                    {{callingModesDisplayName[mode.callingMode]}}
                                                                                </div>
                                                                                <div class="cal-mod-instrct pre-check-title color-grey"
                                                                                    *ngIf="mode.callingMode">
                                                                                    {{mode.instructions}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="prenotes mgn-bt-10"
                                                                        *ngIf="selectedService.preInfoEnabled">
                                                                        <div class="preinfo-title">
                                                                            {{selectedService.preInfoTitle}}</div>
                                                                        <div>{{(readMore) ? selectedService.preInfoText
                                                                            :
                                                                            selectedService.preInfoText | slice:0:200}}
                                                                            <a class="changeitem pointer-cursor mgn-lt-5 mgn-rt-20 pull-right"
                                                                                (click)="showText()"
                                                                                *ngIf="selectedService.preInfoText.length > 200">
                                                                                {{(readMore) ? 'less': 'more'}}</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding"
                                                        *ngIf="queuejson && queuejson.length != 0 && !api_loading1">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-10">
                                                            Date/Time
                                                            <span><a class="changeitem  pointer-cursor  mgn-rt-20 mgn-bt-10 pull-right"
                                                                    (click)="changeTime()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">Change Date/Time
                                                                </a></span>
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <h6 class="card-title serv-time border-style">
                                                                <span *ngIf="!isFuturedate">Today, </span>
                                                                <span *ngIf="isFuturedate">{{selectedDate | date:
                                                                    newDateFormat}},
                                                                </span>
                                                                <span>
                                                                    {{selectedQTime}}
                                                                </span>
                                                            </h6>

                                                        </div>

                                                        <div *ngIf="wt_personaahead"
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20">
                                                            Waiting in Line
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding"
                                                            *ngIf="wt_personaahead">
                                                            <h6 class="card-title serv-time">
                                                                <span *ngIf="personsAhead <= 0">0
                                                                    People</span>
                                                                <span *ngIf="personsAhead == 1">1<span>
                                                                        Person</span></span>
                                                                <span *ngIf="personsAhead > 1">{{personsAhead}}<span>
                                                                        People</span></span>
                                                                <span *ngIf="calc_mode=='NoCalc'">
                                                                    <span *ngIf="!isFuturedate">
                                                                    </span>
                                                                </span>
                                                                <span *ngIf="serviceTime=='' && calc_mode!='NoCalc'">
                                                                    <span class="color-grey">\</span>
                                                                    <span>{{waitingTime}}</span>
                                                                </span>
                                                                <span *ngIf="serviceTime!='' && calc_mode!='NoCalc'">
                                                                    <ng-container *ngIf="isFuturedate">
                                                                    </ng-container>
                                                                    <ng-container *ngIf="!isFuturedate">
                                                                        <span><span class="color-grey"> \
                                                                            </span>{{serviceTime}}</span>
                                                                    </ng-container>
                                                                </span>
                                                            </h6>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red mgn-up-10"
                                                        *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                                        No timings available.
                                                        <span><a class="lnk pointer-cursor action mgn-lt-10"
                                                                (click)="changeTime()" data-toggle="modal"
                                                                data-target="#exampleModalCenter">Change Time
                                                            </a></span>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp check-new-group">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-10 mgn-bt-10 no-padding">
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 no-padding"
                                                                *ngIf="selectedService.serviceType!=='virtualService'">
                                                                Booking For <a *ngIf="type !== 'waitlistreschedule'"
                                                                    class="changeitem  pointer-cursor  mgn-lt-5 mgn-rt-20 pull-right"
                                                                    data-toggle="modal"
                                                                    data-target="#exampleModalCenter"
                                                                    (click)="handleSideScreen('members')">Change
                                                                </a>
                                                            </div>
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 no-padding"
                                                                *ngIf="selectedService.serviceType==='virtualService'">
                                                                Booking For
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
                                                                <div class="">
                                                                    <div *ngIf="type !== 'waitlistreschedule'">
                                                                        <h6 class="card-title service mgn-bt-10"
                                                                            *ngFor="let member of waitlist_for">
                                                                            {{member.firstName | capitalizeFirst}}
                                                                            {{member.lastName | capitalizeFirst}}
                                                                        </h6>
                                                                    </div>
                                                                    <h6 class="card-title service mgn-bt-10"
                                                                        *ngIf="type === 'waitlistreschedule'">
                                                                        {{wtlst_for_fname | capitalizeFirst}}
                                                                        {{wtlst_for_lname | capitalizeFirst}}
                                                                    </h6>
                                                                    <div
                                                                        class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-10">
                                                                        Contact Information
                                                                        <a *ngIf="type !== 'waitlistreschedule'&& selectedService.serviceType==='virtualService'"
                                                                            class="change-button changeitem pointer-cursor mgn-lt-5 pull-right"
                                                                            data-toggle="modal"
                                                                            data-target="#exampleModalCenter"
                                                                            (click)="handleSideScreen('members')">Change
                                                                        </a>
                                                                        <div class="mode-hint mgn-bt-5">
                                                                            The provider will contact you in this
                                                                            number
                                                                        </div>
                                                                    </div>
                                                                    <div class="contact-section">
                                                                        <i class="fa fa-mobile "></i>
                                                                        <i class="fa phon-icon mgn-lt-10"
                                                                            *ngIf="selectedService  && selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                        <span
                                                                            class="phonevallabel">&nbsp;{{commObj['communicationPhCountryCode']}}
                                                                            {{commObj['communicationPhNo']}}</span>
                                                                    </div>
                                                                    <div class="contact-section"
                                                                        *ngIf="selectedService && selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                        <i class="fa wtsapaud-icon wtsap-cal"
                                                                            *ngIf="selectedService.virtualServiceType === 'audioService'"></i>
                                                                        <i class="fa wtsapvid-icon" style="width: 20px;"
                                                                            *ngIf="selectedService.virtualServiceType === 'videoService'"></i>
                                                                        <span
                                                                            class="phonevallabel">&nbsp;{{commObj['comWhatsappCountryCode']}}
                                                                            {{commObj['comWhatsappNo']}}</span>
                                                                        <a class="mgn-lt-5 lnk pointer-cursor"></a>
                                                                    </div>
                                                                    <div class="">
                                                                        <i class="fa fa-envelope-o "></i>
                                                                        <span
                                                                            class="mgn-lt-5 emailvallabel">{{commObj['communicationEmail']}}</span>
                                                                        <a class="mgn-lt-5 lnk pointer-cursor">
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="!questionnaireList.labels"
                                                            class="col-sm-12 col-xs-12 chk-btns-div col-md-12 no-padding">
                                                            <a #modal data-toggle="modal"
                                                                data-target="#exampleModalCenter">
                                                            </a>
                                                            <mat-chip-list class="btns">
                                                                <mat-chip
                                                                    [class.mandatoryChip]="selectedService.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                    (click)="handleSideScreen('note');modal.click();">
                                                                    <a class="lnk action pointer-cursor"><i
                                                                            class="fa fa-file-text-o mgn-rt-5"
                                                                            aria-hidden="true"></i>
                                                                        {{selectedService.consumerNoteTitle}}
                                                                        <span
                                                                            *ngIf="selectedService.consumerNoteMandatory">*</span></a>
                                                                </mat-chip>
                                                                <span>
                                                                    <mat-chip
                                                                        [ngClass]="{'br-top-right-0 br-bottom-right-0 margin-right-0': getAttachLength() > 0}">
                                                                        <a class="lnk action pointer-cursor"
                                                                            (click)="imagefile1.click();"><input
                                                                                #imagefile1 type="file"
                                                                                accept="/*;capture=camera"
                                                                                style="display:none;" multiple
                                                                                (change)="filesSelected($event, 'close')"><i
                                                                                class="fa fa-paperclip mgn-rt-5"
                                                                                aria-hidden="true"></i>Upload File
                                                                        </a>
                                                                    </mat-chip>
                                                                    <mat-chip *ngIf="getAttachLength() > 0"
                                                                        class="br-top-left-0 br-bottom-left-0 margin-left-0">
                                                                        <a class="lnk action pointer-cursor"
                                                                            (click)="viewAttachments()">
                                                                            View (<span>{{getAttachLength()}}</span>)
                                                                        </a>
                                                                    </mat-chip>
                                                                </span>
                                                            </mat-chip-list>
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-5 no-padding"
                                                                *ngIf="(s3CouponsList.JC.length > 0) && type != 'waitlistreschedule' || (s3CouponsList.OWN.length > 0) && type != 'waitlistreschedule'">
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length === 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">Apply
                                                                    Coupon Code</a>
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length > 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">
                                                                    Coupon code added</a>
                                                                {{selected_coupons.toString()}}
                                                            </div>
                                                            <div *ngFor="let coupon of paymentDetails.jCouponList | keyvalue"
                                                                style="text-align: initial;">
                                                                <small class="black rupee-font"
                                                                    *ngIf="coupon.value.value !== '0.0'">You saved
                                                                    {{coupon.value.value | currency:'&#8377;'}} on
                                                                    {{coupon.key}}
                                                                </small>
                                                                <small class="black"
                                                                    *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
                                                                    will be honored if all the rules are met
                                                                    &nbsp;<small *ngIf="coupon.value.value === '0.0'"
                                                                        class="blue custId-cursor"
                                                                        (click)="showJCCouponNote(coupon)"
                                                                        aria-hidden="true">Know more</small></small>
                                                            </div>
                                                            <div
                                                                *ngFor="let coupon of paymentDetails.proCouponList | keyvalue">
                                                                <small class="black rupee-font"
                                                                    *ngIf="coupon.value.value !== '0.0'">You saved
                                                                    {{coupon.value.value | currency:'&#8377;'}} on
                                                                    {{coupon.key}}
                                                                </small>
                                                                <small class="black"
                                                                    *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
                                                                    will be honored if all the rules are met
                                                                    &nbsp;<small *ngIf="coupon.value.value === '0.0'"
                                                                        class="blue custId-cursor"
                                                                        (click)="showJCCouponNote(coupon)"
                                                                        aria-hidden="true">Know more</small></small>
                                                            </div>
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-20">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20 no-padding">
                                                                    <div class="checkin-btn-bp pointer-cursor"
                                                                        *ngIf="type == 'waitlistreschedule'"
                                                                        [class.disableActn]="(queuejson && queuejson.length == 0 && !api_loading1) || callingModes === '' || disableButn()"
                                                                        (click)="rescheduleWaitlist()">
                                                                        Reschedule
                                                                        <i class="fa fa-long-arrow-right mgn-lt-5"></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="type != 'waitlistreschedule' && !selectedService.isPrePayment"
                                                class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')"
                                                    [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                    Next
                                                </button>
                                            </div>
                                            <div *ngIf="type != 'waitlistreschedule' && selectedService.isPrePayment && questionnaireList.labels && questionnaireList.labels.length > 0"
                                                class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')"
                                                    [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                    Next
                                                </button>
                                            </div>
                                            <div *ngIf="type != 'waitlistreschedule' && selectedService.isPrePayment && !questionnaireList.labels"
                                                class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')"
                                                    [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                    Proceed to Payment
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="close-btn">
                                                    <button type="button" class="close" aria-label="Close"
                                                        data-dismiss="modal" (click)="popupClosed()">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <ng-container *ngIf="action=='members'">
                                                    <div class="modal-body">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
                                                            <div class="pull-left"> Booking for
                                                            </div>
                                                            <a class="lnk pointer-cursoraction mgn-lt-20"
                                                                *ngIf="selectedService.serviceType !== 'virtualService'"
                                                                (click)="addMember()"><i class="fa fa-user-plus"></i>
                                                                {{add_member_cap}}</a>
                                                        </div>
                                                        <app-members (memberSelected)="memberSelected($event)"
                                                            [maxSelection]="maxsize" [selectedMember]="waitlist_for"
                                                            [familyMembers]="familyMembers"
                                                            [multiple]="multipleMembers_allowed"
                                                            [allowSelection]="selectedService.serviceType !== 'virtualService'?true:false"
                                                            [parentCustomer]="parentCustomer"></app-members>

                                                        <app-communications
                                                            (setCommunications)="setCommunications" [commObj]="commObj"
                                                            [selectedMember]="waitlist_for"
                                                            [selectedService]="selectedService"
                                                            [parentCustomer]="parentCustomer">
                                                        </app-communications>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='attachment'">
                                                    <div class="modal-body">
                                                        <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                                            <mat-chip-list class="btns">
                                                                <mat-chip><a class="lnk action pointer-cursor"
                                                                        (click)="imagefile.click()"><input #imagefile
                                                                            type="file" accept="/*;capture=camera"
                                                                            style="display:none;" multiple
                                                                            (change)="filesSelected($event)"><i
                                                                            class="fa fa-paperclip mgn-rt-5"
                                                                            aria-hidden="true"></i>Upload
                                                                        File</a></mat-chip>
                                                            </mat-chip-list>
                                                        </div>
                                                        <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 bold pad-top-10 mgn-up-10 mgn-bt-10 border-tp"
                                                            *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                            Uploaded Files
                                                        </div>
                                                        <div class="img-section mgn-up-20"
                                                            *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                            <ul class="galul">
                                                                <ng-container
                                                                    *ngIf="type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0">
                                                                    <li
                                                                        *ngFor="let file of waitlist.attchment;let i = index ">
                                                                        <div class="galimg_outer"
                                                                            *ngIf="getThumbUrl(file)">
                                                                            <div class="gal_img">
                                                                                <img [src]="getThumbUrl(file)">
                                                                            </div>
                                                                            <div class="gal-input">
                                                                                <input type="text" readonly
                                                                                    value="{{file.caption}}">
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
                                                                    <li
                                                                        *ngFor="let file of selectedMessage.files;let i = index ">
                                                                        <div class="galimg_outer">
                                                                            <div class="gal_img">
                                                                                <img [src]="getImage(selectedMessage.base64[i], file)"
                                                                                    *ngIf="selectedMessage.base64[i]">
                                                                            </div>
                                                                            <div class="gal-input">
                                                                                <input type="text" placeholder="Caption"
                                                                                    [(ngModel)]="imgCaptions[i]"
                                                                                    [ngModelOptions]="{standalone: true}">
                                                                            </div>
                                                                            <div class="gal_action"
                                                                                (click)="deleteTempImage(i)">
                                                                                <i class="fa fa-times-circle"
                                                                                    aria-hidden="true"></i>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ng-container>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='timeChange'">
                                                    <div class="modal-body">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-bt-5 mgn-up-10">
                                                            Choose
                                                            Date
                                                        </div>
                                                        <div class="pull-left brd-round brd-light mgn-up-20">
                                                            <div class="icon-minus pull-left"
                                                                [class.disable]="disableMinus()"
                                                                (click)="calculateDate(-1)">
                                                            </div>
                                                            <div class="pull-left chkindt">{{sel_checkindate |
                                                                date:
                                                                dateFormat}}</div>
                                                            <div class="icon-add pull-left" (click)="calculateDate(1)">
                                                            </div>
                                                        </div>
                                                        <div class="pickerouter caldiv pull-left mgn-up-20">
                                                            <mat-datepicker-toggle matSuffix [for]="picker">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #picker [dateClass]="dateClass.bind(this)">
                                                            </mat-datepicker>
                                                            <input class="" style="visibility: hidden; width:1px"
                                                                type="text" [matDatepicker]="picker" [min]="minDate"
                                                                [max]="maxDate" [value]="ddate"
                                                                (dateChange)="handleFutureDateChange($event)">
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20 mgn-bt-20">
                                                                Choose
                                                                Timings</div>
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 slotdiv no-padding mgn-up-20">
                                                                <mat-chip-list class=""
                                                                    *ngIf="queuejson && queuejson.length > 0">
                                                                    <mat-chip
                                                                        *ngFor="let queue of queuejson, let i= index"
                                                                        [selected]="queue.id === queuejson[this.sel_queue_indx].id"
                                                                        (click)="handleQueueSelection(queue, i)">
                                                                        {{queue.queueSchedule.timeSlots[0]['sTime']
                                                                        + ' - '
                                                                        +
                                                                        queue.queueSchedule.timeSlots[0]['eTime']}}
                                                                    </mat-chip>
                                                                </mat-chip-list>
                                                                <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red"
                                                                    *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                                                    No timings available.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='coupons'">
                                                    <div class="modal-body">
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                            Apply
                                                            Coupon Code
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mgn-up-20">
                                                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                *ngIf="showCouponWB">
                                                                <div
                                                                    class="col-md-12 col-sm-12 col-lg-12 col-xs-12 form-level-settings applybill no-padding">
                                                                    <i class="icon-bell"></i>{{applied_inbilltime}}
                                                                </div>
                                                                <div class="width-60">
                                                                    <div class="input-group">
                                                                        <input [ngClass]="{'invalid':!couponvalid}"
                                                                            (keydown)="clearCouponErrors()"
                                                                            placeholder="Enter coupon code" type="text"
                                                                            class="form-control"
                                                                            [(ngModel)]="selected_coupon"
                                                                            [ngModelOptions]="{standalone: true}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                    style="color: red;" *ngIf="api_cp_error !== null">
                                                                    {{api_cp_error}}</div>
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding mgn-up-10 mgn-bt-20">

                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12 col-lg-12 col-12 mgn-up-20 mgn-bt-30 border-tp pad-up-10"
                                                                *ngIf="couponsList && couponsList.length>0">
                                                                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                    *ngFor="let coupon of couponsList let i=index">
                                                                    <div
                                                                        class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding coupon-add-msg">
                                                                        <div
                                                                            class="col-md-5 col-sm-7 col-xs-7 col-lg-4 no-padding">
                                                                            {{coupon.couponCode}} </div>
                                                                        <div
                                                                            class="col-md-7 col-sm-5 col-xs-5 col-lg-8 delteTC">
                                                                            <span><a *ngIf="coupon.instructions"
                                                                                    (click)="toggleterms(i)"
                                                                                    class="pointer-cursor lnk read-more-checkin">Read
                                                                                    T & C </a></span>
                                                                            <span><a class="pointer-cursor lnk"><i
                                                                                        class="pointer-cursor icon-delete mgn-lt-10 lnk"
                                                                                        (click)="removeJCoupon(i)"
                                                                                        [matTooltipClass]="tooltipcls"
                                                                                        [matTooltip]="'Remove Coupon'"></i></a></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mgn-up-10 pre-instr no-padding"
                                                                        *ngIf="coupon.showme">
                                                                        {{coupon.instructions}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 coupon-outer"
                                                            *ngIf="coupon_status">
                                                            <div class="form-group">
                                                                <span *ngIf="coupon_status=='success'"
                                                                    class="coupon_success">Coupon Code(s)
                                                                    applied
                                                                    successfully</span>
                                                                <span *ngIf="coupon_status=='error'"
                                                                    class="coupon-error">Coupon
                                                                    Code(s) not
                                                                    valid</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='note'">
                                                    <div class="modal-body">
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                            {{selectedService.consumerNoteTitle}}
                                                            <div class="form-level-settings">
                                                                Add any other notes to the provider
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                                            <textarea class="form-control mgn-bt-20 mgn-up-20"
                                                                [(ngModel)]="consumerNote" #consumernote
                                                                [ngModelOptions]="{standalone: true}"
                                                                (change)="handleConsumerNote(consumernote.value)"
                                                                maxlength="1000"
                                                                placeholder="{{note_placeholder}}"></textarea>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='addmember'">
                                                    <div class="modal-body">
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10s">
                                                            <i class="fa fa-arrow-left pointer-cursor"
                                                                (click)="goBack()"></i>
                                                            {{add_member_cap}}
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                            <app-checkin-consumer-add-member [calledFrom]="'checkin'"
                                                                (returnDetails)="handleReturnDetails($event)">
                                                            </app-checkin-consumer-add-member>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <div class="modal-footer">
                                                    <button type="button"
                                                        class="disp-none btn btn-light-primary font-weight-bold"
                                                        data-dismiss="modal" #closebutton>Cancel</button>
                                                    <button type="button"
                                                        class="btn btn-primary font-weight-bold hf-btn"
                                                        (click)="actionCompleted()">Ok</button>
                                                </div>
                                                <div class="error-section" *ngIf="apiError !== ''">
                                                    {{apiError}}
                                                </div>
                                                <div class="error-section success-section" *ngIf="apiSuccess !== ''">
                                                    {{apiSuccess}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding right-part"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 2">
                                        <div class="pad-20 quest-head">
                                            We need some more information
                                        </div>
                                        <app-questionnaire [questionnaireList]="questionnaireList"
                                            [questionAnswers]="questionAnswers" [source]="'consCheckin'"
                                            [accountId]="account_id" (returnAnswers)="getQuestionAnswers($event)">
                                        </app-questionnaire>
                                        <div class="d-flex flex-column-fluid width-100">
                                            <div class="col-xl-12 force_center note-pad">
                                                <div class="form-group card mgn-0">
                                                    <label class="col-12 quest">Add any other notes to the provider or
                                                        upload any files for provider view
                                                    </label>
                                                    <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                                        <a #modal data-toggle="modal" data-target="#exampleModalCenter">
                                                        </a>
                                                        <mat-chip-list class="btns">
                                                            <mat-chip
                                                                [class.mandatoryChip]="selectedService.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                (click)="handleSideScreen('note');modal.click();">
                                                                <a class="lnk action pointer-cursor"><i
                                                                        class="fa fa-file-text-o mgn-rt-5"
                                                                        aria-hidden="true"></i>
                                                                    {{selectedService.consumerNoteTitle}}
                                                                    <span
                                                                        *ngIf="selectedService.consumerNoteMandatory">*</span></a>
                                                            </mat-chip>
                                                            <span>
                                                                <mat-chip
                                                                    [ngClass]="{'br-top-right-0 br-bottom-right-0 margin-right-0': getAttachLength() > 0}">
                                                                    <a class="lnk action pointer-cursor"
                                                                        (click)="imagefile1.click();"><input #imagefile1
                                                                            type="file" accept="/*;capture=camera"
                                                                            style="display:none;" multiple
                                                                            (change)="filesSelected($event, 'close')"><i
                                                                            class="fa fa-paperclip mgn-rt-5"
                                                                            aria-hidden="true"></i>Upload File
                                                                    </a>
                                                                </mat-chip>
                                                                <mat-chip *ngIf="getAttachLength() > 0"
                                                                    class="br-top-left-0 br-bottom-left-0 margin-left-0">
                                                                    <a class="lnk action pointer-cursor"
                                                                        (click)="viewAttachments()">
                                                                        View (<span>{{getAttachLength()}}</span>)
                                                                    </a>
                                                                </mat-chip>
                                                            </span>
                                                        </mat-chip-list>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 hf-double-btn-container">
                                            <div class="mr-2">
                                                <button type="button"
                                                    class="next-button btn btn-light-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('prev')">
                                                    Go Back
                                                </button>
                                            </div>
                                            <div *ngIf="!selectedService.isPrePayment">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')">
                                                    Next
                                                </button>
                                            </div>
                                            <div *ngIf="selectedService.isPrePayment">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')">
                                                    Proceed to Payment
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding"
                                            data-wizard-type="step-content" data-wizard-state="current"
                                            *ngIf="bookStep === 3">
                                            <div *ngIf="api_loading_video" class="incomplete-msg">
                                                <div style="padding: 0 30px;">
                                                    Files are Uploading...
                                                </div>
                                            </div>
                                            <app-common-innerloading-spinner *ngIf="api_loading_video">
                                            </app-common-innerloading-spinner>
                                        </div>
                                        <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding right-part"
                                            data-wizard-type="step-content" data-wizard-state="current"
                                            *ngIf="bookStep === 3" [ngClass]="{'highlight': api_loading_video}">
                                            <div class="confirm-head mgn-up-20">Review & Confirm</div>
                                            <div class="bookdetails">
                                                <div class="disp-flex" *ngIf="!selectedService.provider">
                                                    <span class="billing-head">Provider</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span
                                                        class="billing-value name-line-ht">{{businessjson.businessName}}</span>
                                                </div>
                                                <div class="disp-flex" *ngIf="selectedService.provider">
                                                    <span class="billing-head">Provider</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span
                                                        class="billing-value name-line-ht">{{getUserName(selectedService.provider.id)}},
                                                        {{businessjson.businessName}}</span>
                                                </div>
                                                <div class="disp-flex">
                                                    <span class="billing-head">Location</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span class="billing-value"> {{locationName}}</span>
                                                </div>
                                                <div class="disp-flex">
                                                    <span class="billing-head"
                                                        style="display: flex !important; align-items: center !important;margin-bottom: 5px;">Service</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span class="billing-value disp-flex align-items-center">
                                                        <span class="service-icon"
                                                            style="display: inline-block !important;"
                                                            *ngIf="selectedService.serviceType == 'virtualService'">
                                                            <i class="fa phon-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                            <i class="fa meet-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                            <i class="fa zoom-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                            <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                                *ngIf="selectedService.virtualCallingModes  && selectedService.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                            <i class="fa wtsapaud-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType ==='audioService'"></i>
                                                            <i class="fa wtsapvid-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType ==='videoService'"></i>
                                                        </span>
                                                        <span class="mgn-bt-5">{{selectedService.name}}</span>
                                                    </span>
                                                </div>
                                                <div class="disp-flex">
                                                    <span class="billing-head" *ngIf="settingsjson.showTokenId">Token
                                                        for</span>
                                                    <span class="billing-head"
                                                        *ngIf="!settingsjson.showTokenId">Check-in
                                                        for</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span class="billing-value">
                                                        <span *ngFor="let customer of waitlist_for; let i = index;">
                                                            {{customer.firstName}}
                                                            {{customer.lastName}}{{i < waitlist_for.length-1 ? ", " : ""
                                                                }} </span>
                                                        </span>
                                                </div>
                                                <div class="disp-flex">
                                                    <span class="billing-head">Contact #</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span
                                                        class="billing-value">{{commObj['communicationPhCountryCode']}}
                                                        {{commObj['communicationPhNo']}} </span>
                                                </div>
                                                <div class="disp-flex"
                                                    *ngIf="selectedService && selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                    <span class="billing-head">WhatsApp #</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span
                                                        class="billing-value">{{this.commObj['comWhatsappCountryCode']}}
                                                        {{this.commObj['comWhatsappNo']}} </span>
                                                </div>
                                                <div class="disp-flex">
                                                    <span class="billing-head">Email</span>
                                                    <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                    <span class="billing-value"
                                                        style="word-break: break-all;">{{this.commObj['communicationEmail']}}</span>
                                                </div>
                                            </div>
                                            <div class="containerAppt textcenter"
                                                *ngIf="!theme || theme != 'heartfulness_theme1'">
                                                <div class="mgn-up-10 no-mgn-bt bold">
                                                    <span>{{settingsjson.showTokenId?'Token For':'Checkin For'}}
                                                        :&nbsp;</span>
                                                    <span>
                                                        <span class="service-icon"
                                                            style="display: inline-block !important;"
                                                            *ngIf="selectedService.serviceType == 'virtualService'">
                                                            <i class="fa phon-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                            <i class="fa meet-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                            <i class="fa zoom-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                            <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                                *ngIf="selectedService.virtualCallingModes  && selectedService.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                            <i class="fa wtsapaud-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType ==='audioService'"></i>
                                                            <i class="fa wtsapvid-icon"
                                                                *ngIf="selectedService.virtualCallingModes && selectedService.virtualCallingModes[0].callingMode === 'WhatsApp' && selectedService.virtualServiceType ==='videoService'"></i>
                                                        </span>
                                                        <span>{{selectedService.name}}</span>
                                                    </span>
                                                </div>
                                                <div class="mgn-bt-5">
                                                    <span *ngIf="!isFuturedate">Today, </span>
                                                    <span *ngIf="isFuturedate">{{selectedDate | date:
                                                        newDateFormat}},
                                                    </span>
                                                    <span>
                                                        {{selectedQTime}}
                                                    </span>
                                                </div>
                                                <div class="no-mgn-bt bold" *ngIf="wt_personaahead"> Waiting in line
                                                </div>
                                                <div class="mgn-bt-10 pad-bt-10" *ngIf="wt_personaahead">
                                                    <span *ngIf="personsAhead <= 0">0 People</span>
                                                    <span *ngIf="personsAhead == 1">1<span>
                                                            Person</span></span>
                                                    <span *ngIf="personsAhead > 1">{{personsAhead}}<span>
                                                            People</span>
                                                    </span>
                                                    <span *ngIf="serviceTime=='' && calc_mode!='NoCalc'">
                                                        <span class="color-grey">\</span>
                                                        <span>{{waitingTime}}</span>

                                                    </span>
                                                    <span *ngIf="serviceTime!='' && calc_mode!='NoCalc'">
                                                        <ng-container *ngIf="!isFuturedate">
                                                            <span><span class="color-grey"> \
                                                                </span>{{serviceTime}}</span>
                                                        </ng-container>
                                                    </span>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="web">
                                                    <div class="textcenter"
                                                        *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                        <span class="ser_price no-mgn-bt bold">Service Price : <span
                                                                class="ser_price no-mgn-bt bold rupee-font">{{paymentDetails.netTotal
                                                                | currency:'&#8377;'}}</span></span>
                                                        <span class="ser_price no-mgn-bt bold"
                                                            style="padding: 20px !important;">Payment required now :
                                                            <span
                                                                class="ser_price no-mgn-bt bold rupee-font">{{(checkJcash
                                                                ? payAmount : paymentDetails.amountRequiredNow)|
                                                                currency:'&#8377;'}}</span></span>
                                                    </div>
                                                </div>
                                                <div class="disply">
                                                    <div class="textcenter"
                                                        *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                        <span class="ser_price no-mgn-bt bold">Service Price : <span
                                                                class="ser_price no-mgn-bt bold rupee-font">{{paymentDetails.netTotal
                                                                | currency:'&#8377;'}}</span></span><br>
                                                        <span class="ser_price no-mgn-bt bold"
                                                            style="padding: 20px !important;">Payment required now :
                                                            <span
                                                                class="ser_price no-mgn-bt bold rupee-font">{{(checkJcash
                                                                ? payAmount : paymentDetails.amountRequiredNow)|
                                                                currency:'&#8377;'}}</span></span>
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="containerpayment "
                                                    *ngIf="selectedService && selectedService.isPrePayment && paymentLength>0 && paymentDetails.amountRequiredNow > 0">
                                                    <div class="jaldeecredit" *ngIf="jcashamount>0">
                                                        <mat-checkbox [(ngModel)]="checkJcash"
                                                            [ngModelOptions]="{standalone: true}"
                                                            (change)="changeJcashUse($event)"></mat-checkbox>
                                                        Use Jaldee cash balance : <span
                                                            class="rupee-font">{{jcashamount|
                                                            currency:'&#8377;'}}</span>
                                                    </div>
                                                    <div class="creditleft"
                                                        *ngIf="jcashamount>0  && (checkJcash && jcashamount < paymentDetails.amountRequiredNow)">
                                                        Balance amount can be paid by other payment methods
                                                    </div>
                                                    <!-- <div class="prepayment"> -->
                                                    <div class="prepayment"
                                                        *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
                                                      ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
                                                        <!-- Payment required now : &nbsp;
                                                <span *ngIf="!checkJcash"class="rupee-font">{{paymentDetails.amountRequiredNow |
                                                    currency:'&#8377;'}}
                                                </span>
                                                <span *ngIf="checkJcash" class="rupee-font">{{payAmount |
                                                    currency:'&#8377;'}}
                                                </span> -->
                                                        <button type="button" [class.disabled]="isClickedOnce"
                                                            (click)="!isClickedOnce && saveCheckin('checkin')"
                                                            id="stepThreeConfirmButton"
                                                            class="next-button btn btn-primary font-weight-bold  px-12 py-4"
                                                            [disabled]="!checkPolicy && heartfulnessAccount||paymentBtnDisabled">
                                                            <ng-container
                                                                *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
                                                      ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
                                                                Confirm {{settingsjson.showTokenId?'Token ':'Checkin'}}
                                                            </ng-container>
                                                            <!-- <ng-container
                                                     *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                     Proceed to pay <span >Rs {{checkJcash ? payAmount : paymentDetails.amountRequiredNow}}</span></ng-container> -->
                                                        </button>
                                                        <!-- <button type="button" appPreventDoubleClick (click)="saveCheckin('checkin')" id="stepThreeConfirmButton" [disabled]="paymentBtnDisabled" class="next-button btn btn-primary font-weight-bold  px-12 py-4" [disabled]="!checkPolicy && heartfulnessAccount">
                                                <ng-container
                                                 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                 Proceed to pay <span >Rs {{checkJcash ? payAmount : paymentDetails.amountRequiredNow}}</span></ng-container>
                                            </button>
                                            <button type="button" appPreventDoubleClick (click)="saveCheckin('checkin','paytm')" id="stepThreeConfirmButton" [disabled]="paymentBtnDisabled" class="next-button btn btn-primary font-weight-bold  px-12 py-4" [disabled]="!checkPolicy && heartfulnessAccount">
                                                <ng-container
                                                 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                 Proceed to pay <span >Rs {{checkJcash ? payAmount : paymentDetails.amountRequiredNow}}</span>(payTm)</ng-container>
                                            </button> -->


                                                    </div>
                                                    <!-- <div class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12"
                                                        *ngIf="razorpayEnabled && paytmEnabled">
                                                        <div class="txt-align-center"
                                                            *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                            <p class="jaldeecredit">
                                                                To pay Rs {{checkJcash ? payAmount :
                                                                paymentDetails.amountRequiredNow}} please select any
                                                                payment options
                                                            </p>
                                                            <span type="button" class="razorpay-icon paymenticons"
                                                                [class.disabled]="isClickedOnce"
                                                                *ngIf="razorpayEnabled  && paytmEnabled && paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))"
                                                                [class.disabled]="isClickedOnce"
                                                                (click)="!isClickedOnce && saveCheckin('checkin')">
                                                            </span>&nbsp;&nbsp;
                                                            <span type="button" class="paytm-icon paymenticons"
                                                                [class.disabled]="isClickedOnce"
                                                                *ngIf="paytmEnabled && razorpayEnabled && paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))"
                                                                (click)="!isClickedOnce && saveCheckin('checkin','paytm')">

                                                            </span>
                                                        </div>
                                                    </div> -->
                                                    <!-- <div class="txt-align-center">
                                                        <button type="button"
                                                            class=" next-button btn btn-primary font-weight-bold text-uppercase "
                                                            [class.disabled]="paymentBtnDisabled"
                                                            *ngIf="razorpayEnabled  && !paytmEnabled && paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))"
                                                            (click)="!isClickedOnce && saveCheckin('checkin')">
                                                            Pay by CC/DC/UPI
                                                        </button>
                                                                  <button type="button"
                                                            class="  next-button btn btn-primary font-weight-bold text-uppercase "
                                                            [class.disabled]="isClickedOnce"
                                                            *ngIf="paytmEnabled && !razorpayEnabled && paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))"
                                                            (click)="!isClickedOnce && saveCheckin('checkin','paytm')">
                                                            Pay by CC/DC/UPI
                                                        </button>
                                                    </div> -->
                                                    <!-- <div class="clearfix"></div> -->
                                                    <div *ngIf=" isPayment&& paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                    <ng-container *ngIf="!shownonIndianModes">
                                                        <div *ngFor="let modes of indian_payment_modes">
                                                            <div class="col-xs-12 col-md-6 col-sm-12 col-lg-6">

                                                                    <div class="text-primary payment-mode-card-styles" >
                                                                        
                                                                    <mat-radio-group class="paymentmode card shadow" name="paymentMode" (change)="indian_payment_mode_onchange($event)" labelPosition="before">
                                                                        <mat-radio-button disableRipple="true" [value]="modes.mode">
                                                                            <div class="d-flex justify-content-around">
                                                                                <div class="col-md-8  my-auto mt-5"><span class="m-5">{{modes.modeDisplayName}}</span></div>
                                                                                <div class="col-md-4  my-auto ml-auto"><img class="ordericon pickup" height="75px" width="75px"[src]="getImageSrc(modes.mode)"></div>
                                                                            </div>
                                                                        </mat-radio-button>
                                                                    </mat-radio-group>
                                                                    <!-- <img class="ordericon pickup" height="50px" width="100px"[src]="getImageSrc(modes.mode)"> -->
                                                                    
                                                                    </div>
                                                            </div>

                                                        </div>
                                                    </ng-container>
                                            <ng-container *ngIf="shownonIndianModes">
                                                
                                                <div *ngFor="let modes of non_indian_modes">
                                                    <div class="col-xs-12 col-md-6 col-sm-12 col-lg-6">

                                                            <div class="text-primary payment-mode-card-styles" >
                                                                   
                                                              <mat-radio-group class="paymentmode card shadow" name="paymentMode" (change)="non_indian_modes_onchange($event)">
                                                                <mat-radio-button [value]="modes.mode">
                                                                    <div class="d-flex justify-content-around">
                                                                        <div class="col-md-8  my-auto"><span class="m-5">{{modes.modeDisplayName}}</span></div>
                                                                        <div class="col-md-4  my-auto ml-auto"><img class="ordericon pickup" height="75px" width="75px"[src]="getImageSrc(modes.mode)"></div>
                                                                    </div>
                                                                    </mat-radio-button>
                                                               
                                                
                                                              </mat-radio-group>
                                                              <!-- <img class="ordericon pickup" height="50px" width="100px" [src]="getImageSrc(modes.mode)"> -->
                                                            </div>
                                                            </div>

                                            </div>
                                        </ng-container>
                                    </div>
                                        <div class="card-payment-button">
                                                <div class="col-md-12">

                                                    <div class="txt-align-center pad_link"
                                                        *ngIf="paymentmodes.internationalPay && paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                        <span [class.disabled]="paymentBtnDisabled"
                                                            (click)="togglepaymentMode()"
                                                            class="pointer-cursor"><a
                                                                class="refund_policy">
                                                                <span *ngIf="!shownonIndianModes&&paymentmodes.internationalPay">Non Indian Payment ? Click
                                                                here</span>
                                                                <span *ngIf="shownonIndianModes &&paymentmodes.indiaPay">Indian Payment ? Click
                                                                    here</span>
                                                            </a></span>

                                                    </div>
                               
                                               
                                                    <div class="cancelpolicy mgn-rt-5"
                                                        *ngIf="paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                        <div class="pad_policy"
                                                            *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                            <a data-toggle="modal" data-target="#exampleModal"
                                                                class="refund_policy">Cancellation Policy</a>
                                                        </div>
                                                    </div>
                                                       <div class="txt-align-center">
                                                        <button type="button"
                                                            class=" next-button btn btn-primary font-weight-bold text-uppercase "
                                                            [class.disabled]="paymentBtnDisabled"
                                                            *ngIf=" isPayment&& paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))"
                                                            (click)="!isClickedOnce && saveCheckin('checkin')">
                                                           MaKe Payment
                                                        </button>
                 <!-- <button type="button" [class.disabled]="isClickedOnce"
                                                        (click)="!isClickedOnce && saveCheckin('checkin')"
                                                        id="stepThreeConfirmButton"
                                                        class="next-button btn btn-primary font-weight-bold  px-12 py-4"
                                                        [disabled]="!checkPolicy && heartfulnessAccount||paymentBtnDisabled">
                                                        <ng-container
                                                            *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
                                                  ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
                                                            Confirm {{settingsjson.showTokenId?'Token ':'Checkin'}}
                                                        </ng-container>
                                                        </button>  -->
                                                    </div>
                                                </div>
                                                    <!-- <div class=""
                                                *ngIf="paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                <div class="select-pay"> Payment option</div>
                                                <div class="">
                                                    <span class="razorpay-icon selected-payment"></span>
                                                    <span class="paytm-icon"></span>
                                                </div>
                                                <div
                                                    *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                    <a data-toggle="modal" data-target="#exampleModal"
                                                        class="refund_policy">Cancellation Policy</a>
                                                </div>
                                            </div> -->

                                                <!-- modalbox -->
                                                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <app-refundpolicy></app-refundpolicy>
                                                </div>
                                            </div>
                                            <ng-container *ngIf="heartfulnessAccount">
                                                <app-privacy (approvePolicy)="policyApproved($event)"></app-privacy>
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
</section>