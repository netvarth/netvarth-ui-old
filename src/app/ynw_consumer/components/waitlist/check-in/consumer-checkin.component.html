<div class="card shadow" ng-init="hello()">
    <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4">
        <a class="pull-left back-btn" (click)="goBack('back')"><i class="fa fa-arrow-circle-left"></i>&emsp;<span class="ml-3 back-btn-text">Appointment</span></a>
    </div>
    <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 no-padding">
        <app-header *ngIf="sharedFunctionobj.checkLogin()" [includedfrom]="'checkin'"
            [accountId]="businessId" [customId]="customId"></app-header>
    </div>
</div>
<section #consumer_checkin class="container-fluid" [ngClass]="theme?theme:''">
    <div [ngClass]="{'loadingpaytm': loadingPaytm}"></div>
    <div class="loading-hgt my-5" *ngIf="!questionnaireLoaded">
        <app-common-innerloading-spinner></app-common-innerloading-spinner>
    </div>
    <div class="row my-5" *ngIf="questionnaireLoaded">
        <div class="col-md-4 col-lg-4 col-sm-12 col-xs-12 mt-4 d-flex align-items-stretch">
            
            <div class="card shadow">
                <div class="provider-profile-image text-center m-5">
                    <img src="https://i.ibb.co/ThQYhyZ/M-letter-logo.jpg" width="120px" height="120px" alt="Provider Profile Image" class="rounded-circle shadow-sm">
                </div>
                <div class="provider-details m-5 text-dark text-center" *ngIf="!sel_ser_det.provider">
                    <h3><b>{{businessjson.businessName}}</b></h3>
                    <h6><i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp;{{locationName}}</h6>
                    <h6 *ngIf="businessjson.phoneNumbers[0]" ><i class="fa fa-phone" aria-hidden="true"></i>&nbsp;<span *ngFor="let phone of businessjson.phoneNumbers | slice:0:2 ; index as i">{{businessjson.phoneNumbers[i]}},</span></h6>
                    <h6 *ngIf="businessjson.emails[0]"><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;<span *ngFor="let email of businessjson.emails | slice:0:2 ; index as i">{{businessjson.emails[i]}}</span></h6>
                    
                </div>
                <div class="booking-img"></div>
            </div>
        </div>
        <div class="col-md-8 col-lg-8 col-sm-12 col-xs-12 mt-4 d-flex align-items-stretch" >
            <div class="card shadow">



                <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 no-padding right-part"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 0">
                    <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding pull-right border-left">
                        <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding check-new-group border-tp border-rt">
                            <div class="col-md-12 col-xs-12 col-sm-12 no-padding border-bt"
                                *ngIf="this.selectedUserParam && selectedUser">
                                <div class="col-sm-2 col-xs-3 col-md-4 ">
                                    <img class="card-img" [src]="getPic(selectedUser)"
                                        alt="Profile Pic">
                                </div>
                                <div class="col-sm-10 col-xs-9 col-md-8 no-padding">
                                    <div class="">
                                        <h6 class="card-title mgn-up-5">
                                            <span
                                                *ngIf="selectedUser.businessName">{{selectedUser.businessName}}</span>
                                            <span
                                                *ngIf="!selectedUser.businessName">{{selectedUser.businessName}}</span>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10"
                                *ngIf="hideTokenFor">
                                <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 mgn-up-5">
                                    {{showCheckinButtonCaption()}} For
                                </div>
                                <div class="col-sm-12 col-xs-12 col-md-12">
                                    <div class="" *ngIf="sel_ser || type == 'waitlistreschedule'">
                                        <div class="service-icon pull-left"
                                            *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                            <i class="fa phon-icon"
                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                            <i class="fa meet-icon"
                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                            <i class="fa zoom-icon zoom1"
                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                            <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                *ngIf="sel_ser_det.virtualCallingModes  && sel_ser_det.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                            <i class="fa wtsapaud-icon"
                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'audioService'"></i>
                                            <i class="fa wtsapvid-icon"
                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'videoService'"></i>
                                        </div>
                                        <h6 class="card-title service mgn-bt-10">
                                            {{sel_ser_det.name}}
                                        </h6>
                                        <div class="" style="font-size: 1rem"
                                            *ngIf="sel_ser_det.price && type != 'reschedule'">
                                            <p class="module-nomargin line-clamp no-margin"
                                                *ngIf="sel_ser_det.description && !showmoreSpec"
                                                (click)="showSpec()">
                                                {{sel_ser_det.description}}</p>
                                            <p *ngIf="showmoreSpec" (click)="showSpec()">
                                                {{sel_ser_det.description}}</p>
                                        </div>
                                        <div class="">
                                            <div class="callingmode mgn-lt-10"
                                                *ngIf="sel_ser_det && sel_ser_det.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                <div class="mgn-bt-10 mgn-up-5">
                                                    <div class=""
                                                        *ngFor="let mode of sel_ser_det.virtualCallingModes;let i = index">
                                                        <div style="visibility: hidden;">
                                                            {{callingModesDisplayName[mode.callingMode]}}
                                                        </div>
                                                        <div class="cal-mod-instrct pre-check-title color-grey"
                                                            *ngIf="mode.callingMode">
                                                            {{mode.instructions}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="prenotes mgn-bt-10"
                                                *ngIf="sel_ser_det.preInfoEnabled">
                                                <div class="preinfo-title">
                                                    {{sel_ser_det.preInfoTitle}}</div>
                                                <div>{{(readMore) ? sel_ser_det.preInfoText :
                                                    sel_ser_det.preInfoText | slice:0:200}}
                                                    <a class="changeitem pointer-cursor mgn-lt-5 mgn-rt-20 pull-right"
                                                        (click)="showText()"
                                                        *ngIf="sel_ser_det.preInfoText.length > 200">
                                                        {{(readMore) ? 'less': 'more'}}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">

                            <form [formGroup]="virtualForm"
                                class="login-form custom-login-form consumer-join-component virtual-fields"
                                [ngClass]="theme?theme:''" novalidate>
                                <div class="cust-loginpge-color">
                                    <div class="mat-dialog-content"
                                        style="overflow: auto !important;">
                                        <div *ngIf="hideLanguages">
                                            <div class="mgn-up-10 ">
                                                <label class="col-form-label"
                                                    for="name">Consultation For </label>


                                                <br />
                                                <div class="form-group form-inline">

                                                    <!-- <mat-form-field> -->
                                                    <mat-radio-group formControlName="serviceFor"
                                                        class="mgn-up-5 userGroup m-0 p-2"
                                                        (change)="onServiceForChange($event.value)">
                                                        <mat-radio-button
                                                            [value]="customer_data.id">
                                                            {{customer_data.userProfile.firstName}}
                                                            {{customer_data.userProfile.lastName}}
                                                        </mat-radio-button>
                                                        <!-- <ng-container *ngIf="familymember.length>0"> -->
                                                        <!-- {{familymember.length}} -->
                                                        <mat-radio-button class="flx"
                                                            [value]="member.user"
                                                            *ngFor="let member of familymember">
                                                            {{member.userProfile.firstName}}
                                                            &nbsp;
                                                            {{member.userProfile.lastName}}
                                                        </mat-radio-button>
                                                        <!-- </ng-container>  (change)="OnNewMember($event.value)"-->
                                                        <mat-radio-button value="new_member">
                                                            Someone
                                                            else</mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                            </div>

                                            <fieldset>
                                                <div class="mgn-up-10 mgn-bt-10"
                                                    style="font-size: 0.75rem !important; display: flex !important;justify-content: left;">
                                                    Please provide basic information about the
                                                    &nbsp;
                                                    <span
                                                        style="margin-right: 5px;padding-right: 5px;">{{consumer_label}}</span>
                                                    <!-- <a (click)="goToEdit()"
                                                        *ngIf="!hideEditButton"><i
                                                            class="fa fa-edit fa-1x"
                                                            style="font-size: large;color: blue;"
                                                            data-bs-toggle="tooltip"
                                                            data-bs-placement="right"
                                                            title="Edit"></i>
                                                    </a> -->


                                                </div>

                                                <div class="form-group"
                                                    *ngIf="virtualForm.get('serviceFor').value==='new_member'">
                                                    <label class="col-form-label"
                                                        for="firstName">First
                                                        Name <span class="red">*</span></label>
                                                    <input placeholder="Enter your first name"
                                                        class="form-control" style="width:50%"
                                                        formControlName="firstName"
                                                        [ngStyle]="{'background-color': bgColor}">
                                                </div>
                                                <div class="form-group "
                                                    *ngIf="virtualForm.get('serviceFor').value==='new_member'">
                                                    <label class="col-form-label"
                                                        for="lastName">Last
                                                        Name <span class="red">*</span></label>
                                                    <input placeholder="Enter your last name"
                                                        class="form-control" style="width:50%"
                                                        formControlName="lastName"
                                                        [ngStyle]="{'background-color': bgColor}">
                                                </div>
                                                
                                                <!-- <mat-label for="gender">{{gender_cap}} <span class="red">*</span></mat-label> -->
                                                <div class="form-group">
                                                    <label class="col-form-label"
                                                        for="gender">{{gender_cap}} <span
                                                            class="red">*</span></label>
                                                    <br />
                                                    <mat-radio-group formControlName="gender"
                                                        
                                                        class=" m-0 p-2">
                                                        <!-- [ngClass]="{disabledDiv: !editable}" -->
                                                        <mat-radio-button value="male" class="mx-2">Male
                                                        </mat-radio-button>
                                                        <mat-radio-button value="female" class="mx-2">Female
                                                        </mat-radio-button>
                                                        <mat-radio-button value="other">Other
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                    <app-field-error-display
                                                        [displayError]="fed_service.isFieldValid(virtualForm,'gender')"
                                                        errorMsg="Please select the gender.">
                                                    </app-field-error-display>
                                                </div>

                                                <div class="form-group ">
                                                    <label class="col-form-label"
                                                        for="lastName">Age(in
                                                        years)<span class="red">*</span></label><br>
                                                        <!-- [ngClass]="{disabledDiv: !editable}" -->
                                                    <input type="text" min="1" max="150"
                                                        
                                                        class="form-control vt_dt no-padding mgn-up-5"
                                                        formControlName="age" style="width:50%"
                                                        (keypress)=isNumeric($event)
                                                        [ngStyle]="{'color': bgColor}">
                                                    <div
                                                        style="display: flex; justify-content: space-between;">
                                                        <app-field-error-display
                                                            [displayError]="fed_service.isFieldValid(virtualForm,'age') "
                                                            [errorMsgs]="fed_service.getErrorMessage(virtualForm,'age',
                                                            {
                                                                'required' : 'Age is required',
                                                                'min' : 'Minimum age required is 0',
                                                                'max' : 'Maximum age is 150'
                                                            
                                                            })">
                                                        </app-field-error-display>
                                                    </div>
                                                </div>



                                                <!-- Signin Password -->
                                                <div class="form-group pwd"
                                                    *ngIf="countryCode=='+91'">
                                                    <!-- <mat-form-field> -->
                                                    <label for="pincode"
                                                        class="col-form-label">Residing
                                                        Pincode in
                                                        India <span class="red">*</span></label>
                                                        <!--  [ngClass]="{disabledDiv: !editable}" -->
                                                    <input type="text" placeholder="xxxxxx"
                                                        class="form-control vt_dt no-padding mgn-up-5"
                                                        id="location" formControlName="pincode"
                                                        
                                                        (keypress)="isNumeric($event)"
                                                        (keyup)="showLocations($event)"
                                                        style="width:50%"
                                                        [ngStyle]="{'background-color': bgColor}">
                                                    <!-- </mat-form-field> -->
                                                    <div
                                                        style="display: flex; justify-content: space-between;">
                                                        <app-field-error-display
                                                            [displayError]="fed_service.isFieldValid(virtualForm,'pincode')"
                                                            errorMsg="Pincode is required">
                                                        </app-field-error-display>
                                                    </div>
                                                    <app-common-innerloading-spinner
                                                        *ngIf="loading">
                                                    </app-common-innerloading-spinner>
                                                    <div *ngIf="!loading && locations"
                                                        class="mgn-up-10">
                                                        <mat-radio-group
                                                            aria-label="Select your location"
                                                            class="mgn-up-5"
                                                            formControlName='location'>
                                                            <mat-radio-button
                                                                *ngFor="let location of locations.PostOffice"
                                                                [value]="location">
                                                                {{location.Name}},
                                                                {{location.State}}
                                                            </mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                </div>
                                                <div class="form-group "
                                                    *ngIf="countryCode!=='+91'">
                                                    <label class="col-form-label"
                                                        for="lastName">Location <span
                                                            class="red">*</span></label>
                                                            <!--  [ngClass]="{disabledDiv: !editable}" -->
                                                    <input placeholder="Enter your location"
                                                        class="form-control"
                                                        
                                                        formControlName="localarea"
                                                        [ngStyle]="{'background-color': bgColor}">
                                                </div>
                                                <div class="form-group" *ngIf="countryCode!=='+91'">
                                                    <label class="col-form-label" for="firstName">
                                                        Residing State<span
                                                            class="red">*</span></label>
                                                    <input placeholder="Enter your state"
                                                        class="form-control" formControlName="state"
                                                        [ngStyle]="{'background-color': bgColor}">
                                                </div>

                                                <!-- Signin Password -->
                                                <div class="form-group" id="plng"
                                                    *ngIf="lngknown==='yes'">
                                                    <!-- <mat-form-field> -->
                                                    <label class="col-form-label" for="v">Select
                                                        your preferred language <span
                                                            class="red">*</span></label>
                                                    <br />
                                                    <!-- [ngClass]="{disabledDiv: !editable}" -->
                                                    <mat-radio-group aria-label="Select an option"
                                                        (change)="onChange($event)"
                                                        
                                                        class="mgn-up-5  m-0 p-2"
                                                        formControlName="islanguage">
                                                        <mat-radio-button value="yes" class="mx-2">English
                                                        </mat-radio-button>
                                                        <mat-radio-button value="no">Other Languages
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                    <!-- </mat-form-field> -->
                                                    <div
                                                        style="display: flex; justify-content: space-between;">
                                                        <app-field-error-display
                                                            [displayError]="fed_service.isFieldValid(virtualForm,'islanguage') "
                                                            errorMsg="please choose one">
                                                        </app-field-error-display>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>

                                        <div
                                            *ngIf="hideLanguages && virtualForm.get('preferredLanguage').value.length >0 && lngknown==='no'">
                                            <label class="col-form-label"
                                                for="preferredLanguage">{{virtualForm.get('preferredLanguage').value.length
                                                >1?'Your preferred languages': 'Your preferred
                                                language'}}
                                            </label><br />
                                            <fieldset>
                                                <div class="col-form-label edtlang">
                                                    <span
                                                        style="word-wrap: break-word; padding-right: 5px;margin-right: 5px;">{{virtualForm.get('preferredLanguage').value}}</span>

                                                        <!--  [ngClass]="{disabledDiv: !editable}" -->
                                                    <span (click)="editLanguage()"
                                                        
                                                        style="color:rgb(255, 255, 255)"><i
                                                            class="fa fa-edit fa-1x"
                                                            style="font-size: large;"
                                                            data-bs-toggle="tooltip"
                                                            data-bs-placement="right"
                                                            title="Edit"></i></span>
                                                </div>
                                            </fieldset>
                                        </div>



                                        <div *ngIf="!hideLanguages" class="form-group">
                                            <div class="form-group" id="plng"
                                                *ngIf="iseditLanguage">
                                                <!-- <mat-form-field> -->
                                                <label class="col-form-label" for="v">Select
                                                    your preferred language <span
                                                        class="red">*</span></label>
                                                <br /> <br />
                                                <mat-radio-group aria-label="Select an option"
                                                    (change)="onChange($event)" class="mgn-up-5"
                                                    formControlName="islanguage">
                                                    <mat-radio-button value="yes" class="mx-2">English
                                                    </mat-radio-button>
                                                    <mat-radio-button value="no">Other Languages
                                                    </mat-radio-button>
                                                </mat-radio-group><br />
                                                <!-- </mat-form-field> -->
                                                <div
                                                    style="display: flex; justify-content: space-between;">
                                                    <app-field-error-display
                                                        [displayError]="fed_service.isFieldValid(virtualForm,'islanguage') "
                                                        errorMsg="please choose one">
                                                    </app-field-error-display>
                                                </div>
                                            </div>
                                            <div class="form-group">

                                                <label *ngIf="lngknown==='no'"
                                                    class="col-form-label"
                                                    for="preferredLanguage">Choose your
                                                    preferred languages
                                                    <span class="red">*</span></label>
                                            
                                                <div class="form-group form-inline">
                                                    <div class="languagesouter"
                                                        *ngIf="languages.length >0 && lngknown==='no'">
                                                        <div *ngFor="let lang of languages">
                                                            <mat-checkbox
                                                                style="padding-left: 10px;"
                                                                (change)="langSel(lang)"
                                                                [checked]="checklangExists(lang)">
                                                                {{lang}}</mat-checkbox>
                                                        </div>
                                                    </div>
                                                    <div class="actiondiv col-md-12"
                                                        style="margin-top: 15px;display: inline-flex;">
                                                        <button (click)="saveLanguages()"
                                                            type="button" mat-button
                                                            class="cs-btn bt1"
                                                            [disabled]="disableButton">Ok</button>&nbsp;&nbsp;
                                                        <button (click)="cancelLanguageSelection()"
                                                            type="button" mat-button
                                                            class="cs-btn bt1">Cancel</button>
                                                    </div>
                                                </div>
                                                <div
                                                    style="display: flex; justify-content: space-between;">
                                                    <app-field-error-display
                                                        [displayError]="fed_service.isFieldValid(virtualForm,'preferredLanguage')"
                                                        errorMsg="Language is required">
                                                    </app-field-error-display>
                                                </div>
                                            </div>
                                        </div>
                                        <fieldset>

                                            <ng-container *ngIf="hideLanguages">
                                                <label class="col-form-label" for="name">Contact
                                                    Information </label>

                                                <div class="form-level-settings smallfont">
                                                    Provide your contact info for alerts,status
                                                    updates and for any other booking related
                                                    communications
                                                </div>
                                                
                                                <div class="mgn-up-10 mgn-bt-10">
                                                    <label class="col-form-label" for="phone">Phone
                                                        # </label>
                                                    <br />
                                                    {{this.details.userProfile.countryCode}}
                                                    {{this.details.userProfile.primaryMobileNo}}
                                                </div>
                                                <div class="col-xs-12 no-padding optional">
                                                    <label><i class="fa fa-whatsapp"
                                                            style="color:green"></i> Whatsapp
                                                        #</label>
                                                    <div class="disp-flex">
                                                        <div class="form-group no-margin">
                                                            <!-- [ngClass]="{disabledDiv: !editable}" -->
                                                            <input type="text"
                                                                
                                                                (keypress)="isNumericSign($event)"
                                                                matInput
                                                                class="form-control input-group-text"
                                                                id="countryCode_whtsap"
                                                                placeholder=""
                                                                formControlName="countryCode_whtsap"
                                                                autocomplete="off" maxlength="5"
                                                                style="width:60px"
                                                                [ngStyle]="{'background-color': bgColor}">
                                                        </div>
                                                        <div class="form-group width-100">
                                                            <!-- [ngClass]="{disabledDiv: !editable}" -->
                                                            <input type="text"
                                                                
                                                                (keypress)="isNumeric($event)"
                                                                matInput
                                                                class="form-control text-width"
                                                                id="whatsappnumber"
                                                                formControlName="whatsappnumber"
                                                                autocomplete="off" style="width:50%"
                                                                [ngStyle]="{'background-color': bgColor}">
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class=" col-xs-12 no-padding optional">
                                                    <label><i class="fa fa-telegram"
                                                            style="color:#29b6f6;"></i> Telegram
                                                        #</label>
                                                    <div class="disp-flex">

                                                        <div class="form-group no-margin">
                                                            <input type="text"
                                                                
                                                                (keypress)="isNumericSign($event)"
                                                                matInput
                                                                class="form-control input-group-text"
                                                                id="countryCode_telegram"
                                                                placeholder=""
                                                                formControlName="countryCode_telegram"
                                                                autocomplete="off" maxlength="5"
                                                                style="width:60px"
                                                                [ngStyle]="{'background-color': bgColor}">
                                                        </div>
                                                        <div class="form-group width-100">
                                                            <!-- [ngClass]="{disabledDiv: !editable}" -->
                                                            <input type="text"
                                                                
                                                                (keypress)="isNumeric($event)"
                                                                matInput
                                                                class="form-control text-width"
                                                                id="telegramnumber"
                                                                formControlName="telegramnumber"
                                                                autocomplete="off" style="width:50%"
                                                                [ngStyle]="{'background-color': bgColor}">
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group optional">
                                                    <label for="email"
                                                        class="col-form-label">Email</label>
                                                    <input type="email" class="form-control"
                                                        
                                                        formControlName="email" style="width:55%"
                                                        [ngStyle]="{'background-color': bgColor}" />
                                                    <mat-checkbox class="updateemail"
                                                        formControlName="updateEmail">Update Email
                                                        to 'My Account'</mat-checkbox>
                                                    
                                                    <app-field-error-display
                                                        [displayError]="fed_service.isFieldValid(virtualForm,'email')"
                                                        [errorMsgs]="fed_service.getErrorMessage(virtualForm,'email',
                                                    {
                                                        'pattern' : 'Please enter valid email'
                                                    })">
                                                    </app-field-error-display>
                                                </div>
                                            </ng-container>
                                        </fieldset>
                                        <div class="">&nbsp;</div>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>

                    <div
                        class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                        <button type="button"
                            class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                            (click)="goToStep('next')" *ngIf="hideLanguages">
                            Next
                        </button> &nbsp;
                    </div>
                </div>









            <!-- Current Card -->

            <div  data-wizard-type="step-content" data-wizard-state="current" *ngIf="bookStep === 1">
                <div class="appointment-details-heading m-5 pb-0 px-5 py-3 font-weight-bold">
                    <h4 class="text-uppercase">Select Your Date and time</h4>
                </div>
                <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-10 mgn-bt-10 no-padding p-5">
                        <div class="col-md-12 col-xs-12 col-sm-12 lnk text-dark mgn-bt-5 no-padding font-weight-bold text-uppercase"
                            *ngIf="sel_ser_det.serviceType!=='virtualService'">
                            <h3><b>CONSULTATION FOR </b></h3>
                        </div>
                        <div class="col-md-12 col-xs-12 col-sm-12 lnk text-dark mgn-bt-5 no-padding font-weight-bold text-uppercase"
                            *ngIf="sel_ser_det.serviceType==='virtualService'">
                            <h3><b>CONSULTATION FOR </b></h3>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
                            <div>
                                <div *ngIf="type !== 'waitlistreschedule'" class="row">
                                   <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                                        <h1 class="card-title service mgn-bt-10 text-warning"
                                            *ngFor="let member of waitlist_for">    
                                            {{member.firstName | capitalizeFirst}}
                                            {{member.lastName | capitalizeFirst}}
                                        </h1>
                                   </div>
                                   <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                                        <div class="mx-auto">
                                            <a class="text-primary"
                                                data-toggle="modal"
                                                data-target="#exampleModalCenter"
                                                (click)="handleSideScreen('members')"><u>Change</u>
                                            </a>
                                            <a *ngIf="type !== 'waitlistreschedule'&& sel_ser_det.serviceType==='virtualService'"
                                                class="text-primary"
                                                data-toggle="modal"
                                                data-target="#exampleModalCenter"
                                                (click)="handleSideScreen('members')"><u>Change</u>
                                            </a>
                                        </div>
                                   </div>
                                </div>
                                <h6 class="card-title service mgn-bt-10 text-warning"
                                    *ngIf="type === 'waitlistreschedule'">
                                    {{wtlst_for_fname | capitalizeFirst}}
                                    {{wtlst_for_lname | capitalizeFirst}}
                                </h6>
                                <div class="col-md-12 col-xs-12 col-sm-12 text-secondary no-padding lnk my-5">
                                    <b>Contact Information</b>
                                </div>
                                <div class="contact-section">
                                    <i class="fa fa-mobile "></i>
                                    <ng-container
                                        *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && (!changePhno || currentPhone == callingModes)">
                                        <i class="fa wtsapaud-icon wtsap-cal"
                                            *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                        <i class="fa wtsapvid-icon mgn-lt-5"
                                            style="width: 20px;"
                                            *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                    </ng-container>
                                    <i class="fa phon-icon mgn-lt-10"
                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                    <span class="phonevallabel"
                                        *ngIf="userPhone && !changePhno">&nbsp;{{countryCode}}
                                        {{userPhone}}</span>
                                    <span class="phonevallabel"
                                        *ngIf="currentPhone && changePhno">&nbsp;{{countryCode}}
                                        {{currentPhone}}</span><a
                                        class="mgn-lt-5 lnk pointer-cursor">
                                    </a>
                                </div>
                                <div class="contact-section"
                                    *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                    <i class="fa wtsapaud-icon wtsap-cal"
                                        *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                    <i class="fa wtsapvid-icon" style="width: 20px;"
                                        *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                    <span *ngIf="type === 'waitlistreschedule'"
                                        class="phonevallabel">&nbsp;+{{callingModes}}</span>
                                    <span *ngIf="type != 'waitlistreschedule'"
                                        class="phonevallabel">&nbsp;+{{callingModes}}</span><a
                                        class="mgn-lt-5 lnk pointer-cursor">
                                    </a>
                                </div>

                                <div *ngIf="payEmail">
                                    <i class="fa fa-envelope-o"></i>{{payEmail}}
                                    <a class="mgn-lt-5 lnkpointer-cursor"></a>
                                </div>
                                <div *ngIf="!questionnaireList.labels"
                                                            class="col-sm-12 col-xs-12 chk-btns-div col-md-12 no-padding">
                                                            <a #modal data-toggle="modal"
                                                                data-target="#exampleModalCenter">
                                                            </a>
                                                            <mat-chip-list class="btns">
                                                                <mat-chip
                                                                    [class.mandatoryChip]="sel_ser_det.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                    (click)="handleSideScreen('note');modal.click();">
                                                                    <a class="lnk action pointer-cursor"><i
                                                                            class="fa fa-file-text-o mgn-rt-5"
                                                                            aria-hidden="true"></i>
                                                                        {{sel_ser_det.consumerNoteTitle}}
                                                                        <span
                                                                            *ngIf="sel_ser_det.consumerNoteMandatory">*</span></a>
                                                                </mat-chip>
                                                                <span>
                                                                    <mat-chip
                                                                        [ngClass]="{'br-top-right-0 br-bottom-right-0 margin-right-0': getAttachLength() > 0}">
                                                                        <a class="lnk action pointer-cursor"
                                                                            (click)="imagefile1.click();"><input
                                                                                #imagefile1 type="file"
                                                                                accept="/*;capture=camera"
                                                                                style="display:none;" multiple
                                                                                (change)="filesSelected($event, 'close')"><i
                                                                                class="fa fa-paperclip mgn-rt-5"
                                                                                aria-hidden="true"></i>Upload
                                                                            File
                                                                            <!-- <span
                                                                            *ngIf="getAttachLength() > 0">&nbsp;({{getAttachLength()}})</span> -->
                                                                        </a>
                                                                    </mat-chip>
                                                                    <mat-chip *ngIf="getAttachLength() > 0"
                                                                        class="br-top-left-0 br-bottom-left-0 margin-left-0">
                                                                        <a class="lnk action pointer-cursor"
                                                                            (click)="viewAttachments()">
                                                                            View (<span>{{getAttachLength()}}</span>)
                                                                        </a>
                                                                    </mat-chip>
                                                                </span>
                                                            </mat-chip-list>
                                                        </div><br><br><br>
                                <hr>

                                <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10" *ngIf="hideTokenFor">
                                    <div class="col-sm-12 col-xs-12 col-md-12">
                                        <div class="" *ngIf="sel_ser || type == 'waitlistreschedule'">
                                            <div class="service-icon pull-left"
                                                *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                <i class="fa phon-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon zoom1"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                    *ngIf="sel_ser_det.virtualCallingModes  && sel_ser_det.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'videoService'"></i>
                                            </div>
                                            <h6 class="card-title service text-center mgn-bt-10 font-weight-bold">
                                                <h3 class="text-success"><b>{{sel_ser_det.name}}</b></h3>
                                            </h6>
                                            <div class="" style="font-size: 1rem"
                                                *ngIf="sel_ser_det.price && type != 'reschedule'">
                                                <p class="module-nomargin line-clamp no-margin"
                                                    *ngIf="sel_ser_det.description && !showmoreSpec"
                                                    (click)="showSpec()">
                                                    {{sel_ser_det.description}}</p>
                                                <p *ngIf="showmoreSpec" (click)="showSpec()">
                                                    {{sel_ser_det.description}}</p>
                                            </div>
                                            <div class="">
                                                <div class="callingmode mgn-lt-10"
                                                    *ngIf="sel_ser_det && sel_ser_det.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                    <div class="mgn-bt-10 mgn-up-5">
                                                        <div class=""
                                                            *ngFor="let mode of sel_ser_det.virtualCallingModes;let i = index">
                                                            <div style="visibility: hidden;">
                                                                {{callingModesDisplayName[mode.callingMode]}}
                                                            </div>
                                                            <div class="cal-mod-instrct pre-check-title color-grey"
                                                                *ngIf="mode.callingMode">
                                                                {{mode.instructions}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="prenotes mgn-bt-10"
                                                    *ngIf="sel_ser_det.preInfoEnabled">
                                                    <div class="preinfo-title">
                                                        {{sel_ser_det.preInfoTitle}}</div>
                                                    <div>{{(readMore) ? sel_ser_det.preInfoText :
                                                        sel_ser_det.preInfoText | slice:0:200}}
                                                        <a class="changeitem pointer-cursor mgn-lt-5 mgn-rt-20 pull-right"
                                                            (click)="showText()"
                                                            *ngIf="sel_ser_det.preInfoText.length > 200">
                                                            {{(readMore) ? 'less': 'more'}}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                

                                <div class="pb-0 px-auto my-3 font-weight-bold">
                                    <h4 class="text-uppercase"><b>Select Appointment Date </b></h4>
                                </div>

                                <app-date-pagination (date_change_event)=changed_date_value($event)></app-date-pagination>

                                <div class="pb-0 px-auto my-3 font-weight-bold">
                                    <h4 class="text-uppercase"><b>Select Appointment Time </b></h4>
                                </div>


                                <!-- <mat-list role="list">
                                    <mat-list-item role="listitem" class="time_range" *ngFor="let x of time_range; let i = index">
                                        <mat-radio-button color="primary" class="col-md-3 col-lg-3 col-sm-12 col-xs-12 card shadow-sm p-0 mr-2 my-2" [checked]="x == time_range[0]" [value]="x" (change)="handle_time_range_change(x)">
                                            {{x}}
                                        </mat-radio-button>
                                    </mat-list-item>
                                </mat-list> -->





                                <div class="col-md-12 col-xs-12 col-sm-12">
                                    <div class="col-md-12 col-xs-12 col-sm-12 slotdiv">
                                        <mat-chip-list class="time_cards" *ngIf="queuejson && queuejson.length > 0">
                                            <mat-chip *ngFor="let queue of queuejson, let i= index"
                                                [selected]="queue.id === queuejson[this.sel_queue_indx].id"
                                                (click)="handleQueueSelection(queue, i)">
                                                {{queue.queueSchedule.timeSlots[0]['sTime']
                                                + ' - '
                                                +
                                                queue.queueSchedule.timeSlots[0]['eTime']}}
                                            </mat-chip>
                                        </mat-chip-list>
                                        <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red"
                                            *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                            No timings available.
                                        </div>
                                    </div>
                                </div>


                                <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">
                                    <!-- <div class="col-md-12 col-xs-12 col-sm-12 no-padding"
                                        *ngIf="queuejson && queuejson.length != 0 && !api_loading1">
                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                            <h4 class="card-title serv-time border-style text-success">
                                                <span *ngIf="!isFuturedate"><b>Today, </b></span>
                                                <span *ngIf="isFuturedate">{{selectedDate | date:
                                                    newDateFormat}},
                                                </span>
                                                <span>
                                                    <b>{{selectedQTime}}</b>
                                                </span>
                                            </h4>

                                        </div>
                                    </div> -->
                                        <div *ngIf="wt_personaahead" class="col-md-12 col-xs-12 col-sm-12 no-padding lnk">
                                            <b>Waiting in Line</b>
                                        </div>
                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding" *ngIf="wt_personaahead">
                                            <h6 class="text-success serv-time font-weight-bold">
                                                <span *ngIf="personsAhead <= 0">0
                                                    People</span>
                                                <span *ngIf="personsAhead == 1">1<span>
                                                        Person</span></span>
                                                <span *ngIf="personsAhead > 1">{{personsAhead}}<span>
                                                        People</span></span>
                                                <span *ngIf="calc_mode=='NoCalc'">
                                                    <span *ngIf="!isFuturedate">
                                                    </span>
                                                </span>
                                                <span *ngIf="serviceTime=='' && calc_mode!='NoCalc'">
                                                    <span class="color-grey">\</span>
                                                    <span>{{waitingTime}}</span>
                                                </span>
                                                <span *ngIf="serviceTime!='' && calc_mode!='NoCalc'">
                                                    <ng-container *ngIf="isFuturedate">
                                                    </ng-container>
                                                    <ng-container *ngIf="!isFuturedate">
                                                        <span><span class="color-grey"> \
                                                            </span>{{serviceTime}}</span>
                                                    </ng-container>
                                                </span>
                                            </h6>
                                        </div>
                                    <!-- <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red "
                                        *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                        No timings available.
                                        <span><a class="lnk pointer-cursor action mgn-lt-10"
                                                (click)="changeTime()" data-toggle="modal"
                                                data-target="#exampleModalCenter">Change Time
                                            </a>
                                        </span>
                                    </div> -->

                                    


                                    <!-- <div>
                                        <span>
                                            <a class="changeitem pointer-cursor btn btn-info"
                                            (click)="changeTime()" data-toggle="modal"
                                            data-target="#exampleModalCenter">Change Date/Time
                                            </a>
                                        </span> 
                                    </div> -->

                                    <div *ngIf="type != 'waitlistreschedule' && !sel_ser_det.isPrePayment"
                                        class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                        <button type="button"
                                            class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                            (click)="goToStep('next');actionCompleted()"
                                            [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                            Next
                                        </button>
                                    </div>
                                    <div *ngIf="type != 'waitlistreschedule' && sel_ser_det.isPrePayment && questionnaireList.labels && questionnaireList.labels.length > 0"
                                        class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                        <button type="button"
                                            class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                            (click)="goToStep('next');actionCompleted()"
                                            [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                            Next
                                        </button>
                                    </div>
                                    <div *ngIf="type != 'waitlistreschedule' && sel_ser_det.isPrePayment && !questionnaireList.labels"
                                        class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                        <button type="button"
                                            class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                            (click)="goToStep('next');actionCompleted()"
                                            [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                            Proceed to Payment
                                        </button>
                                    </div>  
                                    
                                </div>                              
                            </div>
                        </div>
                    </div>
                </div>
            </div>






            <!-- Proceed to Payment -->




            <div data-wizard-type="step-content" data-wizard-state="current"
            *ngIf="bookStep === 3" [ngClass]="{'highlight': api_loading_video}">
                <div class="appointment-details-heading m-5 pb-0 px-5 py-3 font-weight-bold">
                    <h4 class="text-uppercase">Appointment Summary</h4>
                </div>
                <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-10 mgn-bt-10 no-padding p-5">
                        <div class="col-md-12 col-xs-12 col-sm-12 lnk text-dark mgn-bt-5 no-padding font-weight-bold text-uppercase"
                            *ngIf="sel_ser_det.serviceType!=='virtualService'">
                            <h3><b>CONSULTATION FOR </b></h3>
                        </div>
                        <div class="col-md-12 col-xs-12 col-sm-12 lnk text-dark mgn-bt-5 no-padding font-weight-bold text-uppercase"
                            *ngIf="sel_ser_det.serviceType==='virtualService'">
                            <h3><b>CONSULTATION FOR </b></h3>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
                            <div class="">
                                <div *ngIf="type !== 'waitlistreschedule'">
                                    <h1 class="card-title service mgn-bt-10 text-warning"
                                        *ngFor="let member of waitlist_for">    
                                        {{member.firstName | capitalizeFirst}}
                                        {{member.lastName | capitalizeFirst}}
                                    </h1>
                                </div>
                                <h6 class="card-title service mgn-bt-10 text-warning"
                                    *ngIf="type === 'waitlistreschedule'">
                                    {{wtlst_for_fname | capitalizeFirst}}
                                    {{wtlst_for_lname | capitalizeFirst}}
                                </h6>
                                <div
                                    class="col-md-12 col-xs-12 col-sm-12 text-secondary no-padding lnk mb-3">
                                    <b>Contact Information</b>
                                </div>
                                <div class="contact-section">
                                    <i class="fa fa-mobile "></i>
                                    <ng-container
                                        *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && (!changePhno || currentPhone == callingModes)">
                                        <i class="fa wtsapaud-icon wtsap-cal"
                                            *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                        <i class="fa wtsapvid-icon mgn-lt-5"
                                            style="width: 20px;"
                                            *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                    </ng-container>
                                    <i class="fa phon-icon mgn-lt-10"
                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                    <span class="phonevallabel"
                                        *ngIf="userPhone && !changePhno">&nbsp;{{countryCode}}
                                        {{userPhone}}</span>
                                    <span class="phonevallabel"
                                        *ngIf="currentPhone && changePhno">&nbsp;{{countryCode}}
                                        {{currentPhone}}</span><a
                                        class="mgn-lt-5 lnk pointer-cursor">
                                    </a>
                                </div>
                                <div class="contact-section"
                                    *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                    <i class="fa wtsapaud-icon wtsap-cal"
                                        *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                    <i class="fa wtsapvid-icon" style="width: 20px;"
                                        *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                    <span *ngIf="type === 'waitlistreschedule'"
                                        class="phonevallabel">&nbsp;+{{callingModes}}</span>
                                    <span *ngIf="type != 'waitlistreschedule'"
                                        class="phonevallabel">&nbsp;+{{callingModes}}</span><a
                                        class="mgn-lt-5 lnk pointer-cursor">
                                    </a>
                                </div>

                                <div class="" *ngIf="payEmail">
                                    <i class="fa fa-envelope-o "></i>
                                    <span
                                        class="mgn-lt-5 emailvallabel">{{payEmail}}
                                    </span>
                                    <a class="mgn-lt-5 lnk pointer-cursor"></a>
                                </div>
                               
                                <hr>

                                <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10" *ngIf="hideTokenFor">
                                    <!-- <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 mgn-up-5">
                                        {{showCheckinButtonCaption()}} For
                                    </div> -->
                                    <div class="col-sm-12 col-xs-12 col-md-12">
                                        <div class="" *ngIf="sel_ser || type == 'waitlistreschedule'">
                                            <div class="service-icon pull-left"
                                                *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                <i class="fa phon-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon zoom1"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                    *ngIf="sel_ser_det.virtualCallingModes  && sel_ser_det.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'videoService'"></i>
                                            </div>
                                            <h6 class="card-title service text-center mgn-bt-10 font-weight-bold">
                                                <h3 class="text-success"><b>{{sel_ser_det.name}}</b></h3>
                                            </h6>
                                            <div class="" style="font-size: 1rem"
                                                *ngIf="sel_ser_det.price && type != 'reschedule'">
                                                <p class="module-nomargin line-clamp no-margin"
                                                    *ngIf="sel_ser_det.description && !showmoreSpec"
                                                    (click)="showSpec()">
                                                    {{sel_ser_det.description}}</p>
                                                <p *ngIf="showmoreSpec" (click)="showSpec()">
                                                    {{sel_ser_det.description}}</p>
                                            </div>
                                            <div class="">
                                                <div class="callingmode mgn-lt-10"
                                                    *ngIf="sel_ser_det && sel_ser_det.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                    <div class="mgn-bt-10 mgn-up-5">
                                                        <div class=""
                                                            *ngFor="let mode of sel_ser_det.virtualCallingModes;let i = index">
                                                            <div style="visibility: hidden;">
                                                                {{callingModesDisplayName[mode.callingMode]}}
                                                            </div>
                                                            <div class="cal-mod-instrct pre-check-title color-grey"
                                                                *ngIf="mode.callingMode">
                                                                {{mode.instructions}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="prenotes mgn-bt-10"
                                                    *ngIf="sel_ser_det.preInfoEnabled">
                                                    <div class="preinfo-title">
                                                        {{sel_ser_det.preInfoTitle}}</div>
                                                    <div>{{(readMore) ? sel_ser_det.preInfoText :
                                                        sel_ser_det.preInfoText | slice:0:200}}
                                                        <a class="changeitem pointer-cursor mgn-lt-5 mgn-rt-20 pull-right"
                                                            (click)="showText()"
                                                            *ngIf="sel_ser_det.preInfoText.length > 200">
                                                            {{(readMore) ? 'less': 'more'}}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="pb-0 px-5 py-3 font-weight-bold">
                                    <h4 class="text-uppercase"><b>Your Appointment Date </b></h4>
                                </div>

                                <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">
                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding"
                                        *ngIf="queuejson && queuejson.length != 0 && !api_loading1">
                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                            <h2 class="font-weight-bold text-primary serv-time border-style">
                                                <span *ngIf="!isFuturedate"><b>Today, </b></span>
                                                <span *ngIf="isFuturedate">{{selectedDate | date:
                                                    newDateFormat}},
                                                </span>
                                                <span>
                                                    <b>{{selectedQTime}}</b>
                                                </span>
                                            </h2>

                                        
                                    
                                    
                                    <div>
                                    </div><div class="appointment-details-heading mr-auto pb-0 my-5 px-5 py-3 font-weight-bold" *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                        <h4 class="text-uppercase">Payment Details</h4>
                                    </div>
                                </div>


                                <div>                                        
                                    <div class="web my-5">
                                        <!--<div class="textcenter" *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">-->
                                        <div class="textcenter"
                                            *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                            <span class="ser_price no-mgn-bt bold">Service Price : <span
                                                    class="ser_price no-mgn-bt bold rupee-font">{{paymentDetails.netTotal
                                                    | currency:'&#8377;'}}</span></span>
                                            <span class="ser_price no-mgn-bt bold"
                                                style="padding: 20px !important;">Payment required now :
                                                <span
                                                    class="ser_price no-mgn-bt bold rupee-font">{{(checkJcash
                                                    ? payAmount : paymentDetails.amountRequiredNow)|
                                                    currency:'&#8377;'}}</span></span>
                                        </div>
                                    </div>

                                    <div class="disply my-5">
                                        <div class="textcenter"
                                            *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                            <span class="ser_price no-mgn-bt bold">Service Price : <span
                                                    class="ser_price no-mgn-bt bold rupee-font">{{paymentDetails.netTotal
                                                    | currency:'&#8377;'}}</span></span><br>
                                            <span class="ser_price no-mgn-bt bold"
                                                style="padding: 20px !important;">Payment required now :
                                                <span
                                                    class="ser_price no-mgn-bt bold rupee-font">{{(checkJcash
                                                    ? payAmount : paymentDetails.amountRequiredNow)|
                                                    currency:'&#8377;'}}</span></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="" *ngIf="sel_ser_det && sel_ser_det.isPrePayment && paymentLength>0 && paymentDetails.amountRequiredNow > 0">
                                    <div class="jaldeecredit" *ngIf="jcashamount>0">
                                        <mat-checkbox [(ngModel)]="checkJcash"
                                            (change)="changeJcashUse($event)"></mat-checkbox>
                                        Use Jaldee cash balance : <span
                                            class="rupee-font">{{jcashamount|
                                            currency:'&#8377;'}}</span>
                                    </div>
                                    <div class="creditleft"
                                        *ngIf="jcashamount>0  && (checkJcash && jcashamount < paymentDetails.amountRequiredNow)">
                                        Balance amount can be paid by other payment methods
                                    </div>
                                    <div class="prepayment" *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
                                        ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
                                        
                                        <button type="button" [class.disabled]="isClickedOnce"
                                            (click)="!isClickedOnce && saveCheckin('checkin')"
                                            id="stepThreeConfirmButton"
                                            class="next-button btn btn-primary font-weight-bold  px-12 py-4"
                                            [disabled]="!checkPolicy && heartfulnessAccount||paymentBtnDisabled">
                                            <ng-container
                                                *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
                                            ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
                                                Confirm {{settingsjson.showTokenId?'Token ':'Checkin'}}
                                            </ng-container>
                                            
                                        </button>
                                    </div>
                                    <div class="clearfix"></div>
                                        <ng-container *ngIf="!shownonIndianModes">
                                            <div *ngFor="let modes of indian_payment_modes">
                                                <div class="col-xs-12 col-md-4 col-sm-12 col-lg-4 mt-5">

                                                        <div class="text-primary" >
                                                            
                                                        <mat-radio-group class="paymentmode card shadow" name="paymentMode" (change)="indian_payment_mode_onchange($event)" labelPosition="before">
                                                            <mat-radio-button disableRipple="true" [value]="modes.mode">
                                                                <div class="d-flex justify-content-around text-center">
                                                                    <div class="col-md-3 col-lg-4 col-sm-2 my-auto"><img class="ordericon pickup" height="75px" width="75px"[src]="getImageSrc(modes.mode)"></div>
                                                                    <div class="col-md-9 col-lg-8 col-sm-10 my-auto mr-auto"><span>{{modes.modeDisplayName}}</span></div>
                                                                </div>
                                                            </mat-radio-button>
                                                        </mat-radio-group>
                                                        <!-- <img class="ordericon pickup" height="50px" width="100px"[src]="getImageSrc(modes.mode)"> -->
                                                        
                                                        </div>
                                                </div>

                                            </div>
                                        </ng-container>
                                        <ng-container *ngIf="shownonIndianModes">
                                        
                                            <div *ngFor="let modes of non_indian_modes">
                                            <div class="col-xs-12 col-md-4 col-sm-12 col-lg-4">

                                                    <div class="text-primary" >
                                                        
                                                    <mat-radio-group class="paymentmode card shadow my-2" name="paymentMode" (change)="non_indian_modes_onchange($event)">
                                                        <mat-radio-button [value]="modes.mode">
                                                            <div class="d-flex justify-content-around text-center">
                                                                <div class="col-md-3 col-lg-4 col-sm-2 my-auto"><img class="ordericon pickup" height="75px" width="75px"[src]="getImageSrc(modes.mode)"></div>
                                                                <div class="col-md-9 col-lg-8 col-sm-10 my-auto mr-auto"><span>{{modes.modeDisplayName}}</span></div>
                                                            </div>
                                                            </mat-radio-button>
                                                    
                                        
                                                    </mat-radio-group>
                                                    <!-- <img class="ordericon pickup" height="50px" width="100px" [src]="getImageSrc(modes.mode)"> -->
                                                    </div>
                                                    </div>

                                            </div>
                                        </ng-container>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="card-payment-button">
                                        <div class="col-md-12">

                                            <div class="txt-align-center pad_link"
                                                *ngIf="paymentmodes.internationalPay && paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
                                                <span [class.disabled]="paymentBtnDisabled"
                                                    (click)="togglepaymentMode()"
                                                    class="pointer-cursor"><a
                                                        class="refund_policy">
                                                        <span *ngIf="!shownonIndianModes&&paymentmodes.internationalPay">Non Indian Payment ? Click
                                                        here</span>
                                                        <span *ngIf="shownonIndianModes &&paymentmodes.indiaPay">Indian Payment ? Click
                                                            here</span>
                                                    </a></span>

                                            </div>
                    
                                    
                                            <div class="cancelpolicy mgn-rt-5"
                                                *ngIf="paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                <div class="pad_policy"
                                                    *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                    <a data-toggle="modal" data-target="#exampleModal"
                                                        class="refund_policy">Cancellation Policy</a>
                                                </div>
                                            </div>
                                            <div class="txt-align-center">
                                                <button type="button"
                                                    class=" next-button btn btn-primary font-weight-bold text-uppercase "
                                                    [class.disabled]="paymentBtnDisabled"
                                                    *ngIf="paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))"
                                                    (click)="!isClickedOnce && saveCheckin('checkin')">
                                                MaKe Payment
                                                </button>
                                            </div>
                                        </div>

                                            
                                    </div>


                                        <div class="clearfix"></div>
                                        <div class="containerpayment" style="margin:20px;"
                                            *ngIf="sel_ser_det && sel_ser_det.isPrePayment==false && paymentLength==0|| (paymentDetails && paymentDetails.amountRequiredNow == 0)">
                                            <div class="prepayment-confirm">
                                                <button type="button" [class.disabled]="isClickedOnce"
                                                    (click)="!isClickedOnce && saveCheckin('checkin')"
                                                    id="stepThreeConfirmButton"
                                                    class="next-button btn btn-primary font-weight-bold btn-1 px-12 py-4"
                                                    [disabled]="!checkPolicy && heartfulnessAccount">

                                                    Confirm <span>{{settingsjson.showTokenId?'Token
                                                        ':'Checkin'}} </span></button>


                                            </div>
                                        </div>
                                    </div>
                                </div>                            
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
</section>







<section #consumer_checkin class="c-checkin-new container no-padding" [ngClass]="theme?theme:''">
    <div class="">
        <div class="">
            <app-common-innerloading-spinner *ngIf="loadingPaytm"></app-common-innerloading-spinner>
            <div>
                <div>
                    <div class="card-body p-0">
                        <div class="wizard wizard-1" id="kt_wizard_v1" data-wizard-state="step-first" data-wizard-clickable="false">
                            <div class=""> 
                                <div *ngIf="questionnaireLoaded">
                                    



                                    <div class="col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 1">
                                        <div class="panel-body no-padding">
                                            <div
                                                class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding pull-right border-left">
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding check-new-group border-tp border-rt">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding border-bt"
                                                        *ngIf="this.selectedUserParam && selectedUser">
                                                        <div class="col-sm-2 col-xs-3 col-md-4 ">
                                                            <img class="card-img" [src]="getPic(selectedUser)"
                                                                alt="Profile Pic">
                                                        </div>
                                                        <div class="col-sm-10 col-xs-9 col-md-8 no-padding">
                                                            <div class="">
                                                                <h6 class="card-title mgn-up-5">
                                                                    <span
                                                                        *ngIf="selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                    <span
                                                                        *ngIf="!selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                </h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                </div>
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp check-new-group">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding">                                                   
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-5 no-padding"
                                                                *ngIf="(s3CouponsList.JC.length > 0) && type != 'waitlistreschedule' || (s3CouponsList.OWN.length > 0) && type != 'waitlistreschedule'">
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length === 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">Apply
                                                                    Coupon Code</a>
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length > 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">
                                                                    Coupon code added</a>
                                                                {{selected_coupons.toString()}}
                                                            </div>
                                                            <div *ngFor="let coupon of paymentDetails.jCouponList | keyvalue"
                                                                style="text-align: initial;">
                                                                <small class="black rupee-font"
                                                                    *ngIf="coupon.value.value !== '0.0'">You saved
                                                                    <!-- <i class="fa fa-inr black"></i> -->
                                                                    {{coupon.value.value | currency:'&#8377;'}} on
                                                                    {{coupon.key}}
                                                                </small>
                                                                <small class="black"
                                                                    *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
                                                                    will be honored if all the rules are met
                                                                    &nbsp;<small *ngIf="coupon.value.value === '0.0'"
                                                                        class="blue custId-cursor"
                                                                        (click)="showJCCouponNote(coupon)"
                                                                        aria-hidden="true">Know more</small></small>
                                                            </div>
                                                            <div
                                                                *ngFor="let coupon of paymentDetails.proCouponList | keyvalue">
                                                                <small class="black rupee-font"
                                                                    *ngIf="coupon.value.value !== '0.0'">You saved
                                                                    <!-- <i class="fa fa-inr black"></i> -->
                                                                    {{coupon.value.value | currency:'&#8377;'}} on
                                                                    {{coupon.key}}
                                                                </small>
                                                                <small class="black"
                                                                    *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
                                                                    will be honored if all the rules are met
                                                                    &nbsp;<small *ngIf="coupon.value.value === '0.0'"
                                                                        class="blue custId-cursor"
                                                                        (click)="showJCCouponNote(coupon)"
                                                                        aria-hidden="true">Know more</small></small>
                                                            </div>
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20 no-padding">
                                                                    <div class="checkin-btn-bp pointer-cursor"
                                                                        *ngIf="type == 'waitlistreschedule'"
                                                                        [class.disableActn]="(queuejson && queuejson.length == 0 && !api_loading1) || callingModes === '' || disableButn()"
                                                                        (click)="rescheduleWaitlist()">
                                                                        Reschedule
                                                                        <i class="fa fa-long-arrow-right mgn-lt-5"></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="close-btn">
                                                <button type="button" class="close" aria-label="Close"
                                                    data-dismiss="modal" (click)="popupClosed()">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <ng-container *ngIf="action=='members'">
                                                <div class="modal-body">
                                                    <div
                                                        class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
                                                        <div class="pull-left"> Booking for
                                                        </div>
                                                        <a class="lnk pointer-cursoraction mgn-lt-20"
                                                            *ngIf="sel_ser_det.serviceType !== 'virtualService'"
                                                            (click)="addMember()"><i class="fa fa-user-plus"></i>
                                                            {{add_member_cap}}</a>
                                                    </div>
                                                    <div class="member-outer">
                                                        <div class="member-list mgn-up-10">
                                                            <ul class="member-ul">
                                                                <ng-container
                                                                    *ngIf="multipleMembers_allowed && sel_ser_det.serviceType !== 'virtualService'">
                                                                    <li *ngFor="let memb of familymember">
                                                                        <mat-checkbox
                                                                            (change)="handleMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName, $event)"
                                                                            [value]="memb.userProfile.id"
                                                                            [checked]="isChecked(memb.userProfile.id)">
                                                                            {{memb.userProfile.firstName + '
                                                                            ' +
                                                                            memb.userProfile.lastName |
                                                                            capitalizeFirst}}
                                                                        </mat-checkbox>
                                                                    </li>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="!multipleMembers_allowed && sel_ser_det.serviceType !== 'virtualService'">
                                                                    <mat-radio-group>
                                                                        <li *ngFor="let memb of familymember"
                                                                            class="members">
                                                                            <mat-radio-button
                                                                                (change)="handleOneMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName,memb.userProfile.email)"
                                                                                [value]="memb.userProfile.id"
                                                                                [checked]="isChecked(memb.userProfile.id)">
                                                                                {{memb.userProfile.firstName
                                                                                + '
                                                                                ' +
                                                                                memb.userProfile.lastName |
                                                                                capitalizeFirst}}
                                                                            </mat-radio-button>
                                                                        </li>
                                                                    </mat-radio-group>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="sel_ser_det.serviceType === 'virtualService'">
                                                                    <div class="card-title service mgn-bt-10"
                                                                        *ngFor="let member of waitlist_for">
                                                                        {{member.firstName | capitalizeFirst}}
                                                                        {{member.lastName | capitalizeFirst}}
                                                                    </div>
                                                                </ng-container>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="grey">
                                                        <div class="serv-head">
                                                            <h5 class="mgn-bt-5 primary-color">
                                                                Status, alerts, communications will be sent to
                                                            </h5>
                                                        </div>
                                                        <div class="consumer_appt mgn-bt-10">
                                                            <div class="mgn-bt-20 mgn-lt-10 mgn-up-10 disp-flex">
                                                                <!-- [class.mgn-lt-36]="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'" -->
                                                                <i class="fa phon-icon"
                                                                    *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                <i class="fa fa-phone"
                                                                    style="font-size: 20px !important; align-self: center; padding-right: 9px;"
                                                                    *ngIf="!(sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone')"></i>
                                                                <div class="number-caption"
                                                                    [class.width-input]="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                    Phone#</div>
                                                                <!-- <b>{{countryCode}}
                                                                    {{selected_phone}}</b> -->
                                                                <div class="codenumber">
                                                                    <input
                                                                        class="width100 height40 email-border code-field pull-right"
                                                                        id="countryCode" placeholder=""
                                                                        name="countryCode" [(ngModel)]="countryCode"
                                                                        autocomplete="off">
                                                                    <input
                                                                        class="width100 height40 email-border input-field pull-right"
                                                                        id="newPhone" placeholder="" name="newPhone"
                                                                        [(ngModel)]="newPhone" autocomplete="off"
                                                                        (keypress)="isNumeric($event)"
                                                                        maxlength="10">
                                                                </div>
                                                                <!-- <ngx-intl-tel-input
                                                                    style="width: 210px !important;margin-left: auto"
                                                                    [cssClass]="'custom'"
                                                                    [preferredCountries]="preferredCountries"
                                                                    [enableAutoCountrySelect]="true"
                                                                    [enablePlaceholder]="true"
                                                                    [searchCountryFlag]="true"
                                                                    [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                    [selectFirstCountry]="false"
                                                                    [maxLength]="15"
                                                                    [phoneValidation]="true"
                                                                    [selectedCountryISO]="selectedCountry"
                                                                    [separateDialCode]="separateDialCode"
                                                                    [numberFormat]="PhoneNumberFormat.National"
                                                                    name="newPhone"
                                                                    [(ngModel)]="newPhone">
                                                                </ngx-intl-tel-input> -->
                                                                <div class="sts-msg error" *ngIf="phoneError">
                                                                    {{phoneError}}
                                                                </div>

                                                            </div>
                                                            <div class="mgn-bt-10 mgn-up-10-m disp-flex"
                                                                *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                <i class="fa wtsapaud-icon wtsap-cal"
                                                                    *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                <i class="fa wtsapvid-icon mgn-rt-5 mgn-lt-10"
                                                                    style="width: 20px;margin-top: -10px"
                                                                    *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                <div class="number-caption"> WhatsApp#</div>
                                                                <!-- <b>+{{callingModes}}</b> -->
                                                                <div class="codenumber">
                                                                    <input
                                                                        class="width100 height40 email-border code-field pull-right"
                                                                        id="whatsappCountryCode" placeholder=""
                                                                        name="whatsappCountryCode"
                                                                        [(ngModel)]="whatsappCountryCode"
                                                                        autocomplete="off">
                                                                    <input
                                                                        class="width100 height40 email-border input-field pull-right"
                                                                        id="newWhatsapp" placeholder=""
                                                                        name="newWhatsapp" [(ngModel)]="newWhatsapp"
                                                                        autocomplete="off">
                                                                </div>
                                                                <!-- <ngx-intl-tel-input
                                                                    style="width: 210px !important;margin-left: auto"
                                                                    [cssClass]="'custom'"
                                                                    [preferredCountries]="preferredCountries"
                                                                    [enableAutoCountrySelect]="true"
                                                                    [enablePlaceholder]="true"
                                                                    [searchCountryFlag]="true"
                                                                    [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                    [selectFirstCountry]="false"
                                                                    [maxLength]="15"
                                                                    [phoneValidation]="true"
                                                                    [selectedCountryISO]="selectedCountry"
                                                                    [separateDialCode]="separateDialCode"
                                                                    [numberFormat]="PhoneNumberFormat.National"
                                                                    name="newWhatsapp"
                                                                    [(ngModel)]="newWhatsapp">
                                                                </ngx-intl-tel-input> -->
                                                                <div class="sts-msg error" *ngIf="whatsapperror">
                                                                    {{whatsapperror}}</div>

                                                            </div>
                                                            <div class="mgn-up-5 mgn-lt-10 disp-flex">
                                                                <!-- [class.mgn-lt-36]="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'" -->
                                                                <i class="fa fa-envelope"
                                                                    style="font-size: 18px !important; align-self: center; padding-right: 7px;"></i>
                                                                <div class="number-caption"
                                                                    [class.width-input]="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                    Email </div>
                                                                <!-- <b>{{payEmail}}</b> -->
                                                                <div class="width-100">
                                                                    <input
                                                                        class="width100 height40 email-border email-field pull-right"
                                                                        id="newEmail"
                                                                        placeholder="Email(user@xyz.com)"
                                                                        name="newEmail" [(ngModel)]="newEmail"
                                                                        autocomplete="off">

                                                                    <app-field-error-display class="red"
                                                                        [displayError]="true"
                                                                        *ngIf="emailerror != null"
                                                                        errorMsg={{emailerror}}>
                                                                    </app-field-error-display>
                                                                </div>
                                                            </div>
                                                            <!-- <p class="mgn-up-5 mgn-lt-10"
                                                                *ngIf="!editBookingFields">To Change the
                                                                Number/Email <a class="bold"
                                                                    (click)="changeBookingFields()">Click
                                                                    Here</a>
                                                            </p> -->
                                                        </div>
                                                        <div class="mgn-up-20 mgn-bt-20" *ngIf="editBookingFields">
                                                            <form [formGroup]="bookingForm" class="" novalidate>
                                                                <div class="col-md-8 col-sm-8 col-xs-12">
                                                                    <div class="form-group">
                                                                        <mat-label for="newselected_phone">
                                                                            Enter
                                                                            New Phone# </mat-label>
                                                                        <ngx-intl-tel-input
                                                                            style="width: 300px !important;"
                                                                            [cssClass]="'custom'"
                                                                            [preferredCountries]="preferredCountries"
                                                                            [enableAutoCountrySelect]="true"
                                                                            [enablePlaceholder]="true"
                                                                            [searchCountryFlag]="true"
                                                                            [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                            [selectFirstCountry]="false"
                                                                            [maxLength]="15"
                                                                            [phoneValidation]="true"
                                                                            [selectedCountryISO]="selectedCountry"
                                                                            [separateDialCode]="separateDialCode"
                                                                            [numberFormat]="PhoneNumberFormat.National"
                                                                            name="newPhone"
                                                                            formControlName="newPhone">
                                                                        </ngx-intl-tel-input>
                                                                        <div class="sts-msg error"
                                                                            *ngIf="phoneError">
                                                                            {{phoneError}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-8 col-sm-8 col-xs-12">
                                                                    <div class="form-group">
                                                                        <mat-label for="newselected_phone">
                                                                            Enter
                                                                            New Email </mat-label>
                                                                        <input
                                                                            class="width100 height40 email-border"
                                                                            id="newEmail"
                                                                            placeholder="Email(user@xyz.com)"
                                                                            name="newEmail"
                                                                            formControlName="newEmail"
                                                                            autocomplete="off"
                                                                            onpaste="return false;"
                                                                            oncopy="return false"
                                                                            oncut="return false"
                                                                            ondrag="return false"
                                                                            ondrop="return false">
                                                                        <app-field-error-display class="red"
                                                                            [displayError]="true"
                                                                            *ngIf="emailerror != null"
                                                                            errorMsg={{emailerror}}>
                                                                        </app-field-error-display>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-8 col-sm-8 col-xs-12">
                                                                    <div class="form-group"
                                                                        *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                        <mat-label for="newselected_phone">
                                                                            Enter
                                                                            New WhatsApp#
                                                                        </mat-label>
                                                                        <ngx-intl-tel-input
                                                                            style="width: 300px !important;"
                                                                            [cssClass]="'custom'"
                                                                            [preferredCountries]="preferredCountries"
                                                                            [enableAutoCountrySelect]="true"
                                                                            [enablePlaceholder]="true"
                                                                            [searchCountryFlag]="true"
                                                                            [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                            [selectFirstCountry]="false"
                                                                            [maxLength]="15"
                                                                            [phoneValidation]="true"
                                                                            [selectedCountryISO]="selectedCountry"
                                                                            [separateDialCode]="separateDialCode"
                                                                            [numberFormat]="PhoneNumberFormat.National"
                                                                            name="newWhatsapp"
                                                                            formControlName="newWhatsapp">
                                                                        </ngx-intl-tel-input>
                                                                        <div class="sts-msg error"
                                                                            *ngIf="whatsapperror">
                                                                            {{whatsapperror}}</div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="action=='attachment'">
                                                <div class="modal-body">
                                                    <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                                        <mat-chip-list class="btns">
                                                            <mat-chip><a class="lnk action pointer-cursor"
                                                                    (click)="imagefile.click()"><input #imagefile
                                                                        type="file" accept="/*;capture=camera"
                                                                        style="display:none;" multiple
                                                                        (change)="filesSelected($event)"><i
                                                                        class="fa fa-paperclip mgn-rt-5"
                                                                        aria-hidden="true"></i>Upload
                                                                    File</a></mat-chip>
                                                        </mat-chip-list>
                                                    </div>
                                                    <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 bold pad-top-10 mgn-up-10 mgn-bt-10 border-tp"
                                                        *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                        Uploaded Files
                                                    </div>
                                                    <div class="img-section mgn-up-20"
                                                        *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                        <ul class="galul">
                                                            <ng-container
                                                                *ngIf="type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0">
                                                                <li
                                                                    *ngFor="let file of waitlist.attchment;let i = index ">
                                                                    <div class="galimg_outer"
                                                                        *ngIf="getThumbUrl(file)">
                                                                        <div class="gal_img">
                                                                            <img [src]="getThumbUrl(file)">
                                                                        </div>
                                                                        <div class="gal-input">
                                                                            <!-- <label>{{file.caption}}</label> -->
                                                                            <input type="text" readonly
                                                                                value="{{file.caption}}">
                                                                        </div>
                                                                    </div>
                                                                </li>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
                                                                <li
                                                                    *ngFor="let file of selectedMessage.files;let i = index ">
                                                                    <div class="galimg_outer">
                                                                        <div class="gal_img">
                                                                            <img [src]="getImage(selectedMessage.base64[i], file)"
                                                                                *ngIf="selectedMessage.base64[i]">
                                                                        </div>
                                                                        <div class="gal-input">
                                                                            <input type="text" placeholder="Caption"
                                                                                [(ngModel)]="imgCaptions[i]">
                                                                        </div>
                                                                        <div class="gal_action"
                                                                            (click)="deleteTempImage(i)">
                                                                            <i class="fa fa-times-circle"
                                                                                aria-hidden="true"></i>
                                                                        </div>
                                                                    </div>
                                                                </li>
                                                            </ng-container>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="action=='timeChange'">
                                                <div class="modal-body">
                                                    <div
                                                        class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-bt-5 mgn-up-10">
                                                        Choose
                                                        Date
                                                    </div>
                                                    <div class="pull-left brd-round brd-light mgn-up-20">
                                                        <div class="icon-minus pull-left"
                                                            [class.disable]="disableMinus()"
                                                            (click)="calculateDate(-1)">
                                                        </div>
                                                        <div class="pull-left chkindt">{{sel_checkindate |
                                                            date:
                                                            dateFormat}}</div>
                                                        <div class="icon-add pull-left" (click)="calculateDate(1)">
                                                        </div>
                                                    </div>
                                                    <div class="pickerouter caldiv pull-left mgn-up-20">
                                                        <mat-datepicker-toggle matSuffix [for]="picker">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker [dateClass]="dateClass.bind(this)">
                                                        </mat-datepicker>
                                                        <input class="" style="visibility: hidden; width:1px"
                                                            type="text" [matDatepicker]="picker" [min]="minDate"
                                                            [max]="maxDate" [value]="ddate"
                                                            (dateChange)="handleFutureDateChange($event)">
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20 mgn-bt-20">
                                                            Choose
                                                            Timings</div>
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 slotdiv no-padding mgn-up-20">
                                                            <mat-chip-list class=""
                                                                *ngIf="queuejson && queuejson.length > 0">
                                                                <mat-chip
                                                                    *ngFor="let queue of queuejson, let i= index"
                                                                    [selected]="queue.id === queuejson[this.sel_queue_indx].id"
                                                                    (click)="handleQueueSelection(queue, i)">
                                                                    {{queue.queueSchedule.timeSlots[0]['sTime']
                                                                    + ' - '
                                                                    +
                                                                    queue.queueSchedule.timeSlots[0]['eTime']}}
                                                                </mat-chip>
                                                            </mat-chip-list>
                                                            <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red"
                                                                *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                                                No timings available.
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="action=='coupons'">
                                                <div class="modal-body">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                        Apply
                                                        Coupon Code
                                                    </div>
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mgn-up-20">
                                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                            *ngIf="showCouponWB">
                                                            <div
                                                                class="col-md-12 col-sm-12 col-lg-12 col-xs-12 form-level-settings applybill no-padding">
                                                                <i class="icon-bell"></i>{{applied_inbilltime}}
                                                            </div>
                                                            <div class="width-60">
                                                                <div class="input-group">
                                                                    <input [ngClass]="{'invalid':!couponvalid}"
                                                                        (keydown)="clearCouponErrors()"
                                                                        placeholder="Enter coupon code" type="text"
                                                                        class="form-control"
                                                                        [(ngModel)]="selected_coupon">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                style="color: red;" *ngIf="api_cp_error !== null">
                                                                {{api_cp_error}}</div>
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding mgn-up-10 mgn-bt-20">

                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 col-sm-12 col-lg-12 col-12 mgn-up-20 mgn-bt-30 border-tp pad-up-10"
                                                            *ngIf="couponsList && couponsList.length>0">
                                                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                *ngFor="let coupon of couponsList let i=index">
                                                                <div
                                                                    class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding coupon-add-msg">
                                                                    <div
                                                                        class="col-md-5 col-sm-7 col-xs-7 col-lg-4 no-padding">
                                                                        {{coupon.couponCode}} </div>
                                                                    <div
                                                                        class="col-md-7 col-sm-5 col-xs-5 col-lg-8 delteTC">
                                                                        <span><a *ngIf="coupon.instructions"
                                                                                (click)="toggleterms(i)"
                                                                                class="pointer-cursor lnk read-more-checkin">Read
                                                                                T & C </a></span>
                                                                        <span><a class="pointer-cursor lnk"><i
                                                                                    class="pointer-cursor icon-delete mgn-lt-10 lnk"
                                                                                    (click)="removeJCoupon(i)"
                                                                                    [matTooltipClass]="tooltipcls"
                                                                                    [matTooltip]="'Remove Coupon'"></i></a></span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mgn-up-10 pre-instr no-padding"
                                                                    *ngIf="coupon.showme">
                                                                    {{coupon.instructions}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 coupon-outer"
                                                        *ngIf="coupon_status">
                                                        <div class="form-group">
                                                            <span *ngIf="coupon_status=='success'"
                                                                class="coupon_success">Coupon Code(s)
                                                                applied
                                                                successfully</span>
                                                            <span *ngIf="coupon_status=='error'"
                                                                class="coupon-error">Coupon
                                                                Code(s) not
                                                                valid</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="action=='note'">
                                                <div class="modal-body">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                        {{sel_ser_det.consumerNoteTitle}}
                                                        <div class="form-level-settings">
                                                            Add any other notes to the provider
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                        <textarea class="form-control mgn-bt-20 mgn-up-20"
                                                            [(ngModel)]="consumerNote" #consumernote
                                                            (change)="handleConsumerNote(consumernote.value)"
                                                            maxlength="1000"
                                                            placeholder="{{note_placeholder}}"></textarea>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="action=='addmember'">
                                                <div class="modal-body">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10s">
                                                        <i class="fa fa-arrow-left pointer-cursor"
                                                            (click)="goBack()"></i>
                                                        {{add_member_cap}}
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                        <app-checkin-consumer-add-member [calledFrom]="'checkin'"
                                                            (returnDetails)="handleReturnDetails($event)">
                                                        </app-checkin-consumer-add-member>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <div class="modal-footer">
                                                <button type="button"
                                                    class="disp-none btn btn-light-primary font-weight-bold"
                                                    data-dismiss="modal" #closebutton>Cancel</button>
                                                <button type="button" class="btn btn-primary font-weight-bold hf-btn"
                                                    (click)="actionCompleted()">Ok</button>
                                            </div>
                                            <div class="error-section" *ngIf="apiError !== ''">
                                                {{apiError}}
                                            </div>
                                            <div class="error-section success-section" *ngIf="apiSuccess !== ''">
                                                {{apiSuccess}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                    <div class="col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 2">
                                        <div class="pad-20 quest-head">
                                            We need some more information
                                        </div>
                                        <app-questionnaire [questionnaireList]="questionnaireList"
                                            [questionAnswers]="questionAnswers" [source]="'consCheckin'"
                                            [accountId]="account_id" (returnAnswers)="getQuestionAnswers($event)">
                                        </app-questionnaire>
                                        <div class="d-flex flex-column-fluid width-100">
                                            <div class="col-xl-12 force_center note-pad">
                                                <div class="form-group card mgn-0">
                                                    <label class="col-12 quest">Add any other notes to the provider or
                                                        upload any files for provider view
                                                    </label>
                                                    <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                                        <a #modal data-toggle="modal" data-target="#exampleModalCenter">
                                                        </a>
                                                        <mat-chip-list class="btns">
                                                            <mat-chip
                                                                [class.mandatoryChip]="sel_ser_det.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                (click)="handleSideScreen('note');modal.click();">
                                                                <a class="lnk action pointer-cursor"><i
                                                                        class="fa fa-file-text-o mgn-rt-5"
                                                                        aria-hidden="true"></i>
                                                                    {{sel_ser_det.consumerNoteTitle}}
                                                                    <span
                                                                        *ngIf="sel_ser_det.consumerNoteMandatory">*</span></a>
                                                            </mat-chip>
                                                            <span>
                                                                <mat-chip
                                                                    [ngClass]="{'br-top-right-0 br-bottom-right-0 margin-right-0': getAttachLength() > 0}">
                                                                    <a class="lnk action pointer-cursor"
                                                                        (click)="imagefile1.click();"><input #imagefile1
                                                                            type="file" accept="/*;capture=camera"
                                                                            style="display:none;" multiple
                                                                            (change)="filesSelected($event, 'close')"><i
                                                                            class="fa fa-paperclip mgn-rt-5"
                                                                            aria-hidden="true"></i>Upload
                                                                        File
                                                                        <!-- <span
                                                                        *ngIf="getAttachLength() > 0">&nbsp;({{getAttachLength()}})</span> -->
                                                                    </a>
                                                                </mat-chip>
                                                                <mat-chip *ngIf="getAttachLength() > 0"
                                                                    class="br-top-left-0 br-bottom-left-0 margin-left-0">
                                                                    <a class="lnk action pointer-cursor"
                                                                        (click)="viewAttachments()">
                                                                        View (<span>{{getAttachLength()}}</span>)
                                                                    </a>
                                                                </mat-chip>
                                                            </span>
                                                        </mat-chip-list>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 hf-double-btn-container">
                                            <div class="mr-2">
                                                <button type="button"
                                                    class="next-button btn btn-light-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('prev')">
                                                    Go Back
                                                </button>
                                            </div>
                                            
                                            <div *ngIf="!sel_ser_det.isPrePayment">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')">
                                                    Next
                                                </button>
                                            </div>
                                            <div *ngIf="sel_ser_det.isPrePayment">
                                                <button type="button" id="proceed_to_payment_btn"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')">
                                                    Proceed to Payment
                                                </button>
                                            </div>
                                            
                                            <div *ngIf="type != 'waitlistreschedule' && !sel_ser_det.isPrePayment"
                                                class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')"
                                                    [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                    Next
                                                </button>
                                            </div>
                                            <div *ngIf="type != 'waitlistreschedule' && sel_ser_det.isPrePayment && questionnaireList.labels && questionnaireList.labels.length > 0"
                                                class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')"
                                                    [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                    Next
                                                </button>
                                            </div>
                                            <div *ngIf="type != 'waitlistreschedule' && sel_ser_det.isPrePayment && !questionnaireList.labels"
                                                class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10 hf-single-btn-container">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')"
                                                    [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                    Proceed to Payment
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12"
                                            data-wizard-type="step-content" data-wizard-state="current"
                                            *ngIf="bookStep === 3">
                                            <div *ngIf="api_loading_video" class="incomplete-msg">
                                                <div style="padding: 0 30px;">
                                                    Files are Uploading...
                                                </div>
                                            </div>
                                            <app-common-innerloading-spinner *ngIf="api_loading_video">
                                            </app-common-innerloading-spinner>
                                        </div>
                                        <div class="col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12"
                                            data-wizard-type="step-content" data-wizard-state="current"
                                            *ngIf="bookStep === 3" [ngClass]="{'highlight': api_loading_video}">
                                            
                                              
                                               
                                                <div class="" *ngIf="sel_ser_det && sel_ser_det.isPrePayment && paymentLength>0 && paymentDetails.amountRequiredNow > 0">
                                                    <div class="jaldeecredit" *ngIf="jcashamount>0">
                                                        <mat-checkbox [(ngModel)]="checkJcash"
                                                            (change)="changeJcashUse($event)"></mat-checkbox>
                                                        Use Jaldee cash balance : <span
                                                            class="rupee-font">{{jcashamount|
                                                            currency:'&#8377;'}}</span>
                                                    </div>
                                                    <div class="creditleft"
                                                        *ngIf="jcashamount>0  && (checkJcash && jcashamount < paymentDetails.amountRequiredNow)">
                                                        Balance amount can be paid by other payment methods
                                                    </div>
                                                    <div class="prepayment"
                                                        *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
                                                        ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
                                                        
                                                        <button type="button" [class.disabled]="isClickedOnce"
                                                            (click)="!isClickedOnce && saveCheckin('checkin')"
                                                            id="stepThreeConfirmButton"
                                                            class="next-button btn btn-primary font-weight-bold  px-12 py-4"
                                                            [disabled]="!checkPolicy && heartfulnessAccount||paymentBtnDisabled">
                                                            <ng-container
                                                                *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
                                                            ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
                                                                Confirm {{settingsjson.showTokenId?'Token ':'Checkin'}}
                                                            </ng-container>
                                                            
                                                        </button>
                                                       


                                                    </div>
                                                    
                                                    
    
                                            </div>

                                                
                                                

                                                <!-- modalbox -->
                                                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog refundpol" role="document">
                                                        <div class="modal-content">
                                                            
                                                            <div class="modal-body pt-8 pb-0 refund_size">
                                                                <span>Note:</span> Jaldee is not responsible for the
                                                                transactions between Consumer and Provider.
                                                                <ul>
                                                                    <li>Consumers can cancel the booking anytime</li>
                                                                    <li>If the consumer cancels the appointment, 3% will
                                                                        be
                                                                        deducted from the amount(which includes Jaldee
                                                                        service charges and Online Gateway fees).</li>
                                                                    <li>Refund will be received directly to the
                                                                        consumer’s
                                                                        bank account after he/she cancels the future
                                                                        bookings.</li>
                                                                    <li>If the booking is cancelled on the date of
                                                                        booking,
                                                                        refund will not be processed automatically(i.e
                                                                        Consumer must inform the provider to initiate
                                                                        the
                                                                        refund)</li>
                                                                </ul>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button"
                                                                    class="btn btn-light-primary font-weight-bold"
                                                                    data-dismiss="modal">Close</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="pad-10" *ngIf="heartfulnessAccount">
                                                <div class="t-and-c">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" [ngModel]="checkPolicy"
                                                                [checked]="checkPolicy" (change)="changePolicy($event)">
                                                            <span>I accept the&nbsp;
                                                                <a data-toggle="modal" data-target="#tcModal">Terms and
                                                                    Conditions</a></span>
                                                        </label>
                                                    </div>
                                                    <div class="sts-msg error" *ngIf="!checkPolicy">"Agreement to Terms
                                                        and Conditions is required"</div>
                                                </div>
                                                <div class="modal fade" id="tcModal" tabindex="-1" role="dialog"
                                                    aria-labelledby="tcModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog " role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h4 class="modal-title" id="tcModalLabel">PRIVACY POLICY
                                                                    &
                                                                    DISCLAIMER</h4>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close">
                                                                    <i aria-hidden="true" class="ki ki-close"></i>
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <h6>OVERVIEW</h6>
                                                                <p>In order to use the services of this app, you are
                                                                    required to register yourself by
                                                                    verifying the authorized device. This privacy policy
                                                                    applies to information that we
                                                                    collect and receive on and through Heartfulness
                                                                    Covid
                                                                    Care app. It does not apply
                                                                    to practices of businesses that we do not own or
                                                                    control
                                                                    or people we do not employ.
                                                                    By using this app, you agree to the terms of this
                                                                    privacy policy. Please read the
                                                                    following to understand how your personal
                                                                    information
                                                                    will be treated as you use this
                                                                    site and its services.</p>
                                                                <p>Heartfulness Institute or "HFI" in short, the creator
                                                                    of this privacy policy shall
                                                                    ensure its commitment to your privacy with regard to
                                                                    the
                                                                    protection of your information.
                                                                    This policy contains information about our app
                                                                    "Heartfulness Covid Care". In order to
                                                                    provide you with uninterrupted use of our services,
                                                                    free
                                                                    of cost, we may collect and,
                                                                    in some circumstances, disclose information about
                                                                    you.
                                                                    Such information may be classified
                                                                    as personal information under the purview of
                                                                    applicable
                                                                    provisions of the Information
                                                                    Technology Act/ Rules framed thereunder.</p>

                                                                <h6>COLLECTION OF INFORMATION</h6>
                                                                <p>Personal data of the user such as, but not limited
                                                                    to,
                                                                    name, age, date of birth,
                                                                    occupation, gender, e-mail, contact information,
                                                                    location and such other information
                                                                    necessary for rendering appropriate medical advise.
                                                                    The
                                                                    user's data sent across through
                                                                    the app shall be processed and stored automatically.
                                                                    As
                                                                    a user of Heartfulness Covid Care
                                                                    app, you may provide information about yourself,
                                                                    your
                                                                    spouse, family, friends, health
                                                                    issues, previous medication taken, previous medical
                                                                    conditions, allergies, etc. All
                                                                    information shall be used for further processing of
                                                                    the
                                                                    case, diagnosis, treatment, follow
                                                                    ups etc. and shall also be saved by the technology
                                                                    service provider. </p>

                                                                <h6>USE OF INFORMATION</h6>
                                                                <p>The information provided by you shall be used to
                                                                    contact
                                                                    you when necessary and analysis.
                                                                    We may use your data for tracking, identification
                                                                    and
                                                                    gather broad demographic information.
                                                                    The information is also used to customize your
                                                                    experience of using Heartfulness Covid Care
                                                                    app, research purposes and learning.</p>

                                                                <h6>PROTECTION OF PERSONAL INFORMATION</h6>
                                                                <p>HFI has adopted a protection of personal information
                                                                    policy which aims to protect your
                                                                    private life, in accordance with the applicable laws
                                                                    in
                                                                    effect. HFI has taken and applies
                                                                    appropriate security measures while using this app,
                                                                    including the encoding of certain data.
                                                                    However, public communication networks such as the
                                                                    internet are open systems with links shared
                                                                    by many users. You recognize that HFI does not
                                                                    guarantee
                                                                    that some personal information won't
                                                                    be intercepted and manipulated by third parties.
                                                                    This
                                                                    information will never be the object
                                                                    of a communication, transfer, sale, assignment or
                                                                    any
                                                                    other commercial transaction with third
                                                                    parties without your authorization. This information
                                                                    may
                                                                    however be transferred between various
                                                                    internal departments or with distributors adhering
                                                                    to a
                                                                    protection of personal information policy,
                                                                    for the purpose of administration and management.
                                                                </p>

                                                                <h6>CONTROL</h6>
                                                                <p>We will not sell, distribute or lease your personal
                                                                    information to third parties unless we have
                                                                    your permission or are required to do so, by law. We
                                                                    may
                                                                    use your personal information to send
                                                                    you promotional information about third parties
                                                                    which we
                                                                    think you may find interesting if you
                                                                    tell us that you wish this to happen. If you believe
                                                                    that any information we are holding on you
                                                                    is incorrect or incomplete, please send us an email,
                                                                    as
                                                                    soon as possible to: covidcare@Heartfulness.org.
                                                                    We will be happy to correct any information found to
                                                                    be
                                                                    incorrect.</p>

                                                                <h6>TERMS</h6>
                                                                <p>By downloading and / or using this app, you hereby
                                                                    agree
                                                                    to be bound by the terms of use /
                                                                    service, privacy policy, and other policies as set
                                                                    forth
                                                                    on the website www.heartfulnesscovidcare.com</p>
                                                                <p>It is hereby further specified that all the terms and
                                                                    policies on the website shall be coterminous
                                                                    to these terms.</p>

                                                                <h6>DISCLAIMER</h6>
                                                                <p>The content found in this programme or on the or
                                                                    heartfulnesscovidcare.com Website, including:
                                                                    text, images, audio, or other formats were created
                                                                    for
                                                                    information and guidance purposes only.
                                                                    Offerings are clearly identified and appropriate
                                                                    target
                                                                    audience as well. The Content is not intended
                                                                    to be a substitute for any professional medical
                                                                    advice,
                                                                    diagnosis, or treatment. You are requested
                                                                    to seek advice from your physician or other
                                                                    qualified
                                                                    health service provider with any questions you
                                                                    may have regarding your medical condition. Never
                                                                    disregard professional medical advice or delay in
                                                                    seeking it because of something you have read on
                                                                    this
                                                                    Website/ Programme. Our services are free of
                                                                    cost for humanitarian considerations.</p>
                                                                <p>If you think you may have a medical emergency, call
                                                                    your
                                                                    doctor, go for emergency check-up or
                                                                    treatment immediately. Reliance on any information
                                                                    provided by volunteers, employees, or medical
                                                                    professionals presenting this content is solely at
                                                                    your
                                                                    discretion and risk.</p>
                                                                <p>If you find any material offensive, you may
                                                                    voluntarily
                                                                    want to disassociate or refrain from using
                                                                    our materials/ information/ app. The office bearers
                                                                    of
                                                                    our organization or that of the technology service
                                                                    provider do not undertake any liability for its
                                                                    pro-bono
                                                                    services.</p>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button"
                                                                    class="btn btn-light-primary font-weight-bold hf-btn"
                                                                    data-dismiss="modal">Close</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div class="clearfix"></div>
</section>