<section class="c-checkin-new container no-padding">
    <div class="content p0 loc-list ynw-common-form-nm">
        <div class="panel panel-default">
            <div class="panel-heading top-row ">
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <a class="pull-left back-btn mgn-up-5" (click)="goBack('back')"><i class="fa fa-arrow-left"></i></a>
                </div>
                <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 no-padding">
                    <app-header *ngIf="sharedFunctionobj.checkLogin()" [includedfrom]="'checkin'"></app-header>
                </div>
            </div>
            <!-- <div class="panel-body no-padding">
                <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                    <div class="card p0">
                        <div class="copy locd">
                            <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
                                *ngIf="action==''">
                                <div
                                    class="col-md-4 col-lg-4 col-xs-12 col-sm-12 no-padding check-new-group border-tp border-rt">
                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding border-bt"
                                        *ngIf="this.selectedUserParam && selectedUser">
                                        <div class="col-sm-2 col-xs-3 col-md-4 ">
                                            <img class="card-img" [src]="getPic(selectedUser)" alt="Profile Pic">
                                        </div>
                                        <div class="col-sm-10 col-xs-9 col-md-8 no-padding">
                                            <div class="card-body ">
                                                <h6 class="card-title mgn-up-5">
                                                    <span
                                                        *ngIf="selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                    <span
                                                        *ngIf="!selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                </h6>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10">
                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 mgn-up-5">
                                            {{showCheckinButtonCaption()}} For <a
                                                *ngIf="type !== 'waitlistreschedule' && servicesjson.length > 1"
                                                class="changeitem  pointer-cursor mgn-lt-10 pull-right"
                                                (click)="changeService()">Change
                                                Service</a></div>
                                        <div class="col-sm-12 col-xs-12 col-md-12">
                                            <div class="card-body" *ngIf="sel_ser || type == 'waitlistreschedule'">
                                                <div class="service-icon pull-left"
                                                    *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                    <i class="fa phon-icon"
                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                </div>
                                                <h6 class="card-title service">
                                                    {{sel_ser_det.name}}
                                                </h6>
                                                <div class="mgn-bt-15" style="font-size: 1rem; float: left;"
                                                    *ngIf="sel_ser_det.price && type != 'reschedule'">
                                                    <p class="module-nomargin line-clamp"
                                                        *ngIf="sel_ser_det.description && !showmoreSpec"
                                                        (click)="showSpec()">{{sel_ser_det.description}}</p>
                                                    <p *ngIf="showmoreSpec" (click)="showSpec()">
                                                        {{sel_ser_det.description}}</p>
                                                    <span *ngIf="sel_ser_det.price && type != 'waitlistreschedule'">
                                                        Service Fee
                                                        <span class="prepaymin-cls bold"><span
                                                                class="rupee-font">{{serviceCost | currency:'&#8377;'}}
                                                            </span></span>
                                                    </span>&nbsp;
                                                    <span
                                                        *ngIf="sel_ser_det.isPrePayment && type != 'waitlistreschedule'">
                                                        Booking Fee
                                                        <span class="prepaymin-cls bold"><span
                                                                class="rupee-font">{{prepaymentAmount |
                                                                currency:'&#8377;'}}
                                                            </span></span>
                                                    </span>
                                                </div>
                                                <div class="">
                                                    <div class="clearfix"></div>
                                                    <div class="callingmode mgn-lt-10 mgn-up-10"
                                                        *ngIf="sel_ser_det && sel_ser_det.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                        <div class="mgn-bt-10 mgn-up-5">
                                                            <div class=""
                                                                *ngFor="let mode of sel_ser_det.virtualCallingModes;let i = index">
                                                                <div style="visibility: hidden;">
                                                                    {{callingModesDisplayName[mode.callingMode]}}
                                                                </div>
                                                                <div class="cal-mod-instrct pre-check-title color-grey"
                                                                    *ngIf="mode.callingMode">
                                                                    {{mode.instructions}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="prenotes mgn-bt-10" *ngIf="sel_ser_det.preInfoEnabled">
                                                        <div class="preinfo-title">{{sel_ser_det.preInfoTitle}}</div>
                                                        <div [innerHTML]="sel_ser_det.preInfoText">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12 no-padding">
                                                        <mat-chip-list class="btns">
                                                            <mat-chip
                                                                [class.mandatoryChip]="sel_ser_det.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                (click)="handleSideScreen('note')"><a
                                                                    class="lnk action pointer-cursor"><i
                                                                        class="fa fa-file-text-o mgn-rt-5"
                                                                        aria-hidden="true"></i>
                                                                    {{sel_ser_det.consumerNoteTitle}} <span
                                                                        *ngIf="sel_ser_det.consumerNoteMandatory">*</span></a>
                                                            </mat-chip>
                                                            <mat-chip><a class="lnk action pointer-cursor"
                                                                    (click)="imagefile1.click()"><input #imagefile1
                                                                        type="file" accept="/*;capture=camera"
                                                                        style="display:none;" multiple
                                                                        (change)="filesSelected($event)"><i
                                                                        class="fa fa-paperclip mgn-rt-5"
                                                                        aria-hidden="true"></i>Upload
                                                                    File
                                                                    <span
                                                                        *ngIf="selectedMessage.files && selectedMessage.files.length > 0">&nbsp;({{selectedMessage.files.length}})</span>
                                                                </a></mat-chip>
                                                        </mat-chip-list>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    class="col-md-4 col-lg-4 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">



                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding"
                                        *ngIf="queuejson && queuejson.length != 0 && !api_loading1">
                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-10">
                                            Date/Time
                                            <span><a class="changeitem  pointer-cursor  mgn-rt-20 mgn-bt-10 pull-right "
                                                    (click)="changeTime()">Change
                                                </a></span>
                                        </div>
                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                            <h6 class="card-title serv-time border-style">
                                                <span *ngIf="!isFuturedate">Today, </span>
                                                <span *ngIf="!isFuturedate">
                                                    {{queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['sTime'] + '
                                                    - ' +
                                                    queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['eTime']}}
                                                </span>
                                                <span *ngIf="isFuturedate">{{sel_checkindate | date: newDateFormat}},
                                                </span>
                                                <span *ngIf="isFuturedate">
                                                    {{queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['sTime'] + '
                                                    - ' +
                                                    queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['eTime']}}
                                                </span>
                                            </h6>
                                        </div>

                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20">
                                            Waiting in Line
                                        </div>

                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                            <h6 class="card-title serv-time">
                                                <span *ngIf="sel_queue_personaahead <= 0">0 People</span>
                                                <span *ngIf="sel_queue_personaahead == 1">1<span> Person</span></span>
                                                <span
                                                    *ngIf="sel_queue_personaahead > 1">{{sel_queue_personaahead}}<span>
                                                        People</span></span>
                                                <span *ngIf="calc_mode=='NoCalc'">
                                                    <span *ngIf="!isFuturedate">
                                                    </span>
                                                </span>


                                                <span *ngIf="sel_queue_servicetime=='' && calc_mode!='NoCalc'">
                                                    <span class="color-grey">\</span>
                                                    <span>{{sel_queue_waitingmins}}</span>

                                                </span>
                                                <span *ngIf="sel_queue_servicetime!='' && calc_mode!='NoCalc'">

                                                    <ng-container *ngIf="isFuturedate">
                                                    </ng-container>
                                                    <ng-container *ngIf="!isFuturedate">
                                                        <span><span class="color-grey"> \
                                                            </span>{{sel_queue_servicetime}}</span>
                                                    </ng-container>
                                                </span>
                                            </h6>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red mgn-up-10"
                                        *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                        No timings available.
                                        <span><a class="lnk pointer-cursor action mgn-lt-10"
                                                (click)="changeTime()">Change Time
                                            </a></span>
                                    </div>
                                </div>
                                <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12 border-tp check-new-group">
                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                        <div
                                            class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-10 mgn-bt-10 no-padding">
                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 no-padding">Booking
                                                For <a *ngIf="type !== 'waitlistreschedule'"
                                                    class="changeitem  pointer-cursor  mgn-lt-5 mgn-rt-20 pull-right"
                                                    (click)="handleSideScreen('members')">Change
                                                </a>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
                                                <div class="card-body">
                                                    <div *ngIf="type !== 'waitlistreschedule'">
                                                        <h6 class="card-title service"
                                                            *ngFor="let member of waitlist_for">
                                                            {{member.firstName | capitalizeFirst}}
                                                            {{member.lastName | capitalizeFirst}}
                                                        </h6>
                                                    </div>

                                                    <h6 class="card-title service"
                                                        *ngIf="type === 'waitlistreschedule'">
                                                        {{wtlst_for_fname | capitalizeFirst}}
                                                        {{wtlst_for_lname | capitalizeFirst}}
                                                    </h6>
                                                    <div class="contact-section">
                                                        <i class="fa fa-mobile "></i>
                                                        <i *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && (!changePhno || currentPhone == callingModes)"
                                                            class="fa wtsapaud-icon wtsap-cal"></i>
                                                        <span class="mgn-lt-10 phonevallabel"
                                                            *ngIf="userPhone && !changePhno">{{countryCode}}
                                                            {{userPhone}}</span>
                                                        <span class="mgn-lt-10 phonevallabel"
                                                            *ngIf="currentPhone && changePhno">{{countryCode}}
                                                            {{currentPhone}}</span><a
                                                            class="mgn-lt-5 lnk pointer-cursor">
                                                        </a>
                                                        <div class="mode-hint mgn-bt-5"
                                                            *ngIf="(!changePhno || currentPhone == callingModes) && (sel_ser_det && sel_ser_det.virtualCallingModes && (sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' || sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'))">
                                                            The provider will contact you in this number
                                                        </div>
                                                    </div>
                                                    <div class="contact-section"
                                                        *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                        <i class="fa wtsapaud-icon wtsap-cal"></i>
                                                        <span class="mgn-lt-10 phonevallabel">+{{callingModes}}</span><a
                                                            class="mgn-lt-5 lnk pointer-cursor">
                                                        </a>
                                                        <div class="mode-hint mgn-bt-5">
                                                            The provider will contact you in this number
                                                        </div>
                                                    </div>
                                                    <div class=""
                                                        *ngIf="userData && userData.userProfile && userData.userProfile.email">
                                                        <i class="fa fa-envelope-o "></i>
                                                        <span
                                                            class="mgn-lt-5 emailvallabel">{{userData.userProfile.email}}</span>
                                                        <a class="mgn-lt-5 lnk pointer-cursor">
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-5 no-padding"
                                                *ngIf="(s3CouponsList.length > 0) && type != 'waitlistreschedule'">
                                                <a class="lnk pointer-cursor action"
                                                    *ngIf="selected_coupons.length === 0"
                                                    (click)="applyPromocode()">Apply
                                                    Promocode</a>
                                                <a class="lnk pointer-cursor action" *ngIf="selected_coupons.length > 0"
                                                    (click)="applyPromocode()">
                                                    Promocode applied</a>
                                                {{selected_coupons.toString()}}
                                            </div>
                                            <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-20">
                                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20 no-padding">
                                                    <div class="checkin-btn-bp pointer-cursor"
                                                        *ngIf="type !== 'waitlistreschedule'"
                                                        [class.disableActn]="(queuejson && queuejson.length == 0 && !api_loading1) || callingModes === '' || waitlist_for.length == 0"
                                                        (click)="handleCheckinClicked()">
                                                        <span *ngIf="!sel_ser_det.isPrePayment">Confirm
                                                            {{showCheckinButtonCaption()}}</span>
                                                        <span *ngIf="sel_ser_det.isPrePayment">Confirm
                                                            {{showCheckinButtonCaption()}}</span>
                                                        <i class="fa fa-long-arrow-right mgn-lt-5"></i>
                                                    </div>
                                                    <div class="checkin-btn-bp pointer-cursor"
                                                        *ngIf="type == 'waitlistreschedule'"
                                                        [class.disableActn]="checkinenable || (queuejson && queuejson.length == 0 && !api_loading1) || callingModes === '' || disableButn()"
                                                        (click)="rescheduleWaitlist()">
                                                        Reschedule
                                                        <i class="fa fa-long-arrow-right mgn-lt-5"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="lbl col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding notes"
                                *ngIf="action=='timeChange'">
                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-lt-10">
                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-bt-5 mgn-up-10">
                                        Choose
                                        Date</div>
                                    <div class="pull-left brd-round brd-light mgn-up-20">
                                        <div class="icon-minus pull-left" [class.disable]="disableMinus()"
                                            *ngIf="settingsjson.futureDateWaitlist" (click)="calculateDate(-1)">
                                        </div>
                                        <div class="pull-left chkindt">{{sel_checkindate | date: dateFormat}}</div>
                                        <div class="icon-add pull-left" *ngIf="settingsjson.futureDateWaitlist"
                                            (click)="calculateDate(1)"></div>
                                    </div>
                                    <div class="pickerouter caldiv pull-left mgn-up-20"
                                        *ngIf="settingsjson.futureDateWaitlist">
                                        <mat-datepicker-toggle matSuffix [for]="picker">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker [dateClass]="dateClass.bind(this)"></mat-datepicker>
                                        <input class="" style="visibility: hidden; width:1px" type="text"
                                            [matDatepicker]="picker" [min]="minDate" [max]="maxDate" [value]="ddate"
                                            (dateChange)="handleFutureDateChange($event)">

                                    </div>
                                </div>
                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-lt-10">
                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20 mgn-bt-20">Choose
                                        Timings</div>
                                    <div class="col-md-12 col-xs-12 col-sm-12 slotdiv no-padding mgn-up-20">
                                        <mat-chip-list class="" *ngIf="queuejson && queuejson.length > 0">
                                            <mat-chip *ngFor="let queue of queuejson, let i= index"
                                                [selected]="queue.id === queuejson[this.sel_queue_indx].id"
                                                (click)="handleQueueSelection(queue, i)">
                                                {{queue.queueSchedule.timeSlots[0]['sTime'] + ' - ' +
                                                queue.queueSchedule.timeSlots[0]['eTime']}}
                                            </mat-chip>
                                        </mat-chip-list>
                                        <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red"
                                            *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                            No timings available.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20 mgn-up-20 mgn-lt-5">
                                    <button (click)="goBack()" class="btn bt3 btn-default coupon-apply-btn"
                                        type="button">Ok</button>
                                </div>
                            </div>


                            <div class="lbl col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding notes"
                                *ngIf="action=='phone'">
                                <div class="mgn-up-5 input-group mobile-error">
                                    <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10">Enter New Contact Number
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 form-level-settings applybill">
                                        <i class="icon-bell"></i>Your old contact number will be replaced with this new
                                        number
                                    </div>
                                    <div class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20">
                                        <label>
                                            <input type="text" maxlength="10" placeholder="Contact number"
                                                class="phonenum" [(ngModel)]="selected_phone" />
                                            <button (click)="addPhone()" class="btn bt3 btn-default coupon-apply-btn"
                                                type="button">Ok</button>
                                            <app-field-error-display [displayError]="true" *ngIf="phoneerror != null"
                                                errorMsg={{phoneerror}}>
                                            </app-field-error-display>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="lbl col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding notes"
                                *ngIf="action=='coupons'">
                                <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">Apply promocode</div>
                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mgn-up-20">
                                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                        *ngIf="showCouponWB">
                                        <div
                                            class="col-md-12 col-sm-12 col-lg-12 col-xs-12 form-level-settings applybill no-padding">
                                            <i class="icon-bell"></i>{{applied_inbilltime}}
                                        </div>
                                        <div class="col-md-4 col-lg-3 col-sm-6 col-xs-8 no-padding">
                                            <div class="input-group">
                                                <input [ngClass]="{'invalid':!couponvalid}"
                                                    (keydown)="clearCouponErrors()" placeholder="Enter coupon code"
                                                    type="text" class="form-control" [(ngModel)]="selected_coupon">
                                                <span class="input-group-btn">
                                                    <button class="btn bt3 btn-default coupon-apply-btn"
                                                        (click)="applyCoupons(selected_coupon)"
                                                        type="button">Add</button>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                            style="color: red;" *ngIf="api_cp_error !== null">
                                            {{api_cp_error}}</div>
                                        <div
                                            class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding mgn-up-10 mgn-bt-20">

                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-lg-12 col-12 mgn-up-20 mgn-bt-30 border-tp pad-up-10"
                                        *ngIf="couponsList && couponsList.length>0">
                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                            *ngFor="let coupon of couponsList let i=index">
                                            <div
                                                class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding coupon-add-msg">
                                                <div class="col-md-5 col-sm-7 col-xs-7 col-lg-4 no-padding">
                                                    {{coupon.couponCode}} </div>
                                                <div class="col-md-7 col-sm-5 col-xs-5 col-lg-8 delteTC">
                                                    <span><a *ngIf="coupon.instructions" (click)="toggleterms(i)"
                                                            class="pointer-cursor lnk read-more-checkin">Read
                                                            T & C </a></span>
                                                    <span><a class="pointer-cursor lnk"><i
                                                                class="pointer-cursor icon-delete mgn-lt-10 lnk"
                                                                (click)="removeJCoupon(i)"
                                                                [matTooltipClass]="tooltipcls"
                                                                [matTooltip]="'Remove Coupon'"></i></a></span>
                                                </div>
                                            </div>
                                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mgn-up-10 pre-instr no-padding"
                                                *ngIf="coupon.showme">
                                                {{coupon.instructions}}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 coupon-outer" *ngIf="coupon_status">
                                    <div class="form-group">
                                        <span *ngIf="coupon_status=='success'" class="coupon_success">Coupon Code(s)
                                            applied
                                            successfully</span>
                                        <span *ngIf="coupon_status=='error'" class="coupon-error">Coupon Code(s) not
                                            valid</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding notes"
                            *ngIf="action=='note'">
                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">{{sel_ser_det.consumerNoteTitle}}
                            </div>
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <textarea class="form-control mgn-bt-20 mgn-up-20" [(ngModel)]="consumerNote"
                                    #consumernote (change)="handleConsumerNote(consumernote.value)" maxlength="1000"
                                    placeholder="{{note_placeholder}}"></textarea>
                                <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10">
                                    <button mat-button class="cs-btn bt1 backtocheckin" (click)="goBack()">OK
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding notes"
                            *ngIf="action=='email'">
                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">Please
                                enter your
                                email for payment</div>
                            <div class="col-md-7 col-sm-12 col-xs-12 mgn-bt-20">
                                <ng-container>
                                    <div class="form-group">
                                        <input style="border-bottom: 1px solid" class="form-control emailPrepay"
                                            id="email" placeholder="Email(user@xyz.com)" [(ngModel)]="payEmail"
                                            autocomplete="off" (keyup)="showConfrmEmail($event)" onpaste="return false;"
                                            oncopy="return false" oncut="return false" ondrag="return false"
                                            ondrop="return false">
                                        <app-field-error-display [displayError]="true" *ngIf="emailerror != null"
                                            errorMsg={{emailerror}}>
                                        </app-field-error-display>
                                    </div>
                                    <div class="form-group" *ngIf="confrmshow">
                                        <input style="border-bottom: 1px solid" class="form-control emailPrepay"
                                            id="email1" placeholder="Re-enter Email(user@xyz.com)"
                                            [(ngModel)]="payEmail1" autocomplete="off" onpaste="return false;"
                                            oncopy="return false" oncut="return false" ondrag="return false"
                                            ondrop="return false">
                                        <app-field-error-display [displayError]="true" *ngIf="email1error != null"
                                            errorMsg={{email1error}}>
                                        </app-field-error-display>
                                    </div>
                                    <span class="input-group-btn">
                                        <button class="btn bt3 btnCancel" type="button" (click)="goBack()">
                                            Cancel
                                        </button>
                                        <button class="btn bt3 btn-default" (click)="addEmail()"
                                            type="button">Add</button>
                                    </span>
                                </ng-container>
                            </div>
                        </div>
                        <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
                            *ngIf="action=='addmember'">
                            <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                                <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10s">{{add_member_cap}}</div>
                                <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                    <app-checkin-consumer-add-member [calledFrom]="'checkin'"
                                        (returnDetails)="handleReturnDetails($event)">
                                    </app-checkin-consumer-add-member>
                                    <div class="actiondiv">
                                        <button type="button" class="cs-btn bt2 backbtn"
                                            (click)="goBack()">{{cancel_btn}}</button>&nbsp;
                                        <button mat-button class="cs-btn bt1 savemember" [disabled]="disable"
                                            (click)="handleSaveMember()">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
                            *ngIf="action=='attachment'">
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                    <mat-chip-list class="">
                                        <mat-chip><a class="lnk pointer-cursor" (click)="imagefile.click()"><input
                                                    #imagefile type="file" accept="/*;capture=camera"
                                                    style="display:none;" multiple (change)="filesSelected($event)"><i
                                                    class="fa fa-paperclip mgn-rt-5" aria-hidden="true"></i>Upload
                                                File</a></mat-chip>
                                    </mat-chip-list>
                                </div>
                                <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 lnk pad-top-10 mgn-up-10 mgn-bt-10 border-tp"
                                    *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
                                    Uploaded Files
                                </div>
                                <ng-container class="attachment"
                                    *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
                                    <div class="row col-md-12 col-xs-12 col-sm-12 mgn-up-10"
                                        *ngFor="let item of selectedMessage.files; let i = index">
                                        <div class="col-md-7 col-xs-9 col-sm-9 col-lg-7">
                                            <span class="ln-hgt-40">{{item.name}}</span>
                                        </div>
                                        <div class="col-md-5 col-xs-3 col-sm-3 col-lg-5">
                                            <span class="">
                                                <button type="button" mat-icon-button [matMenuTriggerFor]="menu">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #menu="matMenu">
                                                    <button type="button" (click)="deleteTempImage(i)" mat-menu-item>
                                                        <i class="icon-delete"></i>
                                                        <span>delete</span>
                                                    </button>
                                                </mat-menu>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 actiondiv">
                                        <button mat-button class="cs-btn bt1 savemember" (click)="goBack()">OK</button>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                        <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
                            *ngIf="action=='service'">
                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
                                Choose the service you want
                            </div>
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                <ng-container *ngFor="let service of servicesjson; let i = index">
                                    <div class="bus-item-medium" [class.div-selected-outline]="service.id==sel_ser">
                                        <div class="card card-item-n no-padding ">
                                            <div class="card-item-title">
                                                <a class="pointer-cursor"
                                                    (click)="showServiceDetail(service, businessjson.businessName)">
                                                    <span class="service-icon"
                                                        *ngIf="service.serviceType == 'virtualService'">
                                                        <i class="fa phon-icon"
                                                            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                        <i class="fa meet-icon"
                                                            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                        <i class="fa zoom-icon"
                                                            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                        <i class="fa wtsapaud-icon"
                                                            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType === 'audioService'"></i>
                                                        <i class="fa wtsapvid-icon"
                                                            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType === 'videoService'"></i>
                                                    </span>
                                                    <b>
                                                        {{service.name | capitalizeFirst}}
                                                    </b>
                                                </a>
                                                <p class="title-style"
                                                    *ngIf="service.provider && service.provider.businessName">
                                                    {{service.provider.businessName}}</p>
                                            </div>
                                            <div class="card-item-content">
                                                <div class="card-item-content-action">
                                                    <div class="checkin-btn-bp1 mgn-up-10"
                                                        (click)="handleServiceSel(service.id)">
                                                        Select
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                        <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
                            *ngIf="action=='departments'">
                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
                                Choose Department
                            </div>
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                <ng-container *ngFor="let dept of departments; let i = index">
                                    <div class="bus-item-medium bus-item-medium-dpt"
                                        [class.div-selected-outline]="dept.departmentId==selected_dept.departmentId">
                                        <div class="card card-item-n no-padding ">
                                            <div class="card-item-title">
                                                <a (click)="handleDepartment(dept)">
                                                    <b>
                                                        {{dept.departmentName | capitalizeFirst}}
                                                    </b>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                        <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
                            *ngIf="action=='members'">
                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
                                <div class="pull-left">Booking for
                                </div>
                                <a class="lnk pointer-cursoraction mgn-lt-20" (click)="addMember()"><i
                                        class="fa fa-user-plus"></i> {{add_member_cap}}</a>
                            </div>
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <ng-container *ngIf="action==='members'">
                                    <div class="member-outer">
                                        <div class="member-list mgn-up-10">
                                            <ul class="member-ul">
                                                <ng-container *ngIf="multipleMembers_allowed">
                                                    <li *ngFor="let memb of familymembers">
                                                        <mat-checkbox
                                                            (change)="handleMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName, $event)"
                                                            [value]="memb.userProfile.id"
                                                            [checked]="isChecked(memb.userProfile.id)">
                                                            {{memb.userProfile.firstName + ' ' +
                                                            memb.userProfile.lastName | capitalizeFirst}}
                                                        </mat-checkbox>
                                                    </li>
                                                </ng-container>
                                                <ng-container *ngIf="!multipleMembers_allowed">
                                                    <mat-radio-group>
                                                        <li *ngFor="let memb of familymembers" class="members">
                                                            <mat-radio-button
                                                                (change)="handleOneMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName)"
                                                                [value]="memb.userProfile.id"
                                                                [checked]="isChecked(memb.userProfile.id)">
                                                                {{memb.userProfile.firstName + ' ' +
                                                                memb.userProfile.lastName | capitalizeFirst}}
                                                            </mat-radio-button>
                                                        </li>
                                                    </mat-radio-group>
                                                </ng-container>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="grey">
                                        <div class="serv-head">
                                            <h5 class="mgn-bt-5 primary-color">Booking alerts and communications will be
                                                send to
                                            </h5>
                                        </div>
                                        <div class="consumer_appt mgn-bt-10 brd-bt">
                                            <p class="m0 mgn-lt-10 mgn-up-10">Phone#: <b>{{countryCode}}
                                                    {{selected_phone}}</b></p>
                                            <p class="m0 mgn-up-10-m"
                                                *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                <i class="fa wtsapaud-icon wtsap-cal"></i> <span>WhatsApp#:
                                                    <b>+{{callingModes}}</b></span>
                                            </p>
                                            <p class="mgn-up-5 mgn-lt-10">Email : <b>{{payEmail}}</b></p>
                                            <p class="mgn-up-5 mgn-lt-10" *ngIf="!editBookingFields">To Change the
                                                Number/Email <a class="bold" (click)="changeBookingFields()">Click
                                                    Here</a>
                                            </p>
                                        </div>

                                        <div class="mgn-up-20 mgn-bt-20" *ngIf="editBookingFields">
                                            <form [formGroup]="bookingForm" class="" novalidate>
                                                <div class="col-md-4 col-sm-6 col-xs-12">
                                                    <div class="form-group">
                                                        <mat-label for="newselected_phone">Enter New Phone# </mat-label>
                                                        <ngx-intl-tel-input style="width: 300px !important;"
                                                            [cssClass]="'custom'"
                                                            [preferredCountries]="preferredCountries"
                                                            [enableAutoCountrySelect]="true" [enablePlaceholder]="true"
                                                            [searchCountryFlag]="true"
                                                            [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                            [selectFirstCountry]="false" [maxLength]="15"
                                                            [tooltipField]="TooltipLabel.Name" [phoneValidation]="true"
                                                            [selectedCountryISO]="selectedCountry"
                                                            [separateDialCode]="separateDialCode"
                                                            [numberFormat]="PhoneNumberFormat.National" name="newPhone"
                                                            formControlName="newPhone">
                                                        </ngx-intl-tel-input>
                                                        <div class="sts-msg error" *ngIf="phoneError">{{phoneError}}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 col-sm-6 col-xs-12">
                                                    <div class="form-group">
                                                        <mat-label for="newselected_phone">Enter New Email </mat-label>
                                                        <input class="width100 height40" id="newEmail"
                                                            placeholder="Email(user@xyz.com)" name="newEmail"
                                                            formControlName="newEmail" autocomplete="off"
                                                            (keyup)="showConfrmEmail($event)" onpaste="return false;"
                                                            oncopy="return false" oncut="return false"
                                                            ondrag="return false" ondrop="return false">
                                                        <app-field-error-display class="red" [displayError]="true"
                                                            *ngIf="emailerror != null" errorMsg={{emailerror}}>
                                                        </app-field-error-display>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 col-sm-6 col-xs-12">
                                                    <div class="form-group"
                                                        *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                        <mat-label for="newselected_phone">Enter New WhatsApp#
                                                        </mat-label>
                                                        <ngx-intl-tel-input style="width: 300px !important;"
                                                            [cssClass]="'custom'"
                                                            [preferredCountries]="preferredCountries"
                                                            [enableAutoCountrySelect]="true" [enablePlaceholder]="true"
                                                            [searchCountryFlag]="true"
                                                            [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                            [selectFirstCountry]="false" [maxLength]="15"
                                                            [tooltipField]="TooltipLabel.Name" [phoneValidation]="true"
                                                            [selectedCountryISO]="selectedCountry"
                                                            [separateDialCode]="separateDialCode"
                                                            [numberFormat]="PhoneNumberFormat.National"
                                                            name="newWhatsapp" formControlName="newWhatsapp">
                                                        </ngx-intl-tel-input>
                                                        <div class="sts-msg error" *ngIf="whatsapperror">
                                                            {{whatsapperror}}</div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20" *ngIf="!showCreateMember">
                                        <button mat-button class="cs-btn bt1 backtocheckin"
                                            (click)="saveMemberDetails()">OK
                                        </button>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                        <div class="lbl notes preinfoDesc" *ngIf="action=='preInfo'">
                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20 mgn-bt-20"
                                style="font-size: 1rem !important">{{sel_ser_det.preInfoTitle}}
                            </div>
                            <div class="col-md-12 col-sm-12 col-xs-12 mgn-bt-20">
                                <div [innerHTML]="sel_ser_det.preInfoText">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
            <!--begin::Entry-->
            <div class="pad-10 d-flex flex-column-fluid">
                <div class="card card-custom">
                    <div class="card-body p-0">
                        <!--begin::Wizard-->
                        <div class="wizard wizard-1" id="kt_wizard_v1" data-wizard-state="step-first"
                            data-wizard-clickable="false">
                            <!--begin::Wizard Nav-->
                            <div class="wizard-nav" *ngIf="type !='waitlistreschedule'">
                                <div class="wizard-steps p-8 p-lg-10">
                                    <!--begin::Wizard Step 1 Nav-->
                                    <div class="wizard-step tab-selected" data-wizard-type="step">
                                        <div class="wizard-label">
                                            <div class="step-icon">1</div>
                                            <h3 class="wizard-title">Booking Window</h3>
                                        </div>
                                        <span class="svg-icon svg-icon-xl wizard-arrow">
                                            <!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Arrow-right.svg--><svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                    <rect fill="#000000" opacity="0.3"
                                                        transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                        x="11" y="5" width="2" height="14" rx="1" />
                                                    <path
                                                        d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                        fill="#000000" fill-rule="nonzero"
                                                        transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon-->
                                        </span>
                                    </div>
                                    <!--end::Wizard Step 1 Nav-->
                                    <!--begin::Wizard Step 2 Nav-->
                                    <div class="wizard-step" data-wizard-type="step" [class.tab-selected]="bookStep>=2"
                                        *ngIf="questionnaireList.labels && questionnaireList.labels.length > 0">
                                        <div class="wizard-label">
                                            <div class="step-icon">2</div>
                                            <h3 class="wizard-title">More Info</h3>
                                        </div>
                                        <span class="svg-icon svg-icon-xl wizard-arrow">
                                            <!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Arrow-right.svg--><svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                    <rect fill="#000000" opacity="0.3"
                                                        transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                        x="11" y="5" width="2" height="14" rx="1" />
                                                    <path
                                                        d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                        fill="#000000" fill-rule="nonzero"
                                                        transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon-->
                                        </span>
                                    </div>
                                    <!--end::Wizard Step 2 Nav-->
                                    <!--begin::Wizard Step 5 Nav-->
                                    <div class="wizard-step" data-wizard-type="step" [class.tab-selected]="bookStep==3">
                                        <div class="wizard-label">
                                            <div class="step-icon">{{(questionnaireList.labels &&
                                                questionnaireList.labels.length > 0) ? 3 : 2}}</div>
                                            <h3 class="wizard-title">Confirm</h3>
                                        </div>
                                        <span class="svg-icon svg-icon-xl wizard-arrow last">
                                            <!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Arrow-right.svg--><svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px"
                                                viewBox="0 0 24 24" version="1.1">
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                    <rect fill="#000000" opacity="0.3"
                                                        transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                        x="11" y="5" width="2" height="14" rx="1" />
                                                    <path
                                                        d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                        fill="#000000" fill-rule="nonzero"
                                                        transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                </g>
                                            </svg>
                                            <!--end::Svg Icon-->
                                        </span>
                                    </div>
                                    <!--end::Wizard Step 5 Nav-->
                                </div>
                            </div>
                            <!--end::Wizard Nav-->
                            <!--begin::Wizard Body-->
                            <div class="row justify-content-center">
                                <div class="col-xl-12">
                                    <!--begin::Wizard Step 1-->
                                    <div class="" data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 1">
                                        <div class="panel-body no-padding">
                                            <div
                                                class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding">
                                                <div
                                                    class="col-md-4 col-lg-4 col-xs-12 col-sm-12 no-padding check-new-group border-tp border-rt">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding border-bt"
                                                        *ngIf="this.selectedUserParam && selectedUser">
                                                        <div class="col-sm-2 col-xs-3 col-md-4 ">
                                                            <img class="card-img" [src]="getPic(selectedUser)"
                                                                alt="Profile Pic">
                                                        </div>
                                                        <div class="col-sm-10 col-xs-9 col-md-8 no-padding">
                                                            <div class="">
                                                                <h6 class="card-title mgn-up-5">
                                                                    <span
                                                                        *ngIf="selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                    <span
                                                                        *ngIf="!selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                </h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 mgn-up-5">
                                                            {{showCheckinButtonCaption()}} For
                                                        </div>
                                                        <div class="col-sm-12 col-xs-12 col-md-12">
                                                            <div class=""
                                                                *ngIf="sel_ser || type == 'waitlistreschedule'">
                                                                <div class="service-icon pull-left"
                                                                    *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                </div>
                                                                <h6 class="card-title service">
                                                                    {{sel_ser_det.name}}
                                                                </h6>
                                                                <div class="mgn-bt-15"
                                                                    style="font-size: 1rem; float: left;"
                                                                    *ngIf="sel_ser_det.price && type != 'reschedule'">
                                                                    <p class="module-nomargin line-clamp"
                                                                        *ngIf="sel_ser_det.description && !showmoreSpec"
                                                                        (click)="showSpec()">
                                                                        {{sel_ser_det.description}}</p>
                                                                    <p *ngIf="showmoreSpec" (click)="showSpec()">
                                                                        {{sel_ser_det.description}}</p>
                                                                </div>
                                                                <div class="">
                                                                    <div class="clearfix"></div>
                                                                    <div class="callingmode mgn-lt-10 mgn-up-10"
                                                                        *ngIf="sel_ser_det && sel_ser_det.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                                        <div class="mgn-bt-10 mgn-up-5">
                                                                            <div class=""
                                                                                *ngFor="let mode of sel_ser_det.virtualCallingModes;let i = index">
                                                                                <div style="visibility: hidden;">
                                                                                    {{callingModesDisplayName[mode.callingMode]}}
                                                                                </div>
                                                                                <div class="cal-mod-instrct pre-check-title color-grey"
                                                                                    *ngIf="mode.callingMode">
                                                                                    {{mode.instructions}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="prenotes mgn-bt-10"
                                                                        *ngIf="sel_ser_det.preInfoEnabled">
                                                                        <div class="preinfo-title">
                                                                            {{sel_ser_det.preInfoTitle}}</div>
                                                                        <div [innerHTML]="sel_ser_det.preInfoText">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-md-4 col-lg-4 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding"
                                                        *ngIf="queuejson && queuejson.length != 0 && !api_loading1">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-10">
                                                            Date/Time
                                                            <span><a class="changeitem  pointer-cursor  mgn-rt-20 mgn-bt-10 pull-right "
                                                                    (click)="changeTime()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">Change
                                                                </a></span>
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <h6 class="card-title serv-time border-style">
                                                                <span *ngIf="!isFuturedate">Today, </span>
                                                                <span *ngIf="!isFuturedate">
                                                                    {{queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['sTime']
                                                                    + '
                                                                    - ' +
                                                                    queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['eTime']}}
                                                                </span>
                                                                <span *ngIf="isFuturedate">{{sel_checkindate | date:
                                                                    newDateFormat}},
                                                                </span>
                                                                <span *ngIf="isFuturedate">
                                                                    {{queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['sTime']
                                                                    + '
                                                                    - ' +
                                                                    queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['eTime']}}
                                                                </span>
                                                            </h6>
                                                        </div>
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20">
                                                            Waiting in Line
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <h6 class="card-title serv-time">
                                                                <span *ngIf="sel_queue_personaahead <= 0">0
                                                                    People</span>
                                                                <span *ngIf="sel_queue_personaahead == 1">1<span>
                                                                        Person</span></span>
                                                                <span
                                                                    *ngIf="sel_queue_personaahead > 1">{{sel_queue_personaahead}}<span>
                                                                        People</span></span>
                                                                <span *ngIf="calc_mode=='NoCalc'">
                                                                    <span *ngIf="!isFuturedate">
                                                                    </span>
                                                                </span>
                                                                <span
                                                                    *ngIf="sel_queue_servicetime=='' && calc_mode!='NoCalc'">
                                                                    <span class="color-grey">\</span>
                                                                    <span>{{sel_queue_waitingmins}}</span>
                                                                </span>
                                                                <span
                                                                    *ngIf="sel_queue_servicetime!='' && calc_mode!='NoCalc'">
                                                                    <ng-container *ngIf="isFuturedate">
                                                                    </ng-container>
                                                                    <ng-container *ngIf="!isFuturedate">
                                                                        <span><span class="color-grey"> \
                                                                            </span>{{sel_queue_servicetime}}</span>
                                                                    </ng-container>
                                                                </span>
                                                            </h6>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red mgn-up-10"
                                                        *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                                        No timings available.
                                                        <span><a class="lnk pointer-cursor action mgn-lt-10"
                                                                (click)="changeTime()" data-toggle="modal"
                                                                data-target="#exampleModalCenter">Change Time
                                                            </a></span>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-md-4 col-lg-4 col-xs-12 col-sm-12 border-tp check-new-group">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-10 mgn-bt-10 no-padding">
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 no-padding">
                                                                Booking
                                                                For <a *ngIf="type !== 'waitlistreschedule'"
                                                                    class="changeitem  pointer-cursor  mgn-lt-5 mgn-rt-20 pull-right"
                                                                    data-toggle="modal"
                                                                    data-target="#exampleModalCenter"
                                                                    (click)="handleSideScreen('members')">Change
                                                                </a>
                                                                <!-- <a *ngIf="type !== 'waitlistreschedule'"
                                                                    class="changeitem  pointer-cursor  mgn-lt-5 mgn-rt-20 pull-right"
                                                                    (click)="handleSideScreen('members')">Change
                                                                </a> -->
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
                                                                <div class="">
                                                                    <div *ngIf="type !== 'waitlistreschedule'">
                                                                        <h6 class="card-title service mgn-bt-10"
                                                                            *ngFor="let member of waitlist_for">
                                                                            {{member.firstName | capitalizeFirst}}
                                                                            {{member.lastName | capitalizeFirst}}
                                                                        </h6>
                                                                    </div>
                                                                    <h6 class="card-title service"
                                                                        *ngIf="type === 'waitlistreschedule'">
                                                                        {{wtlst_for_fname | capitalizeFirst}}
                                                                        {{wtlst_for_lname | capitalizeFirst}}
                                                                    </h6>
                                                                    <div class="contact-section">
                                                                        <i class="fa fa-mobile "></i>
                                                                            <ng-container *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && (!changePhno || currentPhone == callingModes)">
                                                                            <i class="fa wtsapaud-icon wtsap-cal"
                                                                            *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                        <i class="fa wtsapvid-icon wtsap-cal mgn-lt-5"
                                                                            *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                        </ng-container>
                                                                            <span class="mgn-lt-10 phonevallabel"
                                                                            *ngIf="userPhone && !changePhno">{{countryCode}}
                                                                            {{userPhone}}</span>
                                                                        <span class="mgn-lt-10 phonevallabel"
                                                                            *ngIf="currentPhone && changePhno">{{countryCode}}
                                                                            {{currentPhone}}</span><a
                                                                            class="mgn-lt-5 lnk pointer-cursor">
                                                                        </a>
                                                                        <div class="mode-hint mgn-bt-5"
                                                                            *ngIf="(!changePhno || currentPhone == callingModes) && (sel_ser_det && sel_ser_det.virtualCallingModes && (sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' || sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'))">
                                                                            The provider will contact you in this
                                                                            number
                                                                        </div>
                                                                    </div>
                                                                    <div class="contact-section"
                                                                        *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                            <i class="fa wtsapaud-icon wtsap-cal"
                                                                            *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                        <i class="fa wtsapvid-icon wtsap-cal"
                                                                            *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                        <span
                                                                            class="mgn-lt-10 phonevallabel">+{{callingModes}}</span><a
                                                                            class="mgn-lt-5 lnk pointer-cursor">
                                                                        </a>
                                                                        <div class="mode-hint mgn-bt-5">
                                                                            The provider will contact you in this
                                                                            number
                                                                        </div>
                                                                    </div>
                                                                    <div class=""
                                                                        *ngIf="userData && userData.userProfile && userData.userProfile.email">
                                                                        <i class="fa fa-envelope-o "></i>
                                                                        <span
                                                                            class="mgn-lt-5 emailvallabel">{{userData.userProfile.email}}</span>
                                                                        <a class="mgn-lt-5 lnk pointer-cursor">
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div
                                                            class="col-sm-12 col-xs-12 chk-btns-div col-md-12 no-padding">
                                                            <a #modal data-toggle="modal"
                                                                data-target="#exampleModalCenter">
                                                            </a>
                                                            <mat-chip-list class="btns">
                                                                <mat-chip
                                                                    [class.mandatoryChip]="sel_ser_det.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                    (click)="handleSideScreen('note');modal.click();">
                                                                    <a class="lnk action pointer-cursor"><i
                                                                            class="fa fa-file-text-o mgn-rt-5"
                                                                            aria-hidden="true"></i>
                                                                        {{sel_ser_det.consumerNoteTitle}}
                                                                        <span
                                                                            *ngIf="sel_ser_det.consumerNoteMandatory">*</span></a>
                                                                </mat-chip>
                                                                <mat-chip><a class="lnk action pointer-cursor"
                                                                        (click)="imagefile1.click();"><input #imagefile1
                                                                            type="file" accept="/*;capture=camera"
                                                                            style="display:none;" multiple
                                                                            (change)="filesSelected($event, 'close')"><i
                                                                            class="fa fa-paperclip mgn-rt-5"
                                                                            aria-hidden="true"></i>Upload
                                                                        File
                                                                        <span
                                                                            *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">&nbsp;({{getAttachLength()}})</span>
                                                                    </a></mat-chip>
                                                            </mat-chip-list>
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-5 no-padding"
                                                                *ngIf="(s3CouponsList.length > 0) && type != 'waitlistreschedule'">
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length === 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">Apply
                                                                    Promocode</a>
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length > 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">
                                                                    Promocode applied</a>
                                                                {{selected_coupons.toString()}}
                                                            </div>
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-20">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20 no-padding">
                                                                    <div class="checkin-btn-bp pointer-cursor"
                                                                        *ngIf="type == 'waitlistreschedule'"
                                                                        [class.disableActn]="(queuejson && queuejson.length == 0 && !api_loading1) || callingModes === '' || disableButn()"
                                                                        (click)="rescheduleWaitlist()">
                                                                        Reschedule
                                                                        <i class="fa fa-long-arrow-right mgn-lt-5"></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="close-btn">
                                                            <button type="button" class="close" aria-label="Close"
                                                                data-dismiss="modal">
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <ng-container *ngIf="action=='members'">
                                                            <div class="modal-body">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
                                                                    <div class="pull-left"> Booking for
                                                                    </div>
                                                                    <a class="lnk pointer-cursoraction mgn-lt-20"
                                                                        (click)="addMember()"><i
                                                                            class="fa fa-user-plus"></i>
                                                                        {{add_member_cap}}</a>
                                                                </div>
                                                                <div class="member-outer">
                                                                    <div class="member-list mgn-up-10">
                                                                        <ul class="member-ul">
                                                                            <ng-container
                                                                                *ngIf="multipleMembers_allowed">
                                                                                <li *ngFor="let memb of familymembers">
                                                                                    <mat-checkbox
                                                                                        (change)="handleMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName, $event)"
                                                                                        [value]="memb.userProfile.id"
                                                                                        [checked]="isChecked(memb.userProfile.id)">
                                                                                        {{memb.userProfile.firstName + '
                                                                                        ' +
                                                                                        memb.userProfile.lastName |
                                                                                        capitalizeFirst}}
                                                                                    </mat-checkbox>
                                                                                </li>
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="!multipleMembers_allowed">
                                                                                <mat-radio-group>
                                                                                    <li *ngFor="let memb of familymembers"
                                                                                        class="members">
                                                                                        <mat-radio-button
                                                                                            (change)="handleOneMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName)"
                                                                                            [value]="memb.userProfile.id"
                                                                                            [checked]="isChecked(memb.userProfile.id)">
                                                                                            {{memb.userProfile.firstName
                                                                                            + '
                                                                                            ' +
                                                                                            memb.userProfile.lastName |
                                                                                            capitalizeFirst}}
                                                                                        </mat-radio-button>
                                                                                    </li>
                                                                                </mat-radio-group>
                                                                            </ng-container>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                                <div class="grey">
                                                                    <div class="serv-head">
                                                                        <h5 class="mgn-bt-5 primary-color">Booking
                                                                            alerts
                                                                            and communications will be
                                                                            send to
                                                                        </h5>
                                                                    </div>
                                                                    <div class="consumer_appt mgn-bt-10 brd-bt">
                                                                        <p class="m0 mgn-lt-10 mgn-up-10">Phone#:
                                                                            <b>{{countryCode}}
                                                                                {{selected_phone}}</b>
                                                                        </p>
                                                                        <p class="m0 mgn-up-10-m"
                                                                            *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                                <i class="fa wtsapaud-icon wtsap-cal"
                                                                                *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                            <i class="fa wtsapvid-icon wtsap-cal mgn-rt-5 mgn-lt-10"
                                                                                *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                            <span>WhatsApp#:
                                                                                <b>+{{callingModes}}</b></span>
                                                                        </p>
                                                                        <p class="mgn-up-5 mgn-lt-10" *ngIf="payEmail">
                                                                            Email :
                                                                            <b>{{payEmail}}</b>
                                                                        </p>
                                                                        <p class="mgn-up-5 mgn-lt-10"
                                                                            *ngIf="!editBookingFields">To Change the
                                                                            Number/Email <a class="bold"
                                                                                (click)="changeBookingFields()">Click
                                                                                Here</a>
                                                                        </p>
                                                                    </div>
                                                                    <div class="mgn-up-20 mgn-bt-20"
                                                                        *ngIf="editBookingFields">
                                                                        <form [formGroup]="bookingForm" class=""
                                                                            novalidate>
                                                                            <div class="col-md-8 col-sm-8 col-xs-12">
                                                                                <div class="form-group">
                                                                                    <mat-label for="newselected_phone">
                                                                                        Enter
                                                                                        New Phone# </mat-label>
                                                                                    <ngx-intl-tel-input
                                                                                        style="width: 300px !important;"
                                                                                        [cssClass]="'custom'"
                                                                                        [preferredCountries]="preferredCountries"
                                                                                        [enableAutoCountrySelect]="true"
                                                                                        [enablePlaceholder]="true"
                                                                                        [searchCountryFlag]="true"
                                                                                        [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                                        [selectFirstCountry]="false"
                                                                                        [maxLength]="15"
                                                                                        [tooltipField]="TooltipLabel.Name"
                                                                                        [phoneValidation]="true"
                                                                                        [selectedCountryISO]="selectedCountry"
                                                                                        [separateDialCode]="separateDialCode"
                                                                                        [numberFormat]="PhoneNumberFormat.National"
                                                                                        name="newPhone"
                                                                                        formControlName="newPhone">
                                                                                    </ngx-intl-tel-input>
                                                                                    <div class="sts-msg error"
                                                                                        *ngIf="phoneError">
                                                                                        {{phoneError}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-8 col-sm-8 col-xs-12">
                                                                                <div class="form-group">
                                                                                    <mat-label for="newselected_phone">
                                                                                        Enter
                                                                                        New Email </mat-label>
                                                                                    <input
                                                                                        class="width100 height40 email-border"
                                                                                        id="newEmail"
                                                                                        placeholder="Email(user@xyz.com)"
                                                                                        name="newEmail"
                                                                                        formControlName="newEmail"
                                                                                        autocomplete="off"
                                                                                        onpaste="return false;"
                                                                                        oncopy="return false"
                                                                                        oncut="return false"
                                                                                        ondrag="return false"
                                                                                        ondrop="return false">
                                                                                    <app-field-error-display class="red"
                                                                                        [displayError]="true"
                                                                                        *ngIf="emailerror != null"
                                                                                        errorMsg={{emailerror}}>
                                                                                    </app-field-error-display>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-8 col-sm-8 col-xs-12">
                                                                                <div class="form-group"
                                                                                    *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                                    <mat-label for="newselected_phone">
                                                                                        Enter
                                                                                        New WhatsApp#
                                                                                    </mat-label>
                                                                                    <ngx-intl-tel-input
                                                                                        style="width: 300px !important;"
                                                                                        [cssClass]="'custom'"
                                                                                        [preferredCountries]="preferredCountries"
                                                                                        [enableAutoCountrySelect]="true"
                                                                                        [enablePlaceholder]="true"
                                                                                        [searchCountryFlag]="true"
                                                                                        [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                                        [selectFirstCountry]="false"
                                                                                        [maxLength]="15"
                                                                                        [tooltipField]="TooltipLabel.Name"
                                                                                        [phoneValidation]="true"
                                                                                        [selectedCountryISO]="selectedCountry"
                                                                                        [separateDialCode]="separateDialCode"
                                                                                        [numberFormat]="PhoneNumberFormat.National"
                                                                                        name="newWhatsapp"
                                                                                        formControlName="newWhatsapp">
                                                                                    </ngx-intl-tel-input>
                                                                                    <div class="sts-msg error"
                                                                                        *ngIf="whatsapperror">
                                                                                        {{whatsapperror}}</div>
                                                                                </div>
                                                                            </div>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="action=='attachment'">
                                                            <div class="modal-body">
                                                                <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                                                    <mat-chip-list class="btns">
                                                                        <mat-chip><a class="lnk action pointer-cursor"
                                                                                (click)="imagefile.click()"><input
                                                                                    #imagefile type="file"
                                                                                    accept="/*;capture=camera"
                                                                                    style="display:none;" multiple
                                                                                    (change)="filesSelected($event)"><i
                                                                                    class="fa fa-paperclip mgn-rt-5"
                                                                                    aria-hidden="true"></i>Upload
                                                                                File</a></mat-chip>
                                                                    </mat-chip-list>
                                                                </div>
                                                                <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 bold pad-top-10 mgn-up-10 mgn-bt-10 border-tp"
                                                                    *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                                    Uploaded Files
                                                                </div>
                                                                <div class="img-section mgn-up-20"
                                                                    *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                                    <ul class="galul">
                                                                        <ng-container
                                                                            *ngIf="type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0">
                                                                            <li
                                                                                *ngFor="let file of waitlist.attchment;let i = index ">
                                                                                <div class="galimg_outer"
                                                                                    *ngIf="getThumbUrl(file)">
                                                                                    <div class="gal_img">
                                                                                        <img [src]="getThumbUrl(file)">
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                        </ng-container>
                                                                        <ng-container
                                                                            *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
                                                                            <li
                                                                                *ngFor="let file of selectedMessage.files;let i = index ">
                                                                                <div class="galimg_outer">
                                                                                    <div class="gal_img">
                                                                                        <img [src]="getImage(selectedMessage.base64[i], file)"
                                                                                            *ngIf="selectedMessage.base64[i]">
                                                                                    </div>
                                                                                    <div class="gal_action"
                                                                                        (click)="deleteTempImage(i)">
                                                                                        <i class="fa fa-times-circle"
                                                                                            aria-hidden="true"></i>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                        </ng-container>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="action=='timeChange'">
                                                            <div class="modal-body">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-bt-5 mgn-up-10">
                                                                    Choose
                                                                    Date
                                                                </div>
                                                                <div class="pull-left brd-round brd-light mgn-up-20">
                                                                    <div class="icon-minus pull-left"
                                                                        [class.disable]="disableMinus()"
                                                                        *ngIf="settingsjson.futureDateWaitlist"
                                                                        (click)="calculateDate(-1)">
                                                                    </div>
                                                                    <div class="pull-left chkindt">{{sel_checkindate |
                                                                        date:
                                                                        dateFormat}}</div>
                                                                    <div class="icon-add pull-left"
                                                                        *ngIf="settingsjson.futureDateWaitlist"
                                                                        (click)="calculateDate(1)"></div>
                                                                </div>
                                                                <div class="pickerouter caldiv pull-left mgn-up-20"
                                                                    *ngIf="settingsjson.futureDateWaitlist">
                                                                    <mat-datepicker-toggle matSuffix [for]="picker">
                                                                    </mat-datepicker-toggle>
                                                                    <mat-datepicker #picker
                                                                        [dateClass]="dateClass.bind(this)">
                                                                    </mat-datepicker>
                                                                    <input class=""
                                                                        style="visibility: hidden; width:1px"
                                                                        type="text" [matDatepicker]="picker"
                                                                        [min]="minDate" [max]="maxDate" [value]="ddate"
                                                                        (dateChange)="handleFutureDateChange($event)">
                                                                </div>
                                                                <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                                    <div
                                                                        class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20 mgn-bt-20">
                                                                        Choose
                                                                        Timings</div>
                                                                    <div
                                                                        class="col-md-12 col-xs-12 col-sm-12 slotdiv no-padding mgn-up-20">
                                                                        <mat-chip-list class=""
                                                                            *ngIf="queuejson && queuejson.length > 0">
                                                                            <mat-chip
                                                                                *ngFor="let queue of queuejson, let i= index"
                                                                                [selected]="queue.id === queuejson[this.sel_queue_indx].id"
                                                                                (click)="handleQueueSelection(queue, i)">
                                                                                {{queue.queueSchedule.timeSlots[0]['sTime']
                                                                                + ' - '
                                                                                +
                                                                                queue.queueSchedule.timeSlots[0]['eTime']}}
                                                                            </mat-chip>
                                                                        </mat-chip-list>
                                                                        <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red"
                                                                            *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                                                            No timings available.
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="action=='coupons'">
                                                            <div class="modal-body">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                                    Apply
                                                                    promocode
                                                                </div>
                                                                <div
                                                                    class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mgn-up-20">
                                                                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                        *ngIf="showCouponWB">
                                                                        <div
                                                                            class="col-md-12 col-sm-12 col-lg-12 col-xs-12 form-level-settings applybill no-padding">
                                                                            <i
                                                                                class="icon-bell"></i>{{applied_inbilltime}}
                                                                        </div>
                                                                        <div class="width-60">
                                                                            <div class="input-group">
                                                                                <input
                                                                                    [ngClass]="{'invalid':!couponvalid}"
                                                                                    (keydown)="clearCouponErrors()"
                                                                                    placeholder="Enter coupon code"
                                                                                    type="text" class="form-control"
                                                                                    [(ngModel)]="selected_coupon">
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                            style="color: red;"
                                                                            *ngIf="api_cp_error !== null">
                                                                            {{api_cp_error}}</div>
                                                                        <div
                                                                            class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding mgn-up-10 mgn-bt-20">

                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-12 col-sm-12 col-lg-12 col-12 mgn-up-20 mgn-bt-30 border-tp pad-up-10"
                                                                        *ngIf="couponsList && couponsList.length>0">
                                                                        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                            *ngFor="let coupon of couponsList let i=index">
                                                                            <div
                                                                                class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding coupon-add-msg">
                                                                                <div
                                                                                    class="col-md-5 col-sm-7 col-xs-7 col-lg-4 no-padding">
                                                                                    {{coupon.couponCode}} </div>
                                                                                <div
                                                                                    class="col-md-7 col-sm-5 col-xs-5 col-lg-8 delteTC">
                                                                                    <span><a *ngIf="coupon.instructions"
                                                                                            (click)="toggleterms(i)"
                                                                                            class="pointer-cursor lnk read-more-checkin">Read
                                                                                            T & C </a></span>
                                                                                    <span><a class="pointer-cursor lnk"><i
                                                                                                class="pointer-cursor icon-delete mgn-lt-10 lnk"
                                                                                                (click)="removeJCoupon(i)"
                                                                                                [matTooltipClass]="tooltipcls"
                                                                                                [matTooltip]="'Remove Coupon'"></i></a></span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mgn-up-10 pre-instr no-padding"
                                                                                *ngIf="coupon.showme">
                                                                                {{coupon.instructions}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 coupon-outer"
                                                                    *ngIf="coupon_status">
                                                                    <div class="form-group">
                                                                        <span *ngIf="coupon_status=='success'"
                                                                            class="coupon_success">Coupon Code(s)
                                                                            applied
                                                                            successfully</span>
                                                                        <span *ngIf="coupon_status=='error'"
                                                                            class="coupon-error">Coupon
                                                                            Code(s) not
                                                                            valid</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="action=='note'">
                                                            <div class="modal-body">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                                    {{sel_ser_det.consumerNoteTitle}}
                                                                </div>
                                                                <div class="col-md-12 col-sm-12 col-xs-12">
                                                                    <textarea class="form-control mgn-bt-20 mgn-up-20"
                                                                        [(ngModel)]="consumerNote" #consumernote
                                                                        (change)="handleConsumerNote(consumernote.value)"
                                                                        maxlength="1000"
                                                                        placeholder="{{note_placeholder}}"></textarea>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="action=='addmember'">
                                                            <div class="modal-body">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10s">
                                                                    <i class="fa fa-arrow-left pointer-cursor"
                                                                        (click)="goBack()"></i>
                                                                    {{add_member_cap}}
                                                                </div>
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                                    <app-checkin-consumer-add-member
                                                                        [calledFrom]="'checkin'"
                                                                        (returnDetails)="handleReturnDetails($event)">
                                                                    </app-checkin-consumer-add-member>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <div class="modal-footer">
                                                            <button type="button"
                                                                class="disp-none btn btn-light-primary font-weight-bold"
                                                                data-dismiss="modal" #closebutton>Cancel</button>
                                                            <button type="button"
                                                                class="btn btn-primary font-weight-bold"
                                                                (click)="actionCompleted()">Ok</button>
                                                        </div>
                                                        <div class="error-section" *ngIf="apiError !== ''">
                                                            {{apiError}}
                                                        </div>
                                                        <div class="error-section success-section"
                                                            *ngIf="apiSuccess !== ''">
                                                            {{apiSuccess}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--end::Wizard Step 1-->
                                    <div class="" data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 2">
                                        <div class="mgn-bt-20 quest-head mgn-up-10">
                                            Please provide us with a little more information complete your booking
                                        </div>
                                        <app-questionnaire [questionnaireList]="questionnaireList"
                                            [questionAnswers]="questionAnswers" [source]="'consCheckin'"
                                            [consumerId]="(waitlist_for[0].id === customer_data.id) ? 0 : waitlist_for[0].id"
                                            [serviceId]="sel_ser" [accountId]="account_id"
                                            (returnAnswers)="getQuestionAnswers($event)"></app-questionnaire>
                                    </div>
                                    <div class="" data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 3">
                                        <div class="confirm-head">Confirm your token details</div>
                                        <table class="bookdetails">
                                            <tbody>
                                                <tr *ngIf="!sel_ser_det.provider">
                                                    <td width="48%" align="right">
                                                        Provider</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td class="name-line-ht">{{businessjson.businessName}}</td>
                                                </tr>
                                                <tr *ngIf="sel_ser_det.provider">
                                                    <td width="48%" align="right">
                                                        Provider</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td class="name-line-ht">{{sel_ser_det.provider}},
                                                        {{businessjson.businessName}}</td>
                                                </tr>
                                                <!-- <tr>
                                                        <td width="48%" align="right">Location </td>
                                                        <td width="2%">&nbsp;:&nbsp;</td>
                                                        <td> {{locationName}}</td>
                                                    </tr> -->
                                                <tr>
                                                    <td width="48%" align="right" *ngIf="settingsjson.showTokenId">
                                                        Token for</td>
                                                    <td width="48%" align="right" *ngIf="!settingsjson.showTokenId">
                                                        Check-in for</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td>
                                                        <div *ngFor="let customer of waitlist_for">
                                                            {{customer.firstName}}
                                                            {{customer.lastName}}
                                                        </div></td>
                                                </tr>
                                                <tr>
                                                    <td width="48%" align="right">Service</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td>
                                                        <span class="service-icon pull-left"
                                                            *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                            <i class="fa phon-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                            <i class="fa meet-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                            <i class="fa zoom-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                            <i class="fa wtsapaud-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType ==='audioService'"></i>
                                                            <i class="fa wtsapvid-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType ==='videoService'"></i>
                                                        </span>
                                                        <span>{{sel_ser_det.name}}</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="48%" align="right">Contact #</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td>{{countryCode}} {{userPhone}}</td>
                                                </tr>
                                                <tr
                                                    *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                    <td width="48%" align="right">WhatsApp #</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td> +{{callingModes}}</td>
                                                </tr>
                                                <tr *ngIf="userData.userProfile.email">
                                                    <td width="48%" align="right">Email</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td>{{userData.userProfile.email}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="containerAppt textcenter">
                                            <div class="mgn-up-10 no-mgn-bt bold">Date/Time</div>
                                            <div class="mgn-bt-5">
                                                <span *ngIf="!isFuturedate">Today, </span>
                                                <span *ngIf="isFuturedate">{{sel_checkindate | date:
                                                    newDateFormat}},
                                                </span>
                                                <span>
                                                    {{queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['sTime']
                                                    + '
                                                    - ' +
                                                    queuejson[sel_queue_indx].queueSchedule.timeSlots[0]['eTime']}}
                                                </span>
                                            </div>
                                            <div class="no-mgn-bt bold"> Waiting in line</div>
                                            <div class="mgn-bt-10 pad-bt-10">
                                                <span *ngIf="sel_queue_personaahead <= 0">0 People</span>
                                                <span *ngIf="sel_queue_personaahead == 1">1<span>
                                                        Person</span></span>
                                                <span
                                                    *ngIf="sel_queue_personaahead > 1">{{sel_queue_personaahead}}<span>
                                                        People</span>
                                                </span>
                                                <span *ngIf="sel_queue_servicetime=='' && calc_mode!='NoCalc'">
                                                    <span class="color-grey">\</span>
                                                    <span>{{sel_queue_waitingmins}}</span>

                                                </span>
                                                <span *ngIf="sel_queue_servicetime!='' && calc_mode!='NoCalc'">
                                                    <ng-container *ngIf="!isFuturedate">
                                                        <span><span class="color-grey"> \
                                                            </span>{{sel_queue_servicetime}}</span>
                                                    </ng-container>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="pay-section"
                                            *ngIf="paymentDetails && paymentDetails.amountRequiredNow > 0">
                                            <div>
                                                Service Fee <span class="rupee-font">{{serviceCost |
                                                    currency:'&#8377;'}}
                                                </span>
                                            </div>
                                            <div class="bold">
                                                Payment required now <span
                                                    class="rupee-font">{{paymentDetails.amountRequiredNow |
                                                    currency:'&#8377;'}}
                                                </span>
                                            </div>
                                            <div class="">
                                                <div class="select-pay"> Select payment options</div>
                                                <div class="">
                                                    <span class="razorpay-icon mgn-rt-20 selected-payment"></span>
                                                    <span class="paytm-icon"></span>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!--begin::Wizard Actions-->
                                    <div class="d-flex justify-content-between border-top pt-10 width-100"
                                        *ngIf="type!='waitlistreschedule'">
                                        <div class="mr-2">
                                            <button type="button" *ngIf="bookStep > 1"
                                                class="btn btn-light-primary font-weight-bold text-uppercase px-9 py-4"
                                                (click)="goToStep('prev')">
                                                Previous
                                            </button>
                                        </div>
                                        <div>
                                            <button type="button" *ngIf="bookStep == 3" (click)="saveCheckin('checkin')"
                                                class="btn btn-success font-weight-bold text-uppercase px-9 py-4">
                                                <ng-container
                                                    *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                    Pay</ng-container>
                                                <ng-container
                                                    *ngIf="paymentLength == 0 || (paymentDetails && paymentDetails.amountRequiredNow == 0)">
                                                    Confirm</ng-container>
                                            </button>
                                            <button type="button" *ngIf="bookStep != 3"
                                                class="btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                (click)="goToStep('next')"
                                                [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                Next
                                            </button>
                                        </div>
                                    </div>
                                    <!--end::Wizard Actions-->
                                </div>
                            </div>
                            <!--end::Wizard Body-->
                        </div>
                        <!--end::Wizard-->
                    </div>
                    <!--end::Wizard-->
                </div>
            </div>
            <!--end::Entry-->
        </div>
        <div class="clearfix"></div>
    </div>
</section>