<section class="c-checkin-new container no-padding" [ngClass]="theme?theme:''">
    <div class="content p0 loc-list ynw-common-form-nm">
        <div class="panel panel-default">
            <div class="panel-heading top-row ">
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <a class="pull-left back-btn mgn-up-5" (click)="goBack('back')"><i class="fa fa-arrow-left"></i></a>
                </div>
                <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 no-padding">
                    <app-header *ngIf="sharedFunctionobj.checkLogin()" [includedfrom]="'checkin'"></app-header>
                </div>
            </div>
            <div class="pad-10 d-flex flex-column-fluid">
                <div class="card card-custom no-margin no-padding">
                    <div class="card-body p-0">
                        <div class="wizard wizard-1" id="kt_wizard_v1" data-wizard-state="step-first"
                            data-wizard-clickable="false">
                            <div class="row justify-content-center">
                                <div class="loading-hgt" *ngIf="!questionnaireLoaded">
                                    <app-common-innerloading-spinner></app-common-innerloading-spinner>
                                </div>
                                <div class="col-xl-12" *ngIf="questionnaireLoaded">
                                    <div
                                        class="lbl col-sm-12 col-md-5 col-lg-4 col-xs-12 col-sm-12 no-padding displ-none">
                                        <div class="wizard-nav" *ngIf="type !='waitlistreschedule'">
                                            <div class="wizard-steps p-8 p-lg-10">
                                                <div class="wizard-step tab-selected wizard-mgn-30"
                                                    data-wizard-type="step">
                                                    <div class="wizard-label">
                                                        <div class="step-icon">1</div>
                                                        <h3 class="wizard-title mgn-lt-15">Booking Window</h3>
                                                    </div>
                                                    <span class="svg-icon svg-icon-xl wizard-arrow">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                                                            height="24px" viewBox="0 0 24 24" version="1.1">
                                                            <g stroke="none" stroke-width="1" fill="none"
                                                                fill-rule="evenodd">
                                                                <polygon points="0 0 24 0 24 24 0 24" />
                                                                <rect fill="#000000" opacity="0.3"
                                                                    transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                                    x="11" y="5" width="2" height="14" rx="1" />
                                                                <path
                                                                    d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                                    fill="#000000" fill-rule="nonzero"
                                                                    transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="wizard-step tab-selected wizard-mgn-30"
                                                    data-wizard-type="step" [class.tab-selected]="bookStep>=2"
                                                    *ngIf="questionnaireList.labels && questionnaireList.labels.length > 0">
                                                    <div class="wizard-label">
                                                        <div class="step-icon">2</div>
                                                        <h3 class="wizard-title mgn-lt-15">More Info</h3>
                                                    </div>
                                                    <span class="svg-icon svg-icon-xl wizard-arrow">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                                                            height="24px" viewBox="0 0 24 24" version="1.1">
                                                            <g stroke="none" stroke-width="1" fill="none"
                                                                fill-rule="evenodd">
                                                                <polygon points="0 0 24 0 24 24 0 24" />
                                                                <rect fill="#000000" opacity="0.3"
                                                                    transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                                    x="11" y="5" width="2" height="14" rx="1" />
                                                                <path
                                                                    d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                                    fill="#000000" fill-rule="nonzero"
                                                                    transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="wizard-step" data-wizard-type="step"
                                                    [class.tab-selected]="bookStep==3">
                                                    <div class="wizard-label">
                                                        <div class="step-icon">{{(questionnaireList.labels &&
                                                            questionnaireList.labels.length > 0) ? 3 : 2}}</div>
                                                        <h3 class="wizard-title mgn-lt-15">Confirm</h3>
                                                    </div>
                                                    <span class="svg-icon svg-icon-xl wizard-arrow last">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                                                            height="24px" viewBox="0 0 24 24" version="1.1">
                                                            <g stroke="none" stroke-width="1" fill="none"
                                                                fill-rule="evenodd">
                                                                <polygon points="0 0 24 0 24 24 0 24" />
                                                                <rect fill="#000000" opacity="0.3"
                                                                    transform="translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) "
                                                                    x="11" y="5" width="2" height="14" rx="1" />
                                                                <path
                                                                    d="M9.70710318,15.7071045 C9.31657888,16.0976288 8.68341391,16.0976288 8.29288961,15.7071045 C7.90236532,15.3165802 7.90236532,14.6834152 8.29288961,14.2928909 L14.2928896,8.29289093 C14.6714686,7.914312 15.281055,7.90106637 15.675721,8.26284357 L21.675721,13.7628436 C22.08284,14.136036 22.1103429,14.7686034 21.7371505,15.1757223 C21.3639581,15.5828413 20.7313908,15.6103443 20.3242718,15.2371519 L15.0300721,10.3841355 L9.70710318,15.7071045 Z"
                                                                    fill="#000000" fill-rule="nonzero"
                                                                    transform="translate(14.999999, 11.999997) scale(1, -1) rotate(90.000000) translate(-14.999999, -11.999997) " />
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="booking-img"></div>
                                    </div>
                                    <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding right-part"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 1">
                                        <div class="panel-body no-padding">
                                            <div
                                                class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding pull-right border-left">
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding check-new-group border-tp border-rt">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding border-bt"
                                                        *ngIf="this.selectedUserParam && selectedUser">
                                                        <div class="col-sm-2 col-xs-3 col-md-4 ">
                                                            <img class="card-img" [src]="getPic(selectedUser)"
                                                                alt="Profile Pic">
                                                        </div>
                                                        <div class="col-sm-10 col-xs-9 col-md-8 no-padding">
                                                            <div class="">
                                                                <h6 class="card-title mgn-up-5">
                                                                    <span
                                                                        *ngIf="selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                    <span
                                                                        *ngIf="!selectedUser.businessName">{{selectedUser.businessName}}</span>
                                                                </h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-bt-10">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 mgn-up-5">
                                                            {{showCheckinButtonCaption()}} For
                                                        </div>
                                                        <div class="col-sm-12 col-xs-12 col-md-12">
                                                            <div class=""
                                                                *ngIf="sel_ser || type == 'waitlistreschedule'">
                                                                <div class="service-icon pull-left"
                                                                    *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    <i class="fa meet-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                                    <i class="fa zoom-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                                    <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                                        *ngIf="sel_ser_det.virtualCallingModes  && sel_ser_det.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                                    <i class="fa wtsapaud-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                    <i class="fa wtsapvid-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                </div>
                                                                <h6 class="card-title service mgn-bt-10">
                                                                    {{sel_ser_det.name}}
                                                                </h6>
                                                                <div class="" style="font-size: 1rem"
                                                                    *ngIf="sel_ser_det.price && type != 'reschedule'">
                                                                    <p class="module-nomargin line-clamp no-margin"
                                                                        *ngIf="sel_ser_det.description && !showmoreSpec"
                                                                        (click)="showSpec()">
                                                                        {{sel_ser_det.description}}</p>
                                                                    <p *ngIf="showmoreSpec" (click)="showSpec()">
                                                                        {{sel_ser_det.description}}</p>
                                                                </div>
                                                                <div class="">
                                                                    <div class="callingmode mgn-lt-10"
                                                                        *ngIf="sel_ser_det && sel_ser_det.serviceType==='virtualService' && type !== 'waitlistreschedule'">
                                                                        <div class="mgn-bt-10 mgn-up-5">
                                                                            <div class=""
                                                                                *ngFor="let mode of sel_ser_det.virtualCallingModes;let i = index">
                                                                                <div style="visibility: hidden;">
                                                                                    {{callingModesDisplayName[mode.callingMode]}}
                                                                                </div>
                                                                                <div class="cal-mod-instrct pre-check-title color-grey"
                                                                                    *ngIf="mode.callingMode">
                                                                                    {{mode.instructions}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="prenotes mgn-bt-10"
                                                                        *ngIf="sel_ser_det.preInfoEnabled">
                                                                        <div class="preinfo-title">
                                                                            {{sel_ser_det.preInfoTitle}}</div>
                                                                        <div [innerHTML]="sel_ser_det.preInfoText">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp border-rt check-new-group pad-rt-0">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding"
                                                        *ngIf="queuejson && queuejson.length != 0 && !api_loading1">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-10">
                                                            Date/Time
                                                            <span ><a class="changeitem  pointer-cursor  mgn-rt-20 mgn-bt-10 pull-right "
                                                                 (click)="changeTime()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">Change
                                                                </a></span>
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding" >
                                                            <h6 class="card-title serv-time border-style" >
                                                                <span *ngIf="!isFuturedate">Today, </span>
                                                                <span *ngIf="isFuturedate">{{selectedDate | date:
                                                                    newDateFormat}},
                                                                </span>
                                                                <span>
                                                                    {{selectedQTime}}
                                                                </span>
                                                            </h6>
                                                        </div>
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20">
                                                            Waiting in Line
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <h6 class="card-title serv-time">
                                                                <span *ngIf="personsAhead <= 0">0
                                                                    People</span>
                                                                <span *ngIf="personsAhead == 1">1<span>
                                                                        Person</span></span>
                                                                <span *ngIf="personsAhead > 1">{{personsAhead}}<span>
                                                                        People</span></span>
                                                                <span *ngIf="calc_mode=='NoCalc'">
                                                                    <span *ngIf="!isFuturedate">
                                                                    </span>
                                                                </span>
                                                                <span *ngIf="serviceTime=='' && calc_mode!='NoCalc'">
                                                                    <span class="color-grey">\</span>
                                                                    <span>{{waitingTime}}</span>
                                                                </span>
                                                                <span *ngIf="serviceTime!='' && calc_mode!='NoCalc'">
                                                                    <ng-container *ngIf="isFuturedate">
                                                                    </ng-container>
                                                                    <ng-container *ngIf="!isFuturedate">
                                                                        <span><span class="color-grey"> \
                                                                            </span>{{serviceTime}}</span>
                                                                    </ng-container>
                                                                </span>
                                                            </h6>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red mgn-up-10"
                                                        *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                                        No timings available.
                                                        <span><a class="lnk pointer-cursor action mgn-lt-10"
                                                                (click)="changeTime()" data-toggle="modal"
                                                                data-target="#exampleModalCenter">Change Time
                                                            </a></span>
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-md-12 col-lg-12 col-xs-12 col-sm-12 border-tp check-new-group">
                                                    <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-10 mgn-bt-10 no-padding">
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 no-padding"
                                                                *ngIf="sel_ser_det.serviceType!=='virtualService'">
                                                                Booking
                                                                For <a *ngIf="type !== 'waitlistreschedule'"
                                                                    class="changeitem  pointer-cursor  mgn-lt-5 mgn-rt-20 pull-right"
                                                                    data-toggle="modal"
                                                                    data-target="#exampleModalCenter"
                                                                    (click)="handleSideScreen('members')">Change
                                                                </a>
                                                            </div>
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-5 no-padding"
                                                                *ngIf="sel_ser_det.serviceType==='virtualService'">
                                                                Booking
                                                                For <a *ngIf="type !== 'waitlistreschedule'"
                                                                    class="changeitem  pointer-cursor  mgn-lt-5 mgn-rt-20 pull-right"
                                                                    (click)="virtualModal()">Change
                                                                </a>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                            <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
                                                                <div class="">
                                                                    <div *ngIf="type !== 'waitlistreschedule'">
                                                                        <h6 class="card-title service mgn-bt-10"
                                                                            *ngFor="let member of waitlist_for">
                                                                            {{member.firstName | capitalizeFirst}}
                                                                            {{member.lastName | capitalizeFirst}}
                                                                        </h6>
                                                                    </div>
                                                                    <h6 class="card-title service mgn-bt-10"
                                                                        *ngIf="type === 'waitlistreschedule'">
                                                                        {{wtlst_for_fname | capitalizeFirst}}
                                                                        {{wtlst_for_lname | capitalizeFirst}}
                                                                    </h6>
                                                                    <div class="contact-section">
                                                                        <i class="fa fa-mobile "></i>
                                                                        <ng-container
                                                                            *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && (!changePhno || currentPhone == callingModes)">
                                                                            <i class="fa wtsapaud-icon wtsap-cal"
                                                                                *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                            <i class="fa wtsapvid-icon mgn-lt-5"
                                                                                style="width: 20px;"
                                                                                *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                        </ng-container>
                                                                        <i class="fa phon-icon mgn-lt-10"
                                                                            *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                        <span class="mgn-lt-10 phonevallabel"
                                                                            *ngIf="userPhone && !changePhno">{{countryCode}}
                                                                            {{userPhone}}</span>
                                                                        <span class="mgn-lt-10 phonevallabel"
                                                                            *ngIf="currentPhone && changePhno">{{countryCode}}
                                                                            {{currentPhone}}</span><a
                                                                            class="mgn-lt-5 lnk pointer-cursor">
                                                                        </a>
                                                                        <div class="pull-right"
                                                                            *ngIf="sel_ser_det.serviceType==='virtualService'">
                                                                            <a *ngIf="type !== 'waitlistreschedule'"
                                                                                class="changeitem  pointer-cursor  mgn-lt-5 mgn-rt-20 pull-right"
                                                                                data-toggle="modal"
                                                                                data-target="#exampleModalCenter"
                                                                                (click)="handleSideScreen('members')">Change
                                                                            </a> </div>
                                                                        <div class="mode-hint mgn-bt-5"
                                                                            *ngIf="(!changePhno || currentPhone == callingModes) && (sel_ser_det && sel_ser_det.virtualCallingModes && (sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' || sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'))">
                                                                            The provider will contact you in this
                                                                            number
                                                                        </div>
                                                                    </div>
                                                                    <div class="contact-section"
                                                                        *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                        <i class="fa wtsapaud-icon wtsap-cal"
                                                                            *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                        <i class="fa wtsapvid-icon" style="width: 20px;"
                                                                            *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                        <span
                                                                            class="mgn-lt-10 phonevallabel">+{{callingModes}}</span><a
                                                                            class="mgn-lt-5 lnk pointer-cursor">
                                                                        </a>
                                                                        <div class="mode-hint mgn-bt-5">
                                                                            The provider will contact you in this
                                                                            number
                                                                        </div>
                                                                    </div>
                                                                    <div class="" *ngIf="payEmail">
                                                                        <i class="fa fa-envelope-o "></i>
                                                                        <span
                                                                            class="mgn-lt-5 emailvallabel">{{payEmail}}</span>
                                                                        <a class="mgn-lt-5 lnk pointer-cursor">
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="!questionnaireList.labels"
                                                            class="col-sm-12 col-xs-12 chk-btns-div col-md-12 no-padding">
                                                            <a #modal data-toggle="modal"
                                                                data-target="#exampleModalCenter">
                                                            </a>
                                                            <mat-chip-list class="btns">
                                                                <mat-chip
                                                                    [class.mandatoryChip]="sel_ser_det.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                    (click)="handleSideScreen('note');modal.click();">
                                                                    <a class="lnk action pointer-cursor"><i
                                                                            class="fa fa-file-text-o mgn-rt-5"
                                                                            aria-hidden="true"></i>
                                                                        {{sel_ser_det.consumerNoteTitle}}
                                                                        <span
                                                                            *ngIf="sel_ser_det.consumerNoteMandatory">*</span></a>
                                                                </mat-chip>
                                                                <mat-chip><a class="lnk action pointer-cursor"
                                                                        (click)="imagefile1.click();"><input #imagefile1
                                                                            type="file" accept="/*;capture=camera"
                                                                            style="display:none;" multiple
                                                                            (change)="filesSelected($event, 'close')"><i
                                                                            class="fa fa-paperclip mgn-rt-5"
                                                                            aria-hidden="true"></i>Upload
                                                                        File
                                                                        <span
                                                                            *ngIf="getAttachLength() > 0">&nbsp;({{getAttachLength()}})</span>
                                                                    </a></mat-chip>
                                                            </mat-chip-list>
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-5 no-padding"
                                                                *ngIf="(s3CouponsList.JC.length > 0) && type != 'waitlistreschedule' || (s3CouponsList.OWN.length > 0) && type != 'waitlistreschedule'">
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length === 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">Apply
                                                                    Coupon Code</a>
                                                                <a class="lnk pointer-cursor action"
                                                                    *ngIf="selected_coupons.length > 0"
                                                                    (click)="applyPromocode()" data-toggle="modal"
                                                                    data-target="#exampleModalCenter">
                                                                    Coupon code added</a>
                                                                {{selected_coupons.toString()}}
                                                            </div>
                                                            <div *ngFor="let coupon of paymentDetails.jCouponList | keyvalue"
                                                                style="text-align: initial;">
                                                                <small class="black rupee-font"
                                                                    *ngIf="coupon.value.value !== '0.0'">You saved
                                                                    <!-- <i class="fa fa-inr black"></i> -->
                                                                    {{coupon.value.value | currency:'&#8377;'}} on
                                                                    {{coupon.key}}
                                                                </small>
                                                                <small class="black"
                                                                    *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
                                                                    will be honored if all the rules are met
                                                                    &nbsp;<small *ngIf="coupon.value.value === '0.0'"
                                                                        class="blue custId-cursor"
                                                                        (click)="showJCCouponNote(coupon)"
                                                                        aria-hidden="true">Know more</small></small>
                                                            </div>
                                                            <div
                                                                *ngFor="let coupon of paymentDetails.proCouponList | keyvalue">
                                                                <small class="black rupee-font"
                                                                    *ngIf="coupon.value.value !== '0.0'">You saved
                                                                    <!-- <i class="fa fa-inr black"></i> -->
                                                                    {{coupon.value.value | currency:'&#8377;'}} on
                                                                    {{coupon.key}}
                                                                </small>
                                                                <small class="black"
                                                                    *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
                                                                    will be honored if all the rules are met
                                                                    &nbsp;<small *ngIf="coupon.value.value === '0.0'"
                                                                        class="blue custId-cursor"
                                                                        (click)="showJCCouponNote(coupon)"
                                                                        aria-hidden="true">Know more</small></small>
                                                            </div>
                                                            <!-- <div class="disp-flex width-100 amount-details" *ngFor="let coupon of paymentDetails.jCouponList | keyvalue">
                                                                <div class="bill-labels">{{coupon.key}} </div>&nbsp;
                                                                <div (click)="showJCCouponNote(coupon)" [class.couponAmt]="coupon.value.value === '0.0'">{{coupon.value.value |
                                                                currency:'&#8377;'}}</div>
                                                              </div>
                                                              <div class="disp-flex width-100 amount-details" *ngFor="let coupon of paymentDetails.proCouponList | keyvalue">
                                                                <div class="bill-labels">{{coupon.key}} </div>&nbsp;
                                                                <div (click)="showJCCouponNote(coupon)" [class.couponAmt]="coupon.value.value === '0.0'">{{coupon.value.value |
                                                                currency:'&#8377;'}}</div>
                                                              </div> -->
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 no-padding mgn-up-20">
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 mgn-bt-20 no-padding">
                                                                    <div class="checkin-btn-bp pointer-cursor"
                                                                        *ngIf="type == 'waitlistreschedule'"
                                                                        [class.disableActn]="(queuejson && queuejson.length == 0 && !api_loading1) || callingModes === '' || disableButn()"
                                                                        (click)="rescheduleWaitlist()">
                                                                        Reschedule
                                                                        <i class="fa fa-long-arrow-right mgn-lt-5"></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="type != 'waitlistreschedule'"
                                                class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100 mgn-lt-10">
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')"
                                                    [class.disabled]="(queuejson && queuejson.length == 0 && !api_loading1) || waitlist_for.length == 0">
                                                    Next
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="close-btn">
                                                    <button type="button" class="close" aria-label="Close"
                                                        data-dismiss="modal" (click)="popupClosed()">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <ng-container *ngIf="action=='members'">
                                                    <div class="modal-body">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
                                                            <div class="pull-left"> Booking for
                                                            </div>
                                                            <a class="lnk pointer-cursoraction mgn-lt-20"
                                                                *ngIf="sel_ser_det.serviceType !== 'virtualService'"
                                                                (click)="addMember()"><i class="fa fa-user-plus"></i>
                                                                {{add_member_cap}}</a>
                                                        </div>
                                                        <div class="member-outer">
                                                            <div class="member-list mgn-up-10">
                                                                <ul class="member-ul">
                                                                    <ng-container
                                                                        *ngIf="multipleMembers_allowed && sel_ser_det.serviceType !== 'virtualService'">
                                                                        <li *ngFor="let memb of familymembers">
                                                                            <mat-checkbox
                                                                                (change)="handleMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName, $event)"
                                                                                [value]="memb.userProfile.id"
                                                                                [checked]="isChecked(memb.userProfile.id)">
                                                                                {{memb.userProfile.firstName + '
                                                                                ' +
                                                                                memb.userProfile.lastName |
                                                                                capitalizeFirst}}
                                                                            </mat-checkbox>
                                                                        </li>
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="!multipleMembers_allowed && sel_ser_det.serviceType !== 'virtualService'">
                                                                        <mat-radio-group>
                                                                            <li *ngFor="let memb of familymembers"
                                                                                class="members">
                                                                                <mat-radio-button
                                                                                    (change)="handleOneMemberSelect(memb.userProfile.id, memb.userProfile.firstName, memb.userProfile.lastName)"
                                                                                    [value]="memb.userProfile.id"
                                                                                    [checked]="isChecked(memb.userProfile.id)">
                                                                                    {{memb.userProfile.firstName
                                                                                    + '
                                                                                    ' +
                                                                                    memb.userProfile.lastName |
                                                                                    capitalizeFirst}}
                                                                                </mat-radio-button>
                                                                            </li>
                                                                        </mat-radio-group>
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="sel_ser_det.serviceType === 'virtualService'">
                                                                        <div class="card-title service mgn-bt-10"
                                                                            *ngFor="let member of waitlist_for">
                                                                            {{member.firstName | capitalizeFirst}}
                                                                            {{member.lastName | capitalizeFirst}}
                                                                        </div>
                                                                    </ng-container>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="grey">
                                                            <div class="serv-head">
                                                                <h5 class="mgn-bt-5 primary-color">Booking
                                                                    alerts
                                                                    and communications will be
                                                                    send to
                                                                </h5>
                                                            </div>
                                                            <div class="consumer_appt mgn-bt-10 brd-bt">
                                                                <p class="mgn-10">
                                                                    <i class="fa phon-icon"
                                                                        *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                                    Phone#:
                                                                    <b>{{countryCode}}
                                                                        {{selected_phone}}</b>
                                                                </p>
                                                                <p class="m0 mgn-up-10-m"
                                                                    *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                    <i class="fa wtsapaud-icon wtsap-cal"
                                                                        *ngIf="sel_ser_det.virtualServiceType === 'audioService'"></i>
                                                                    <i class="fa wtsapvid-icon mgn-rt-5 mgn-lt-10"
                                                                        style="width: 20px;"
                                                                        *ngIf="sel_ser_det.virtualServiceType === 'videoService'"></i>
                                                                    <span>WhatsApp#:
                                                                        <b>+{{callingModes}}</b></span>
                                                                </p>
                                                                <p class="mgn-up-5 mgn-lt-10" *ngIf="payEmail">
                                                                    Email :
                                                                    <b>{{payEmail}}</b>
                                                                </p>
                                                                <p class="mgn-up-5 mgn-lt-10"
                                                                    *ngIf="!editBookingFields">To Change the
                                                                    Number/Email <a class="bold"
                                                                        (click)="changeBookingFields()">Click
                                                                        Here</a>
                                                                </p>
                                                            </div>
                                                            <div class="mgn-up-20 mgn-bt-20" *ngIf="editBookingFields">
                                                                <form [formGroup]="bookingForm" class="" novalidate>
                                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                                        <div class="form-group">
                                                                            <mat-label for="newselected_phone">
                                                                                Enter
                                                                                New Phone# </mat-label>
                                                                            <ngx-intl-tel-input
                                                                                style="width: 300px !important;"
                                                                                [cssClass]="'custom'"
                                                                                [preferredCountries]="preferredCountries"
                                                                                [enableAutoCountrySelect]="true"
                                                                                [enablePlaceholder]="true"
                                                                                [searchCountryFlag]="true"
                                                                                [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                                [selectFirstCountry]="false"
                                                                                [maxLength]="15"
                                                                                [phoneValidation]="true"
                                                                                [selectedCountryISO]="selectedCountry"
                                                                                [separateDialCode]="separateDialCode"
                                                                                [numberFormat]="PhoneNumberFormat.National"
                                                                                name="newPhone"
                                                                                formControlName="newPhone">
                                                                            </ngx-intl-tel-input>
                                                                            <div class="sts-msg error"
                                                                                *ngIf="phoneError">
                                                                                {{phoneError}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                                        <div class="form-group">
                                                                            <mat-label for="newselected_phone">
                                                                                Enter
                                                                                New Email </mat-label>
                                                                            <input
                                                                                class="width100 height40 email-border"
                                                                                id="newEmail"
                                                                                placeholder="Email(user@xyz.com)"
                                                                                name="newEmail"
                                                                                formControlName="newEmail"
                                                                                autocomplete="off"
                                                                                onpaste="return false;"
                                                                                oncopy="return false"
                                                                                oncut="return false"
                                                                                ondrag="return false"
                                                                                ondrop="return false">
                                                                            <app-field-error-display class="red"
                                                                                [displayError]="true"
                                                                                *ngIf="emailerror != null"
                                                                                errorMsg={{emailerror}}>
                                                                            </app-field-error-display>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                                        <div class="form-group"
                                                                            *ngIf="sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                                            <mat-label for="newselected_phone">
                                                                                Enter
                                                                                New WhatsApp#
                                                                            </mat-label>
                                                                            <ngx-intl-tel-input
                                                                                style="width: 300px !important;"
                                                                                [cssClass]="'custom'"
                                                                                [preferredCountries]="preferredCountries"
                                                                                [enableAutoCountrySelect]="true"
                                                                                [enablePlaceholder]="true"
                                                                                [searchCountryFlag]="true"
                                                                                [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                                                                [selectFirstCountry]="false"
                                                                                [maxLength]="15"
                                                                                [phoneValidation]="true"
                                                                                [selectedCountryISO]="selectedCountry"
                                                                                [separateDialCode]="separateDialCode"
                                                                                [numberFormat]="PhoneNumberFormat.National"
                                                                                name="newWhatsapp"
                                                                                formControlName="newWhatsapp">
                                                                            </ngx-intl-tel-input>
                                                                            <div class="sts-msg error"
                                                                                *ngIf="whatsapperror">
                                                                                {{whatsapperror}}</div>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='attachment'">
                                                    <div class="modal-body">
                                                        <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                                            <mat-chip-list class="btns">
                                                                <mat-chip><a class="lnk action pointer-cursor"
                                                                        (click)="imagefile.click()"><input #imagefile
                                                                            type="file" accept="/*;capture=camera"
                                                                            style="display:none;" multiple
                                                                            (change)="filesSelected($event)"><i
                                                                            class="fa fa-paperclip mgn-rt-5"
                                                                            aria-hidden="true"></i>Upload
                                                                        File</a></mat-chip>
                                                            </mat-chip-list>
                                                        </div>
                                                        <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 bold pad-top-10 mgn-up-10 mgn-bt-10 border-tp"
                                                            *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                            Uploaded Files
                                                        </div>
                                                        <div class="img-section mgn-up-20"
                                                            *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0)">
                                                            <ul class="galul">
                                                                <ng-container
                                                                    *ngIf="type=='waitlistreschedule' && waitlist.attchment && waitlist.attchment.length > 0">
                                                                    <li
                                                                        *ngFor="let file of waitlist.attchment;let i = index ">
                                                                        <div class="galimg_outer"
                                                                            *ngIf="getThumbUrl(file)">
                                                                            <div class="gal_img">
                                                                                <img [src]="getThumbUrl(file)">
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
                                                                    <li
                                                                        *ngFor="let file of selectedMessage.files;let i = index ">
                                                                        <div class="galimg_outer">
                                                                            <div class="gal_img">
                                                                                <img [src]="getImage(selectedMessage.base64[i], file)"
                                                                                    *ngIf="selectedMessage.base64[i]">
                                                                            </div>
                                                                            <div class="gal-input">
                                                                                <input type="text" placeholder="Caption"
                                                                                    [(ngModel)]="imgCaptions[i]">
                                                                            </div>
                                                                            <div class="gal_action"
                                                                                (click)="deleteTempImage(i)">
                                                                                <i class="fa fa-times-circle"
                                                                                    aria-hidden="true"></i>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ng-container>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='timeChange'">
                                                    <div class="modal-body">
                                                        <div
                                                            class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-bt-5 mgn-up-10">
                                                            Choose
                                                            Date
                                                        </div>
                                                        <div class="pull-left brd-round brd-light mgn-up-20">
                                                            <div class="icon-minus pull-left"
                                                                [class.disable]="disableMinus()"
                                                                *ngIf="settingsjson.futureDateWaitlist"
                                                                (click)="calculateDate(-1)">
                                                            </div>
                                                            <div class="pull-left chkindt">{{sel_checkindate |
                                                                date:
                                                                dateFormat}}</div>
                                                            <div class="icon-add pull-left"
                                                                *ngIf="settingsjson.futureDateWaitlist"
                                                                (click)="calculateDate(1)"></div>
                                                        </div>
                                                        <div class="pickerouter caldiv pull-left mgn-up-20"
                                                            *ngIf="settingsjson.futureDateWaitlist">
                                                            <mat-datepicker-toggle matSuffix [for]="picker">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #picker [dateClass]="dateClass.bind(this)">
                                                            </mat-datepicker>
                                                            <input class="" style="visibility: hidden; width:1px"
                                                                type="text" [matDatepicker]="picker" [min]="minDate"
                                                                [max]="maxDate" [value]="ddate"
                                                                (dateChange)="handleFutureDateChange($event)">
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 no-padding">
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 no-padding lnk mgn-up-20 mgn-bt-20">
                                                                Choose
                                                                Timings</div>
                                                            <div
                                                                class="col-md-12 col-xs-12 col-sm-12 slotdiv no-padding mgn-up-20">
                                                                <mat-chip-list class=""
                                                                    *ngIf="queuejson && queuejson.length > 0">
                                                                    <mat-chip
                                                                        *ngFor="let queue of queuejson, let i= index"
                                                                        [selected]="queue.id === queuejson[this.sel_queue_indx].id"
                                                                        (click)="handleQueueSelection(queue, i)">
                                                                        {{queue.queueSchedule.timeSlots[0]['sTime']
                                                                        + ' - '
                                                                        +
                                                                        queue.queueSchedule.timeSlots[0]['eTime']}}
                                                                    </mat-chip>
                                                                </mat-chip-list>
                                                                <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red"
                                                                    *ngIf="queuejson && queuejson.length == 0 && !api_loading1">
                                                                    No timings available.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='coupons'">
                                                    <div class="modal-body">
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                            Apply
                                                            Coupon Code
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mgn-up-20">
                                                            <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                *ngIf="showCouponWB">
                                                                <div
                                                                    class="col-md-12 col-sm-12 col-lg-12 col-xs-12 form-level-settings applybill no-padding">
                                                                    <i class="icon-bell"></i>{{applied_inbilltime}}
                                                                </div>
                                                                <div class="width-60">
                                                                    <div class="input-group">
                                                                        <input [ngClass]="{'invalid':!couponvalid}"
                                                                            (keydown)="clearCouponErrors()"
                                                                            placeholder="Enter coupon code" type="text"
                                                                            class="form-control"
                                                                            [(ngModel)]="selected_coupon">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                    style="color: red;" *ngIf="api_cp_error !== null">
                                                                    {{api_cp_error}}</div>
                                                                <div
                                                                    class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding mgn-up-10 mgn-bt-20">

                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12 col-lg-12 col-12 mgn-up-20 mgn-bt-30 border-tp pad-up-10"
                                                                *ngIf="couponsList && couponsList.length>0">
                                                                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
                                                                    *ngFor="let coupon of couponsList let i=index">
                                                                    <div
                                                                        class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding coupon-add-msg">
                                                                        <div
                                                                            class="col-md-5 col-sm-7 col-xs-7 col-lg-4 no-padding">
                                                                            {{coupon.couponCode}} </div>
                                                                        <div
                                                                            class="col-md-7 col-sm-5 col-xs-5 col-lg-8 delteTC">
                                                                            <span><a *ngIf="coupon.instructions"
                                                                                    (click)="toggleterms(i)"
                                                                                    class="pointer-cursor lnk read-more-checkin">Read
                                                                                    T & C </a></span>
                                                                            <span><a class="pointer-cursor lnk"><i
                                                                                        class="pointer-cursor icon-delete mgn-lt-10 lnk"
                                                                                        (click)="removeJCoupon(i)"
                                                                                        [matTooltipClass]="tooltipcls"
                                                                                        [matTooltip]="'Remove Coupon'"></i></a></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mgn-up-10 pre-instr no-padding"
                                                                        *ngIf="coupon.showme">
                                                                        {{coupon.instructions}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 coupon-outer"
                                                            *ngIf="coupon_status">
                                                            <div class="form-group">
                                                                <span *ngIf="coupon_status=='success'"
                                                                    class="coupon_success">Coupon Code(s)
                                                                    applied
                                                                    successfully</span>
                                                                <span *ngIf="coupon_status=='error'"
                                                                    class="coupon-error">Coupon
                                                                    Code(s) not
                                                                    valid</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='note'">
                                                    <div class="modal-body">
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                            {{sel_ser_det.consumerNoteTitle}}
                                                            <div class="form-level-settings">
                                                                Add any other notes to the provider
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                                            <textarea class="form-control mgn-bt-20 mgn-up-20"
                                                                [(ngModel)]="consumerNote" #consumernote
                                                                (change)="handleConsumerNote(consumernote.value)"
                                                                maxlength="1000"
                                                                placeholder="{{note_placeholder}}"></textarea>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngIf="action=='addmember'">
                                                    <div class="modal-body">
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10s">
                                                            <i class="fa fa-arrow-left pointer-cursor"
                                                                (click)="goBack()"></i>
                                                            {{add_member_cap}}
                                                        </div>
                                                        <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
                                                            <app-checkin-consumer-add-member [calledFrom]="'checkin'"
                                                                (returnDetails)="handleReturnDetails($event)">
                                                            </app-checkin-consumer-add-member>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <div class="modal-footer">
                                                    <button type="button"
                                                        class="disp-none btn btn-light-primary font-weight-bold"
                                                        data-dismiss="modal" #closebutton>Cancel</button>
                                                    <button type="button" class="btn btn-primary font-weight-bold"
                                                        (click)="actionCompleted()">Ok</button>
                                                </div>
                                                <div class="error-section" *ngIf="apiError !== ''">
                                                    {{apiError}}
                                                </div>
                                                <div class="error-section success-section" *ngIf="apiSuccess !== ''">
                                                    {{apiSuccess}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding right-part"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 2">
                                        <div class="pad-20 quest-head">
                                            We need some more information
                                        </div>
                                        <app-questionnaire [questionnaireList]="questionnaireList"
                                            [questionAnswers]="questionAnswers" [source]="'consCheckin'"
                                            [accountId]="account_id" (returnAnswers)="getQuestionAnswers($event)">
                                        </app-questionnaire>
                                        <div class="d-flex flex-column-fluid width-100">
                                            <div class="col-xl-12 force_center">
                                                <div class="form-group card mgn-0">
                                                    <label class="col-12 quest">Add any other notes to the provider or
                                                        upload any files for provider view
                                                    </label>
                                                    <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
                                                        <a #modal data-toggle="modal" data-target="#exampleModalCenter">
                                                        </a>
                                                        <mat-chip-list class="btns">
                                                            <mat-chip
                                                                [class.mandatoryChip]="sel_ser_det.consumerNoteMandatory && type != 'waitlistreschedule'"
                                                                (click)="handleSideScreen('note');modal.click();">
                                                                <a class="lnk action pointer-cursor"><i
                                                                        class="fa fa-file-text-o mgn-rt-5"
                                                                        aria-hidden="true"></i>
                                                                    {{sel_ser_det.consumerNoteTitle}}
                                                                    <span
                                                                        *ngIf="sel_ser_det.consumerNoteMandatory">*</span></a>
                                                            </mat-chip>
                                                            <mat-chip><a class="lnk action pointer-cursor"
                                                                    (click)="imagefile1.click();"><input #imagefile1
                                                                        type="file" accept="/*;capture=camera"
                                                                        style="display:none;" multiple
                                                                        (change)="filesSelected($event, 'close')"><i
                                                                        class="fa fa-paperclip mgn-rt-5"
                                                                        aria-hidden="true"></i>Upload
                                                                    File
                                                                    <span
                                                                        *ngIf="getAttachLength() > 0">&nbsp;({{getAttachLength()}})</span>
                                                                </a></mat-chip>
                                                        </mat-chip-list>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100">
                                            <div class="mr-2">
                                                <button type="button"
                                                    class="next-button btn btn-light-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('prev')">
                                                    Go Back
                                                </button>
                                            </div>
                                            <div>
                                                <button type="button"
                                                    class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('next')">
                                                    Next
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="lbl col-sm-12 col-md-7 col-lg-8 col-xs-12 col-sm-12 no-padding right-part"
                                        data-wizard-type="step-content" data-wizard-state="current"
                                        *ngIf="bookStep === 3">
                                        <!-- <div class="confirm-head mgn-up-20">Confirm your {{(settingsjson.showTokenId) ?
                                            'token': 'check-in' }} details</div> -->
                                        <div class="confirm-head mgn-up-20">Review & Confirm</div>

                                        <div class="bookdetails">

                                            <div class="disp-flex" *ngIf="!sel_ser_det.provider">
                                                <span class="billing-head">Provider</span>
                                                <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                <span
                                                    class="billing-value name-line-ht">{{businessjson.businessName}}</span>
                                            </div>
                                            <div class="disp-flex" *ngIf="sel_ser_det.provider">
                                                <span class="billing-head">Provider</span>
                                                <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                <span
                                                    class="billing-value name-line-ht">{{getUserName(sel_ser_det.provider.id)}},
                                                    {{businessjson.businessName}}</span>
                                            </div>
                                            <div class="disp-flex">
                                                <span class="billing-head">Location</span>
                                                <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                <span class="billing-value"> {{locationName}}
                                                    <!-- <a [href]="googleMapUrl" target="_blank"
                                                        class="icon-location" matTooltip="Click to navigate">
                                                    </a> -->
                                                </span>
                                            </div>
                                            <div class="disp-flex">
                                                <span class="billing-head"
                                                    style="display: flex !important; align-items: center !important;">Service</span>
                                                <span
                                                    style="display: flex !important; align-items: center !important;">&nbsp;:&nbsp;</span>
                                                <span class="billing-value disp-flex align-items-center">
                                                    <span class="service-icon" style="display: inline-block !important;"
                                                        *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                        <i class="fa phon-icon"
                                                            *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                        <i class="fa meet-icon"
                                                            *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                        <i class="fa zoom-icon"
                                                            *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                        <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                            *ngIf="sel_ser_det.virtualCallingModes  && sel_ser_det.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                        <i class="fa wtsapaud-icon"
                                                            *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType ==='audioService'"></i>
                                                        <i class="fa wtsapvid-icon"
                                                            *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType ==='videoService'"></i>
                                                    </span>
                                                    <span>{{sel_ser_det.name}}</span>
                                                </span>
                                            </div>
                                            <div class="disp-flex">
                                                <span class="billing-head" *ngIf="settingsjson.showTokenId">Token
                                                    for</span>
                                                <span class="billing-head" *ngIf="!settingsjson.showTokenId">Check-in
                                                    for</span>
                                                <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                <span class="billing-value">
                                                    <span *ngFor="let customer of waitlist_for; let i = index;">
                                                        {{customer.firstName}}
                                                        {{customer.lastName}}{{i < waitlist_for.length-1 ? ", " : "" }}
                                                            </span>
                                                    </span>
                                            </div>
                                            <div class="disp-flex">
                                                <span class="billing-head">Contact #</span>
                                                <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                <span class="billing-value">{{countryCode}} {{userPhone}}</span>
                                            </div>
                                            <div class="disp-flex"
                                                *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                <span class="billing-head">WhatsApp #</span>
                                                <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                <span class="billing-value"> +{{callingModes}}</span>
                                            </div>
                                            <div class="disp-flex" *ngIf="payEmail">
                                                <span class="billing-head">Email</span>
                                                <span class="mgn-up-5-m">&nbsp;:&nbsp;</span>
                                                <span class="billing-value"
                                                    style="word-break: break-all;">{{payEmail}}</span>
                                            </div>

                                        </div>


                                        <!-- <table class="bookdetails">
                                            <tbody>
                                                <tr *ngIf="!sel_ser_det.provider">
                                                    <td width="48%" align="right">
                                                        Provider</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td class="name-line-ht">{{businessjson.businessName}}</td>
                                                </tr>
                                                <tr *ngIf="sel_ser_det.provider">
                                                    <td width="48%" align="right">
                                                        Provider</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td class="name-line-ht">{{getUserName(sel_ser_det.provider.id)}},
                                                        {{businessjson.businessName}}</td>
                                                </tr>
                                                <tr>
                                                    <td width="48%" align="right">Location </td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td> {{locationName}}<a [href]="googleMapUrl" target="_blank"
                                                            class="icon-location" matTooltip="Click to navigate">
                                                        </a></td>
                                                </tr>
                                                <tr>
                                                    <td width="48%" align="right">Service</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td>
                                                        <span class="service-icon pull-left"
                                                            *ngIf="sel_ser_det.serviceType == 'virtualService'">
                                                            <i class="fa phon-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                            <i class="fa meet-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                            <i class="fa zoom-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                            <i class="fa jvideo-icon jvideo-icon-m jvideo-icon-mg5"
                                                                *ngIf="sel_ser_det.virtualCallingModes  && sel_ser_det.virtualCallingModes[0].callingMode === 'VideoCall'"></i>
                                                            <i class="fa wtsapaud-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType ==='audioService'"></i>
                                                            <i class="fa wtsapvid-icon"
                                                                *ngIf="sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp' && sel_ser_det.virtualServiceType ==='videoService'"></i>
                                                        </span>
                                                        <span>{{sel_ser_det.name}}</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="48%" align="right" *ngIf="settingsjson.showTokenId">
                                                        Token for</td>
                                                    <td width="48%" align="right" *ngIf="!settingsjson.showTokenId">
                                                        Check-in for</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td>
                                                        <div *ngFor="let customer of waitlist_for">
                                                            {{customer.firstName}}
                                                            {{customer.lastName}}
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="48%" align="right">Contact #</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td>{{countryCode}} {{userPhone}}</td>
                                                </tr>
                                                <tr
                                                    *ngIf="changePhno && currentPhone != callingModes && sel_ser_det && sel_ser_det.virtualCallingModes && sel_ser_det.virtualCallingModes[0].callingMode === 'WhatsApp'">
                                                    <td width="48%" align="right">WhatsApp #</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td> +{{callingModes}}</td>
                                                </tr>
                                                <tr *ngIf="payEmail">
                                                    <td width="48%" align="right">Email</td>
                                                    <td width="2%">&nbsp;:&nbsp;</td>
                                                    <td style="word-break: break-all;">{{payEmail}}</td>
                                                </tr>
                                            </tbody>
                                        </table> -->

                                        <div class="containerAppt textcenter">
                                            <div class="mgn-up-10 no-mgn-bt bold">Date/Time</div>
                                            <div class="mgn-bt-5">
                                                <span *ngIf="!isFuturedate">Today, </span>
                                                <span *ngIf="isFuturedate">{{selectedDate | date:
                                                    newDateFormat}},
                                                </span>
                                                <span>
                                                    {{selectedQTime}}
                                                </span>
                                            </div>
                                            <div class="no-mgn-bt bold"> Waiting in line</div>
                                            <div class="mgn-bt-10 pad-bt-10">
                                                <span *ngIf="personsAhead <= 0">0 People</span>
                                                <span *ngIf="personsAhead == 1">1<span>
                                                        Person</span></span>
                                                <span *ngIf="personsAhead > 1">{{personsAhead}}<span>
                                                        People</span>
                                                </span>
                                                <span *ngIf="serviceTime=='' && calc_mode!='NoCalc'">
                                                    <span class="color-grey">\</span>
                                                    <span>{{waitingTime}}</span>

                                                </span>
                                                <span *ngIf="serviceTime!='' && calc_mode!='NoCalc'">
                                                    <ng-container *ngIf="!isFuturedate">
                                                        <span><span class="color-grey"> \
                                                            </span>{{serviceTime}}</span>
                                                    </ng-container>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="pay-section"
                                            *ngIf="sel_ser_det && sel_ser_det.isPrePayment && paymentLength>0">
                                            <div>
                                                Service Fee <span class="rupee-font">{{serviceCost |
                                                    currency:'&#8377;'}}
                                                </span>
                                            </div>
                                            <div class="bold">
                                                Payment required now <span
                                                    class="rupee-font">{{paymentDetails.amountRequiredNow |
                                                    currency:'&#8377;'}}
                                                </span>
                                            </div>
                                            <div class=""
                                                *ngIf="paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                <div class="select-pay"> Payment option</div>
                                                <div class="">
                                                    <span class="razorpay-icon selected-payment"></span>
                                                    <!-- <span class="paytm-icon"></span> -->
                                                </div>
                                                <div
                                                    *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                    <a data-toggle="modal" data-target="#exampleModal"
                                                        class="refund_policy">Cancellation Policy</a>
                                                </div>
                                            </div>

                                            <!-- modalbox -->
                                            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog refundpol" role="document">
                                                    <div class="modal-content">
                                                        <!-- <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Modal Title</h5>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                <i aria-hidden="true" class="ki ki-close"></i>
                                                            </button>
                                                        </div> -->
                                                        <div class="modal-body pt-8 pb-0 refund_size">
                                                            <span>Note:</span> Jaldee is not responsible for the
                                                            transactions between Consumer and Provider.
                                                            <ul>
                                                                <li>Consumers can cancel the booking anytime</li>
                                                                <li>If the consumer cancels the appointment, 3% will be
                                                                    deducted from the amount(which includes Jaldee
                                                                    service charges and Online Gateway fees).</li>
                                                                <li>Refund will be received directly to the consumers
                                                                    bank account after he/she cancels the future
                                                                    bookings.</li>
                                                                <li>If the booking is cancelled on the date of booking,
                                                                    refund will not be processed automatically(i.e
                                                                    Consumer must inform the provider to initiate the
                                                                    refund)</li>
                                                            </ul>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button"
                                                                class="btn btn-light-primary font-weight-bold"
                                                                data-dismiss="modal">Close</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="pad-10" *ngIf="heartfulnessAccount">
                                            <div class="t-and-c">
                                                <div class="checkbox">
                                                    <label>
                                                        <input type="checkbox" value=""
                                                            onchange="document.getElementById('stepThreeConfirmButton').disabled = !this.checked;">
                                                        <span>I accept the&nbsp;
                                                            <a data-toggle="modal" data-target="#tcModal">Terms and
                                                                Conditions</a></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="modal fade" id="tcModal" tabindex="-1" role="dialog"
                                                aria-labelledby="tcModalLabel" aria-hidden="true">
                                                <div class="modal-dialog " role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title" id="tcModalLabel">PRIVACY POLICY &
                                                                DISCLAIMER</h4>
                                                            <button type="button" class="close" data-dismiss="modal"
                                                                aria-label="Close">
                                                                <i aria-hidden="true" class="ki ki-close"></i>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <h6>OVERVIEW</h6>
                                                            <p>In order to use the services of this app, you are
                                                                required to register yourself by
                                                                verifying the authorized device. This privacy policy
                                                                applies to information that we
                                                                collect and receive on and through Heartfulness Covid
                                                                Care app. It does not apply
                                                                to practices of businesses that we do not own or control
                                                                or people we do not employ.
                                                                By using this app, you agree to the terms of this
                                                                privacy policy. Please read the
                                                                following to understand how your personal information
                                                                will be treated as you use this
                                                                site and its services.</p>
                                                            <p>Heartfulness Institute or HFI in short, the creator
                                                                of this privacy policy shall
                                                                ensure its commitment to your privacy with regard to the
                                                                protection of your information.
                                                                This policy contains information about our app
                                                                Heartfulness Covid Care. In order to
                                                                provide you with uninterrupted use of our services, free
                                                                of cost, we may collect and,
                                                                in some circumstances, disclose information about you.
                                                                Such information may be classified
                                                                as personal information under the purview of applicable
                                                                provisions of the Information
                                                                Technology Act/ Rules framed thereunder.</p>

                                                            <h6>COLLECTION OF INFORMATION</h6>
                                                            <p>Personal data of the user such as, but not limited to,
                                                                name, age, date of birth,
                                                                occupation, gender, e-mail, contact information,
                                                                location and such other information
                                                                necessary for rendering appropriate medical advise. The
                                                                user's data sent across through
                                                                the app shall be processed and stored automatically. As
                                                                a user of Heartfulness Covid Care
                                                                app, you may provide information about yourself, your
                                                                spouse, family, friends, health
                                                                issues, previous medication taken, previous medical
                                                                conditions, allergies, etc. All
                                                                information shall be used for further processing of the
                                                                case, diagnosis, treatment, follow
                                                                ups etc. and shall also be saved by the technology
                                                                service provider. </p>

                                                            <h6>USE OF INFORMATION</h6>
                                                            <p>The information provided by you shall be used to contact
                                                                you when necessary and analysis.
                                                                We may use your data for tracking, identification and
                                                                gather broad demographic information.
                                                                The information is also used to customize your
                                                                experience of using Heartfulness Covid Care
                                                                app, research purposes and learning.</p>

                                                            <h6>PROTECTION OF PERSONAL INFORMATION</h6>
                                                            <p>HFI has adopted a protection of personal information
                                                                policy which aims to protect your
                                                                private life, in accordance with the applicable laws in
                                                                effect. HFI has taken and applies
                                                                appropriate security measures while using this app,
                                                                including the encoding of certain data.
                                                                However, public communication networks such as the
                                                                internet are open systems with links shared
                                                                by many users. You recognize that HFI does not guarantee
                                                                that some personal information won't
                                                                be intercepted and manipulated by third parties. This
                                                                information will never be the object
                                                                of a communication, transfer, sale, assignment or any
                                                                other commercial transaction with third
                                                                parties without your authorization. This information may
                                                                however be transferred between various
                                                                internal departments or with distributors adhering to a
                                                                protection of personal information policy,
                                                                for the purpose of administration and management.</p>

                                                            <h6>CONTROL</h6>
                                                            <p>We will not sell, distribute or lease your personal
                                                                information to third parties unless we have
                                                                your permission or are required to do so, by law. We may
                                                                use your personal information to send
                                                                you promotional information about third parties which we
                                                                think you may find interesting if you
                                                                tell us that you wish this to happen. If you believe
                                                                that any information we are holding on you
                                                                is incorrect or incomplete, please send us an email, as
                                                                soon as possible to: __________________.
                                                                We will be happy to correct any information found to be
                                                                incorrect.</p>

                                                            <h6>TERMS</h6>
                                                            <p>By downloading and / or using this app, you hereby agree
                                                                to be bound by the terms of use /
                                                                service, privacy policy, and other policies as set forth
                                                                on the website www.heartfulnesscovidcare.com</p>
                                                            <p>It is hereby further specified that all the terms and
                                                                policies on the website shall be coterminous
                                                                to these terms.</p>

                                                            <h6>DISCLAIMER</h6>
                                                            <p>The content found in this programme or on the or
                                                                heartfulnesscovidcare.com Website, including:
                                                                text, images, audio, or other formats were created for
                                                                information and guidance purposes only.
                                                                Offerings are clearly identified and appropriate target
                                                                audience as well. The Content is not intended
                                                                to be a substitute for any professional medical advice,
                                                                diagnosis, or treatment. You are requested
                                                                to seek advice from your physician or other qualified
                                                                health service provider with any questions you
                                                                may have regarding your medical condition. Never
                                                                disregard professional medical advice or delay in
                                                                seeking it because of something you have read on this
                                                                Website/ Programme. Our services are free of
                                                                cost for humanitarian considerations.</p>
                                                            <p>If you think you may have a medical emergency, call your
                                                                doctor, go for emergency check-up or
                                                                treatment immediately. Reliance on any information
                                                                provided by volunteers, employees, or medical
                                                                professionals presenting this content is solely at your
                                                                discretion and risk.</p>
                                                            <p>If you find any material offensive, you may voluntarily
                                                                want to disassociate or refrain from using
                                                                our materials/ information/ app. The office bearers of
                                                                our organization or that of the technology service
                                                                provider do not undertake any liability for its pro-bono
                                                                services.</p>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button"
                                                                class="btn btn-light-primary font-weight-bold"
                                                                data-dismiss="modal">Close</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div
                                            class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between border-top pt-10 width-100">
                                            <div class="mr-2">
                                                <button type="button"
                                                    class="next-button btn btn-light-primary font-weight-bold text-uppercase px-9 py-4"
                                                    (click)="goToStep('prev')">
                                                    Go Back
                                                </button>
                                            </div>
                                            <div>
                                                <!-- <button *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0" class="btn btn-success font-weight-bold text-uppercase px-2 mr-5 py-2">
                                                    Cancellation Policy
                                                </button> -->
                                                <button type="button" (click)="saveCheckin('checkin')" id="stepThreeConfirmButton"
                                                class="next-button btn btn-primary font-weight-bold text-uppercase px-9 py-4" [disabled]="heartfulnessAccount">
                                                    <ng-container
                                                        *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
                                                        Pay</ng-container>
                                                    <ng-container
                                                        *ngIf="paymentLength == 0 || (paymentDetails && paymentDetails.amountRequiredNow == 0)">
                                                        Confirm</ng-container>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
</section>