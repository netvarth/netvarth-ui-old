<div class="card shadow d-flex flex-row header">
 <div class="my-auto">
 <a class="" (click)="goBack('back')"><i class="fa fa-arrow-left"></i>&emsp;</a>
 </div>
 <div class="text-center mx-auto" *ngIf="!loadingS3">
 <app-booking-accountinfo [businessInfo]="businessInfo" [smallDevice]="smallDevice" *ngIf="smallDevice">
 </app-booking-accountinfo>
 </div>
</div>
<section #consumer_appointment class="consumerAppt" 
 [ngClass]="[smallDevice?'container':'container-fluid', theme?theme:'']">
 <div [ngClass]="{'loadingpaytm': loadingPaytm}"></div>
 <div class="customLoader" *ngIf="loadingPaytm">
 <app-common-innerloading-spinner ></app-common-innerloading-spinner>
 </div>
 <div class="loading-hgt my-1 login-form_custom" *ngIf="!loggedIn || loadingS3 || loading || !slotLoaded">
 <div class="card card-custom no-margin hgt-adjust">
 <div class="card-body p-0">
 <app-consumer-join *ngIf="!loggedIn && !customId" (actionPerformed)="actionPerformed($event)"></app-consumer-join>
 <app-authentication *ngIf="!loggedIn && customId" (actionPerformed)="actionPerformed($event)" [accountId]="accountId"></app-authentication>
 <app-common-innerloading-spinner *ngIf="loggedIn && (loadingS3 || loading || !slotLoaded) "></app-common-innerloading-spinner>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
 <div class="row" *ngIf="loggedIn">
 <div class="col-md-4 col-lg-4 col-sm-12 col-xs-12 d-flex align-items-stretch desktop-only p-1"
 *ngIf="!smallDevice">
 <div class="card shadow" *ngIf="!loadingS3">
 <app-booking-accountinfo [businessInfo]="businessInfo" [smallDevice]="smallDevice">
 </app-booking-accountinfo>
 <div class="booking-img"></div>
 </div>
 </div>

 <div class="col-md-8 col-lg-8 col-sm-12 col-xs-12 d-flex align-items-stretch p-1" *ngIf="!loading">
 <div class="card shadow hgt-adjust">
 <!-- Wizard Started -->
 <div class="wizard wizard-1" id="kt_wizard_v1" data-wizard-state="step-first"
 data-wizard-clickable="false" *ngIf="bookStep === 1 && serviceOptionApptt">
 <!-- Service Info -->
 <div class="col-xs-12" *ngIf="selectedService">
 <app-service-display [virtualModes]="callingModesDisplayName" [service]="selectedService"
 [showVirtualInfo]="appointmentType !== 'reschedule'"></app-service-display>
 </div>
 <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 p-1">
 <div class="pad-20 quest-head">
 
 </div>
 <!-- <p class="addorderitemp2"> <img style="width: 65px;" src="assets/images/add.svg" /></p>
 <div class="pad-20 quest-head">
 No Item Added
 </div> -->
 <div *ngIf="serviceOptionApptt">

 
 <span class="form-level-settings">You can add the the item and customize your services</span><br><br>
 <!-- <button type="button"
 class="mx-auto text-center next-button btn btn-light-primary font-weight-bold text-capitalize px-9 py-4"
 (click)="qnrPopup()">
 Add Item
 </button> -->
 <app-questionnaire [questionnaireList]="serviceOptionQuestionnaireList" [accountId]="accountId"
 [questionAnswers]="serviceOPtionInfo" [source]="'serviceOptionAppt'"
 (returnAnswers)="getserviceOptionQuestionAnswers($event)" 
 >
 </app-questionnaire>

 </div>
 
 </div>
 <div class="clearfix"></div>
 <hr />
 <div class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between">
 <button type="button"
 class="mx-auto text-center next-button btn btn-primary font-weight-bold text-capitalize px-12"
 (click)="goToStep('next');actionCompleted()" [class.disabled]="!isSlotAvailable">
 Next
 </button>
 </div>
 
 <div class="clearfix"></div>
 <hr />
 <!-- *ngIf="appointmentType != 'reschedule' && selectedService && !selectedService.isPrePayment" -->
 
 </div>
 <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 no-padding" data-wizard-type="step-content"
 data-wizard-state="current" *ngIf="bookStep === 2 && showSlot">
 <div class="col-xs-12" *ngIf="selectedService">
 <app-date-pagination (date_change_event)="appointmentDateChanged($event)"
 [selected_date]="appmtDate" [availableDates]="availableDates">
 </app-date-pagination>
 </div>
 <!-- *ngIf="freeSlots && freeSlots.length > 0" -->
 <div class="col-xs-12" *ngIf="allSlots && allSlots.length > 0 && multipleSelection">
 <app-slot-picker (slotSelected)="slotSelected($event)" [selectedSlot]="selectedSlots"
 [slots]="allSlots" [mode]="'appt'" [multiple]="multipleSelection" [criteria]="selectedService.showOnlyAvailableSlots"></app-slot-picker>
 </div>
 <div class="col-md-12 col-xs-12 col-sm-12 slotdiv red mt-3 text-center"
 *ngIf="allSlots && allSlots.length <= 0 && slotLoaded">
 <b>No slots available on selected date. Please choose other date.</b>
 </div>
 <div class="clearfix"></div>
 <hr />
 <div class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between">
 <button type="button"
 class="mx-auto text-center next-button btn btn-primary font-weight-bold text-capitalize px-12"
 (click)="goToStep('next');actionCompleted()" [class.disabled]="allSlots && allSlots.length === 0">
 <!-- !isSlotAvailable -->
 Next
 </button>
 </div>
 </div>
 <!-- Step 1 One Time Info Collection if any -->

 <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 no-padding" data-wizard-type="step-content"
 data-wizard-state="current" *ngIf="bookStep === 3">
 <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 p-1">
 <div class="">
 <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 p-1">
 <div class="pad-20 quest-head">
 Fill the following one time information
 </div>
 <app-questionnaire [questionnaireList]="onetimeQuestionnaireList"
 [questionAnswers]="oneTimeInfo" [source]="'onetime'"
 (returnAnswers)="getOneTimeQuestionAnswers($event)">
 </app-questionnaire>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
 <hr>
 <div
 class="text-center mx-auto col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 hf-single-btn-container">
 <button type="button" class="next-button btn btn-primary font-weight-bold text-capitalize px-5"
 (click)="goToStep('next')">
 Next
 </button> &nbsp;
 </div>
 <div class="clearfix"></div>
 </div>

 <!-- Normal Questionaire-->

 <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding right-part"
 data-wizard-type="step-content" data-wizard-state="current" *ngIf="bookStep === 4">
 <div class="pad-20 quest-head">
 We need some more information
 </div>
 <app-questionnaire [questionnaireList]="questionnaireList" [source]="'consAppt'"
 [questionAnswers]="questionAnswers" [accountId]="accountId"
 (returnAnswers)="getQuestionAnswers($event)"></app-questionnaire>
 <div class="d-flex flex-column-fluid width-100">
 <div class="col-xs-12 force_center note-pad">
 <div class="form-group card mgn-0">
 <label class="col-12 quest">Add any other notes to the provider or
 upload any files for provider view
 </label>
 <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
 <a #modal data-toggle="modal" data-target="#exampleModalCenter">
 </a>
 <mat-chip-list class="btns">
 <mat-chip
 [class.mandatoryChip]="selectedService.consumerNoteMandatory && appointmentType != 'reschedule'"
 (click)="handleSideScreen('note');modal.click();">
 <a class="lnk action pointer-cursor"><i class="fa fa-file-text-o mgn-rt-5"
 aria-hidden="true"></i>{{selectedService.consumerNoteTitle}}
 <span
 *ngIf="selectedService.consumerNoteMandatory && appointmentType != 'reschedule'">*</span></a>
 </mat-chip>
 <mat-chip
 [ngClass]="{'br-top-right-0 br-bottom-right-0 margin-right-0': getAttachLength() > 0}">
 <a class="lnk action pointer-cursor" (click)="imagefile1.click();"><input
 #imagefile1 type="file" accept="/*;capture=camera"
 style="display:none;" multiple
 (change)="filesSelected($event, 'close')"><i
 class="fa fa-paperclip mgn-rt-5" aria-hidden="true"></i>Upload
 File
 </a>
 </mat-chip>
 <mat-chip *ngIf="getAttachLength() > 0"
 class="br-top-left-0 br-bottom-left-0 margin-left-0">
 <a class="lnk action pointer-cursor" (click)="viewAttachments()">
 View (<span>{{getAttachLength()}}</span>)
 </a>
 </mat-chip>
 <!-- <mat-chip><a class="lnk action pointer-cursor"
 (click)="imagefile1.click()"><input #imagefile1 type="file"
 accept="/*;capture=camera" style="display:none;" multiple
 (change)="filesSelected($event, 'close')"><i
 class="fa fa-paperclip mgn-rt-5" aria-hidden="true"></i>Upload
 File<span
 *ngIf="getAttachLength() > 0">&nbsp;({{getAttachLength()}})</span>
 </a></mat-chip> -->
 </mat-chip-list>
 </div>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
 <hr>
 <div
 class="col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 d-flex justify-content-between pt-10 width-100">
 <div class="mr-2">
 <button type="button"
 class="mx-auto text-center next-button btn btn-light-primary font-weight-bold text-capitalize px-9 py-4"
 (click)="goToStep('prev')">
 Previous
 </button>
 </div>
 <div *ngIf="!selectedService.isPrePayment">
 <button type="button"
 class="mx-auto text-center next-button btn btn-primary font-weight-bold text-capitalize px-9 py-4"
 (click)="goToStep('next');actionCompleted()">
 Next
 </button>
 </div>
 <div *ngIf="selectedService.isPrePayment">
 <button type="button"
 class="mx-auto text-center next-button btn btn-primary font-weight-bold text-capitalize px-9 py-4"
 (click)="goToStep('next');actionCompleted()">
 {{selectedService.isPrePayment?'Proceed to Payment':'Next'}}
 </button>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
 <!-- <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
 data-wizard-type="step-content" data-wizard-state="current" *ngIf="bookStep === 4">
 <div *ngIf="api_loading_video" class="incomplete-msg">
 <div style="padding: 0 30px;">
 Files are Uploading...
 </div>
 </div>
 <app-common-innerloading-spinner *ngIf="api_loading_video">
 </app-common-innerloading-spinner>
 </div>
 <div class="clearfix"></div> -->

 <!-- Review & Confirm Real Appointment happening here -->

 <div class="lbl col-sm-12 col-md-12 col-lg-12 col-xs-12 col-sm-12 no-padding"
 data-wizard-type="step-content" data-wizard-state="current" *ngIf="bookStep === 5"
 [ngClass]="{'highlight': api_loading_video}">
 <div *ngIf="api_loading_video" class="incomplete-msg">
 <div style="padding: 0 30px;">
 Files are Uploading...
 </div>
 </div>
 <app-common-innerloading-spinner *ngIf="api_loading_video">
 </app-common-innerloading-spinner>
 <div class="col-md-12 col-xs-12 col-sm-12 mgn-bt-10">
 <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 check-new-group no-padding">
 <label class="question-header">Service Details</label>
 <br />
 <div class="service-group-section mgn-lt-10">
 <div class="text-capitalize">
 <div class="m-auto" *ngIf="selectedServiceId || appointmentType == 'reschedule'">
 <h6 class="text-primary service custom">
 <b>{{selectedService.name}}</b>
 </h6>
 <!-- <div class="" *ngIf="selectedApptTime && !multipleSelection">
 <h6 class="custom text-primary">
 <b>
 <span *ngIf="!isFutureDate">Today,</span>
 <span *ngIf="isFutureDate">{{appmtDate |
 date:newDateFormat}}, </span>
 <span>{{getSingleTime(selectedApptTime['time'])}}</span>
 </b>
 </h6>
 </div> -->
 <!-- *ngIf="selectedApptsTime && multipleSelection" -->
 <div class="">
 <h6 class="custom text-primary"><b><span *ngIf="!isFutureDate">Today,
 </span>
 <span *ngIf="isFutureDate">
 {{appmtDate | date: newDateFormat}}, </span>
 <span>{{selectedApptsTime}}</span></b>
 </h6>
 </div>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
 <hr />
 <label class="question-header">Booking For</label>
 <br />
 <div class="booking-for-section mgn-lt-10">
 <div class="">
 <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
 <div class="no-padding">
 <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
 <h6 class="text-primary service custom">
 <span *ngIf="apptDetails_firstName">{{apptDetails_firstName | capitalizeFirst}}</span>&nbsp;
 <span *ngIf="apptDetails_lastName">{{apptDetails_lastName | capitalizeFirst}}</span>
 

 <a *ngIf="appointmentType !== 'reschedule' && !paymentRequestId"
 class="pointer-cursor changeitem font-weight-bold text-capitalize px-2 py-1"
 (click)="handleSideScreen('members')" data-toggle="modal"
 data-target="#exampleModalCenter"><i
 class="fa fa-pencil-square-o" aria-hidden="true"></i>
 </a>
 </h6>
 </div>
 <div class="col-sm-12 col-xs-12 col-md-12 no-padding">
 <app-communications (setCommunications)="setCommunications"
 [commObj]="commObj" [mode]="'read'"
 [selectedService]="selectedService">
 </app-communications>
 </div>
 </div>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
 <hr *ngIf="!questionnaireList.labels"/>
 <div *ngIf="!questionnaireList.labels"
 class="col-sm-12 col-xs-12 chk-btns-div col-md-12 no-padding">
 <a #modal data-toggle="modal" data-target="#exampleModalCenter"></a>
 <div>
 <label class="question-header">Add notes/upload files you may
 have</label>
 </div>
 <mat-chip-list class="btns">
 <mat-chip
 [class.mandatoryChip]="selectedService.consumerNoteMandatory && appointmentType != 'reschedule'"
 (click)="handleSideScreen('note');modal.click();">
 <a class="lnk action pointer-cursor"><i class="fa fa-file-text-o mgn-rt-5"
 aria-hidden="true"></i>{{selectedService.consumerNoteTitle}}
 <span
 *ngIf="selectedService.consumerNoteMandatory && appointmentType != 'reschedule'">*</span></a>
 </mat-chip>
 <span>
 <mat-chip
 [ngClass]="{'br-top-right-0 br-bottom-right-0 margin-right-0': getAttachLength() > 0}">
 <a class="lnk action pointer-cursor" (click)="imagefile1.click();"><input
 #imagefile1 type="file" accept="/*;capture=camera"
 style="display:none;" multiple
 (change)="filesSelected($event, 'close')"><i
 class="fa fa-paperclip mgn-rt-5" aria-hidden="true"></i>Upload
 File
 </a>
 </mat-chip>
 <mat-chip *ngIf="getAttachLength() > 0"
 class="br-top-left-0 br-bottom-left-0 margin-left-0">
 <a class="lnk action pointer-cursor" (click)="viewAttachments()">
 View (<span>{{getAttachLength()}}</span>)
 </a>
 </mat-chip>
 </span>
 </mat-chip-list>
 </div>
 <div class="clearfix"></div>
 <hr />
 <div class="coupon-section col-md-12 col-xs-12 col-sm-12 no-padding"
 *ngIf="(s3CouponsList.JC.length > 0) && appointmentType != 'reschedule' || (s3CouponsList.OWN.length > 0) && appointmentType != 'reschedule'">

 <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-5 no-padding">
 <a class="lnk pointer-cursor action" *ngIf="selectedCoupons.length === 0"
 (click)="applyPromocode()" data-toggle="modal"
 data-target="#exampleModalCenter">Apply
 Coupon Code</a>
 <a class="lnk pointer-cursor action" *ngIf="selectedCoupons.length > 0"
 (click)="applyPromocode()" data-toggle="modal"
 data-target="#exampleModalCenter">
 Coupon code added</a>
 {{selectedCoupons.toString()}}
 </div>
 <div *ngFor="let coupon of paymentDetails.jCouponList | keyvalue"
 style="text-align: initial;">
 <small class="black rupee-font" *ngIf="coupon.value.value !== '0.0'">You
 saved {{coupon.value.value | currency:'&#8377;'}} on {{coupon.key}}
 </small>
 <small class="black" *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
 will be honored if all the rules are met
 &nbsp;<small *ngIf="coupon.value.value === '0.0'" class="blue custId-cursor"
 (click)="showJCCouponNote(coupon)" aria-hidden="true">Know
 more</small></small>
 </div>
 <div *ngFor="let coupon of paymentDetails.proCouponList | keyvalue">
 <small class="black rupee-font" *ngIf="coupon.value.value !== '0.0'">You
 saved
 {{coupon.value.value | currency:'&#8377;'}} on
 {{coupon.key}}
 </small>
 <small class="black" *ngIf="coupon.value.value === '0.0'">{{coupon.key}}
 will be honored if all the rules are met
 &nbsp;<small *ngIf="coupon.value.value === '0.0'" class="blue custId-cursor"
 (click)="showJCCouponNote(coupon)" aria-hidden="true">Know
 more</small></small>
 </div>
 <div class="changeprice" *ngIf="balanceAmount > 0">
 The balance amount for the rescheduled booking will be
 {{balanceAmount}}. Contact your provider directly
 for
 payment adjustments.
 </div>
 <div class="changeprice" *ngIf="balanceAmount < 0">
 Contact your provider directly for payment adjustments.
 </div>
 </div>
 <div class="clearfix"></div>
 <hr
 *ngIf="(s3CouponsList.JC.length > 0) && appointmentType != 'reschedule'||(s3CouponsList.OWN.length > 0) && appointmentType != 'reschedule'" />
 <label class="question-header" *ngIf="appointmentType !== 'reschedule' && paymentLength>0 && paymentDetails.amountRequiredNow > 0">Payment
 Details</label><br />
 <div class="payment-section-details mgn-lt-10" *ngIf="appointmentType !== 'reschedule' && paymentLength>0 && paymentDetails">
 <div class="web"
 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
 <div class="text-left">
 <span *ngIf="paymentDetails.showPrice"
 class="ser_price no-mgn-bt bold mgn-rt-10">Service Price : <span
 class="ser_price no-mgn-bt bold rupee-font">{{paymentDetails.netTotal
 | currency:'&#8377;'}}</span></span>
 <span class="ser_price no-mgn-bt bold">Payment required now :
 <span class="ser_price no-mgn-bt bold rupee-font">{{(checkJcash
 ? payAmount : paymentDetails.amountRequiredNow)|
 currency:'&#8377;'}}</span></span> <br>
 <!-- <span style="font-size: small;">Additional convenience charges may apply

 </span> -->
 </div>
 </div>
 <div class="disply"
 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
 <div class="text-left">
 <span *ngIf="paymentDetails.showPrice" class="ser_price no-mgn-bt bold">Service
 Price : <span
 class="ser_price no-mgn-bt bold rupee-font">{{paymentDetails.netTotal
 | currency:'&#8377;'}}</span></span><br *ngIf="paymentDetails.showPrice">
 <span class="ser_price no-mgn-bt bold mgn-rt-10">Payment required now :
 <span class="ser_price no-mgn-bt bold rupee-font">{{(checkJcash
 ? payAmount : paymentDetails.amountRequiredNow)|
 currency:'&#8377;'}}</span></span> <br>
 <!-- <span style="font-size: small;">Additional convenience charges may apply

 </span> -->
 </div>
 </div>
 <!-- <span style="font-size: small;" *ngIf="paymentMode && isInternational === false && convenientFee > 0">
 <span class="ser_price no-mgn-bt rupee-font">Convenient Fee: {{convenientFee | currency:'&#8377;'}}</span>
 </span> -->
 <!-- paymentMode && isInternational === true && -->
 <span style="font-size: small;" *ngIf="convenientFee > 0">
 <span class="ser_price no-mgn-bt rupee-font">Convenient Fee: {{convenientFee | currency:'&#8377;'}}</span>
 </span><br>
 <span style="font-size: small;" *ngIf="paymentMode && isInternational === false && gatewayFee > 0">
 <span class="ser_price no-mgn-bt rupee-font">Convenient Fee: {{gatewayFee | currency:'&#8377;'}}</span>
 </span>
 <span style="font-size: small;" *ngIf="paymentMode && isInternational === true && gatewayFee > 0">
 <span class="ser_price no-mgn-bt rupee-font">Convenient Fee: {{gatewayFee | currency:'&#8377;'}}</span>
 </span>
 <div
 *ngIf="selectedService && selectedService.isPrePayment && paymentLength>0 && paymentDetails.amountRequiredNow > 0">
 <div class="jaldeecredit" *ngIf="jcashamount>0">
 <mat-checkbox [(ngModel)]="checkJcash" (change)="changeJcashUse($event)">
 </mat-checkbox>
 Use Jaldee cash balance : <span class="rupee-font">{{jcashamount|
 currency:'&#8377;'}}</span>
 </div>
 <div class="creditleft"
 *ngIf="jcashamount>0 && (checkJcash && jcashamount < paymentDetails.amountRequiredNow)">
 Balance amount can be paid by other payment methods
 </div>
 <div class="prepayment"
 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
 ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
 <button type="button" [class.disabled]="isClickedOnce"
 (click)="!isClickedOnce && confirmAppointment('appt')"
 id="stepThreeConfirmButton"
 class="next-button btn btn-primary font-weight-bold px-12 py-4"
 [disabled]="!checkPolicy && heartfulnessAccount">
 <ng-container
 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && 
 ((checkJcash && jcashamount > paymentDetails.amountRequiredNow) || (checkJcash && jcashamount == paymentDetails.amountRequiredNow))">
 Confirm
 </ng-container>
 </button>
 </div>
 <hr *ngIf="paymentDetails" />
 <div class="resPaymrntDetails"
 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
 <label class="custom resPaymrntDetails">Select Payment Mode</label>
 </div>
 <div class="clearfix"></div>
 <div class="text-center mx-auto no-padding"
 *ngIf=" isPayment&& paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
 <ng-container *ngIf="!shownonIndianModes" class="text-center mx-auto">
 <app-payment-modes [paymentModes]="indian_payment_modes"
 (modeSelected)="indian_payment_mode_onchange($event)">
 </app-payment-modes>
 </ng-container>
 <ng-container *ngIf="shownonIndianModes" class="text-center mx-auto">
 <app-payment-modes [paymentModes]="non_indian_modes"
 (modeSelected)="non_indian_modes_onchange($event)">
 </app-payment-modes>
 </ng-container>
 </div>
 <div class="clearfix"></div>
 <div class="mgn-up-20 col-md-12 col-xs-12 no-padding">
 <div class="col-md-12 txt-align-center pad_link question-header"
 *ngIf="paymentmodes && paymentmodes.internationalPay && paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))">
 <span (click)="togglepaymentMode()" class="pointer-cursor">
 <a class="refund_policy">
 <span
 *ngIf="!shownonIndianModes && paymentmodes && paymentmodes.internationalPay">Non
 Indian Payment ? Click here</span>
 <span
 *ngIf="shownonIndianModes && paymentmodes && paymentmodes.indiaPay">Indian
 Payment ? Click here</span>
 </a>
 </span>
 </div>
 <div class="clearfix"></div>
 <div class="col-md-12 cancelpolicy mgn-rt-5"
 *ngIf="paymentDetails && paymentDetails.amountRequiredNow > 0">
 <div class="pad_policy"
 *ngIf="paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0">
 <a data-toggle="modal" data-target="#exampleModal"
 class="refund_policy">Cancellation Policy</a>
 </div>
 </div>
 <div class="col-md-12 txt-align-center">
 <button type="button"
 class=" next-button btn btn-primary font-weight-bold text-capitalize "
 *ngIf=" isPayment&& paymentLength>0 && paymentDetails && paymentDetails.amountRequiredNow > 0 && ((checkJcash && jcashamount < paymentDetails.amountRequiredNow) || (!checkJcash))"
 (click)="!isClickedOnce && confirmAppointment('appt')">
 Make Payment
 </button>
 </div>
 </div>
 <!-- modalbox -->
 <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
 aria-labelledby="exampleModalLabel" aria-hidden="true">
 <app-refundpolicy></app-refundpolicy>
 </div>
 </div>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
 <div class="text-center">
 <button type="button" *ngIf="appointmentType!=='reschedule' && selectedService && selectedService.isPrePayment==false && paymentLength==0 || (paymentDetails && paymentDetails.amountRequiredNow == 0)" 
 [class.disabled]="isClickedOnce"
 (click)="!isClickedOnce && confirmAppointment('appt')" id="stepThreeConfirmButton"
 class="next-button btn btn-primary font-weight-bold px-12 "
 [disabled]="!checkPolicy && heartfulnessAccount">
 Confirm
 </button> 
 <button type="button"
 class="next-button btn btn-primary font-weight-bold text-capitalize px-9 py-4"
 *ngIf="appointmentType === 'reschedule'"
 [class.disableActn]="btnClicked || !isSlotAvailable"
 (click)="rescheduleAppointment()">
 Reschedule
 <i class="fa fa-long-arrow-right mgn-lt-5"></i>
 </button>
 </div>
 <ng-container *ngIf="heartfulnessAccount">
 <app-privacy (approvePolicy)="policyApproved($event)"></app-privacy>
 </ng-container>
 </div> 
 <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
 aria-labelledby="exampleModalLabel" aria-hidden="true">
 <div class="modal-dialog" role="document">
 <div class="modal-content">
 <div class="close-btn">
 <button type="button" class="close" aria-label="Close" data-dismiss="modal"
 (click)="popupClosed()">
 <span aria-hidden="true">&times;</span>
 </button>
 </div>
 <ng-container *ngIf="action=='coupons'">
 <div class="modal-body">
 <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
 Apply Coupon Code</div>
 <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mgn-up-20">
 <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
 *ngIf="showCouponWB">
 <div
 class="col-md-12 col-sm-12 col-lg-12 col-xs-12 form-level-settings applybill no-padding">
 <i class="icon-bell"></i>{{applied_inbilltime}}
 </div>
 <div class="width-60">
 <div class="input-group">
 <input [ngClass]="{'invalid':!couponValid}"
 (keydown)="clearCouponErrors()" placeholder="Enter coupon code"
 type="text" class="form-control" [(ngModel)]="selectedCoupon">
 </div>
 </div>
 <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
 style="color: red;" *ngIf="couponError !== null">
 {{couponError}}</div>
 <div
 class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding mgn-up-10 mgn-bt-20">
 </div>
 </div>
 <div class="col-md-12 col-sm-12 col-lg-12 col-12 mgn-up-20 mgn-bt-30 pad-up-10"
 *ngIf="couponsList && couponsList.length>0">
 <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding"
 *ngFor="let coupon of couponsList let i=index">
 <div
 class="col-md-12 col-sm-12 col-lg-12 col-xs-12 no-padding coupon-add-msg">
 <div class="col-md-5 col-sm-7 col-xs-7 col-lg-4 no-padding">
 {{coupon.couponCode}} </div>
 <div class="col-md-7 col-sm-5 col-xs-5 col-lg-8 delteTC">
 <span><a *ngIf="coupon.instructions" (click)="toggleterms(i)"
 class="pointer-cursor lnk read-more-checkin">Read
 T & C </a></span>
 <span><a class="pointer-cursor lnk"><i
 class="pointer-cursor icon-delete mgn-lt-10 lnk"
 (click)="removeJCoupon(i)"
 [matTooltipClass]="tooltipcls"
 [matTooltip]="'Remove Coupon'"></i></a></span>
 </div>
 </div>
 <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mgn-up-10 pre-instr no-padding"
 *ngIf="coupon.showme">
 {{coupon.instructions}}
 </div>
 </div>
 </div>
 </div>
 <!-- <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 coupon-outer"
 *ngIf="coupon_status">
 <div class="form-group">
 <span *ngIf="coupon_status=='success'" class="coupon_success">Coupon Code(s)
 applied
 successfully</span>
 <span *ngIf="coupon_status=='error'" class="coupon-error">Coupon
 Code(s) not
 valid</span>
 </div>
 </div> -->
 </div>
 </ng-container>
 <ng-container *ngIf="action=='note'">
 <app-booking-note (noteChanged)="handleConsumerNote($event)"
 [selectedService]="selectedService" [businessProfile]="businessProfile"
 [placeHolder]="note_placeholder" [note]="consumerNote">
 </app-booking-note>
 </ng-container>
 <ng-container *ngIf="action=='addmember'">
 <div class="modal-body">
 <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10s">
 <i class="fa fa-arrow-left pointer-cursor" (click)="goBack()"></i>
 {{add_member_cap}}
 </div>
 <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-up-20">
 <app-checkin-consumer-add-member [calledFrom]="'checkin'"
 (returnDetails)="handleReturnDetails($event)">
 </app-checkin-consumer-add-member>
 </div>
 </div>
 </ng-container>
 <ng-container *ngIf="action=='attachment'">
 <div class="modal-body">
 <div class="col-sm-12 col-xs-12 chk-btns-div col-md-12">
 <mat-chip-list class="">
 <mat-chip><a class="lnk pointer-cursor" (click)="imagefile.click()"><input
 #imagefile type="file" accept="/*;capture=camera"
 style="display:none;" multiple
 (change)="filesSelected($event)"><i
 class="fa fa-paperclip mgn-rt-5" aria-hidden="true"></i>Upload
 File</a></mat-chip>
 </mat-chip-list>
 </div>
 <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12 bold pad-top-10 mgn-up-10 mgn-bt-10"
 *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (appointmentType=='reschedule' && scheduledAppointment.attchment && scheduledAppointment.attchment.length > 0)">
 Uploaded Files
 </div>
 <div class="img-section mgn-up-20"
 *ngIf="(selectedMessage.files && selectedMessage.files.length > 0) || (appointmentType=='reschedule' && scheduledAppointment.attchment && scheduledAppointment.attchment.length > 0)">
 <ul class="galul">
 <ng-container
 *ngIf="appointmentType=='reschedule' && scheduledAppointment.attchment && scheduledAppointment.attchment.length > 0">
 <li *ngFor="let file of scheduledAppointment.attchment;let i = index ">
 <div class="galimg_outer" *ngIf="getThumbUrl(file)">
 <div class="gal_img">
 <img [src]="getThumbUrl(file)">
 </div>
 <div class="gal-input">
 <!-- <label>{{file.caption}}</label> -->
 <input type="text" readonly value="{{file.caption}}">
 </div>
 </div>
 </li>
 </ng-container>
 <ng-container
 *ngIf="selectedMessage.files && selectedMessage.files.length > 0">
 <li *ngFor="let file of selectedMessage.files;let i = index ">
 <div class="galimg_outer">
 <div class="gal_img">
 <img [src]="getImage(selectedMessage.base64[i], file)"
 *ngIf="selectedMessage.base64[i]">
 </div>
 <div class="gal-input">
 <input type="text" placeholder="Caption"
 [(ngModel)]="imgCaptions[i]">
 </div>
 <div class="gal_action" (click)="deleteTempImage(i)">
 <i class="fa fa-times-circle" aria-hidden="true"></i>
 </div>
 </div>
 </li>
 </ng-container>
 </ul>
 </div>
 </div>
 </ng-container>
 <ng-container *ngIf="action=='members'">
 <!-- {{action}} -->
 <div class="modal-body">
 <div class="col-md-12 col-xs-12 col-sm-12 lnk mgn-bt-10 mgn-up-20">
 <div class="pull-left"> Booking for </div>
 <a class="lnk pointer-cursoraction mgn-lt-20" (click)="addMember()"><i
 class="fa fa-user-plus"></i>
 {{add_member_cap}}</a>
 </div>
 <div class="col-md-12 col-sm-12 col-xs-12 no-padding-small">
 <ng-container *ngIf="action==='members'">
 <app-members (memberSelected)="memberSelected($event)" [maxSelection]="1"
 [selectedMember]="appmtFor" [familyMembers]="familyMembers"
 [multiple]="false" [allowSelection]="true"
 [parentCustomer]="parentCustomer">
 </app-members>
 <app-communications (setCommunications)="setCommunications"
 [commObj]="commObj" [selectedService]="selectedService"
 [mode]="'write'">
 </app-communications>
 </ng-container>
 </div>
 </div>
 </ng-container>
 <div class="modal-footer">
 <button type="button" class="disp-none btn btn-light-primary font-weight-bold"
 data-dismiss="modal" #closebutton>Cancel</button>
 <button type="button" class="btn btn-primary font-weight-bold hf-btn"
 (click)="actionCompleted()">Ok</button>
 </div>
 <div class="error-section" *ngIf="apiError !== ''">
 {{apiError}}
 </div>
 <div class="error-section success-section" *ngIf="apiSuccess !== ''">
 {{apiSuccess}}
 </div>
 </div>
 </div>
 </div>
 </div>
 </div>
 </div>
 <div class="clearfix"></div>
</section>