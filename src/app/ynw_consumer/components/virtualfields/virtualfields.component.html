<div class="modal-header service-detail-header disp-flex">
    <h1 class="modal-title pull-left service-detail-title">
        <span class="name">
            <span class="dispvalue">
                Your Personal Information
            </span>
        </span>
    </h1>
    <button type="button" class="close pull-right" aria-label="Close" (click)="dialogRef.close()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body service-detail-content service-popup-content">
    <div class="servicedet_outer">
        <div class="outer">
            <div class="outer1 line">
                <div class="description">
                    <form [formGroup]="virtualForm"
                        class="login-form custom-login-form consumer-join-component virtual-fields" novalidate>
                        <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
                        <div class="cust-loginpge-color" *ngIf="!api_loading">
                            <div *ngIf="hideLanguages">
                                <div class="">
                                    Please provide necessary information (one time setup). This information will be
                                    saved in your profile
                                </div>
                                <div class="mgn-up-10">
                                    <label class="col-form-label" for="name">Consultation is For </label>
                                    <br />
                                    <mat-radio-group formControlName="serviceFor" class="mgn-up-5 userGroup"
                                        (change)="onServiceForChange($event.value)">
                                        <mat-radio-button [value]="customer_data.id">
                                            {{customer_data.userProfile.firstName}}
                                            {{customer_data.userProfile.lastName}}</mat-radio-button>
                                        <mat-radio-button [value]="member.user" *ngFor="let member of familymembers">
                                            {{member.userProfile.firstName}}
                                            {{member.userProfile.lastName}}</mat-radio-button>
                                        <mat-radio-button value="new_member">Someone else</mat-radio-button>
                                    </mat-radio-group>
                                </div>
                                <div class="mgn-up-10 mgn-bt-10">
                                    <label class="col-form-label" for="phone">Phone # </label>
                                    <br />
                                    {{this.details.userProfile.countryCode}}
                                    {{this.details.userProfile.primaryMobileNo}}
                                </div>
                          
                                <div class="form-group"
                                    *ngIf="virtualForm.get('serviceFor').value==='new_member'">
                                    <label class="col-form-label" for="firstName">First Name <span
                                            class="red">*</span></label><br/>
                                        <input class="form-control" placeholder="Enter your first name" formControlName="firstName">
                                </div>
                                <div class="form-group col-xs-12 no-padding"
                                    *ngIf="virtualForm.get('serviceFor').value==='new_member'">
                                    <label class="col-form-label" for="lastName">Last Name <span
                                            class="red">*</span></label><br/>
                                        <input class="form-control" placeholder="Enter your last name" formControlName="lastName">
                                </div>
                                <div class="col-xs-12  no-padding ">
                                    <div class="col-xs-2 no-padding">
                                        <label class="col-form-label" for="lastName">Age<span class="red">*</span></label><br>
                                        <input type="text" min="1" max="150" class="form-control vt_dt no-padding mgn-up-5"
                                            formControlName="age">
                                    </div>
                                    <!-- <mat-label for="gender">{{gender_cap}} <span class="red">*</span></mat-label> -->
                                    <div class="col-xs-10 genderradio">
                                        <label class="col-form-label" for="gender">{{gender_cap}} <span class="red">*</span></label>
                                        <br />
                                        <mat-radio-group formControlName="gender">
                                            <mat-radio-button value="male">Male</mat-radio-button>
                                            <mat-radio-button value="female">Female</mat-radio-button>
                                            <mat-radio-button value="other">Other</mat-radio-button>
                                        </mat-radio-group>
                                    </div>
                                    <div class="col-xs-12 mgn-up-5">
                                        <app-field-error-display [displayError]="fed_service.isFieldValid(virtualForm,'age') "
                                            [errorMsgs]="fed_service.getErrorMessage(virtualForm,'age',
                                  {
                                    'required' : 'Age is required',
                                    'min' : 'Minimum age required is 0',
                                    'max' : 'Maximum age is 150'
                                   
                                  })">
                                        </app-field-error-display>
                                        <app-field-error-display [displayError]="fed_service.isFieldValid(virtualForm,'gender')"
                                            errorMsg="Please select the gender.">
                                        </app-field-error-display>
                                    </div>
                                </div>
                                <div class="form-group pwd">
                                    <label for="pincode" class="col-form-label">Residing Pincode  in India  <span
                                            class="red">*</span></label>
                                    <input type="text" placeholder="xxxxxx"
                                        class="form-control vt_dt no-padding mgn-up-5" id="location"
                                        formControlName="pincode" (keyup)="showLocations($event)">
                                    <div style="display: flex; justify-content: space-between;">
                                        <app-field-error-display
                                            [displayError]="fed_service.isFieldValid(virtualForm,'pincode')"
                                            errorMsg="Pincode is required">
                                        </app-field-error-display>
                                    </div>
                                    <app-common-innerloading-spinner *ngIf="loading">
                                    </app-common-innerloading-spinner>
                                    <div *ngIf="!loading && locations" class="mgn-up-10">
                                        <mat-radio-group aria-label="Select your location" class="mgn-up-5"
                                            formControlName='location'>
                                            <mat-radio-button *ngFor="let location of locations.PostOffice"
                                                [value]="location">
                                                {{location.Name}}, {{location.State}}</mat-radio-button>
                                        </mat-radio-group>
                                    </div>
                                </div>
                                <div class="form-group" id="plng">
                                    <label class="col-form-label" for="v">Select your preferred language <span
                                            class="red">*</span></label>
                                    <br />
                                    <mat-radio-group aria-label="Select an option" (change)="onChange($event)"
                                        class="mgn-up-5" formControlName="islanguage">
                                        <mat-radio-button value="yes">English</mat-radio-button>
                                        <mat-radio-button value="no">Other Languages</mat-radio-button>
                                    </mat-radio-group>
                                    <div style="display: flex; justify-content: space-between;">
                                        <app-field-error-display
                                            [displayError]="fed_service.isFieldValid(virtualForm,'islanguage') "
                                            errorMsg="please choose one">
                                        </app-field-error-display>

                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div
                                *ngIf="hideLanguages && virtualForm.get('preferredLanguage').value.length >0 && lngknown==='no'">
                                <label class="col-form-label" for="preferredLanguage">Your preferred language
                                </label><br />
                                <div class="col-form-label"><span
                                        style="word-wrap: break-word;">{{virtualForm.get('preferredLanguage').value}}</span>

                                    <span class="pull-right" (click)="editLanguage()"><i class="fa fa-edit fa-1x"
                                            style="font-size: large;"></i></span>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div *ngIf="!hideLanguages && lngknown=='no'" class="form-group">
                                <div class="form-group" *ngIf="lngknown==='no'">
                                    <label class="col-form-label" for="preferredLanguage">Choose your preferred
                                        language
                                        <span class="red">*</span></label>
                                    <div class="form-group">
                                        <div class="languagesouter" *ngIf="languages.length >0">
                                            <div *ngFor="let lang of languages">
                                                <mat-checkbox style="padding-left: 10px;" (change)="langSel(lang)"
                                                    [checked]="checklangExists(lang)">{{lang}}</mat-checkbox>
                                            </div>
                                        </div>
                                        <div class="actiondiv col-md-12" style="margin-top: 15px;display: inline-flex;">
                                            <button (click)="saveLanguages()" type="button" mat-button
                                                class="cs-btn bt1" [disabled]="disableButton">Ok</button>&nbsp;&nbsp;
                                            <button (click)="cancelLanguageSelection()" type="button" mat-button
                                                class="cs-btn bt1">Cancel</button>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <app-field-error-display
                                            [displayError]="fed_service.isFieldValid(virtualForm,'preferredLanguage')"
                                            errorMsg="Language is required">
                                        </app-field-error-display>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <ng-container *ngIf="hideLanguages">
          
                                <div class="col-xs-12 no-padding">
                                    <label><i class="fa fa-whatsapp" style="color:green"></i> Whatsapp #</label>
                                    <div class="disp-flex">
                                        <div class="form-group">
                                            <input type="text" (keypress)="isNumeric($event)" matInput
                                                class="form-control input-group-text" id="countryCode_whtsap"
                                                placeholder="Country code " formControlName="countryCode_whtsap" autocomplete="off"
                                                maxlength="5" style="width:110px">
                                        </div>
                                        <div class="form-group width-100">
                                            <input type="text" (keypress)="isNumeric($event)" matInput
                                                class="form-control text-width" id="whatsappnumber" formControlName="whatsappnumber"
                                                autocomplete="off" maxlength="10">
                                            <app-field-error-display
                                                [displayError]="fed_service.isFieldValid(virtualForm,'whatsappnumber')" [errorMsgs]="fed_service.getErrorMessage(virtualForm,'whatsappnumber',
                                            {
                                            'minlength' : 'Enter a 10 digit whatsapp number',
                                            'maxlength' : 'Enter a 10 digit whatsapp number',
                                            'pattern' : 'Enter a 10 digit whatsapp number'
                                            })">
                                            </app-field-error-display>
                                        </div>
                                    </div>
                                </div>
            
                                <div class=" col-xs-12 no-padding">
                                    <label><i class="fa fa-telegram" style="color:#29b6f6;"></i> Telegram #</label>
                                    <div class="disp-flex">
                                        <div class="form-group">
                                            <input type="text" (keypress)="isNumeric($event)" matInput
                                                class="form-control input-group-text" id="countryCode_telegram"
                                                placeholder="Country code " formControlName="countryCode_telegram"
                                                autocomplete="off" maxlength="5">
                                        </div>
                                        <div class="form-group width-100">
                                            <input type="text" (keypress)="isNumeric($event)" matInput
                                                class="form-control text-width" id="telegramnumber" formControlName="telegramnumber"
                                                autocomplete="off" maxlength="10">
                                            <app-field-error-display
                                                [displayError]="fed_service.isFieldValid(virtualForm,'telegramnumber')" [errorMsgs]="fed_service.getErrorMessage(virtualForm,'telegramnumber',
                                            {
                                            'minlength' : 'Enter a 10 digit telegram number',
                                            'maxlength' : 'Enter a 10 digit telegram number',
                                            'pattern' : 'Enter a 10 digit telegram number'
                                            })">
                                            </app-field-error-display>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="email" class="col-form-label">Email</label>
                                    <input type="email" class="form-control" formControlName="email" />
            
                                    <app-field-error-display [displayError]="fed_service.isFieldValid(virtualForm,'email')"
                                        [errorMsgs]="fed_service.getErrorMessage(virtualForm,'email',
                                                          {
                                                            'required' : 'Email is required',
                                                            'pattern' : 'Please enter valid email'
                                                          })">
                                    </app-field-error-display>
                                </div>
                            </ng-container>
                            <div class="clearfix"></div>
                            <div class="form-group" *ngIf="hideLanguages" class="mgn-bt-50">
                                <button class="cust-logpg-submt mgn-up-20 continue-button" mat-button
                                    (click)="onSubmit(virtualForm.value)" >
                                    <span>Continue</span>
                                </button>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>