<div class="modal-header service-detail-header disp-flex">
    <h1 class="modal-title pull-left service-detail-title"> &nbsp;
        <span class="name">
            <span class="dispvalue">
                &nbsp;
            </span>
        </span>
    </h1>
    <button type="button" class="close pull-right" aria-label="Close" (click)="dialogRef.close()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body service-detail-content service-popup-content">
    <div class="servicedet_outer">
        <div class="outer">
            <div class="outer1 line">
                <div class="description">
                    <form [formGroup]="loginForm" class="login-form custom-login-form consumer-join-component"
                        novalidate (ngSubmit)="loginForm.valid && onSubmit(loginForm.value)">

                        <!-- step 1 for mobile number entering  -->
                        <div *ngIf="step==1" class="example-container cust-loginpge-color mgn-up-20 col-xs-12">
                            <div class="form-group mobile-no">
                                <mat-label for="phone">Enter your Mobile Number</mat-label>
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries"
                                    [enableAutoCountrySelect]="true" [enablePlaceholder]="true"
                                    [searchCountryFlag]="true"
                                    [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                                    [selectFirstCountry]="false" [maxLength]="15" [phoneValidation]="true"
                                    [selectedCountryISO]="selectedCountry" [separateDialCode]="separateDialCode"
                                    [numberFormat]="PhoneNumberFormat.National" name="phone" formControlName="phone">
                                </ngx-intl-tel-input>
                                <div class="sts-msg error mgn-up-10" *ngIf="phoneError">{{phoneError}}</div>
                            </div>
                            <!-- Signin Password -->
                            <div class="form-group pwd" *ngIf="phoneExists">
                                <mat-label for="password">Password</mat-label>
                                <input type="password" class="form-control" id="password" formControlName="password"
                                    autocomplete="off" (keyup)="handlekeyup($event)">
                                <!-- </mat-form-field> -->
                                <div style="display: flex; justify-content: space-between;">
                                    <app-field-error-display
                                        [displayError]="fed_service.isFieldValid(loginForm,'password') && showError"
                                        errorMsg="Password is required">
                                    </app-field-error-display>
                                    <a class="cust-logpg-fgtpwd" (click)="doForgotPassword()">Forgot Password?</a>
                                </div>
                            </div>
                            <div class="form-group">
                                <button class="cust-logpg-submt mgn-up-20 continue-button" *ngIf="!phoneExists"
                                    type="submit" mat-button [disabled]="api_loading" (click)="checkAccountExists()"
                                    (keyup)="clearPhoneExists()">
                                    <span *ngIf="!api_loading">Continue</span>
                                    <app-common-innerloading-spinner [spinnerParams]="{diameter:30}"
                                        *ngIf="api_loading">
                                    </app-common-innerloading-spinner>
                                </button>
                                <button class="cust-logpg-submt login-button" *ngIf="phoneExists" type="button"
                                    mat-button [disabled]="api_loading" (click)="onSubmit(loginForm.value)">
                                    <span *ngIf="!api_loading">Next</span>
                                    <app-common-innerloading-spinner [spinnerParams]="{diameter:30}"
                                        *ngIf="api_loading">
                                    </app-common-innerloading-spinner>
                                </button>
                            </div>
                            <app-field-error-display [displayError]="true" *ngIf="api_error" errorMsg="{{api_error}}">
                            </app-field-error-display>
                        </div>

                        <!-- step 2 for forgot password -->
                        <div class="example-container col-xs-12 mgn-up-20" *ngIf="step==2">
                            <app-forgot-password (retonChangePassword)="onChangePassword()" [business]="true"
                                (retonCancelForgotPassword)="cancelForgotPassword()" [consumerlogin]="consumerjoin">
                            </app-forgot-password>
                        </div>


                        <!-- step 3 for otp -->
                        <div *ngIf="step==3" class="example-container cust-loginpge-color mgn-up-20 col-xs-12" style="overflow: auto !important;">
                            <div class="form-group fname" *ngIf="!resendViaEmail">
                                <mat-label for="password">First Name *</mat-label>
                                <input type="text" class="form-control" id="first_name" formControlName="first_name"
                                    (keypress)="resetApiErrors()" autocomplete="off" (blur)="onFieldBlur('first_name')">
                                <app-field-error-display
                                    [displayError]="fed_service.isFieldValid(loginForm,'first_name')" [errorMsgs]="fed_service.getErrorMessage(loginForm,'first_name',
                                            {
                                            'required' : 'First name is required',
                                            'pattern' : 'Only alphabets are allowed'
                                            })">
                                </app-field-error-display>
                            </div>
                            <div class="form-group lname" *ngIf="!resendViaEmail">
                                <mat-label for="password">Last Name *</mat-label>
                                <input type="text" class="form-control" id="last_name" formControlName="last_name"
                                    autocomplete="off" (keypress)="resetApiErrors()" (blur)="onFieldBlur('last_name')">
                                <app-field-error-display
                                    [displayError]="fed_service.isFieldValid(loginForm,'last_name')" [errorMsgs]="fed_service.getErrorMessage(loginForm,'last_name',
                                        {
                                            'required' : 'Last name is required',
                                            'pattern' : 'Only alphabets are allowed'
                                        })">
                                </app-field-error-display>
                            </div>

                            <div class="form-group email" *ngIf="!resendViaEmail && phoneDialCode != '+91'">
                                <mat-label for="password">Email *</mat-label>
                                <input type="text" class="form-control" id="emailId" formControlName="emailId"
                                    autocomplete="off" (keypress)="resetApiErrors()" (blur)="onFieldBlur('emailId')">
                            </div>
                            <div class="mgn-up-20" style="display: flex !important; justify-content: space-between !important;">
                                <!-- <div class="mgn-bt-20 go-back" (click)="cancelForgotPassword()">
                                    <span>
                                        <i class="fa fa-chevron-left pointer-cursor"></i>
                                        BACK
                                    </span>
                                </div> -->
                                <button (click)="cancelForgotPassword()" mat-button class="back-button"
                                ><i class="fa fa-chevron-left pointer-cursor"></i>
                                Back</button>
                                <button class="ok-button" type="submit" mat-button
                                    [disabled]="api_loading" (click)="otpSend()">
                                    <span *ngIf="!api_loading">Next</span>
                                    <app-common-innerloading-spinner [spinnerParams]="{diameter:30}"
                                        *ngIf="api_loading">
                                    </app-common-innerloading-spinner>
                                </button>
                            </div>
                            <app-field-error-display [displayError]="true" class="mgn-up-10" *ngIf="api_error" errorMsg="{{api_error}}">
                            </app-field-error-display>
                        </div>
                        
                        
                        <!-- step 6 for signup password -->
                        <div class="example-container joinotp col-xs-12" *ngIf="step==4">
                            <!-- <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12"> -->
                                <app-otp-form [type]="'signup'" [submitdata]="user_details"
                                    (retonOtpSubmit)="onOtpSubmit($event)" (resetApiErrors)="resetApiErrors()"
                                    [actionstarted]="actionstarted" (resendOtp)="resendOtp($event)"
                                    [resendemailotpsuccess]="resendemailotpsuccess" [consumerlogin]="consumerjoin"
                                    (resendOTPEmail)="resendOTPEmail($event)">
                                </app-otp-form>
                            <!-- </div> -->
                            <div class="clearfix"></div>
                            <app-field-error-display [displayError]="true" *ngIf="api_error" errorMsg="{{api_error}}">
                            </app-field-error-display>
                        </div>

                        <div class="example-container col-xs-12" *ngIf="step==6">
                            <app-sp-form (retonPasswordSubmit)="onPasswordSubmit($event)"
                                (resetApiErrors)="resetApiErrors()" (onCancelBtn)="onCancelPass()"
                                [checkConsumerOrProvider]="'consumer'" [consumerlogin]="consumerjoin">
                            </app-sp-form>
                        </div>

                        <!-- step 7 for password cancel option -->
                        <div class="example-container cust-loginpge-color col-xs-12" *ngIf="step==7">
                            <mat-dialog-content class="pwd_cancel_scr">
                                <p class="col-form-label no-padding" for="otp">{{close_message}}</p>
                            </mat-dialog-content>
                            <mat-dialog-actions class="cust-logpge-txt-align"
                                style="display: flex !important; justify-content: space-between !important;">
                                <button tabindex="-1" (click)="continuetoPwd()"
                                    class="cs-btn bt2 cancel-button">{{cancel_btn_cap}}</button>
                                <button tabindex="2" (click)="closePwdScreen()"
                                    class="cs-btn bt1 reddelete ok-button">{{ok_btn_cap}}</button>
                            </mat-dialog-actions>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- join section ends -->