<!doctype html>
<html lang="en" style="height: auto; min-height: 100%;">

<head>
  <meta charset="utf-8">
  <title>Jaldee</title>
  <base href="./">
  <!-- <base href="/jaldee/"> -->
  <meta name="description" content="Jaldee">
  <meta name="keywords" content="Jaldee, Avoid waiting">
  <meta name="author" content="Jaldee Soft Private Limited">
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />

  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- <script src="https://cdn.ckeditor.com/4.5.11/full/ckeditor.js"></script> -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3MdDKtIAsLrWXzKiQShq3wRXgftf5lBM&libraries=places"
    type="application/javascript"></script>

  <!-- <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyD887lzwqSirHdEhOWW00xdXNTNztLMVeA"></script> -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <!-- <link href="assets/css/style.css" rel="stylesheet"> -->
  <!-- <script>
    FontAwesomeConfig = { searchPseudoElements: true };
  </script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script> -->
</head>

<body class="hold-transition sidebar-mini" style="height: auto;min-height: 100%;">
  <link href="./assets/css/style.css" rel="stylesheet">
  <app-root></app-root>
</body>

</html>
<script type="text/javascript" src="cordova.js"></script>
<script>
  var DEBUG_MODE_ON = false; // hide browser console in production
  if (!DEBUG_MODE_ON) {
    console = console || {};
    console.log = function () { };
  }
  var exitApp = false, intval = setInterval(function () { exitApp = false; }, 1000);
  function onConfirm(buttonIndex) {
    if (buttonIndex === 2) {
      clearInterval(intval);
      navigator.app.exitApp();
    }
  }
  document.addEventListener("deviceready", onDeviceReady, false);
  function alertDismissed() {

  }
  function onDeviceReady() {
    console.log('mani');
    if (typeof FCMPlugin != 'undefined') {
      FCMPlugin.getToken(function (token) {
        console.log(token);
        localStorage.setItem("mUniqueId", token);
      }, function (err) {
        localStorage.setItem("mUniqueId", null);
      });
      FCMPlugin.onTokenRefresh(function (token) {
        console.log("Token Refreshed : " + token);
        localStorage.setItem("mUniqueId", token);
        if (localStorage.getItem("ynw-user")) {
          setPushToken(token);
        }
      });
      FCMPlugin.onNotification(function (data) {
        if (data.wasTapped) {
          navigator.notification.alert(
            data.message,  // message
            alertDismissed,         // callback
            data.title,            // title
            'Ok'                  // buttonName
          );
        } else {
          //Notification was received in foreground. Maybe the user needs to be notified.
          navigator.notification.alert(
            data.message,  // message
            alertDismissed,         // callback
            data.title,            // title
            'Ok'                  // buttonName
          );

        }
      }, function (msg) {
        console.log('onNotification callback successfully registered: ' + msg);
      },
        function (err) {
          console.log('Error registering onNotification callback: ' + err);
        }
      );
    };
    document.addEventListener("backbutton", function (e) {
      e.preventDefault();
      if (exitApp) {
        navigator.notification.confirm('Press Ok to Exit from Jaldee Business App', onConfirm, 'Jaldee for Business', ['Cancel', 'Ok']);
      }
      else {
        exitApp = true
        history.back(1);
      }
    }, false);
  }
</script>